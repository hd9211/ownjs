/*! yongteng-hiker-rule 1.1.4 https://github.com/Lingyan000/yongteng-hiker-rule @license MIT */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).KinhDownload={})}(this,(function(t){"use strict";
/*! https://mths.be/punycode v1.4.1 by @mathias */var e=2147483647,r=/[^\x20-\x7E]/,n=/[\x2E\u3002\uFF0E\uFF61]/g,o={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=Math.floor,s=String.fromCharCode;function i(t){throw new RangeError(o[t])}function l(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function c(t,e,r){var n=0;for(t=r?a(t/700):t>>1,t+=a(t/e);t>455;n+=36)t=a(t/35);return a(n+36*t/(t+38))}function u(t){return function(t,e){var r=t.split("@"),o="";r.length>1&&(o=r[0]+"@",t=r[1]);var a=function(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}((t=t.replace(n,".")).split("."),e).join(".");return o+a}(t,(function(t){return r.test(t)?"xn--"+function(t){var r,n,o,u,h,p,f,d,m,y,g,v,b,j,w,_=[];for(v=(t=function(t){for(var e,r,n=[],o=0,a=t.length;o<a;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<a?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}(t)).length,r=128,n=0,h=72,p=0;p<v;++p)(g=t[p])<128&&_.push(s(g));for(o=u=_.length,u&&_.push("-");o<v;){for(f=e,p=0;p<v;++p)(g=t[p])>=r&&g<f&&(f=g);for(f-r>a((e-n)/(b=o+1))&&i("overflow"),n+=(f-r)*b,r=f,p=0;p<v;++p)if((g=t[p])<r&&++n>e&&i("overflow"),g==r){for(d=n,m=36;!(d<(y=m<=h?1:m>=h+26?26:m-h));m+=36)w=d-y,j=36-y,_.push(s(l(y+w%j,0))),d=a(w/j);_.push(s(l(d,0))),h=c(n,b,o==u),n=0,++o}++n,++r}return _.join("")}(t):t}))}function h(t){return null===t}function p(t){return"string"==typeof t}function f(t){return"object"==typeof t&&null!==t}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function g(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var v=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e};function b(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var i=t.length;s>0&&i>s&&(i=s);for(var l=0;l<i;++l){var c,u,h,p,f=t[l].replace(a,"%20"),y=f.indexOf(r);y>=0?(c=f.substr(0,y),u=f.substr(y+1)):(c=f,u=""),h=decodeURIComponent(c),p=decodeURIComponent(u),d(o,h)?m(o[h])?o[h].push(p):o[h]=[o[h],p]:o[h]=p}return o}function j(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var w=/^([a-z0-9.+-]+:)/i,_=/:[0-9]*$/,x=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,O=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),D=["'"].concat(O),k=["%","/","?",";","#"].concat(D),A=["/","?","#"],R=/^[+a-z0-9A-Z_-]{0,63}$/,q=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,C={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},F={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function H(t,e,r){if(t&&f(t)&&t instanceof j)return t;var n=new j;return n.parse(t,e,r),n}function S(t){var e=t.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var r,n,o,a,s=t.protocol||"",i=t.pathname||"",l=t.hash||"",c=!1,u="";t.host?c=e+t.host:t.hostname&&(c=e+(-1===t.hostname.indexOf(":")?t.hostname:"["+this.hostname+"]"),t.port&&(c+=":"+t.port)),t.query&&f(t.query)&&Object.keys(t.query).length&&(r=t.query,n=n||"&",o=o||"=",null===r&&(r=void 0),u="object"==typeof r?g(v(r),(function(t){var e=encodeURIComponent(y(t))+o;return m(r[t])?g(r[t],(function(t){return e+encodeURIComponent(y(t))})).join(n):e+encodeURIComponent(y(r[t]))})).join(n):a?encodeURIComponent(y(a))+o+encodeURIComponent(y(r)):"");var h=t.search||u&&"?"+u||"";return s&&":"!==s.substr(-1)&&(s+=":"),t.slashes||(!s||F[s])&&!1!==c?(c="//"+(c||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):c||(c=""),l&&"#"!==l.charAt(0)&&(l="#"+l),h&&"?"!==h.charAt(0)&&(h="?"+h),s+c+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(h=h.replace("#","%23"))+l}function I(t){var e=t.host,r=_.exec(e);r&&(":"!==(r=r[0])&&(t.port=r.substr(1)),e=e.substr(0,e.length-r.length)),e&&(t.hostname=e)}j.prototype.parse=function(t,e,r){return function(t,e,r,n){if(!p(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",s=e.split(a),i=/\\/g;s[0]=s[0].replace(i,"/");var l=e=s.join(a);if(l=l.trim(),!n&&1===e.split("#").length){var c=x.exec(l);if(c)return t.path=l,t.href=l,t.pathname=c[1],c[2]?(t.search=c[2],t.query=r?b(t.search.substr(1)):t.search.substr(1)):r&&(t.search="",t.query={}),t}var h,f,d,m,y=w.exec(l);if(y){var g=(y=y[0]).toLowerCase();t.protocol=g,l=l.substr(y.length)}if(n||y||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var v="//"===l.substr(0,2);!v||y&&U[y]||(l=l.substr(2),t.slashes=!0)}if(!U[y]&&(v||y&&!F[y])){var j,_,O=-1;for(h=0;h<A.length;h++)-1!==(f=l.indexOf(A[h]))&&(-1===O||f<O)&&(O=f);for(-1!==(_=-1===O?l.lastIndexOf("@"):l.lastIndexOf("@",O))&&(j=l.slice(0,_),l=l.slice(_+1),t.auth=decodeURIComponent(j)),O=-1,h=0;h<k.length;h++)-1!==(f=l.indexOf(k[h]))&&(-1===O||f<O)&&(O=f);-1===O&&(O=l.length),t.host=l.slice(0,O),l=l.slice(O),I(t),t.hostname=t.hostname||"";var H="["===t.hostname[0]&&"]"===t.hostname[t.hostname.length-1];if(!H){var E=t.hostname.split(/\./);for(h=0,d=E.length;h<d;h++){var T=E[h];if(T&&!T.match(R)){for(var P="",z=0,K=T.length;z<K;z++)T.charCodeAt(z)>127?P+="x":P+=T[z];if(!P.match(R)){var N=E.slice(0,h),M=E.slice(h+1),W=T.match(q);W&&(N.push(W[1]),M.unshift(W[2])),M.length&&(l="/"+M.join(".")+l),t.hostname=N.join(".");break}}}}t.hostname.length>255?t.hostname="":t.hostname=t.hostname.toLowerCase(),H||(t.hostname=u(t.hostname)),m=t.port?":"+t.port:"";var L=t.hostname||"";t.host=L+m,t.href+=t.host,H&&(t.hostname=t.hostname.substr(1,t.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!C[g])for(h=0,d=D.length;h<d;h++){var B=D[h];if(-1!==l.indexOf(B)){var V=encodeURIComponent(B);V===B&&(V=escape(B)),l=l.split(B).join(V)}}var Q=l.indexOf("#");-1!==Q&&(t.hash=l.substr(Q),l=l.slice(0,Q));var $=l.indexOf("?");-1!==$?(t.search=l.substr($),t.query=l.substr($+1),r&&(t.query=b(t.query)),l=l.slice(0,$)):r&&(t.search="",t.query={});l&&(t.pathname=l);F[g]&&t.hostname&&!t.pathname&&(t.pathname="/");if(t.pathname||t.search){m=t.pathname||"";var J=t.search||"";t.path=m+J}return t.href=S(t),t}(this,t,e,r)},j.prototype.format=function(){return S(this)},j.prototype.resolve=function(t){return this.resolveObject(H(t,!1,!0)).format()},j.prototype.resolveObject=function(t){if(p(t)){var e=new j;e.parse(t,!1,!0),t=e}for(var r,n=new j,o=Object.keys(this),a=0;a<o.length;a++){var s=o[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),l=0;l<i.length;l++){var c=i[l];"protocol"!==c&&(n[c]=t[c])}return F[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!F[t.protocol]){for(var u=Object.keys(t),f=0;f<u.length;f++){var d=u[f];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||U[t.protocol])n.pathname=t.pathname;else{for(r=(t.pathname||"").split("/");r.length&&!(t.host=r.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g,v=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||v||n.host&&t.pathname,_=w,x=n.pathname&&n.pathname.split("/")||[],O=n.protocol&&!F[n.protocol];if(r=t.pathname&&t.pathname.split("/")||[],O&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===r[0]?r[0]=t.host:r.unshift(t.host)),t.host=null),w=w&&(""===r[0]||""===x[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=r;else if(r.length)x||(x=[]),x.pop(),x=x.concat(r),n.search=t.search,n.query=t.query;else if(null!=t.search)return O&&(n.hostname=n.host=x.shift(),(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),n.search=t.search,n.query=t.query,h(n.pathname)&&h(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var D=x.slice(-1)[0],k=(n.host||t.host||x.length>1)&&("."===D||".."===D)||""===D,A=0,R=x.length;R>=0;R--)"."===(D=x[R])?x.splice(R,1):".."===D?(x.splice(R,1),A++):A&&(x.splice(R,1),A--);if(!w&&!_)for(;A--;A)x.unshift("..");!w||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),k&&"/"!==x.join("/").substr(-1)&&x.push("");var q=""===x[0]||x[0]&&"/"===x[0].charAt(0);return O&&(n.hostname=n.host=q?"":x.length?x.shift():"",(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),(w=w||n.host&&x.length)&&!q&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),h(n.pathname)&&h(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},j.prototype.parseHost=function(){return I(this)};function E(){return"1"==fetch("hiker://files/KinhDownload/.disclaimer",{}||{})}var T=Object.prototype.toString;function P(t){return"[object Object]"===T.call(t)}function z(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function K(t,e){if(!e)return t;if(t.includes("#")){var r=t.indexOf("#");return t=t.slice(0,r)}var n=[];Object.keys(e).forEach((function(t){var r,o=e[t];null!=o&&(Array.isArray(o)?(r=o,t+="[]"):r=[o],r.forEach((function(e){!function(t){return"[object Date]"===T.call(t)}(e)?P(e)&&(e=JSON.stringify(e)):e=e.toISOString(),n.push(z(t)+"="+z(e))})))}));var o=n.join("&");return o&&(t+=(t.includes("?")?"&":"?")+o),t}function N(t,e){return function(t,e){t&&Object.keys(t).forEach((function(r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=t[r],delete t[r])}))}(t,"Content-Type"),P(e)&&t&&!t["Content-Type"]&&(t["Content-Type"]="application/json"),t}function M(t){return function(t){t.url=function(t){var e=t.url,r=t.params;return K(e,r)}(t),t.headers=function(t){var e=t.headers,r=void 0===e?{}:e,n=t.data;return N(r,n)}(t),t.data=function(t){return function(t){return P(t)?JSON.stringify(t):t}(t.data)}(t)}(t),(e=function(t){var e=t.data,r=void 0===e?null:e,n=t.url,o=t.method,a=void 0===o?"get":o,s=t.headers,i=t.withStatusCode,l=void 0===i||i,c=t.redirect,u=void 0===c||c,h=t.timeout,p=void 0===h?1e4:h;Object.keys(s).forEach((function(t){null===r&&"content-type"===t.toLowerCase()&&delete s[t]}));var f=JSON.parse(fetch(n,{headers:s,method:a,body:r,withStatusCode:l,redirect:u,timeout:p})),d=f.headers,m={data:f.body,status:f.statusCode,headers:d,config:t};if(m.status>=200&&m.status<300)return m;if(0==u&&-1!==[301,302,303,307,308].indexOf(m.status))return m;throw new Error("Request failed with status code "+m.status)}(t)).data=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}(e.data),e;var e}var W=function(){function t(){}return t.prototype.request=function(t,e){return"string"==typeof t?(e=e||{}).url=t:e=t,M(e)},t.prototype.get=function(t,e){return this._requestMethodWithoutData("get",t,e)},t.prototype.delete=function(t,e){return this._requestMethodWithoutData("delete",t,e)},t.prototype.head=function(t,e){return this._requestMethodWithoutData("head",t,e)},t.prototype.options=function(t,e){return this._requestMethodWithoutData("options",t,e)},t.prototype.post=function(t,e,r){return this._requestMethodWithData("post",t,e,r)},t.prototype.put=function(t,e,r){return this._requestMethodWithData("put",t,e,r)},t.prototype.patch=function(t,e,r){return this._requestMethodWithData("patch",t,e,r)},t.prototype._requestMethodWithoutData=function(t,e,r){return this.request(Object.assign(r||{},{method:t,url:e}))},t.prototype._requestMethodWithData=function(t,e,r,n){return this.request(Object.assign(n||{},{method:t,url:e,data:r}))},t}();var L,B,V=(L=new W,function(t,e){for(var r in e)t[r]=e[r]}(B=W.prototype.request.bind(L),L),B),Q=Object.prototype.hasOwnProperty,$=Array.isArray,J=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Z=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},G={arrayToObject:Z,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],a=o.obj[o.prop],s=Object.keys(a),i=0;i<s.length;++i){var l=s[i],c=a[l];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(e.push({obj:a,prop:l}),r.push(c))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if($(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,r){if(0===t.length)return t;var n=t;if("symbol"==typeof t?n=Symbol.prototype.toString.call(t):"string"!=typeof t&&(n=String(t)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var o="",a=0;a<n.length;++a){var s=n.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?o+=n.charAt(a):s<128?o+=J[s]:s<2048?o+=J[192|s>>6]+J[128|63&s]:s<55296||s>=57344?o+=J[224|s>>12]+J[128|s>>6&63]+J[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&n.charCodeAt(a)),o+=J[240|s>>18]+J[128|s>>12&63]+J[128|s>>6&63]+J[128|63&s])}return o},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if($(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if($(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!Q.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var o=e;return $(e)&&!$(r)&&(o=Z(e,n)),$(e)&&$(r)?(r.forEach((function(r,o){if(Q.call(e,o)){var a=e[o];a&&"object"==typeof a&&r&&"object"==typeof r?e[o]=t(a,r,n):e.push(r)}else e[o]=r})),e):Object.keys(r).reduce((function(e,o){var a=r[o];return Q.call(e,o)?e[o]=t(e[o],a,n):e[o]=a,e}),o)}},X=String.prototype.replace,Y=/%20/g,tt={RFC1738:"RFC1738",RFC3986:"RFC3986"},et=G.assign({default:tt.RFC3986,formatters:{RFC1738:function(t){return X.call(t,Y,"+")},RFC3986:function(t){return String(t)}}},tt),rt=Object.prototype.hasOwnProperty,nt={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},ot=Array.isArray,at=Array.prototype.push,st=function(t,e){at.apply(t,ot(e)?e:[e])},it=Date.prototype.toISOString,lt=et.default,ct={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:G.encode,encodeValuesOnly:!1,format:lt,formatter:et.formatters[lt],indices:!1,serializeDate:function(t){return it.call(t)},skipNulls:!1,strictNullHandling:!1},ut=function t(e,r,n,o,a,s,i,l,c,u,h,p,f){var d,m=e;if("function"==typeof i?m=i(r,m):m instanceof Date?m=u(m):"comma"===n&&ot(m)&&(m=G.maybeMap(m,(function(t){return t instanceof Date?u(t):t})).join(",")),null===m){if(o)return s&&!p?s(r,ct.encoder,f,"key"):r;m=""}if("string"==typeof(d=m)||"number"==typeof d||"boolean"==typeof d||"symbol"==typeof d||"bigint"==typeof d||G.isBuffer(m))return s?[h(p?r:s(r,ct.encoder,f,"key"))+"="+h(s(m,ct.encoder,f,"value"))]:[h(r)+"="+h(String(m))];var y,g=[];if(void 0===m)return g;if(ot(i))y=i;else{var v=Object.keys(m);y=l?v.sort(l):v}for(var b=0;b<y.length;++b){var j=y[b],w=m[j];if(!a||null!==w){var _=ot(m)?"function"==typeof n?n(r,j):r:r+(c?"."+j:"["+j+"]");st(g,t(w,_,n,o,a,s,i,l,c,u,h,p,f))}}return g},ht=(Object.prototype.hasOwnProperty,Array.isArray,function(t,e){var r,n=t,o=function(t){if(!t)return ct;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||ct.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=et.default;if(void 0!==t.format){if(!rt.call(et.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=et.formatters[r],o=ct.filter;return("function"==typeof t.filter||ot(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:ct.addQueryPrefix,allowDots:void 0===t.allowDots?ct.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:ct.charsetSentinel,delimiter:void 0===t.delimiter?ct.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:ct.encode,encoder:"function"==typeof t.encoder?t.encoder:ct.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:ct.encodeValuesOnly,filter:o,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:ct.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:ct.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:ct.strictNullHandling}}(e);"function"==typeof o.filter?n=(0,o.filter)("",n):ot(o.filter)&&(r=o.filter);var a,s=[];if("object"!=typeof n||null===n)return"";a=e&&e.arrayFormat in nt?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var i=nt[a];r||(r=Object.keys(n)),o.sort&&r.sort(o.sort);for(var l=0;l<r.length;++l){var c=r[l];o.skipNulls&&null===n[c]||st(s,ut(n[c],c,i,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.formatter,o.encodeValuesOnly,o.charset))}var u=s.join(o.delimiter),h=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),u.length>0?h+u:""}),pt="1.1.4",ft='eval(fetch(getVar("cdn_KinhDownload","https://cdn.jsdelivr.net/npm/yongteng-hiker-rule@1.1.4/dist/KinhDownload/index.min.js")));',dt=function(){function t(){this.surl="",this.pwd="",this.uk="",this.shareid=""}return t.prototype.post=function(t,e){if(void 0===e&&(e=""),this.pwd=e,this.validate(t))return V.post("http://111.229.144.179/KD[DP]Web/",ht({surl:this.surl,pwd:this.pwd,uk:this.uk,shareid:this.shareid}));throw new Error("分享链接填写有误，请检查")},t.prototype.validate=function(t){var e=t.match(/uk=(\d+)/),r=t.match(/shareid=(\d+)/);if(null!=e&&null!=r)return this.uk=e[1],this.shareid=r[1],!0;var n=t.match(/surl=([A-Za-z0-9-_]+)/);if(null==n){if(null==(n=t.match(/1[A-Za-z0-9-_]+/)))return!1;this.surl=n[0]}else this.surl="1"+n[1];return!0},t.prototype.openDir=function(t,e,r,n,o,a){return V.post("http://111.229.144.179/KD[DP]Web/",ht({dir:t,pwd:e,surl:o,share_id:r,uk:n,randsk:decodeURI(a)},{encode:!1}))},t.prototype.dl=function(t,e,r,n,o,a,s,i){try{return V.post("http://111.229.144.179/KD[DP]Web/?download",ht({fs_id:t,timestamp:e,sign:r,randsk:decodeURI(n),share_id:o,uk:a,share:s,pwd:i},{encode:!1}),{redirect:!0,timeout:3e4})}catch(t){if("Request failed with status code -1"==t.message)throw new Error("请求超时，可尝试重新获取")}},t.prototype.parsingList=function(t){return parseDomForArray(t,".list-group&&li").map((function(t){var e=parseDomForHtml(t,"a&&Text"),r=parseDomForHtml(t,".float-right&&Text"),n=""+e+(r&&" --"+r);return parseDomForArray(t,".fa-folder").length>0?{title:n,col_type:"avatar",img:"https://cdn.jsdelivr.net/gh/Lingyan000/pic@master/img/20201220105956.png",url:"hiker://empty@rule=js:"+ft+parseDomForHtml(t,"a&&href").replace("javascript:","KinhDownload.")+";"}:-1!==["wmv","rmvb","mpeg4","mpeg2","flv","avi","3gp","mpga","qt","rm","wmz","wmd","wvx","wmx","wm","mpg","mp4","mkv","mpeg","mov","asf","m4v","m3u8","swf"].indexOf(e.substr(e.lastIndexOf(".")+1))?{title:n,col_type:"avatar",img:"https://cdn.jsdelivr.net/gh/Lingyan000/pic@master/img/20201220203232.png",url:"hiker://empty@rule=js:"+ft+parseDomForHtml(t,"a&&href").replace("javascript:","KinhDownload.")+";"}:-1!==["jpg","jpeg","gif","bmp","png","jpe","cur","svg","svgz","ico","webp","tif","tiff"].indexOf(e.substr(e.lastIndexOf(".")+1))?{title:n,col_type:"avatar",img:"https://cdn.jsdelivr.net/gh/Lingyan000/pic@master/img/20201220203238.png",url:"hiker://empty@rule=.js:"+ft+parseDomForHtml(t,"a&&href").replace("javascript:","KinhDownload.")+";"}:{title:n,col_type:"avatar",img:"https://cdn.jsdelivr.net/gh/Lingyan000/pic@master/img/20201220203228.png",url:"hiker://empty@rule=js:"+ft+parseDomForHtml(t,"a&&href").replace("javascript:","KinhDownload.")+";"}}))},t}();t.OpenDir=function(t,e,r,n,o,a){var s=new dt,i=s.openDir(t,e,r,n,o,a);setHomeResult({data:s.parsingList(i.data)})},t.dl=function(t,e,r,n,o,a,s,i){var l=new dt,c={};try{c=l.dl(t,e,r,n,o,a,s,i)}catch(t){setHomeResult({data:[{title:'<p style="text-align:center"><font color="red">'+t.message+"</font></p>",col_type:"rich_text"}]})}if(P(c.data))c.data.dlink&&c.data.ua?setHomeResult({data:[{title:"<strong>文件名："+c.data.server_filename+"</strong>",col_type:"rich_text"},{title:"",col_type:"line_blank"},{title:"<strong>下载地址：</strong>",col_type:"rich_text"},{title:""+c.data.dlink,col_type:"text_1",desc:"长按复制下载地址（复制不完整请到下载地址2）",url:""+c.data.dlink},{title:"",col_type:"line_blank"},{title:"<strong>User-Agent：</strong>",col_type:"rich_text"},{title:""+c.data.ua,col_type:"text_1",desc:"长按复制 User-Agent",url:"toast://长按复制"},{title:"",col_type:"line_blank"},{title:"<strong>支持 KinhDownload：</strong>",col_type:"rich_text"},{title:'现在云解析必须将文件转存到超级会员账号内才可进行下载每天只能转成5万个文件，希望大家可以对云解析进行提供，限速的账号也行！限速的账号也行！限速的账号也行！你无需购买，只要到哔喱哔喱，微博账号分享帖子，微信公众号账号分享帖子，这个工具即可将svip账号加入到云解析数据库中，集中的越多以后越稳定！<a href="https://ubaq.lanzous.com/iOR96jepmte">https://ubaq.lanzous.com/iOR96jepmte</a>',col_type:"rich_text"},{title:"",col_type:"line_blank"},{title:"<strong>下载地址2：</strong>",col_type:"rich_text"},{title:""+c.data.dlink,col_type:"rich_text"}]}):setHomeResult({data:[{title:'<p style="text-align:center"><font color="red">未获取到地址，可尝试重新获取</font></p>',col_type:"rich_text"}]});else{var u=parseDomForArray(c.data,".alert-primary&&p"),h="",p="",f="";u.forEach((function(t){-1!==t.indexOf("下载地址")&&(h=parseDomForHtml(t,"b&&Text")),-1!==t.indexOf("User-Agent")&&(p=parseDomForHtml(t,"b&&Text")),-1!==t.indexOf("文件名")&&(f=parseDomForHtml(t,"b&&Text"))})),h&&p?setHomeResult({data:[{title:"<strong>文件名："+f+"</strong>",col_type:"rich_text"},{title:"",col_type:"line_blank"},{title:"<strong>下载地址：</strong>",col_type:"rich_text"},{title:""+h,col_type:"text_1",desc:"长按复制下载地址（复制不完整请到下载地址2）",url:""+h},{title:"",col_type:"line_blank"},{title:"<strong>User-Agent：</strong>",col_type:"rich_text"},{title:""+p,col_type:"text_1",desc:"长按复制 User-Agent",url:"toast://长按复制"},{title:"",col_type:"line_blank"},{title:"<strong>支持 KinhDownload：</strong>",col_type:"rich_text"},{title:'现在云解析必须将文件转存到超级会员账号内才可进行下载每天只能转成5万个文件，希望大家可以对云解析进行提供，限速的账号也行！限速的账号也行！限速的账号也行！你无需购买，只要到哔喱哔喱，微博账号分享帖子，微信公众号账号分享帖子，这个工具即可将svip账号加入到云解析数据库中，集中的越多以后越稳定！<a href="https://ubaq.lanzous.com/iOR96jepmte">https://ubaq.lanzous.com/iOR96jepmte</a>',col_type:"rich_text"},{title:"",col_type:"line_blank"},{title:"<strong>下载地址2：</strong>",col_type:"rich_text"},{title:""+h,col_type:"rich_text"}]}):setHomeResult({data:[{title:'<p style="text-align:center"><font color="red">未获取到地址，可尝试重新获取</font></p>',col_type:"rich_text"}]})}},t.image_dl=function(t,e,r,n,o,a,s,i){var l=new dt,c={};try{c=l.dl(t,e,r,n,o,a,s,i)}catch(t){return"toast://"+t.message}if(P(c.data)){if(c.data.dlink&&c.data.ua){var u={};try{u=V.get(c.data.dlink,{headers:{"User-Agent":c.data.ua},redirect:!1})}catch(t){return"Request failed with status code -1"==t.message?"toast://请求超时，可尝试重新获取":"toast://未获取到地址，可尝试重新获取"}return u.headers.location[0]&&u.headers.location[0]+"@User-Agent="+c.data.ua+"@Referer=https://www.baidu.com"||"toast://未获取到地址，可尝试重新获取"}return"toast://未获取到地址，可尝试重新获取"}var h=parseDomForArray(c.data,".alert-primary&&p"),p="",f="";if(h.forEach((function(t){-1!==t.indexOf("下载地址")&&(p=parseDomForHtml(t,"b&&Text")),-1!==t.indexOf("User-Agent")&&(f=parseDomForHtml(t,"b&&Text"))})),p&&f){u={};try{u=V.get(p,{headers:{"User-Agent":f},redirect:!1})}catch(t){return"Request failed with status code -1"==t.message?"toast://请求超时，可尝试重新获取":"toast://未获取到地址，可尝试重新获取"}return u.headers.location[0]&&u.headers.location[0]+"@User-Agent="+f+"@Referer=https://www.baidu.com"||"toast://未获取到地址，可尝试重新获取"}return"toast://未获取到地址，可尝试重新获取123"},t.loadPage=function(t){var e=b(H(t).query),r=[];r=E()?function(t,e){void 0===e&&(e="");var r=new dt,n=r.post(t,e);return r.parsingList(n.data)}(e.url,e.pwd):function(){var t=[];return t.push({title:'\n<h2 style="text-align:center">免责声明</h2>\n<font color="red">本规则仅供学习交流，请于24小时内删除。</font><br/>\n规则接口来源于「KinhDownload」<br/>\n若是你喜欢「KinhDownload」，请前往<a href="https://kinhdown.kinh.cc/">https://kinhdown.kinh.cc/</a>获得更好的使用体验。<br/>\n<br/>\n如果侵犯了你的权益，请通知我，我会及时删除侵权内容。<br/>\n联系邮箱：peng120710372@gmail.com\n',col_type:"rich_text"}),t.push({title:"不同意",col_type:"text_2",url:"toast://你选择了不同意"}),t.push({title:"同意",col_type:"text_2",url:"hiker://empty@lazyRule=.js:writeFile('hiker://files/KinhDownload/.disclaimer','1');refreshPage();'toast://已同意'"}),t}(),setHomeResult({data:{data:r}.data})},t.version=pt,t.video_dl=function(t,e,r,n,o,a,s,i){var l=new dt,c={};try{c=l.dl(t,e,r,n,o,a,s,i)}catch(t){return"toast://"+t.message}if(P(c.data)){if(c.data.dlink&&c.data.ua){var u={};try{u=V.get(c.data.dlink,{headers:{"User-Agent":c.data.ua},redirect:!1})}catch(t){return"Request failed with status code -1"==t.message?"toast://请求超时，可尝试重新获取":"toast://未获取到地址，可尝试重新获取"}return u.headers.location[0]&&u.headers.location[0]+"&hiker_type=.mp4;{User-Agent@"+c.data.ua.replace(/;/g,"%%")+'.js:input.replace(/%%/g,"；；")}'||"toast://未获取到地址，可尝试重新获取"}return"toast://未获取到地址，可尝试重新获取"}var h=parseDomForArray(c.data,".alert-primary&&p"),p="",f="";if(h.forEach((function(t){-1!==t.indexOf("下载地址")&&(p=parseDomForHtml(t,"b&&Text")),-1!==t.indexOf("User-Agent")&&(f=parseDomForHtml(t,"b&&Text"))})),p&&f){u={};try{u=V.get(p,{headers:{"User-Agent":f},redirect:!1})}catch(t){return"Request failed with status code -1"==t.message?"toast://请求超时，可尝试重新获取":"toast://未获取到地址，可尝试重新获取"}return u.headers.location[0]&&u.headers.location[0]+"&hiker_type=.mp4;{User-Agent@"+f.replace(/;/g,"%%")+'.js:input.replace(/%%/g,"；；")}'||"toast://未获取到地址，可尝试重新获取"}return"toast://未获取到地址，可尝试重新获取"},Object.defineProperty(t,"__esModule",{value:!0})}));
