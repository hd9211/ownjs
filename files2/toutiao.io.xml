<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>8e10145edcdd2c160c55bc98d7afc86e</guid>
<title>优质网站同好者周刊（第 073 期）</title>
<link>https://toutiao.io/k/xnhxbg9</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;content&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城之链&lt;/a&gt;作为一个开放平台，旨在云集全球&lt;strong&gt;优秀网站&lt;/strong&gt;，探索互联网中更广阔的世界。此周刊，将汇聚过去一周&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城&lt;/a&gt;所收录的内容，以飨同好；欢迎推荐或自荐（仅限有独立域名的网站，可以是二级域名）。您如果要了解收录要求，请参见&lt;a href=&quot;https://nicelinks.site/about?utm_source=weekly&quot;&gt;关于倾城&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;备注&lt;/strong&gt;：本周刊&lt;strong&gt;每周五&lt;/strong&gt;生成，首发于个人微信公众号&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI5MDIwMzM2Mg==&amp;amp;action=getalbum&amp;amp;album_id=1530765143352082433&amp;amp;scene=173&amp;amp;from_msgid=2650641087&amp;amp;from_itemidx=1&amp;amp;count=3#wechat_redirect&quot;&gt;晚晴幽草轩&lt;/a&gt;、博客&lt;a href=&quot;https://www.jeffjade.com&quot;&gt;晚晴幽草轩&lt;/a&gt;，以及&lt;a href=&quot;https://forum.lovejade.cn/&quot;&gt;悠然宜想亭&lt;/a&gt;社区；此一键生成脚本基于 &lt;a href=&quot;https://nicelinks.site/post/602d30aad099ff5688618591&quot;&gt;Deno&lt;/a&gt; 编写，并在 Github 开源：&lt;a href=&quot;https://github.com/nicejade/nicelinks-weekly&quot;&gt;nicejade/nicelinks-weekly&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E6%A1%86%E6%9E%B6&quot;&gt;&lt;code&gt;框架&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/Web%E5%BC%80%E5%8F%91&quot;&gt;&lt;code&gt;Web开发&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/JavaScript&quot;&gt;&lt;code&gt;JavaScript&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Qwik is Framework reimagined for the edge&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/qwik.builder.io.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Qwik | The HTML-first framework&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://qwik.builder.io/&quot;&gt;Qwik&lt;/a&gt; ，一个 HTML 优先框架；它的设计是为了实现最快的页面加载时间，通过提供纯 HTML 和接近 0 的 JavaScript，使你的页面成为互动的，无论你的网站或应用程序有多复杂。它通过 HTML 的可恢复性和超细粒度的代码加载，来实现这一目标。它具有以下功能特征：&lt;/p&gt;&lt;h3 id=&quot;零负荷&quot;&gt;&lt;a href=&quot;#%E9%9B%B6%E8%B4%9F%E8%8D%B7&quot; aria-label=&quot;零负荷 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;零负荷&lt;/h3&gt;&lt;p&gt;Qwik 不进行水合作用，因为它是可恢复的。补水可能需要几秒钟，具体取决于您的应用程序的复杂性和移动设备的速度。即使在速度较慢的移动设备上，Qwik 应用程序也可以即时交互，从而获得完美的 Google PageSpeed 分数。&lt;/p&gt;&lt;h3 id=&quot;可恢复&quot;&gt;&lt;a href=&quot;#%E5%8F%AF%E6%81%A2%E5%A4%8D&quot; aria-label=&quot;可恢复 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;可恢复&lt;/h3&gt;&lt;p&gt;Qwik 应用程序的生命始于 SSR/SSG。Qwik 在呈现应用程序时将应用程序的状态和框架状态序列化为 HTML。Qwik 可以在服务器在浏览器中停止的地方继续执行，因为 Qwik 需要的所有数据都在 HTML 中。在需要处理用户交互或渲染之前，无需下载或执行 JS。&lt;/p&gt;&lt;h3 id=&quot;延迟加载&quot;&gt;&lt;a href=&quot;#%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD&quot; aria-label=&quot;延迟加载 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;延迟加载&lt;/h3&gt;&lt;p&gt;永远不要再考虑延迟加载代码。Qwik 围绕延迟加载作为其核心原语而构建，并将其提升到一个全新的水平，而开发人员只需零投入。事件侦听器、渲染函数、副作用、创建块，所有这些都会根据需要进行延迟加载。&lt;/p&gt;&lt;h3 id=&quot;减少渲染&quot;&gt;&lt;a href=&quot;#%E5%87%8F%E5%B0%91%E6%B8%B2%E6%9F%93&quot; aria-label=&quot;减少渲染 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;减少渲染&lt;/h3&gt;&lt;p&gt;在用户交互时，Qwik 会对它重新渲染的组件进行手术。这是通过反应性完成的，并允许 Qwik 最大限度地减少下载和执行的渲染代码量。反应图建立在服务器上并在客户端上恢复，无需应用程序代码出现并重新运行。&lt;/p&gt;&lt;h3 id=&quot;可扩展性&quot;&gt;&lt;a href=&quot;#%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7&quot; aria-label=&quot;可扩展性 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;可扩展性&lt;/h3&gt;&lt;p&gt;下载到客户端的代码量与用户交互的复杂性成正比，而不是与当前路由上所有组件的大小成正比。即使应用程序的复杂性随着时间的推移而增长，您的站点也会保持高性能。&lt;/p&gt;&lt;h3 id=&quot;一次编码&quot;&gt;&lt;a href=&quot;#%E4%B8%80%E6%AC%A1%E7%BC%96%E7%A0%81&quot; aria-label=&quot;一次编码 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;一次编码&lt;/h3&gt;&lt;p&gt;Qwik 对服务器和客户端代码都有一个一致的思维模型。同一个组件可以在服务器上开始其生命周期并在客户端上处理用户事件。在服务器渲染上设置 DOM 侦听器，让它们在您的客户端交互中做好准备。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://qwik.builder.io/&quot;&gt;Qwik&lt;/a&gt; ， 由 Builder.io 的工程师、谷歌的前 Angular 创造者 Misko、Stencil 和 Ionic 的创造者 Adam 和 Manu 构建。他们的使命是使用 Qwik、Partytown 和 Builder 大规模构建最快的真实网站。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;除此之外，Qwik 还有其他特点，诸如：使用 Vite 即时开发、随时可用的大型工具生态系统、  内置可扩展样式（PostCSS）、  调试 SSR、浏览器、预渲染等等。值得一提的是它独树一帜的理念，与 SSR（服务端渲染）、SSG（静态页面生成）、 &lt;a href=&quot;https://nicelinks.site/post/5f75ea02cda9de27bd93a919&quot;&gt;AMP&lt;/a&gt; 等方案有所区别，Qwik 的目标是：干掉所有不必要的 &lt;code&gt;JS&lt;/code&gt; 耗时（静态资源加载的耗时、以及 &lt;code&gt;JS&lt;/code&gt; 运行时的耗时），从而快速实现网页可交互。如果说传统 &lt;code&gt;SSR&lt;/code&gt; 的粒度是「整个页面」，那么 Qwik 的粒度是「组件中的某个方法」，这就导致在交互时再请求额外 JS。当然，Qwik 允许你指定「那些可能是用户大概率会操作的组件」，些组件逻辑对应 &lt;code&gt;JS&lt;/code&gt; 代码会 &lt;code&gt;prefetch&lt;/code&gt;，在不影响首屏渲染的前提下被预请求。&lt;/p&gt;&lt;p&gt;总结下：Qwik 的卖点是：将 JS 代码的拆分从常见的「&lt;strong&gt;编译时&lt;/strong&gt;」（比如 Webpack 分块）、「运行时」（比如 dynamic import），变为「&lt;strong&gt;交互时&lt;/strong&gt;」。对 JS 代码的极致拆分，只为达到一个目的—— 在首屏渲染时，移除你项目中 99% 的 JS 代码。感兴趣的朋友，不妨深入了解学习下。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/62c6da01ac177b7aff5e1a6a&quot;&gt;倾城之链 - Qwik | The HTML-first framework&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E8%A7%86%E9%A2%91&quot;&gt;&lt;code&gt;视频&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%A8%B1%E4%B9%90&quot;&gt;&lt;code&gt;娱乐&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%9C%A8%E7%BA%BF&quot;&gt;&lt;code&gt;在线&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;关键字&lt;/strong&gt;：麻花视频, 热门电影, 热门电视剧, 麻花视频, 最新电影, 平民影院&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;麻花视频（&lt;a href=&quot;http://www.mhyyy.com%EF%BC%89%E4%B8%BA%E6%82%A8%E6%8F%90%E4%BE%9B%E5%85%A8%E8%83%BD%E5%BD%B1%E8%A7%86%EF%BC%8C%E9%BA%BB%E8%8A%B1%E8%A7%86%E9%A2%91%EF%BC%8C%E5%B9%B3%E6%B0%91%E5%BD%B1%E9%99%A2%EF%BC%8C%E7%83%AD%E9%97%A8%E7%94%B5%E5%BD%B1%EF%BC%8C%E7%83%AD%E9%97%A8%E7%94%B5%E8%A7%86%E5%89%A7%EF%BC%8C%E7%BB%BC%E8%89%BA%EF%BC%8C%E5%8A%A8%E6%BC%AB%E7%AD%89%E5%85%8D%E8%B4%B9%E8%A7%82%E7%9C%8B%EF%BC%8C%E6%9C%80%E6%96%B0%E7%94%B5%E5%BD%B1%EF%BC%8C%E6%9C%80%E6%96%B0%E7%94%B5%E8%A7%86%E5%89%A7%E9%AB%98%E6%B8%85%E6%92%AD%E6%94%BE%EF%BC%8C%E6%97%A0%E5%B9%BF%E5%91%8A%E6%80%A5%E9%80%9F%E6%92%AD%E6%94%BE%E8%A7%82%E7%9C%8B%E4%BD%93%E9%AA%8C%E6%9E%81%E4%BD%B3,,%E7%94%A8%E8%BF%87%E9%83%BD%E8%AF%B4%E5%A5%BD%EF%BC%81&quot;&gt;www.mhyyy.com）为您提供全能影视，麻花视频，平民影院，热门电影，热门电视剧，综艺，动漫等免费观看，最新电影，最新电视剧高清播放，无广告急速播放观看体验极佳,,用过都说好！&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/www.mhyyy.com.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - 麻花视频-2022全网免费热门电影大全高分电视剧全集在线观看&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;： &lt;a href=&quot;https://nicelinks.site/redirect?url=https://www.mhyyy.com/&quot;&gt;麻花视频&lt;/a&gt; ，支持在线观看高清、正版、免费大片的网站；据其官网介绍，包含：热门电影、热门电视剧、综艺动漫等内容；最新电影，最新电视剧高清播放，无广告、急速播放、观看体验极佳（实际体验，片头有点广告，访问体验还可以）。它具有以下优势和特色：&lt;/p&gt;&lt;h3 id=&quot;优势&quot;&gt;&lt;a href=&quot;#%E4%BC%98%E5%8A%BF&quot; aria-label=&quot;优势 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;优势&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;最新热门 VIP 资源同步更新，官版推出后，5 ～ 30 分钟即可本站免费观看；&lt;/li&gt;&lt;li&gt;20 万+国内外影片、电视剧、综艺、动漫，百度搜不到的咱这里都有；&lt;/li&gt;&lt;li&gt;十大线路视频源，总有一个适合你极速秒开；&lt;/li&gt;&lt;li&gt;强大的搜索功能，只有想不到没有搜不到；&lt;/li&gt;&lt;li&gt;无需安装 APP 即可享受堪比 APP 客户端的观影体验。&lt;/li&gt;&lt;li&gt;全面支持所有设备、主流十余种分辨率比例。&lt;/li&gt;&lt;li&gt;支持系统：网页、iOS、安卓、iPad、Mac、Windows；&lt;/li&gt;&lt;li&gt;支持投屏到电视观看；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;特色&quot;&gt;&lt;a href=&quot;#%E7%89%B9%E8%89%B2&quot; aria-label=&quot;特色 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;特色&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;超大影片海报，营造沉浸式观影体验，极具视觉冲击力。&lt;/li&gt;&lt;li&gt;极致的网站设计，前端体验，获得众多同行的高度赞扬。&lt;/li&gt;&lt;li&gt;提升观影体验、降低网站层级、无需影片介绍等中间页面再次跳转。&lt;/li&gt;&lt;li&gt;像 QQ 好友一样的片源、选集切换，更易上手操作&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;沉浸式观影体验&quot;&gt;&lt;a href=&quot;#%E6%B2%89%E6%B5%B8%E5%BC%8F%E8%A7%82%E5%BD%B1%E4%BD%93%E9%AA%8C&quot; aria-label=&quot;沉浸式观影体验 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;沉浸式观影体验&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;持续添加优质线路、视频源供您切换，画质清晰、播放流畅；&lt;/li&gt;&lt;li&gt;像 QQ 好友列表一样的选集模式，更加简单、易上手；&lt;/li&gt;&lt;li&gt;视频主要分为&lt;strong&gt;电影&lt;/strong&gt;、&lt;strong&gt;电视剧&lt;/strong&gt;、&lt;strong&gt;动漫&lt;/strong&gt;、&lt;strong&gt;综艺&lt;/strong&gt;等；&lt;/li&gt;&lt;li&gt;影视分类精细完善、内容筛选功能强大、搜索功能简约又不失重点内容的呈现。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;值得一提的是， &lt;a href=&quot;https://nicelinks.site/redirect?url=https://www.mhyyy.com/&quot;&gt;麻花视频&lt;/a&gt; 提供 APP 客户端级的移动端体验，实际基于手机或微信体验，有被提示打开存在安全风险；感兴趣的朋友，可了解下。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/62c6cea1ac177b7aff5e1a68&quot;&gt;倾城之链 - 麻花视频-2022 全网免费热门电影大全高分电视剧全集在线观看&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E7%94%B5%E5%BD%B1&quot;&gt;&lt;code&gt;电影&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%88%86%E4%BA%AB&quot;&gt;&lt;code&gt;分享&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%A8%B1%E4%B9%90&quot;&gt;&lt;code&gt;娱乐&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;综合影视搜索引擎，通过电影名、演员、导演、电视剧、动漫等关键词进行搜索，直达电影资源站。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/www.aisobb.com.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - 茶杯虎 - 第二代影视综合搜索引擎-茶杯狐&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://www.aisobb.com/&quot;&gt;茶杯虎&lt;/a&gt; ，是目前使用影视搜索第二代引擎，通过电影名、演员、导演、电视剧、动漫等关键词进行搜索，直达电影资源站，与影视搜索届大哥&lt;a href=&quot;https://nicelinks.site/post/60311ec06eaf2a7660805af4&quot;&gt;茶杯狐&lt;/a&gt;不同的是，增加了&lt;strong&gt;影视评论&lt;/strong&gt;，以及剧情详细介绍，未来会增加影视「分集剧情」，让电影搜索类更高效、更便捷、更精准！&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/62c66dc9ac177b7aff5e1a66&quot;&gt;倾城之链 - 茶杯虎 - 第二代影视综合搜索引擎-茶杯狐&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/SVG&quot;&gt;&lt;code&gt;SVG&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%9B%BE%E7%89%87%E7%BC%96%E8%BE%91%E5%99%A8&quot;&gt;&lt;code&gt;图片编辑器&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%B7%A5%E5%85%B7&quot;&gt;&lt;code&gt;工具&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Vecta is a real time, collaborative SVG editor with a powerful Javascript based plugin system, for teams. Easily extend and automate, or create flowcharts, UML, network, isometric and web diagrams with thousands of included symbols. Export to multiple formats and resolution, including PNG, JPG and minified SVG that is very small in size and renders beautifully on all devices.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/vecta.io.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Powerful, online SVG editor for teams&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://vecta.io/&quot;&gt;Vecta&lt;/a&gt; ，是一款功能强大的矢量图形编辑器，使得创建、使用和共享矢量图形变得非常简单；它具有内置协作、CAD 功能、基于 JavaScript 的插件和 SVG 优化器，让每个人都可以比以往更快地创建图形。Vecta 具有以下功能特征：&lt;/p&gt;&lt;h3 id=&quot;可使用基于-javascript-的插件完全扩展&quot;&gt;&lt;a href=&quot;#%E5%8F%AF%E4%BD%BF%E7%94%A8%E5%9F%BA%E4%BA%8E-javascript-%E7%9A%84%E6%8F%92%E4%BB%B6%E5%AE%8C%E5%85%A8%E6%89%A9%E5%B1%95&quot; aria-label=&quot;可使用基于 javascript 的插件完全扩展 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;可使用基于 Javascript 的插件完全扩展&lt;/h3&gt;&lt;p&gt;创建您自己的自定义插件，来绘制分形树，或者只需单击一下，即可生成材料清单。放下您的数据，让软件为您完成所有绘图。&lt;/p&gt;&lt;h3 id=&quot;带有内置-svg-缩小器的小文件大小&quot;&gt;&lt;a href=&quot;#%E5%B8%A6%E6%9C%89%E5%86%85%E7%BD%AE-svg-%E7%BC%A9%E5%B0%8F%E5%99%A8%E7%9A%84%E5%B0%8F%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F&quot; aria-label=&quot;带有内置 svg 缩小器的小文件大小 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;带有内置 SVG 缩小器的小文件大小&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://vecta.io/&quot;&gt;Vecta&lt;/a&gt; 有提供 &lt;a href=&quot;https://nicelinks.site/redirect?url=https://vecta.io/nano&quot;&gt;Nano&lt;/a&gt; ，它是世界上最好的（平均小 22%）SVG 缩小器之一，您可以基于该工具，来压缩您的 SVG 尺寸，从而优化您的网站。&lt;/p&gt;&lt;h3 id=&quot;为精准而生&quot;&gt;&lt;a href=&quot;#%E4%B8%BA%E7%B2%BE%E5%87%86%E8%80%8C%E7%94%9F&quot; aria-label=&quot;为精准而生 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;为精准而生&lt;/h3&gt;&lt;p&gt;Vecta 具有多种单位、缩放和测量工具，可让您以像素、毫米、厘米或英寸为单位，准确地创建各种令人惊叹的图表。&lt;/p&gt;&lt;h3 id=&quot;导入-autocad-绘图visio-模具和绘图&quot;&gt;&lt;a href=&quot;#%E5%AF%BC%E5%85%A5-autocad-%E7%BB%98%E5%9B%BEvisio-%E6%A8%A1%E5%85%B7%E5%92%8C%E7%BB%98%E5%9B%BE&quot; aria-label=&quot;导入 autocad 绘图visio 模具和绘图 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;导入 AutoCAD 绘图、Visio 模具和绘图&lt;/h3&gt;&lt;p&gt;将 Autocad 绘图、Visio 模具和绘图拖放到 Vecta 中，即可立即对其进行编辑。立即共享或重复使用数千个绘图和符号。&lt;/p&gt;&lt;h3 id=&quot;强大的所见即所得编辑器&quot;&gt;&lt;a href=&quot;#%E5%BC%BA%E5%A4%A7%E7%9A%84%E6%89%80%E8%A7%81%E5%8D%B3%E6%89%80%E5%BE%97%E7%BC%96%E8%BE%91%E5%99%A8&quot; aria-label=&quot;强大的所见即所得编辑器 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;强大的所见即所得编辑器&lt;/h3&gt;&lt;p&gt;使用 Vecta 强大的编辑器创建清晰、像素完美的 SVG 图形。在 100% 缩放时，您所看到的正是您将图像输出为各种格式（包括 PNG、JPG、SVG 和 PDF）时所得到的。&lt;/p&gt;&lt;h3 id=&quot;适合所有人的有吸引力的符号和图标&quot;&gt;&lt;a href=&quot;#%E9%80%82%E5%90%88%E6%89%80%E6%9C%89%E4%BA%BA%E7%9A%84%E6%9C%89%E5%90%B8%E5%BC%95%E5%8A%9B%E7%9A%84%E7%AC%A6%E5%8F%B7%E5%92%8C%E5%9B%BE%E6%A0%87&quot; aria-label=&quot;适合所有人的有吸引力的符号和图标 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;适合所有人的有吸引力的符号和图标&lt;/h3&gt;&lt;p&gt;使用和重复使用可共享模板中的数千个漂亮符号，以简单的方式生成令人惊叹的图形。创建更多符号并与您的团队分享，以获得最大的生产力。&lt;/p&gt;&lt;h3 id=&quot;使用公式和表达式事半功倍&quot;&gt;&lt;a href=&quot;#%E4%BD%BF%E7%94%A8%E5%85%AC%E5%BC%8F%E5%92%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BA%8B%E5%8D%8A%E5%8A%9F%E5%80%8D&quot; aria-label=&quot;使用公式和表达式事半功倍 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;使用公式和表达式，事半功倍&lt;/h3&gt;&lt;p&gt;轻松创建可扩展以适应更多文本的智能形状，或在调整大小时更改颜色以指示状态。更好的是，使用公式绘制器复制智能行为并将其应用于另一个。&lt;/p&gt;&lt;p&gt;除此之外，Vecta 支持广泛的协作工具，使您能够与队友更好地沟通和工作。您可以创建一个帐户，并使用简单的图表启动您的项目。在 Vecta 上与您的团队轻松绘图、共享和协作。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/62c5a36da33208743e33be26&quot;&gt;倾城之链 - Powerful, online SVG editor for teams&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/Github&quot;&gt;&lt;code&gt;Github&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%BC%80%E6%BA%90&quot;&gt;&lt;code&gt;开源&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%88%86%E4%BA%AB&quot;&gt;&lt;code&gt;分享&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;分享 GitHub 入门级、有趣的开源项目。推广自己的开源项目、编程实践项目、适合练手的开源项目、HelloGitHub 月刊&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/hellogithub.com.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - HelloGitHub 分享 GitHub 上入门级、有趣的开源项目&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;： &lt;a href=&quot;https://nicelinks.site/redirect?url=https://hellogithub.com/&quot;&gt;HelloGitHub&lt;/a&gt; ，旨在分享 &lt;a href=&quot;https://nicelinks.site/post/59ba80d93df6765c75b77911&quot;&gt;GitHub&lt;/a&gt; 入门级、有趣的开源项目。您可以在这里，推广自己的&lt;strong&gt;开源&lt;/strong&gt;项目、编程实践项目、适合练手的开源项目，作者会将汇聚其中部分，融汇为 HelloGitHub 月刊，每月 28 号发布最新一期。&lt;/p&gt;&lt;h3 id=&quot;hellogithub-是什么&quot;&gt;&lt;a href=&quot;#hellogithub-%E6%98%AF%E4%BB%80%E4%B9%88&quot; aria-label=&quot;hellogithub 是什么 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;HelloGitHub 是什么？&lt;/h3&gt;&lt;p&gt;最开始作者只是想把自己在浏览 GitHub 过程中，发现的有意思、高质量、容易上手的项目收集起来，这样便于以后查找和学习。后来打算把这些有意思、有价值的开源项目分享给大家。最后就写了这个网站，便于查看和分享。&lt;/p&gt;&lt;h3 id=&quot;在这里你能得到什么&quot;&gt;&lt;a href=&quot;#%E5%9C%A8%E8%BF%99%E9%87%8C%E4%BD%A0%E8%83%BD%E5%BE%97%E5%88%B0%E4%BB%80%E4%B9%88&quot; aria-label=&quot;在这里你能得到什么 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;在这里你能得到什么？&lt;/h3&gt;&lt;p&gt;各种语言的开源项目、让生活变得更美好的工具、书籍、学习笔记、教程等。通过这些项目，你将学习到更多编程知识、提高自己的编程技巧、发现编程的乐趣。&lt;/p&gt;&lt;h3 id=&quot;兴趣是最好的老师&quot;&gt;&lt;a href=&quot;#%E5%85%B4%E8%B6%A3%E6%98%AF%E6%9C%80%E5%A5%BD%E7%9A%84%E8%80%81%E5%B8%88&quot; aria-label=&quot;兴趣是最好的老师 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;兴趣是最好的老师&lt;/h3&gt;&lt;p&gt;作者是偶然的机会，接触到了 Python，发现编程如此容易上手，有乐趣。然后开始写东西、解决问题、学习别人的代码，为了写出更有价值的程序。作者发现什么&quot;撸&quot;多了，都上瘾，代码也是一样。&lt;/p&gt;&lt;h3 id=&quot;作者推荐-github&quot;&gt;&lt;a href=&quot;#%E4%BD%9C%E8%80%85%E6%8E%A8%E8%8D%90-github&quot; aria-label=&quot;作者推荐 github permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;作者推荐 Github&lt;/h3&gt;&lt;p&gt;在 &lt;a href=&quot;https://nicelinks.site/post/59ba80d93df6765c75b77911&quot;&gt;GitHub&lt;/a&gt; ，你能做的不只是&lt;strong&gt;编程&lt;/strong&gt;：会编程的可以贡献代码，不会编程的朋友，可以反馈使用这些工具中的 Bug、帮着宣传你觉得优秀的项目、Star 仓库、阅读观点、探讨问题。注册个 GitHub 帐号，加入开源社区，即可开启这段奇妙旅程。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/62c3096390375e5be8bc9d46&quot;&gt;倾城之链 - HelloGitHub 分享 GitHub 上入门级、有趣的开源项目&lt;/a&gt;&lt;/p&gt;&lt;p&gt;对倾城之链感兴趣的朋友，可通过 Web，小程序，快应用等渠道进行访问(后续将支持更多，如 VsCode 插件，Chrome 扩展等)。您有任何问题，欢迎随时向我们反馈（您可以通过官网反馈渠道，或添加如下客服微信），🤲 。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/%E5%80%BE%E5%9F%8E%E4%B9%8B%E9%93%BE-%E5%BE%AE%E4%BF%A1-mini.jpeg&quot; alt=&quot;倾城之链 - 客服微信&quot;/&gt;&lt;/p&gt;&lt;h2 id=&quot;本期文末寄语&quot;&gt;&lt;a href=&quot;#%E6%9C%AC%E6%9C%9F%E6%96%87%E6%9C%AB%E5%AF%84%E8%AF%AD&quot; aria-label=&quot;本期文末寄语 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;本期文末寄语&lt;/h2&gt;&lt;p&gt;那些疯狂的人、不合时宜的人、叛逆者及麻烦制造者，他们都是异类，看待事物的眼光与别人不同，但他们能改变一切，推动人类前行，或许有人认为，他们都是疯子，但在我们眼中，他们都是天才。── 史蒂夫 · 乔布斯&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城之链&lt;/a&gt;作为一个开放平台，旨在云集全球&lt;strong&gt;优秀网站&lt;/strong&gt;，探索互联网中更广阔的世界；在这里，你可以轻松发现、学习、分享更多有用或有趣的事物。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/nicelinks-miniprogram-code.jpeg?imageView2/1/w/250/h/250/interlace/1/ignore-error/1&quot; alt=&quot;小程序码 - 倾城之链&quot;/&gt;&lt;/p&gt;&lt;h3 id=&quot;您可能感兴趣的文章&quot;&gt;&lt;a href=&quot;#%E6%82%A8%E5%8F%AF%E8%83%BD%E6%84%9F%E5%85%B4%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0&quot; aria-label=&quot;您可能感兴趣的文章 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;您可能感兴趣的文章&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>938edc5315d52de4c7aab0e10bec72e3</guid>
<title>[推荐收藏]一文深入浅出学习Spring框架系列</title>
<link>https://toutiao.io/k/27gg7rt</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;theme-default-content content__default&quot;&gt;&lt;h1 id=&quot;♥spring框架知识体系详解♥&quot;&gt;&lt;a href=&quot;#♥spring框架知识体系详解♥&quot; class=&quot;header-anchor&quot;&gt;¶&lt;/a&gt; ♥Spring框架知识体系详解♥&lt;/h1&gt; &lt;div class=&quot;custom-block tip&quot;&gt;&lt;p class=&quot;custom-block-title&quot;&gt;TIP&lt;/p&gt; &lt;p&gt;本系列主要介绍Spring框架整体架构，Spring的核心IOC，AOP的案例和具体实现机制；以及SpringMVC框架的案例和实现机制。@pdai&lt;/p&gt;&lt;/div&gt; &lt;h2 id=&quot;相关文章&quot;&gt;&lt;a href=&quot;#相关文章&quot; class=&quot;header-anchor&quot;&gt;¶&lt;/a&gt; 相关文章&lt;/h2&gt; &lt;blockquote&gt;&lt;p&gt;首先， 从Spring框架的整体架构和组成对整体框架有个认知。&lt;/p&gt;&lt;/blockquote&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-framework-introduce-8.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt; &lt;blockquote&gt;&lt;p&gt;其次，通过案例引出Spring的核心（IoC和AOP），同时对IoC和AOP进行案例使用分析。&lt;/p&gt;&lt;/blockquote&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-framework-helloworld-2.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-framework-ioc-2.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-framework-aop-2.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt; &lt;blockquote&gt;&lt;p&gt;基于Spring框架和IOC，AOP的基础，为构建上层web应用，需要进一步学习SpringMVC。&lt;/p&gt;&lt;/blockquote&gt; &lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://pdai.tech/md/spring/spring-x-framework-springmvc.html&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Spring基础 - SpringMVC请求流程和案例&lt;span&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; aria-hidden=&quot;true&quot; focusable=&quot;false&quot; x=&quot;0px&quot; y=&quot;0px&quot; viewbox=&quot;0 0 100 100&quot; class=&quot;icon outbound&quot;&gt;&lt;path fill=&quot;currentColor&quot; d=&quot;M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z&quot;/&gt; &lt;polygon fill=&quot;currentColor&quot; points=&quot;45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9&quot;/&gt;&lt;/svg&gt; &lt;span class=&quot;sr-only&quot;&gt;(opens new window)&lt;/span&gt;&lt;/span&gt;&lt;/a&gt; &lt;ul&gt;&lt;li&gt;前文我们介绍了Spring框架和Spring框架中最为重要的两个技术点（IOC和AOP），那我们如何更好的构建上层的应用呢（比如web 应用），这便是SpringMVC；Spring MVC是Spring在Spring Container Core和AOP等技术基础上，遵循上述Web MVC的规范推出的web开发框架，目的是为了简化Java栈的web开发。 本文主要介绍SpringMVC的请求流程和基础案例的编写和运行。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt; &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-springframework-mvc-5.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt; &lt;blockquote&gt;&lt;p&gt;Spring进阶 - IoC，AOP以及SpringMVC的源码分析&lt;/p&gt;&lt;/blockquote&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-framework-ioc-source-71.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-framework-ioc-source-8.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-framework-ioc-source-102.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-springframework-aop-4.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-springframework-aop-51.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-springframework-aop-63.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-springframework-aop-71.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-springframework-mvc-23.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;  &lt;p&gt;&lt;img alt=&quot;&quot; data-src=&quot;https://pdai.tech/_images/spring/springframework/spring-springframework-mvc-30.png&quot; loading=&quot;lazy&quot; class=&quot;lazy&quot;/&gt;&lt;/p&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>a9d48e89c2d8400563103e35e5c184f3</guid>
<title>C++ 中 malloc/free与 new/delete区别</title>
<link>https://toutiao.io/k/f3koxhs</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div id=&quot;cnblogs_post_body&quot; class=&quot;blogpost-body blogpost-body-html&quot;&gt;
&lt;p&gt; new/delete 通常来说是操作符，就是&quot;+&quot;，&quot;-&quot;一样，malloc/free 是 C++/C 语言的标准库函数 —— 本质区别。本文主要从以下5各方面比较、分析 malloc/free，new/delete 的区别 。 1.自动地分配所需空间。2.自动返回指针类型。3.初始化不同。4.源码实现不同。5.常见问题为什么有了new不剔除malloc。&lt;br/&gt;【正文】&lt;br/&gt;本质区别&lt;br/&gt;new/delete 通常来说是操作符，就是&quot;+&quot;，&quot;-&quot;一样。 malloc/free 是 C++/C 语言的标准库函数 ——本质区别；&lt;br/&gt;操作对象范围不同&lt;/p&gt;
&lt;p&gt;new/delete 是 C++ 里才有的，而 new/delete 与 malloc/free 一个显著的区别在于，new 是建造一个对象，并调用对象的构造函数来初始化对象，其实在所有的 new 操作过程中，总是分为两步的：第一步是申请内存，第二步则是调用构造函数初始化对象（也有文章指出，第三步是返回指针所指向对象的类型和地址）。同样，在调用 delete 的时候，需要先调用析构函数，然后在销毁堆内存。换言之 ， 对于非内部数据类型的对象而言，光用 malloc/free 无法满足动态对象的要求。对象在创建的同时要自动执行构造函数，对象在消亡之前要自动执行析构函数。由于 malloc/free 是库函数而不是运算符，不在编译器控制权限之内，不能够把执行构造函数和析构函数的任务强加于 malloc/free 。如果用 free 释放“ new 创建的动态对象”，那么该对象因无法执行析构函数而可能导致程序出错。如果用 delete 释放“ malloc 申请的动态内存”，理论上讲程序不会出错，但是该程序的可读性很差。所以 new/delete 必须配对使用， malloc/free 也一样。 C++ 默认的 new/delete 操作符内部，其实也调用了 malloc/free 这两个函数；&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;使用方法上的区别&lt;/p&gt;
&lt;p&gt;1. new能够按照变量类型自动地分配所需空间长度，不必使用宏sizeof。&lt;/p&gt;
&lt;p&gt;2. new能够自动返回正确的指针类型。&lt;/p&gt;
&lt;p&gt;3. 必须时，new能将单个变量初始化。&lt;/p&gt;
&lt;p&gt;用例阐述&lt;/p&gt;
&lt;p&gt;  &lt;br/&gt;malloc&lt;br/&gt;用 malloc 申请一块长度为length 的整数类型的内存，程序如下：&lt;br/&gt;int *p = (int *) malloc ( sizeof(int) * length); &lt;br/&gt;我们应当把注意力集中在两个要素上：“类型转换”和“sizeof”。&lt;br/&gt;void * malloc(size_t size); &lt;br/&gt;1、malloc 返回值的类型是 void *，所以在调用 malloc 时要显式地进行类型转换，将 void * 转换成所需要的指针类型。&lt;br/&gt;2、malloc 函数本身并不识别要申请的内存是什么类型，它只关心内存的总字节数。&lt;/p&gt;
&lt;p&gt;  &lt;br/&gt;free&lt;br/&gt;void free( void * memblock ); &lt;br/&gt;为什么free 函数不象malloc 函数那样复杂呢？这是因为指针p 的类型以及它所指的内存的容量事先都是知道的，语句free(p)能正确地释放内存。如果p 是NULL 指针，那么free对p 无论操作多少次都不会出问题。如果p 不是NULL 指针，那么free 对p连续操作两次就会导致程序运行错误。（悬浮指针和空指针的区别就在这里）&lt;br/&gt;  &lt;br/&gt;new/delete &lt;br/&gt;运算符 new 使用起来要比函数 malloc 简单得多，例如：&lt;br/&gt;int *p1 = (int *)malloc(sizeof(int) * length);  &lt;br/&gt;int *p2 = new int[length]; &lt;br/&gt;这是因为 new 内置了sizeof、类型转换和类型安全检查功能。对于非内部数据类型的对象而言，new 在创建动态对象的同时完成了初始化工作。如果对象有多个构造函数，那么new 的语句也可以有多种形式。&lt;br/&gt;如果用new 创建对象数组，那么只能使用对象的无参数构造函数。例如&lt;br/&gt;Obj *objects = new Obj[100]; // 创建100 个动态对象 &lt;br/&gt;不能写成&lt;br/&gt;Obj *objects = new Obj[100](1);// 创建100 个动态对象的同时赋初值1 &lt;br/&gt;在用delete 释放对象数组时，留意不要丢了符号‘[ ]’。例如&lt;br/&gt;delete []objects; // 正确的用法 &lt;br/&gt;delete objects; // 错误的用法 &lt;br/&gt;后者相当于delete objects[0]，漏掉了另外99 个对象。&lt;br/&gt;malloc/free 与 new/delete共同点&lt;br/&gt;1 都必须配对使用，这里的配对使用，可不能理解为一个 new/malloc 就对应一个 delete/free ，而是指在作用域内，new/malloc 所申请的内存，必须被有效释放，否则将会导致内存泄露，至于内存泄露的检查方法，我们推荐的工具是大家众所周知的 Bounds Checker；&lt;/p&gt;
&lt;p&gt;2 都是申请内存，释放内存，free和delete可以释放NULL指针。&lt;br/&gt;既然new/delete的功能完全覆盖了malloc /free，为什么C++还保留malloc/free呢？&lt;br/&gt;对于非内部数据类型对象（如类对象）而言，只用malloc/free 无法满足动态对象的要求。对象在创建的同时要自动执行构造函数，对象在消亡之前要自动执行析构函数。&lt;/p&gt;
&lt;p&gt;由于，malloc/free是库函数而不是运算符，不在编译器控制权限之内，也就不能执行构造函数和析构函数，不能够把执行构造函数和析构函数的任务强加于malloc/free。&lt;/p&gt;
&lt;p&gt;所以，若要强求使用malloc/free库函数实现非内部数据类型对象的内存管理，在malloc（）后要有一个类对象的初始化来承担构造函数的功能，同时，在free之前也要有一个消除函数来充当析构函数的功能，当然这是很不方便，也是不提倡的。&lt;/p&gt;
&lt;p&gt;因此，C++语言需要一个能完成动态内存分配和初始化工作的运算符new，以及一个能完成清理与释放内存工作的运算符delete。new/delete不是库函数，而是运算符。&lt;/p&gt;
&lt;p&gt;而对于内部数据类型，由于内部数据类型的对象没有构造函数与析构函数的过程，对他们来说，malloc/free与new/delete是等价的。&lt;/p&gt;
&lt;p&gt;或许你会问，既然new/delete的功能完全可以实现malloc/free的功能，为什么C++中不把malloc/free淘汰掉呢，这可能涉及到一个兼容性问题，C++程序要经常调用C函数，而C语言中只能用malloc/free来管理内存。&lt;br/&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>e61836cee02abb4c7d10010032c548c0</guid>
<title>面试官：请使用JS完成一个LRU缓存？</title>
<link>https://toutiao.io/k/r4p13do</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;/h2&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzA4MjA1MDM3Ng==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/sz_mmbiz_png/zHYsKHjf0nhKDp83A5wcarjQibWMd4EneFCib2rMb7recuom2fH8hwZZIYJiaoG6VDP1qP91iasV3pB3NgxLZQ22tA/0?wx_fmt=png&quot; data-nickname=&quot;前端进阶之旅&quot; data-alias=&quot;poetries93&quot; data-signature=&quot;我是poetry，专注前端领域技能干货经验分享，帮你少走弯路进大厂！在进阶的路上，共勉！推荐关注兄弟号「程序员poetry」&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span data-darkmode-bgcolor-16021670869911=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16021670869911=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16021670869911=&quot;rgb(136, 136, 136)&quot; data-darkmode-original-color-16021670869911=&quot;rgb(136, 136, 136)&quot; data-darkmode-bgcolor-16030289161394=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030289161394=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030289161394=&quot;rgb(136, 136, 136)&quot; data-darkmode-original-color-16030289161394=&quot;rgb(136, 136, 136)&quot; data-darkmode-bgcolor-16030315732716=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030315732716=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030315732716=&quot;rgb(136, 136, 136)&quot; data-darkmode-original-color-16030315732716=&quot;rgb(136, 136, 136)&quot;&gt;点击上方 &lt;/span&gt;&lt;span data-darkmode-bgcolor-16021670869911=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16021670869911=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16021670869911=&quot;rgb(0, 128, 255)&quot; data-darkmode-original-color-16021670869911=&quot;rgb(0, 128, 255)&quot; data-darkmode-bgcolor-16030289161394=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030289161394=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030289161394=&quot;rgb(0, 128, 255)&quot; data-darkmode-original-color-16030289161394=&quot;rgb(0, 128, 255)&quot; data-darkmode-bgcolor-16030315732716=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030315732716=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030315732716=&quot;rgb(0, 128, 255)&quot; data-darkmode-original-color-16030315732716=&quot;rgb(0, 128, 255)&quot;&gt;前端进阶之旅&lt;/span&gt;&lt;span data-darkmode-bgcolor-16021670869911=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16021670869911=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16021670869911=&quot;rgb(136, 136, 136)&quot; data-darkmode-original-color-16021670869911=&quot;rgb(136, 136, 136)&quot; data-darkmode-bgcolor-16030289161394=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030289161394=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030289161394=&quot;rgb(136, 136, 136)&quot; data-darkmode-original-color-16030289161394=&quot;rgb(136, 136, 136)&quot; data-darkmode-bgcolor-16030315732716=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030315732716=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030315732716=&quot;rgb(136, 136, 136)&quot; data-darkmode-original-color-16030315732716=&quot;rgb(136, 136, 136)&quot;&gt;，关注公众号&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;a class=&quot;weapp_text_link&quot; data-miniprogram-appid=&quot;wxe9e75b3e1642cf71&quot; data-miniprogram-path=&quot;pages/home/index&quot; data-miniprogram-nickname=&quot;前端进阶之旅&quot; data-miniprogram-type=&quot;text&quot; data-miniprogram-servicetype=&quot;0&quot; wah-hotarea=&quot;click&quot;&gt;&amp;gt;&amp;gt;前端求职面试刷题神器&amp;lt;&amp;lt;&lt;/a&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;前言&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;LRU&lt;/code&gt; 缓存算法是一个非常经典的算法，在很多面试中经常问道，不仅仅包括前端面试。小伙伴们如果刷过 &lt;code&gt;Leetcode&lt;/code&gt; 算法题，相信你一定遇到过 &lt;code&gt;LRU&lt;/code&gt; 算法的题，那么 &lt;code&gt;LRU&lt;/code&gt; 算法到底是一个怎样的算法呢？今天我们就给大家好好讲讲，顺便使用 &lt;code&gt;JS&lt;/code&gt; 把它实现出来！&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;1.什么是 &lt;code&gt;LRU&lt;/code&gt;？&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;LRU&lt;/code&gt; 英文全称是 &lt;code&gt;Least Recently Used&lt;/code&gt;，英译过来就是”&lt;strong&gt;最近最少使用“的意思。&lt;/strong&gt; 它是页面置换算法中的一种，我们先来看一段百度百科的解释。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;百度百科：&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;code&gt;LRU&lt;/code&gt; 是一种常用的页面置换算法，选择最近最久未使用的页面予以淘汰。该算法赋予每个页面一个访问字段，用来记录一个页面自上次被访问以来所经历的时间 &lt;code&gt;t&lt;/code&gt;，当须淘汰一个页面时，选择现有页面中其 &lt;code&gt;t&lt;/code&gt; 值最大的，即最近最少使用的页面予以淘汰。&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;百度百科解释的比较窄，它这里只使用了页面来举例，我们通俗点来说就是：假如我们最近访问了很多个页面，内存把我们最近访问的页面都缓存了起来，但是随着时间推移，我们还在不停的访问新页面，这个时候为了减少内存占用，我们有必要删除一些页面，而删除哪些页面呢？我们可以通过访问页面的时间来决定，或者说是一个标准：在最近时间内，最久未访问的页面把它删掉。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;百度百科的解释只是单纯的解释算法，而我们这里可以结合我们的前端和实际应用场景来给大家解释一下。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;通俗的解释：&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;假如我们有一块内存，专门用来缓存我们最近发访问的网页，访问一个新网页，我们就会往内存中添加一个网页地址，随着网页的不断增加，内存存满了，这个时候我们就需要考虑删除一些网页了。这个时候我们找到内存中最早访问的那个网页地址，然后把它删掉。&lt;br/&gt;这一整个过程就可以称之为 &lt;code&gt;LRU&lt;/code&gt; 算法。&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;虽然上面的解释比较好懂了，但是我们还有很多地方没有考虑到，比如如下几点：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;当我们访问内存中已经存在了的网址，那么该网址是否需要更新在内存中的存储顺序。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;当我们内存中还没有数据的时候，是否需要执行删除操作。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;最后我们在上一张图，大家应该就更容易理解了，如下图：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5791666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKkvFqTE8DShr6gwyBxNtLcLQwWNJ7pctjtnX0leNHEE5KoPse0vp9HdV4iciavsd2WYiccA8RlwR1BUA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;720&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;上图就很好的解释了 &lt;code&gt;LRU&lt;/code&gt; 算法在干嘛了，其实非常简单，无非就是我们往内存里面添加或者删除元素的时候，遵循&lt;strong&gt;最近最少使用原则&lt;/strong&gt;。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;2.使用场景&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;LRU&lt;/code&gt; 算法使用的场景非常多，这里简单举几个例子即可：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;我们操作系统底层的内存管理，其中就包括有 &lt;code&gt;LRU&lt;/code&gt; 算法&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;我们常见的缓存服务，比如 &lt;code&gt;redis&lt;/code&gt; 等等&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;比如浏览器的最近浏览记录存储，如下图：&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.5454545454545454&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKkvFqTE8DShr6gwyBxNtLcLXTKgpHUFianiaNyBOkgJwTpxWHLjaL5yibBCkAMLT46uPR09I9ynbI1fQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;363&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;总之 LRU 算法的运用场景还是蛮多的，所以我们很有必要掌握它。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;3.梳理实现 &lt;code&gt;LRU&lt;/code&gt; 思路&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们学习了 &lt;code&gt;LRU&lt;/code&gt; 算法的基本概念和使用场景之后，那么我们就应该考虑如何实现它了。要想实现一个算法，我们很有必要梳理一下思路，这样才能让我们更好更快的编写出代码。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先我们来梳理一下 &lt;code&gt;LRU&lt;/code&gt; 算法的特点。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;特点分析：&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;我们需要一块有限的存储空间，因为无限的化就没必要使用 &lt;code&gt;LRU&lt;/code&gt; 算发删除数据了。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;我们这块存储空间里面存储的数据需要是有序的，因为我们必须要顺序来删除数据，所以可以考虑使用 &lt;code&gt;Array&lt;/code&gt;、&lt;code&gt;Map&lt;/code&gt; 数据结构来存储，不能使用 &lt;code&gt;Object&lt;/code&gt;，因为它是无序的。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;我们能够删除或者添加以及获取到这块存储空间中的指定数据。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;存储空间存满之后，在添加数据时，会自动删除时间最久远的那条数据。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;实现需求：&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;实现一个 &lt;code&gt;LRUCache&lt;/code&gt; 类型，用来充当存储空间&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;采用 Map 数据结构存储数据，因为它的存取时间复杂度为 &lt;code&gt;O(1)&lt;/code&gt;，数组为 &lt;code&gt;O(n)&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;实现 &lt;code&gt;get&lt;/code&gt; 和 &lt;code&gt;set&lt;/code&gt; 方法，用来获取和添加数据&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;我们的存储空间有长度限制，所以无需提供删除方法，存储满之后，自动删除最久远的那条数据&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;当使用 &lt;code&gt;get&lt;/code&gt; 获取数据后，该条数据需要更新到最前面&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;现在我们已经把 &lt;code&gt;LRU&lt;/code&gt; 算法的特点以及实现思路列了出来，那么接下来就然我们一起去实现它吧！&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;4.具体实现&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先我们定义一个 &lt;code&gt;LRUCache&lt;/code&gt; 类，封装所有的方法和变量。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;代码如下：&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&amp;lt;script&amp;gt;&lt;br/&gt;  class LRUCache {&lt;br/&gt;    constructor(lenght) {&lt;br/&gt;      this.length = lenght; // 存储长度&lt;br/&gt;      this.data = new Map(); // 存储数据&lt;br/&gt;    }&lt;br/&gt;    // 存储数据，通过键值对的方式&lt;br/&gt;    &lt;span&gt;set&lt;/span&gt;(key, value) { }&lt;br/&gt;    // 获取数据&lt;br/&gt;    get(key) { }&lt;br/&gt;  }&lt;br/&gt;  const lruCache = new LRUCache(5);&lt;br/&gt;&amp;lt;/script&amp;gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;上段代码只是我们最简单的一个架子，我们需要去实现具体的 &lt;code&gt;get&lt;/code&gt; 和 &lt;code&gt;set&lt;/code&gt; 方法。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;代码如下：&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&amp;lt;script&amp;gt;&lt;br/&gt;  class LRUCache {&lt;br/&gt;    constructor(lenght) {&lt;br/&gt;      this.length = lenght; // 存储长度&lt;br/&gt;      this.data = new Map(); // 存储数据&lt;br/&gt;    }&lt;br/&gt;    // 存储数据，通过键值对的方式&lt;br/&gt;    &lt;span&gt;set&lt;/span&gt;(key, value) {&lt;br/&gt;      const data = this.data;&lt;br/&gt;      &lt;span&gt;if&lt;/span&gt; (data.has(key)) {&lt;br/&gt;        data.delete(key)&lt;br/&gt;      }&lt;br/&gt;      data.set(key, value);&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;      // 如果超出了容量，则需要删除最久的数据&lt;br/&gt;      &lt;span&gt;if&lt;/span&gt; (data.size &amp;gt; this.length) {&lt;br/&gt;        const delKey = data.keys().next().value;&lt;br/&gt;        data.delete(delKey);&lt;br/&gt;      }&lt;br/&gt;    }&lt;br/&gt;    // 获取数据&lt;br/&gt;    get(key) {&lt;br/&gt;      const data = this.data;&lt;br/&gt;      // 未找到&lt;br/&gt;      &lt;span&gt;if&lt;/span&gt; (!data.has(key)) {&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; null;&lt;br/&gt;      }&lt;br/&gt;      const value = data.get(key); // 获取元素&lt;br/&gt;      data.delete(key); // 删除元素&lt;br/&gt;      data.set(key, value); // 重新插入元素&lt;br/&gt;    }&lt;br/&gt;  }&lt;br/&gt;  const lruCache = new LRUCache(5);&lt;br/&gt;&amp;lt;/script&amp;gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;上段代码中实现实现了 &lt;code&gt;get&lt;/code&gt; 和 &lt;code&gt;set&lt;/code&gt; 方法，下面说一下这两个方法的实现思路：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;set&lt;/code&gt; 方法：往 &lt;code&gt;map&lt;/code&gt; 里面添加新数据，如果添加的数据存在了，则先删除该条数据，然后再添加。如果添加数据后超长了，则需要删除最久远的一条数据。&lt;code&gt;data.keys().next().value&lt;/code&gt; 便是获取最后一条数据的意思。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;get&lt;/code&gt; 方法：首先从 &lt;code&gt;map&lt;/code&gt; 对象中拿出该条数据，然后删除该条数据，最后再重新插入该条数据，确保将该条数据移动到最前面。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;接下来我们使用一些测试用例来试试行不行。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;存储数据 &lt;code&gt;set&lt;/code&gt;：&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;lruCache.set(&lt;span&gt;&#x27;name&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;小猪课堂&#x27;&lt;/span&gt;);&lt;br/&gt;lruCache.set(&lt;span&gt;&#x27;age&#x27;&lt;/span&gt;, 22);&lt;br/&gt;lruCache.set(&lt;span&gt;&#x27;sex&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;男&#x27;&lt;/span&gt;);&lt;br/&gt;lruCache.set(&lt;span&gt;&#x27;height&#x27;&lt;/span&gt;, 176);&lt;br/&gt;lruCache.set(&lt;span&gt;&#x27;weight&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;100&#x27;&lt;/span&gt;);&lt;br/&gt;console.log(lruCache);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;输出结果：&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6558823529411765&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKkvFqTE8DShr6gwyBxNtLcL7dghzlzh6LK4HMGYovRCjiahBc9laqDIWoicGBrMHKSHKXeMicehubMMQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;340&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;继续插入数据，此时会超长，&lt;strong&gt;代码如下：&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;lruCache.set(&lt;span&gt;&#x27;grade&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;10000&#x27;&lt;/span&gt;);&lt;br/&gt;console.log(lruCache);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;输出结果：&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.658753709198813&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKkvFqTE8DShr6gwyBxNtLcLCB3pCel2ficpicYLIExHjNXTMibUPiaM12l9iavRdHicvqzF4Pdr3Jnf6aPA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;337&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;此时我们发现存储时间最久的 &lt;code&gt;name&lt;/code&gt; 已经被移除了，新插入的数据变为了最前面的一个。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们使用 &lt;code&gt;get&lt;/code&gt; 获取数据，&lt;strong&gt;代码如下：&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;lruCache.get(&lt;span&gt;&#x27;sex&#x27;&lt;/span&gt;);&lt;br/&gt;console.log(lruCache);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;输出结果：&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5577889447236181&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKkvFqTE8DShr6gwyBxNtLcLgEpzJ25q6DQ5TeHfwAbAsWlYPickvgL27XFcgV8krbgzoZens1ODJkA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;398&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们发现此时 &lt;code&gt;sex&lt;/code&gt; 字段已经跑到最前面去了。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;总结&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;LRU&lt;/code&gt; 算法其实逻辑非常的简单，明白了原理之后实现起来非常的简单。最主要的是我们需要使用什么数据结构来存储数据，因为 &lt;code&gt;map&lt;/code&gt; 的存取非常快，所以我们采用了它，当然数组其实也可以实现的。还有一些小伙伴使用链表来实现 &lt;code&gt;LRU&lt;/code&gt;，这当然也是可以的。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;参考资料&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;span&gt;[1]&lt;/span&gt;&lt;p&gt;https://link.juejin.cn/?target=https%3A%2F%2Fspace.bilibili.com%2F493520625%3Fspm_id_from%3D333.1007.0.0: &lt;em&gt;https://link.juejin.cn/?target=https%3A%2F%2Fspace.bilibili.com%2F493520625%3Fspm_id_from%3D333.1007.0.0&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>607ffeca3a0600749a8b7242ee01e947</guid>
<title>Containerd 对接私有镜像仓库 Harbor</title>
<link>https://toutiao.io/k/vn91ax0</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p&gt;&lt;span&gt;Harbor 是一个 CNCF 基金会托管的开源的可信的云原生 docker registry 项目，可以用于存储、签名、扫描镜像内容，Harbor 通过添加一些常用的功能如安全性、身份权限管理等来扩展 docker registry 项目，此外还支持在 registry 之间复制镜像，还提供更加高级的安全功能，如用户管理、访问控制和活动审计等，在新版本中还添加了 Helm 仓库托管的支持。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Yvo103bB3ASibU90g6nboiaJRHq5puKM145nYrgQI62wMvVJNZZNp7qKiaaMyTeJtwic6oOicaicp1o8Epg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Harbor 最核心的功能就是给 &lt;code&gt;docker registry&lt;/code&gt; 添加上一层权限保护的功能，要实现这个功能，就需要我们在使用 docker login、pull、push 等命令的时候进行拦截，先进行一些权限相关的校验，再进行操作，其实这一系列的操作 &lt;code&gt;docker registry v2&lt;/code&gt; 就已经为我们提供了支持，v2 集成了一个安全认证的功能，将安全认证暴露给外部服务，让外部服务去实现。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;Harbor 认证原理&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;上面我们说了 &lt;code&gt;docker registry v2&lt;/code&gt; 将安全认证暴露给了外部服务使用，那么是怎样暴露的呢？我们在命令行中输入 &lt;code&gt;docker login https://registry.qikqiak.com&lt;/code&gt; 为例来为大家说明下认证流程：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;docker client 接收到用户输入的 docker login 命令，将命令转化为调用 engine api 的 RegistryLogin 方法&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;在 RegistryLogin 方法中通过 http 调用 registry 服务中的 auth 方法&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;因为我们这里使用的是 v2 版本的服务，所以会调用 loginV2 方法，在 loginV2 方法中会进行 /v2/ 接口调用，该接口会对请求进行认证&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;此时的请求中并没有包含 token 信息，认证会失败，返回 401 错误，同时会在 header 中返回去哪里请求认证的服务器地址&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;registry client 端收到上面的返回结果后，便会去返回的认证服务器那里进行认证请求，向认证服务器发送的请求的 header 中包含有加密的用户名和密码&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;认证服务器从 header 中获取到加密的用户名和密码，这个时候就可以结合实际的认证系统进行认证了，比如从数据库中查询用户认证信息或者对接 ldap 服务进行认证校验&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;认证成功后，会返回一个 token 信息，client 端会拿着返回的 token 再次向 registry 服务发送请求，这次需要带上得到的 token，请求验证成功，返回状态码就是200了&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;docker client 端接收到返回的200状态码，说明操作成功，在控制台上打印 Login Succeeded 的信息
至此，整个登录过程完成，整个过程可以用下面的流程图来说明：&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5128593040847201&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Yvo103bB3ASibU90g6nboiaJR0kbfKicXRHVDxFnA0ylSqWxricm0fNyx5RlyS8ZnB69OS8nsjXGTuNNw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1322&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;要完成上面的登录认证过程有两个关键点需要注意：怎样让 registry 服务知道服务认证地址？我们自己提供的认证服务生成的 token 为什么 registry 就能够识别？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;对于第一个问题，比较好解决，registry 服务本身就提供了一个配置文件，可以在启动 registry 服务的配置文件中指定上认证服务地址即可，其中有如下这样的一段配置信息：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;......&lt;/span&gt;&lt;br/&gt;&lt;span&gt;auth:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;token:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;realm:&lt;/span&gt; &lt;span&gt;token-realm&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;service:&lt;/span&gt; &lt;span&gt;token-service&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;issuer:&lt;/span&gt; &lt;span&gt;registry-token-issuer&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;rootcertbundle:&lt;/span&gt; &lt;span&gt;/root/certs/bundle&lt;/span&gt;&lt;br/&gt;&lt;span&gt;......&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;其中 realm 就可以用来指定一个认证服务的地址，下面我们可以看到 Harbor 中该配置的内容。&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;关于 registry 的配置，可以参考官方文档：https://docs.docker.com/registry/configuration/&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第二个问题，就是 registry 怎么能够识别我们返回的 token 文件？如果按照 registry 的要求生成一个 token，是不是 registry 就可以识别了？所以我们需要在我们的认证服务器中按照 registry 的要求生成 token，而不是随便乱生成。那么要怎么生成呢？我们可以在 docker registry 的源码中可以看到 token 是通过 &lt;code&gt;JWT（JSON Web Token）&lt;/code&gt; 来实现的，所以我们按照要求生成一个 JWT 的 token 就可以了。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;对 golang 熟悉的同学可以去 clone 下 Harbor 的代码查看下，Harbor 采用 beego 这个 web 开发框架，源码阅读起来不是特别困难。我们可以很容易看到 Harbor 中关于上面我们讲解的认证服务部分的实现方法。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.494971792985038&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Yvo103bB3ASibU90g6nboiaJR5M2ujGUwoiaOfpCZ5Fbic3Fvq6TW0SMb0w3rUNfkd1V8KRdVnYjubAGg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;4077&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;安装&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Harbor 涉及的组件比较多，我们可以使用 Helm 来安装一个高可用版本的 Harbor，也符合生产环境的部署方式。在安装高可用的版本之前，我们需要如下先决条件：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;Kubernetes 集群 1.10+ 版本&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Helm 2.8.0+ 版本&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;高可用的 Ingress 控制器&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;高可用的 PostgreSQL 9.6+（Harbor 不进行数据库 HA 的部署）&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;高可用的 Redis 服务（Harbor 不处理）&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;可以跨节点或外部对象存储共享的 PVC&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Harbor 的大部分组件都是无状态的，所以我们可以简单增加 Pod 的副本，保证组件尽量分布到多个节点上即可，在存储层，需要我们自行提供高可用的 PostgreSQL、Redis 集群来存储应用数据，以及存储镜像和 Helm Chart 的 PVC 或对象存储。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5595757953836556&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Yvo103bB3ASibU90g6nboiaJRx1hgIIp6d9nHjLJldxz5WJ7tNkNLeFAdDMvGJBMZl32C68jKtr8rBQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1603&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先添加 Chart 仓库地址：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 添加 Chart 仓库&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; helm repo add harbor https://helm.goharbor.io&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 更新&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; helm repo update&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 拉取1.9.2版本并解压&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; helm pull harbor/harbor --untar --version 1.9.2&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在安装 Harbor 的时候有很多可以配置的参数，可以在 harbor-helm 项目上进行查看，在安装的时候我们可以通过 &lt;code&gt;--set&lt;/code&gt; 指定参数或者 &lt;code&gt;values.yaml&lt;/code&gt; 直接编辑 Values 文件即可：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;Ingress&lt;/strong&gt; 配置通过 &lt;code&gt;expose.ingress.hosts.core&lt;/code&gt; 和 &lt;code&gt;expose.ingress.hosts.notary&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;外部 URL&lt;/strong&gt; 通过配置 &lt;code&gt;externalURL&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;外部 PostgreSQL&lt;/strong&gt; 通过配置 &lt;code&gt;database.type&lt;/code&gt; 为 &lt;code&gt;external&lt;/code&gt;，然后补充上 &lt;code&gt;database.external&lt;/code&gt; 的信息。需要我们手动创建3个空的数据：&lt;code&gt;Harbor core&lt;/code&gt;、&lt;code&gt;Notary server&lt;/code&gt; 以及 &lt;code&gt;Notary signer&lt;/code&gt;，Harbor 会在启动时自动创建表结构&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;外部 Redis&lt;/strong&gt; 通过配置 &lt;code&gt;redis.type&lt;/code&gt; 为 &lt;code&gt;external&lt;/code&gt;，并填充 &lt;code&gt;redis.external&lt;/code&gt; 部分的信息。Harbor 在 2.1.0 版本中引入了 redis 的 &lt;code&gt;Sentinel&lt;/code&gt; 模式，你可以通过配置 &lt;code&gt;sentinel_master_set&lt;/code&gt; 来开启，host 地址可以设置为 &lt;code&gt;&amp;lt;host_sentinel1&amp;gt;:&amp;lt;port_sentinel1&amp;gt;,&amp;lt;host_sentinel2&amp;gt;:&amp;lt;port_sentinel2&amp;gt;,&amp;lt;host_sentinel3&amp;gt;:&amp;lt;port_sentinel3&amp;gt;&lt;/code&gt;。还可以参考文档https://community.pivotal.io/s/article/How-to-setup-HAProxy-and-Redis-Sentinel-for-automatic-failover-between-Redis-Master-and-Slave-servers 在 Redis 前面配置一个 HAProxy 来暴露单个入口点。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;存储&lt;/strong&gt;，默认情况下需要一个默认的 &lt;code&gt;StorageClass&lt;/code&gt; 在 K8S 集群中来自动生成 PV，用来存储镜像、Charts 和任务日志。如果你想指定 &lt;code&gt;StorageClass&lt;/code&gt;，可以通过 &lt;code&gt;persistence.persistentVolumeClaim.registry.storageClass&lt;/code&gt;、&lt;code&gt;persistence.persistentVolumeClaim.chartmuseum.storageClass&lt;/code&gt; 以及 &lt;code&gt;persistence.persistentVolumeClaim.jobservice.storageClass&lt;/code&gt; 进行配置，另外还需要将 accessMode 设置为 &lt;code&gt;ReadWriteMany&lt;/code&gt;，确保 PV 可以跨不同节点进行共享存储。此外我们还可以通过指定存在的 PVCs 来存储数据，可以通过 &lt;code&gt;existingClaim&lt;/code&gt; 进行配置。如果你没有可以跨节点共享的 PVC，你可以使用外部存储来存储镜像和 Chart（外部存储支持：azure，gcs，s3 swift 和 oss），并将任务日志存储在数据库中。将设置为 &lt;code&gt;persistence.imageChartStorage.type&lt;/code&gt; 为你要使用的值并填充相应部分并设置 &lt;code&gt;jobservice.jobLogger&lt;/code&gt; 为 &lt;code&gt;database&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;副本&lt;/strong&gt;：通过设置 &lt;code&gt;portal.replicas&lt;/code&gt;，&lt;code&gt;core.replicas&lt;/code&gt;，&lt;code&gt;jobservice.replicas&lt;/code&gt;，&lt;code&gt;registry.replicas&lt;/code&gt;，&lt;code&gt;chartmuseum.replicas&lt;/code&gt;，&lt;code&gt;notary.server.replicas&lt;/code&gt; 和 &lt;code&gt;notary.signer.replicas&lt;/code&gt; 为 n（n&amp;gt; = 2）&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;比如这里我们将主域名配置为 &lt;code&gt;harbor.k8s.local&lt;/code&gt;，通过一个 &lt;code&gt;nfs-client&lt;/code&gt; 的 StorageClass 来提供存储，又因为前面我们在安装 GitLab 的时候就已经单独安装了 postgresql 和 reids 两个数据库，所以我们也可以配置 Harbor 使用这两个外置的数据库，这样可以降低资源的使用（我们可以认为这两个数据库都是 HA 模式）。但是使用外置的数据库我们需要提前手动创建数据库，比如我们这里使用的 GitLab 提供的数据库，则进入该 Pod 创建 &lt;code&gt;harbor&lt;/code&gt;、&lt;code&gt;notary_server&lt;/code&gt;、&lt;code&gt;notary_signer&lt;/code&gt; 这3个数据库：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; kubectl get pods -n kube-ops -l name=postgresql&lt;/span&gt;&lt;br/&gt;NAME                          READY   STATUS    RESTARTS   AGE&lt;br/&gt;postgresql-75b8447fb5-th6bw   1/1     Running   1          2d&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; kubectl &lt;span&gt;exec&lt;/span&gt; -it postgresql-75b8447fb5-th6bw /bin/bash -n kube-ops&lt;/span&gt;&lt;br/&gt;kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.&lt;br/&gt;root@postgresql-75b8447fb5-th6bw:/var/lib/postgresql# sudo su - postgres&lt;br/&gt;postgres@postgresql-75b8447fb5-th6bw:~$ psql&lt;br/&gt;psql (12.3 (Ubuntu 12.3-1.pgdg18.04+1))&lt;br/&gt;Type &quot;help&quot; for help.&lt;br/&gt;&lt;br/&gt;postgres=# CREATE DATABASE harbor OWNER postgres;&lt;br/&gt;CREATE DATABASE&lt;br/&gt;postgres=# GRANT ALL PRIVILEGES ON DATABASE harbor to postgres;&lt;br/&gt;GRANT&lt;br/&gt;postgres=# GRANT ALL PRIVILEGES ON DATABASE harbor to gitlab;&lt;br/&gt;GRANT&lt;br/&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; Todo: 用同样的方式创建其他两个数据库：notary_server、notary_signer&lt;/span&gt;&lt;br/&gt;......&lt;br/&gt;&lt;span&gt;postgres-#&lt;/span&gt;&lt;span&gt; \q  &lt;span&gt;# 退出&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;数据库准备过后，就可以使用我们自己定制的 values 文件来进行安装了，完整的定制的 values 文件如下所示：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;# values-prod.yaml&lt;/span&gt;&lt;br/&gt;&lt;span&gt;externalURL:&lt;/span&gt; &lt;span&gt;https://harbor.k8s.local&lt;/span&gt;&lt;br/&gt;&lt;span&gt;harborAdminPassword:&lt;/span&gt; &lt;span&gt;Harbor12345&lt;/span&gt;&lt;br/&gt;&lt;span&gt;logLevel:&lt;/span&gt; &lt;span&gt;debug&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;expose:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;type:&lt;/span&gt; &lt;span&gt;ingress&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;tls:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;enabled:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;ingress:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;className:&lt;/span&gt; &lt;span&gt;nginx&lt;/span&gt;  &lt;span&gt;# 指定 ingress class&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;hosts:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;core:&lt;/span&gt; &lt;span&gt;harbor.k8s.local&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;notary:&lt;/span&gt; &lt;span&gt;notary.k8s.local&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;persistence:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;enabled:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;resourcePolicy:&lt;/span&gt; &lt;span&gt;&quot;keep&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;persistentVolumeClaim:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;registry:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;# 如果需要做高可用，多个副本的组件则需要使用支持 ReadWriteMany 的后端&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;# 这里我们使用nfs，生产环境不建议使用nfs&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;storageClass:&lt;/span&gt; &lt;span&gt;&quot;nfs-client&quot;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;# 如果是高可用的，多个副本组件需要使用 ReadWriteMany，默认为 ReadWriteOnce&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;accessMode:&lt;/span&gt; &lt;span&gt;ReadWriteMany&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;size:&lt;/span&gt; &lt;span&gt;5Gi&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;chartmuseum:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;storageClass:&lt;/span&gt; &lt;span&gt;&quot;nfs-client&quot;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;accessMode:&lt;/span&gt; &lt;span&gt;ReadWriteMany&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;size:&lt;/span&gt; &lt;span&gt;5Gi&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;jobservice:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;storageClass:&lt;/span&gt; &lt;span&gt;&quot;nfs-client&quot;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;accessMode:&lt;/span&gt; &lt;span&gt;ReadWriteMany&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;size:&lt;/span&gt; &lt;span&gt;1Gi&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;trivy:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;storageClass:&lt;/span&gt; &lt;span&gt;&quot;nfs-client&quot;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;accessMode:&lt;/span&gt; &lt;span&gt;ReadWriteMany&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;size:&lt;/span&gt; &lt;span&gt;2Gi&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;database:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;type:&lt;/span&gt; &lt;span&gt;external&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;external:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;host:&lt;/span&gt; &lt;span&gt;&quot;postgresql.kube-ops.svc.cluster.local&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;port:&lt;/span&gt; &lt;span&gt;&quot;5432&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;username:&lt;/span&gt; &lt;span&gt;&quot;gitlab&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;password:&lt;/span&gt; &lt;span&gt;&quot;passw0rd&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;coreDatabase:&lt;/span&gt; &lt;span&gt;&quot;harbor&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;notaryServerDatabase:&lt;/span&gt; &lt;span&gt;&quot;notary_server&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;notarySignerDatabase:&lt;/span&gt; &lt;span&gt;&quot;notary_signer&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;redis:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;type:&lt;/span&gt; &lt;span&gt;external&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;external:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;addr:&lt;/span&gt; &lt;span&gt;&quot;redis.kube-ops.svc.cluster.local:6379&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;# 默认为一个副本，如果要做高可用，只需要设置为 replicas &amp;gt;= 2 即可&lt;/span&gt;&lt;br/&gt;&lt;span&gt;portal:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;core:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;jobservice:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;registry:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;chartmuseum:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;trivy:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;notary:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;server:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;signer:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这些配置信息都是根据 Harbor 的 Chart 包默认的 values 值进行覆盖的，现在我们直接安装即可：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; &lt;span&gt;cd&lt;/span&gt; harbor&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; helm upgrade --install harbor . -f values-prod.yaml -n kube-ops&lt;/span&gt;&lt;br/&gt;Release &quot;harbor&quot; does not exist. Installing it now.&lt;br/&gt;NAME: harbor&lt;br/&gt;LAST DEPLOYED: Thu Jul  7 17:31:43 2022&lt;br/&gt;NAMESPACE: kube-ops&lt;br/&gt;STATUS: deployed&lt;br/&gt;REVISION: 1&lt;br/&gt;TEST SUITE: None&lt;br/&gt;NOTES:&lt;br/&gt;Please wait for several minutes for Harbor deployment to complete.&lt;br/&gt;Then you should be able to visit the Harbor portal at https://harbor.k8s.local&lt;br/&gt;For more details, please visit https://github.com/goharbor/harbor&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;正常情况下隔一会儿就可以安装成功了：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; helm ls -n kube-ops&lt;/span&gt;&lt;br/&gt;NAME    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART           APP VERSION&lt;br/&gt;harbor  kube-ops        1               2022-07-07 17:31:43.083547 +0800 CST    deployed        harbor-1.9.2    2.5.2&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; kubectl get pods -n kube-ops -l app=harbor&lt;/span&gt;&lt;br/&gt;NAME                                    READY   STATUS    RESTARTS      AGE&lt;br/&gt;harbor-chartmuseum-544ddbcb64-nvk7w     1/1     Running   0             30m&lt;br/&gt;harbor-core-7fd9964685-lqqw2            1/1     Running   0             30m&lt;br/&gt;harbor-jobservice-6dbd89c59-vvzx5       1/1     Running   0             30m&lt;br/&gt;harbor-notary-server-764b8859bf-82f5q   1/1     Running   0             30m&lt;br/&gt;harbor-notary-signer-869d9bf585-kbwwg   1/1     Running   0             30m&lt;br/&gt;harbor-portal-74db6bb688-2w79p          1/1     Running   0             35m&lt;br/&gt;harbor-registry-695db89bfd-v9wwt        2/2     Running   0             30m&lt;br/&gt;harbor-trivy-0                          1/1     Running   0             35m&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;安装完成后，我们就可以将域名 &lt;code&gt;harbor.k8s.local&lt;/code&gt; 解析到 Ingress Controller 流量入口点，然后就可以通过该域名在浏览器中访问了：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; kubectl get ingress -n kube-ops&lt;/span&gt;&lt;br/&gt;NAME                                      CLASS         HOSTS                                               ADDRESS         PORTS     AGE&lt;br/&gt;harbor-ingress                            nginx         harbor.k8s.local                                                    80, 443   12s&lt;br/&gt;harbor-ingress-notary                     nginx         notary.k8s.local                                                    80, 443   12s&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;用户名使用默认的 admin，密码则是上面配置的默认 &lt;code&gt;Harbor12345&lt;/code&gt;，需要注意的是要使用 https 进行访问（默认也会跳转到 https），否则登录可能提示用户名或密码错误：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6243386243386243&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Yvo103bB3ASibU90g6nboiaJRAbUfbGoqfCDcb7miaqpkFdh2cZ7dRib6j0ibySdPQjV88eoR4BBDK8peA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;3024&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;登录过后即可进入 Harbor 的 Dashboard 页面：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6243386243386243&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Yvo103bB3ASibU90g6nboiaJR1zibD0p4qlChwzgChuSh9icL3yLc8vKLDUJmibuj07hBfABtzIj1iaPVnw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;3024&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们可以看到有很多功能，默认情况下会有一个名叫 &lt;code&gt;library&lt;/code&gt; 的项目，该项目默认是公开访问权限的，进入项目可以看到里面还有 &lt;code&gt;Helm Chart&lt;/code&gt; 包的管理，可以手动在这里上传，也可以对该项目里面的镜像进行一些其他配置。&lt;mpcpc js_editor_cpcad=&quot;&quot; class=&quot;js_cpc_area cpc_iframe&quot; src=&quot;/cgi-bin/readtemplate?t=tmpl/cpc_tmpl#1657265233644&quot; data-category_id_list=&quot;1|16|17|2|21|24|28|29|31|35|36|37|39|41|42|43|46|47|48|5|50|51|55|56|57|58|59|6|60|61|62|63|64|65|66|7|8&quot; data-id=&quot;1657265233644&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;推送镜像&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;接下来我们来测试下如何在 containerd 中使用 Harbor 镜像仓库。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先我们需要将私有镜像仓库配置到 containerd 中去，修改 containerd 的配置文件 &lt;code&gt;/etc/containerd/config.toml&lt;/code&gt;：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry]&lt;br/&gt;  [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors]&lt;br/&gt;    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors.&quot;docker.io&quot;]&lt;br/&gt;      endpoint = [&quot;https://bqr1dr1n.mirror.aliyuncs.com&quot;]&lt;br/&gt;  [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.configs]&lt;br/&gt;    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.configs.&quot;harbor.k8s.local&quot;.tls]&lt;br/&gt;      insecure_skip_verify = true&lt;br/&gt;    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.configs.&quot;harbor.k8s.local&quot;.auth]&lt;br/&gt;      username = &quot;admin&quot;&lt;br/&gt;      password = &quot;Harbor12345&quot;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 &lt;code&gt;plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.configs&lt;/code&gt; 下面添加对应 &lt;code&gt;harbor.k8s.local&lt;/code&gt; 的配置信息，&lt;code&gt;insecure_skip_verify = true&lt;/code&gt; 表示跳过安全校验，然后通过 &lt;code&gt;plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.configs.&quot;harbor.k8s.local&quot;.auth&lt;/code&gt; 配置 Harbor 镜像仓库的用户名和密码。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;配置完成后重启 containerd：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; systemctl restart containerd&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;现在我们使用 &lt;code&gt;nerdctl&lt;/code&gt; 来进行登录：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; nerdctl login -u admin harbor.k8s.local&lt;/span&gt;&lt;br/&gt;Enter Password:&lt;br/&gt;ERRO[0004] failed to call tryLoginWithRegHost            error=&quot;failed to call rh.Client.Do: Get \&quot;https://harbor.k8s.local/v2/\&quot;: x509: certificate signed by unknown authority&quot; i=0&lt;br/&gt;FATA[0004] failed to call rh.Client.Do: Get &quot;https://harbor.k8s.local/v2/&quot;: x509: certificate signed by unknown authority&lt;br/&gt;[root@master1 ~]#&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;可以看到还是会报证书相关的错误，只需要添加一个 &lt;code&gt;--insecure-registry&lt;/code&gt; 参数即可解决该问题：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; nerdctl login -u admin --insecure-registry harbor.k8s.local&lt;/span&gt;&lt;br/&gt;Enter Password:&lt;br/&gt;WARN[0004] skipping verifying HTTPS certs for &quot;harbor.k8s.local&quot;&lt;br/&gt;WARNING: Your password will be stored unencrypted in /root/.docker/config.json.&lt;br/&gt;Configure a credential helper to remove this warning. See&lt;br/&gt;https://docs.docker.com/engine/reference/commandline/login/#credentials-store&lt;br/&gt;&lt;br/&gt;Login Succeeded&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;然后我们先随便拉一个镜像：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; nerdctl pull busybox:1.35.0&lt;/span&gt;&lt;br/&gt;docker.io/library/busybox:1.35.0:                                                 resolved       |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;index-sha256:8c40df61d40166f5791f44b3d90b77b4c7f59ed39a992fd9046886d3126ffa68:    done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;manifest-sha256:8cde9b8065696b65d7b7ffaefbab0262d47a5a9852bfd849799559d296d2e0cd: done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;config-sha256:d8c0f97fc6a6ac400e43342e67d06222b27cecdb076cbf8a87f3a2a25effe81c:   done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;layer-sha256:fc0cda0e09ab32c72c61d272bb409da4e2f73165c7bf584226880c9b85438e63:    done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;elapsed: 83.7s&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;然后将该镜像重新 tag 成 Harbor 上的镜像地址：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; nerdctl tag busybox:1.35.0 harbor.k8s.local/library/busybox:1.35.0&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;再执行 push 命令即可将镜像推送到 Harbor 上：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; nerdctl push --insecure-registry harbor.k8s.local/library/busybox:1.35.0&lt;/span&gt;&lt;br/&gt;INFO[0000] pushing as a reduced-platform image (application/vnd.docker.distribution.manifest.list.v2+json, sha256:29fe0126b13c3ea2641ca42c450fa69583d212dbd9b7b623814977b5b0945726)&lt;br/&gt;WARN[0000] skipping verifying HTTPS certs for &quot;harbor.k8s.local&quot;&lt;br/&gt;index-sha256:29fe0126b13c3ea2641ca42c450fa69583d212dbd9b7b623814977b5b0945726:    done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;manifest-sha256:8cde9b8065696b65d7b7ffaefbab0262d47a5a9852bfd849799559d296d2e0cd: done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;config-sha256:d8c0f97fc6a6ac400e43342e67d06222b27cecdb076cbf8a87f3a2a25effe81c:   done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;elapsed: 6.9 s                                                                    total:  2.2 Ki (333.0 B/s)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;推送完成后，我们就可以在 Portal 页面上看到这个镜像的信息了：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5625&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Yvo103bB3ASibU90g6nboiaJRiaabWNyRKKxlbLvqoPdNUtaJJBw0CK0n7JzWk9DdU4tnOfxIwqSVgicg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;镜像 push 成功，同样可以测试下 pull：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; nerdctl rmi harbor.k8s.local/library/busybox:1.35.0&lt;/span&gt;&lt;br/&gt;Untagged: harbor.k8s.local/library/busybox:1.35.0@sha256:8c40df61d40166f5791f44b3d90b77b4c7f59ed39a992fd9046886d3126ffa68&lt;br/&gt;Deleted: sha256:cf4ac4fc01444f1324571ceb0d4f175604a8341119d9bb42bc4b2cb431a7f3a5&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; nerdctl rmi busybox:1.35.0&lt;/span&gt;&lt;br/&gt;Untagged: docker.io/library/busybox:1.35.0@sha256:8c40df61d40166f5791f44b3d90b77b4c7f59ed39a992fd9046886d3126ffa68&lt;br/&gt;Deleted: sha256:cf4ac4fc01444f1324571ceb0d4f175604a8341119d9bb42bc4b2cb431a7f3a5&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; nerdctl pull --insecure-registry  harbor.k8s.local/library/busybox:1.35.0&lt;/span&gt;&lt;br/&gt;WARN[0000] skipping verifying HTTPS certs for &quot;harbor.k8s.local&quot;&lt;br/&gt;harbor.k8s.local/library/busybox:1.35.0:                                          resolved       |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;index-sha256:29fe0126b13c3ea2641ca42c450fa69583d212dbd9b7b623814977b5b0945726:    done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;manifest-sha256:8cde9b8065696b65d7b7ffaefbab0262d47a5a9852bfd849799559d296d2e0cd: done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;config-sha256:d8c0f97fc6a6ac400e43342e67d06222b27cecdb076cbf8a87f3a2a25effe81c:   done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;layer-sha256:fc0cda0e09ab32c72c61d272bb409da4e2f73165c7bf584226880c9b85438e63:    done           |++++++++++++++++++++++++++++++++++++++|&lt;br/&gt;elapsed: 0.7 s                                                                    total:  2.2 Ki (3.2 KiB/s)&lt;br/&gt;&lt;span&gt;&lt;br/&gt;$&lt;/span&gt;&lt;span&gt; nerdctl images&lt;/span&gt;&lt;br/&gt;REPOSITORY                          TAG       IMAGE ID        CREATED           PLATFORM       SIZE         BLOB SIZE&lt;br/&gt;harbor.k8s.local/library/busybox    1.35.0    29fe0126b13c    17 seconds ago    linux/amd64    1.2 MiB      757.7 KiB&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;但是上面我们也可以看到单独使用 containerd 比如&lt;strong&gt;通过 nerdctl 或者 ctr 命令访问 Harbor 镜像仓库的时候即使跳过证书校验或者配置上 CA 证书也是会出现证书错误的&lt;/strong&gt;，这个时候我们需要去跳过证书校验或者指定证书路径才行。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 解决办法1.指定 -k 参数跳过证书校验。&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; ctr images pull --user admin:Harbor12345 -k harbor.k8s.local/library/busybox:1.35.0&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;br/&gt;#&lt;/span&gt;&lt;span&gt; 解决办法2.指定CA证书、Harbor 相关证书文件路径。&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; ctr images pull --user admin:Harbor12345 --tlscacert ca.crt harbor.k8s.local/library/busybox:1.35.0&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;但是如果直接使用 &lt;code&gt;ctrctl&lt;/code&gt; 则是有效的：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; crictl pull harbor.k8s.local/library/busybox@sha256:29fe0126b13c3ea2641ca42c450fa69583d212dbd9b7b623814977b5b0945726&lt;/span&gt;&lt;br/&gt;Image is up to date for sha256:d8c0f97fc6a6ac400e43342e67d06222b27cecdb076cbf8a87f3a2a25effe81c&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果想要在 Kubernetes 中去使用那么就需要将 Harbor 的认证信息以 Secret 的形式添加到集群中去：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; kubectl create secret docker-registry harbor-auth --docker-server=https://harbor.k8s.local --docker-username=admin --docker-password=Harbor12345 --docker-email=info@ydzs.io -n default&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;然后我们使用上面的私有镜像仓库来创建一个 Pod：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;# test-harbor.yaml&lt;/span&gt;&lt;br/&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;v1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;Pod&lt;/span&gt;&lt;br/&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;harbor-registry-test&lt;/span&gt;&lt;br/&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;containers:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;test&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;image:&lt;/span&gt; &lt;span&gt;harbor.k8s.local/library/busybox:1.35.0&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;args:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;-&lt;/span&gt; &lt;span&gt;sleep&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;-&lt;/span&gt; &lt;span&gt;&quot;3600&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;imagePullSecrets:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;harbor-auth&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;创建后可以查看该 Pod 是否能正常获取镜像：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; kubectl describe pod harbor-registry-test&lt;/span&gt;&lt;br/&gt;Name:         harbor-registry-test&lt;br/&gt;Namespace:    default&lt;br/&gt;Priority:     0&lt;br/&gt;Node:         node1/192.168.0.107&lt;br/&gt;Start Time:   Thu, 07 Jul 2022 18:52:39 +0800&lt;br/&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; ......&lt;/span&gt;&lt;br/&gt;Events:&lt;br/&gt;  Type    Reason     Age   From               Message&lt;br/&gt;  ----    ------     ----  ----               -------&lt;br/&gt;  Normal  Scheduled  10s   default-scheduler  Successfully assigned default/harbor-registry-test to node1&lt;br/&gt;  Normal  Pulling    10s   kubelet            Pulling image &quot;harbor.k8s.local/library/busybox:1.35.0&quot;&lt;br/&gt;  Normal  Pulled     5s    kubelet            Successfully pulled image &quot;harbor.k8s.local/library/busybox:1.35.0&quot; in 4.670528883s&lt;br/&gt;  Normal  Created    5s    kubelet            Created container test&lt;br/&gt;  Normal  Started    5s    kubelet            Started container test&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;到这里证明上面我们的私有镜像仓库搭建成功了，大家可以尝试去创建一个私有的项目，然后创建一个新的用户，使用这个用户来进行 pull/push 镜像，Harbor 还具有其他的一些功能，比如镜像复制，Helm Chart 包托管等等，大家可以自行测试，感受下 Harbor 和官方自带的 registry 仓库的差别。&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>