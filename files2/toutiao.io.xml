<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>42ca5da9f06444b7c860707ecfd590b5</guid>
<title>纯Docker部署Https服务——以Nextcloud为例</title>
<link>https://toutiao.io/k/v7hy6ct</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section class=&quot;toc-content post tag-linux tag-docker tag-https no-image&quot;&gt;
      &lt;h2 id=&quot;%E8%83%8C%E6%99%AF&quot;&gt;背景&lt;/h2&gt;&lt;p&gt;近期阿里云的廉价学生机小水管到期了，打算把一些服务打包迁移到微软员工不要钱的azure云上。&lt;/p&gt;&lt;p&gt;原先各种服务的部署方式都是直接部署的，换主机需要重新搭建各种环境非常麻烦，也容易遗漏。于是就想跟随潮流把这些服务都上docker，能够做到部署一把梭。&lt;/p&gt;&lt;h2 id=&quot;%E9%9A%BE%E7%82%B9&quot;&gt;难点&lt;/h2&gt;&lt;p&gt;一般的开源组件都会有官方docker镜像，部署起来其实都很方便。大部分对着官方文档改改配置再用docker-compose组合一下参数就能跑起来。比较麻烦的点就是网站要部署成 https 的话需要 SSL 证书。对于个人使用的小网站来说，云厂商的 SSL 证书又实在是比较贵（阿里云上通配符域名大概2000¥/年，单域名也要400¥/年）。&lt;/p&gt;&lt;p&gt;比较经济实惠的做法是使用 &lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Let’s Encrypt&lt;/a&gt; 的免费证书，不过代价就是他需要定时check你对这个域名的所有权。显然，我们肯定不能手动更新，那样简直要疯。一般我们会用 &lt;a href=&quot;https://certbot.eff.org/&quot;&gt;certbot&lt;/a&gt; 来定时进行站点所有权的确认。经常对接站长后台工具的人应该都知道，认证的方式一般有两种：一种是将给定的验证字符串写进 DNS 的 TXT 记录，从而确认你对这个&lt;strong&gt;域名&lt;/strong&gt;的所有权；第二种是将给定的验证字符串写在网站的给定目录下，从而确认你对这个&lt;strong&gt;网站&lt;/strong&gt;的所有权。&lt;/p&gt;&lt;p&gt;理论上最方便的做法是通过一个定时任务，定时调用 DNS 服务商的接口来改 TXT 记录。这样可以做到将 SSL 证书的校验和网站本身的部署分离开，使得校验所有权的逻辑不干扰正常的网站配置。不过尴尬的是 certbot 提供的 &lt;a href=&quot;https://eff-certbot.readthedocs.io/en/stable/using.html#dns-plugins&quot;&gt;DNS插件&lt;/a&gt; 基本都不包含国内的运营商。而考虑到域名在国内解析的性能，我还是不太想把域名切到国外的服务商去。&lt;/p&gt;&lt;p&gt;因此事实上我只能采用 webroot 的方式来认证。这个方式比较万金油，不过缺点就是不支持通配符域名，如果需要同时验证多个子域名，则需要手动添加。同时，传统的 certbot 使用方式中一定还需要在系统中配置一个 crontab 任务来做更新，而我现在则希望将这个 crontab 任务也集成在 docker 中，尽量不要对除 docker 外的逻辑做任何感知。&lt;/p&gt;&lt;h2 id=&quot;%E6%AD%A5%E9%AA%A4&quot;&gt;步骤&lt;/h2&gt;&lt;p&gt;逻辑上讲，步骤大致应当如下：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;去 DNS 服务商提供的配置后台，将给定域名配置好A记录指向目的主机。&lt;/li&gt;&lt;li&gt;安装 &lt;a href=&quot;https://docs.docker.com/engine/install/ubuntu/&quot;&gt;docker&lt;/a&gt;  &lt;a href=&quot;https://docs.docker.com/compose/install/&quot;&gt;docker-compose&lt;/a&gt; ，并设置好配置文件。&lt;/li&gt;&lt;li&gt;配置并启动 nginx 只开放 http 端口 ，准备 certbot 的认证环境。&lt;/li&gt;&lt;li&gt;启动 certbot 初始化，配合nginx，生成首个私钥和证书链。&lt;/li&gt;&lt;li&gt;利用 certbot 提供的私钥和证书，配置 nginx 的 https 端口。&lt;/li&gt;&lt;li&gt;配置 certbot 的自动 renew ，进行自动验证。&lt;/li&gt;&lt;/ol&gt;&lt;h2 id=&quot;%E6%A0%B7%E4%BE%8B&quot;&gt;样例&lt;/h2&gt;&lt;p&gt;下面以在 &lt;code&gt;https://pan.mythsman.com&lt;/code&gt; 下配置 &lt;a href=&quot;https://nextcloud.com/&quot;&gt;nextcloud&lt;/a&gt; 为例。 DNS 配置、docker 和 docker-compose 安装等步骤略过。&lt;/p&gt;&lt;h3 id=&quot;%E5%88%9D%E5%A7%8B%E5%8C%96docker%E9%85%8D%E7%BD%AE&quot;&gt;初始化docker配置&lt;/h3&gt;&lt;p&gt;./docker-compose.yml&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;version: &quot;3.8&quot;
services:
    nginx:
        container_name: nginx
        image: nginx:latest
        restart: always
        volumes:
            - ./nginx/logs:/var/log/nginx
            - ./nginx/conf.d:/etc/nginx/conf.d
            - ./certbot/conf:/etc/nginx/ssl
            - ./certbot/data:/var/www/certbot
        ports:
            - &quot;80:80&quot;
            - &quot;443:443&quot;
        command: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;while :;do sleep 24h &amp;amp; wait $${!}; nginx -s reload; done &amp;amp; nginx -g \&quot;daemon off;\&quot;&quot;]

    certbot:
        container_name: certbot
        image: certbot/certbot:latest
        command: certonly --webroot --webroot-path=/var/www/certbot --agree-tos --email mythsman@foxmail.com -d  pan.mythsman.com
        # entrypoint: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;trap exit TERM;while :; do certbot renew --webroot -w /var/www/certbot; sleep 24h &amp;amp; wait $${!}; done;&quot;]
        volumes:
            - ./certbot/conf:/etc/letsencrypt
            - ./certbot/logs:/var/log/letsencrypt
            - ./certbot/data:/var/www/certbot&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;说明：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;./certbot/conf 目录存放的即是 certbot 生成的证书等一大堆文件，因此需要挂载给 nginx 。&lt;/li&gt;&lt;li&gt;./certbot/logs 目录下存放的是证书创建相关的日志。&lt;/li&gt;&lt;li&gt;./certbot/data 目录是 certbot 用来存放校验字符串的，需要通过nginx对外网暴露，因此也需要挂在给 nginx。&lt;/li&gt;&lt;li&gt;./nginx/logs 目录存放的即是 nginx 的相关日志。&lt;/li&gt;&lt;li&gt;./nginx/conf.d 目录存放 nginx 的配置，下面会介绍。&lt;/li&gt;&lt;li&gt;nginx 的 command 指令写了一个小脚本，用来让 nginx 定时自动 reload，方便 certbot 刷新证书后 nginx 能及时更新。&lt;/li&gt;&lt;li&gt;certbot 的 command 指令中需要配置接受邮箱，用来接受一些通知消息，以及需要配置的域名 &lt;code&gt;pan.mythsman.com&lt;/code&gt; 。&lt;/li&gt;&lt;li&gt;certbot 的 entrypoint 指令是用来后续 renew 的，暂时注释掉。&lt;/li&gt;&lt;/ol&gt;&lt;h3 id=&quot;%E5%88%9D%E5%A7%8B%E5%8C%96nginx%E9%85%8D%E7%BD%AE&quot;&gt;初始化nginx配置&lt;/h3&gt;&lt;p&gt;./nginx/conf.d/default.conf&lt;/p&gt;&lt;pre&gt;&lt;code&gt;server {
     listen [::]:80 default_server;
     listen 80 default_server;

     server_name _;

     location ~ /.well-known/acme-challenge {
         allow all;
         root /var/www/certbot;
     }

     location / {
         if ( $host = &quot;pan.mythsman.com&quot; ){
             return 301 https://pan.mythsman.com$request_uri;
         }
         return 444;
     }

}

server {
       listen 443 default_server;
       listen [::]:443 default_server;
       server_name _;
       ssl_reject_handshake on;
       ssl_session_tickets off;
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;说明：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;这里最关键的是 &lt;code&gt;.well-known&lt;/code&gt; 行，用来关联 certbot 的校验文件。&lt;/li&gt;&lt;li&gt;&lt;code&gt;return 444&lt;/code&gt; 是用来拒绝掉一些未知域名的http访问。&lt;/li&gt;&lt;li&gt;&lt;code&gt;ssl_reject_handshake&lt;/code&gt; 是用来拒绝掉一些未知域名的https的访问。&lt;/li&gt;&lt;/ol&gt;&lt;h3 id=&quot;%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6&quot;&gt;生成证书&lt;/h3&gt;&lt;p&gt;执行 &lt;code&gt;docker-compose up -d&lt;/code&gt; ，证书生成成功后会在 &lt;code&gt;./certbot/logs/letsencrypt.log&lt;/code&gt; 打印相关日志:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;2022-03-09 03:41:39,879:DEBUG:certbot._internal.storage:Creating directory /etc/letsencrypt/archive.
2022-03-09 03:41:39,879:DEBUG:certbot._internal.storage:Creating directory /etc/letsencrypt/live.
2022-03-09 03:41:39,879:DEBUG:certbot._internal.storage:Writing README to /etc/letsencrypt/live/README.
2022-03-09 03:41:39,879:DEBUG:certbot._internal.storage:Creating directory /etc/letsencrypt/archive/pan.mythsman.com.
2022-03-09 03:41:39,879:DEBUG:certbot._internal.storage:Creating directory /etc/letsencrypt/live/pan.mythsman.com.
2022-03-09 03:41:39,880:DEBUG:certbot._internal.storage:Writing certificate to /etc/letsencrypt/live/pan.mythsman.com/cert.pem.
2022-03-09 03:41:39,880:DEBUG:certbot._internal.storage:Writing private key to /etc/letsencrypt/live/pan.mythsman.com/privkey.pem.
2022-03-09 03:41:39,880:DEBUG:certbot._internal.storage:Writing chain to /etc/letsencrypt/live/pan.mythsman.com/chain.pem.
2022-03-09 03:41:39,880:DEBUG:certbot._internal.storage:Writing full chain to /etc/letsencrypt/live/pan.mythsman.com/fullchain.pem.
2022-03-09 03:41:39,880:DEBUG:certbot._internal.storage:Writing README to /etc/letsencrypt/live/pan.mythsman.com/README.
2022-03-09 03:41:39,909:DEBUG:certbot._internal.plugins.selection:Requested authenticator webroot and installer &amp;lt;certbot._internal.cli.cli_utils._Default object at 0x7f94027a1370&amp;gt;
2022-03-09 03:41:39,909:DEBUG:certbot._internal.cli:Var authenticator=webroot (set by user).
2022-03-09 03:41:39,909:DEBUG:certbot._internal.cli:Var webroot_path=/var/www/certbot (set by user).
2022-03-09 03:41:39,909:DEBUG:certbot._internal.cli:Var webroot_path=/var/www/certbot (set by user).
2022-03-09 03:41:39,909:DEBUG:certbot._internal.cli:Var webroot_map={&#x27;webroot_path&#x27;} (set by user).
2022-03-09 03:41:39,909:DEBUG:certbot._internal.storage:Writing new config /etc/letsencrypt/renewal/pan.mythsman.com.conf.
2022-03-09 03:41:39,911:DEBUG:certbot._internal.display.obj:Notifying user:
Successfully received certificate.
Certificate is saved at: /etc/letsencrypt/live/pan.mythsman.com/fullchain.pem
Key is saved at:         /etc/letsencrypt/live/pan.mythsman.com/privkey.pem
This certificate expires on 2022-06-07.
These files will be updated when the certificate renews.
2022-03-09 03:41:39,911:DEBUG:certbot._internal.display.obj:Notifying user: NEXT STEPS:
2022-03-09 03:41:39,912:DEBUG:certbot._internal.display.obj:Notifying user: - The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.
2022-03-09 03:41:39,913:DEBUG:certbot._internal.display.obj:Notifying user: If you like Certbot, please consider supporting our work by:
 * Donating to ISRG / Let&#x27;s Encrypt:   https://letsencrypt.org/donate
 * Donating to EFF:                    https://eff.org/donate-le&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;也可以通过 nginx 的访问日志 &lt;code&gt;/nginx/logs/access.log&lt;/code&gt;  查看他在校验的过程中访问了哪些页面:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;3.120.130.29 - - [09/Mar/2022:03:41:36 +0000] &quot;GET /.well-known/acme-challenge/fNVMV-CtDCdq_eAdiaV0rF_J7I-ZW38M7Bo3UqEtOY4 HTTP/1.1&quot; 200 87 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Let&#x27;s Encrypt validation server; +https://www.letsencrypt.org)&quot; &quot;-&quot;
3.19.56.43 - - [09/Mar/2022:03:41:36 +0000] &quot;GET /.well-known/acme-challenge/fNVMV-CtDCdq_eAdiaV0rF_J7I-ZW38M7Bo3UqEtOY4 HTTP/1.1&quot; 200 87 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Let&#x27;s Encrypt validation server; +https://www.letsencrypt.org)&quot; &quot;-&quot;
34.221.255.206 - - [09/Mar/2022:03:41:36 +0000] &quot;GET /.well-known/acme-challenge/fNVMV-CtDCdq_eAdiaV0rF_J7I-ZW38M7Bo3UqEtOY4 HTTP/1.1&quot; 200 87 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Let&#x27;s Encrypt validation server; +https://www.letsencrypt.org)&quot; &quot;-&quot;
64.78.149.164 - - [09/Mar/2022:03:41:36 +0000] &quot;GET /.well-known/acme-challenge/fNVMV-CtDCdq_eAdiaV0rF_J7I-ZW38M7Bo3UqEtOY4 HTTP/1.1&quot; 200 87 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Let&#x27;s Encrypt validation server; +https://www.letsencrypt.org)&quot; &quot;-&quot;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;%E9%85%8D%E7%BD%AE%E7%AB%99%E7%82%B9%E5%AE%B9%E5%99%A8%E5%92%8C%E8%AF%81%E4%B9%A6%E6%9B%B4%E6%96%B0&quot;&gt;配置站点容器和证书更新&lt;/h3&gt;&lt;p&gt;./docker-compose.yml&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;version: &quot;3.8&quot;
services:
    nginx:
        container_name: nginx
        image: nginx:latest
        restart: always
        volumes:
            - ./nginx/logs:/var/log/nginx
            - ./nginx/conf.d:/etc/nginx/conf.d
            - ./certbot/conf:/etc/nginx/ssl
            - ./certbot/data:/var/www/certbot
        ports:
            - &quot;80:80&quot;
            - &quot;443:443&quot;
        command: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;while :;do sleep 24h &amp;amp; wait $${!}; nginx -s reload; done &amp;amp; nginx -g \&quot;daemon off;\&quot;&quot;]

    certbot:
        container_name: certbot
        image: certbot/certbot:latest
        # command: certonly --webroot --webroot-path=/var/www/certbot --agree-tos --email mythsman@foxmail.com -d  pan.mythsman.com
        entrypoint: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;trap exit TERM;while :; do certbot renew --webroot -w /var/www/certbot; sleep 24h &amp;amp; wait $${!}; done;&quot;]
        volumes:
            - ./certbot/conf:/etc/letsencrypt
            - ./certbot/logs:/var/log/letsencrypt
            - ./certbot/data:/var/www/certbot
    nextcloud:
        container_name: nextcloud
        image: nextcloud:latest
        volumes:
            - ./nextcloud:/var/www/html
        ports:
            - &quot;8080:80&quot;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;说明：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;这里将 cerbot 的 command 注释掉，更换了 entrypoint 的启动脚本，用来每天自动更新 cerbot 证书。&lt;/li&gt;&lt;li&gt;新增了 nextcloud 的镜像。&lt;/li&gt;&lt;/ol&gt;&lt;h3 id=&quot;%E9%85%8D%E7%BD%AE%E7%AB%99%E7%82%B9%E7%9A%84nginx&quot;&gt;配置站点的Nginx&lt;/h3&gt;&lt;p&gt;./nginx/conf.d/pan.mythsman.com-ssl.conf&lt;/p&gt;&lt;pre&gt;&lt;code&gt;server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;

    server_name pan.mythsman.com;

    ssl_certificate /etc/nginx/ssl/live/pan.mythsman.com/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/pan.mythsman.com/privkey.pem;

    ssl_stapling on;
    ssl_stapling_verify on;

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header Host $http_host;
        proxy_pass http://172.17.0.1:8080;
    }

    client_max_body_size 10G;

}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;说明：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;proxy_pass 中的 172.17.0.1 为 host 主机在 docker 中访问的 ip，8080端口暴露的即为前文设置的 nextcloud 的服务。&lt;/li&gt;&lt;li&gt;ssl_certificate 和 ssl_certificate_key 配置为前文 certbot 生成的文件。&lt;/li&gt;&lt;li&gt;&lt;code&gt;client_max_body_size 10G;&lt;/code&gt; 配置是增大上传文件的大小限制。&lt;/li&gt;&lt;/ol&gt;&lt;h3 id=&quot;%E9%87%8D%E6%96%B0%E9%83%A8%E7%BD%B2&quot;&gt;重新部署&lt;/h3&gt;&lt;p&gt;执行 &lt;code&gt;docker-compose down&lt;/code&gt; 和  &lt;code&gt;docker-compose up -d&lt;/code&gt; ，重新部署各个服务。部署完成后，可以查看 certbot 的日志：&lt;/p&gt;&lt;pre&gt;&lt;code&gt;2022-03-09 06:27:54,847:DEBUG:certbot._internal.main:certbot version: 1.24.0
2022-03-09 06:27:54,848:DEBUG:certbot._internal.main:Location of certbot entry point: /usr/local/bin/certbot
2022-03-09 06:27:54,848:DEBUG:certbot._internal.main:Arguments: [&#x27;--webroot&#x27;, &#x27;-w&#x27;, &#x27;/var/www/certbot&#x27;]
2022-03-09 06:27:54,848:DEBUG:certbot._internal.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#manual,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2022-03-09 06:27:54,863:DEBUG:certbot._internal.log:Root logging level set at 30
2022-03-09 06:27:54,865:DEBUG:certbot._internal.display.obj:Notifying user: Processing /etc/letsencrypt/renewal/pan.mythsman.com.conf
2022-03-09 06:27:54,883:DEBUG:certbot._internal.plugins.selection:Requested authenticator webroot and installer &amp;lt;certbot._internal.cli.cli_utils._Default object at 0x7f64a6694f10&amp;gt;
2022-03-09 06:27:54,883:DEBUG:certbot._internal.cli:Var authenticator=webroot (set by user).
2022-03-09 06:27:54,883:DEBUG:certbot._internal.cli:Var webroot_path=/var/www/certbot (set by user).
2022-03-09 06:27:54,883:DEBUG:certbot._internal.cli:Var webroot_map={&#x27;webroot_path&#x27;} (set by user).
2022-03-09 06:27:54,883:DEBUG:certbot._internal.cli:Var webroot_path=/var/www/certbot (set by user).
2022-03-09 06:27:54,907:DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): r3.o.lencr.org:80
2022-03-09 06:27:55,136:DEBUG:urllib3.connectionpool:http://r3.o.lencr.org:80 &quot;POST / HTTP/1.1&quot; 200 503
2022-03-09 06:27:55,137:DEBUG:certbot.ocsp:OCSP response for certificate /etc/letsencrypt/archive/pan.mythsman.com/cert1.pem is signed by the certificate&#x27;s issuer.
2022-03-09 06:27:55,138:DEBUG:certbot.ocsp:OCSP certificate status for /etc/letsencrypt/archive/pan.mythsman.com/cert1.pem is: OCSPCertStatus.GOOD
2022-03-09 06:27:55,141:DEBUG:certbot._internal.display.obj:Notifying user: Certificate not yet due for renewal
2022-03-09 06:27:55,142:DEBUG:certbot._internal.plugins.selection:Requested authenticator webroot and installer None
2022-03-09 06:27:55,142:DEBUG:certbot._internal.display.obj:Notifying user:
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
2022-03-09 06:27:55,142:DEBUG:certbot._internal.display.obj:Notifying user: The following certificates are not due for renewal yet:
2022-03-09 06:27:55,142:DEBUG:certbot._internal.display.obj:Notifying user:   /etc/letsencrypt/live/pan.mythsman.com/fullchain.pem expires on 2022-06-07 (skipped)
2022-03-09 06:27:55,142:DEBUG:certbot._internal.display.obj:Notifying user: No renewals were attempted.
2022-03-09 06:27:55,143:DEBUG:certbot._internal.display.obj:Notifying user: - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
2022-03-09 06:27:55,143:DEBUG:certbot._internal.renewal:no renewal failures&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;没有报错说明流程就是通的，不过由于这个证书是刚申请的，离过期还很远，因此在renew的时候显示不需要更新。如果是想强制更新的话，可以在 certbot 的参数中加 &lt;code&gt;--renew-by-default&lt;/code&gt; 选项。如果想确认证书的过期时间，可以通过 openssl 命令查看：&lt;/p&gt;&lt;pre&gt;&lt;code&gt;$ openssl x509 -in cert.pem -noout -dates
notBefore=Jan 30 03:00:32 2022 GMT
notAfter=Apr 30 03:00:31 2022 GMT&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这时候访问 &lt;code&gt;pan.mythsman.com&lt;/code&gt; 即可发现 https 证书已经OK了。&lt;/p&gt;&lt;h3 id=&quot;nextcloud%E7%9A%84%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE&quot;&gt;Nextcloud的其他配置&lt;/h3&gt;&lt;p&gt;配置好 https 后，nextcloud有时还不认得自己的scheme已经是https了，这里最好需要修改一下配置。&lt;/p&gt;&lt;p&gt;&lt;code&gt;./nextcloud/config/config.php&lt;/code&gt; 新增一行：&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&#x27;overwriteprotocol&#x27; =&amp;gt; &#x27;https&#x27;,&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.rocworks.at/wordpress/?p=950&quot;&gt;Nginx &amp;amp; Certbot (Letsencrypt) via Docker&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://eff-certbot.readthedocs.io/en/stable/using.html#webroot&quot;&gt;Certbot User Guide&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://community.letsencrypt.org/t/cant-use-webroot-authenticator-needed-for-wildcard-domain/64668&quot;&gt;Can’t use webroot authenticator needed for wildcard domain&lt;/a&gt;&lt;/p&gt;
    &lt;/section&gt;
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>87366250472891b6d4394679e08b3bfa</guid>
<title>分库分表，我为什么要用Shardingsphere呢？</title>
<link>https://toutiao.io/k/naz0qrj</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.1379310344827587&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/XJlI2e4PlFCAo31qnIMbDbZYjZiaoMc13vKFLjK6kut61aP4k8Uxmzic3FzFMtZapG4jlyBmJMg0UOndMMRWaTLA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;58&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;em data-mid=&quot;&quot;/&gt;&lt;p data-mid=&quot;&quot;&gt;可以参与抽奖&lt;/p&gt;&lt;em data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/em&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.2&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibl6u6nJ01g9icia42icDbWWvO2ObicnIUHjwQKVp30YzLS8xSInYupoEXAKjYeYDibY50CgKLz6ViaDjTjuRqUqaae0w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;20&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;参与方式&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.2&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/K8beZoNWDcUm9I6ia4UU97K1XHrQx2PavruEm3xAL2W3Vd7JxrB8PLXtmT5JkwqpC9Dg9hEmtVZkY2hibnlkib0Qg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;20&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;关注公众号：35岁程序员那些事，后台回复关键词“参与抽奖”，获取抽奖链接，点击抽奖。 中奖之后，可以联系笔者的微信号或者公众号后台回复关键词“联系笔者”，获取联系方式。&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;分库分表推荐Spring Cloud Alibaba+Seata+Shardingsphere&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;分库分表是高并发系统中从可扩展性全面保障业务稳定性的最佳手段之一，当然它也有很多成熟的开源解决方案，比如Apache-Shardingsphere、Mycat和Zebra等，本小节会简单的分析下分库分表相关的生态领域。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;ShardingSphere&lt;/strong&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Apache-Shardingsphere框架整体发展经历了很多阶段，①当当网内部数据库中间件 ②Sharding-JDBC ③Sharding-Sphere ④Apache ShardingSphere。Apache-Shardingsphere拥抱开源社区并开放源码和持续技术建设，目前star 13.1k fork 4.4k，是一款非常优秀开源分布式数据库中间件。&lt;/span&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;span&gt;第一阶段：它是当当网内部应用框架ddframe中并从关系型数据库模块dd-rdb中分离出来的数据库水平分片框架，并实现透明化数据库分库分表访问。Sharding-JDBC是继dubbox和elastic-job之后，ddframe系列开源的第3个项目。&lt;/span&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;span&gt;第二阶段：在众多开源的分布式数据库中间件中，当当网的开源组件Sharding-JDBC是一个非常优秀的技术解决方案，一直以来，Sharding-JDBC定位为轻量级Java框架，在Java的JDBC层提供的额外服务。它使用客户端直连数据库，以jar包形式提供服务，无需额外部署和依赖，可理解为增强版的JDBC驱动，完全兼容JDBC和各种ORM框架。&lt;/span&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;span&gt;第三阶段：当应用场景多元化之后，仅通过JDBC 层的嵌入，难于应对更加复杂的业务场景，比如：Java 之外的异构语言、数据库管理端命令行和Consul UI等等。但是基于Proxy去模拟数据库的中间代理层的方案则更加容易支撑相应的应用场景。由于Proxy版本的出现，使得Sharding-JDBC这个名字已经不再适合，但是开源社区无法放弃过去两年多Sharding-JDBC的影响力所带来的用户沉淀。因此，还是保留了“Sharding”这个关键词。而且对于分布式数据库中间件来说，无论是分库分表、柔性事务还是数据治理，“Sharding”是这一切的起源。于是官方的开源社区将原有的Sharding-JDBC与新开发的 Sharding-Proxy 以及正在孵化中的Sharding-Sidecar一起组成了一个生态圈，将其命名为Sharding-Sphere，即 Sharding 生态圈。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;第四阶段；2018年11月10日，开源分布式数据库中间件生态圈Sharding-Sphere正式进入Apache基金会孵化器，并再次更名为Apache ShardingSphere。2019年4月23日，发布4.0.0-RC1，它是ShardingSphere进入Apache基金会后第一个Release Version。2020年4月16日，Apache基金会董事会宣布Apache ShardingSphere成功晋升为Apache顶级项目。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Mycat&lt;/strong&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Mycat 是什么？从定义和分类来看，它是一个开源的分布式数据库系统，是一个实现了 MySQL 协议的Server，前端用户可以把它看作是一个数据库代理，用MySQL 客户端工具和命令行访问，而其后端可以用 MySQL 原生（Native）协议与多个 MySQL服务器通信，也可以用 JDBC 协议与大多数主流数据库服务器通信， 其核心功能是分表分库，即将一个大表水平分割为 N 个小表，存储在后端 MySQL 服务器里或者其他数据库里。Mycat发展到目前的版本，已经不是一个单纯的 MySQL代理了，它的后端可以支持 MySQL、SQL Server、 Oracle、DB2、PostgreSQL等主流数据库，也支持 MongoDB这种新型 NoSQL方式的存储，未来它也还会支持更多类型的存储数据库。而在最终用户看来，无论是那种存储方式，在Mycat里，都是一个传统的数据库表，支持标准的 SQL语句进行数据的操作，这样一来，对前端业务系统来说，可以大幅降低开发难度，提升开发速度，在测试阶段，可以将一个表定义为任何一种 Mycat支持的存储方式，比如MySQL的 MyASIM表、内存表、或者MongoDB、LevelDB以及号称是世界上最快的内存数据库 MemSQL 上。试想一下，用户表存放在 MemSQL 上，大量读频率远超过写频率的数据如订单的快照数据存放于 InnoDB 中，一些日志数据存放于 MongoDB 中，而且还能把 Oracle 的表跟 MySQL 的表做关联查询，你是否有一种不能呼吸的感觉？而未来，还能通过 Mycat自动将一些计算分析后的数据植入到Hadoop中，并能用 Mycat+Storm/Spark Stream 引擎做大规模数据分析，看到这里，你大概明白了，Mycat是什么？Mycat就是 BigSQL，Big Data On SQL Database。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Mycat目前star 8.8k fork 3.8k，最新版本是1.6.7.6-release，社区活跃度非常高。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt; Zebra&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Zebra是一个基于JDBC API协议上开发出的高可用、高性能的数据库访问层解决方案，是美团点评内部使用的数据库访问层中间件。具有以下的功能点：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;配置&lt;/span&gt;&lt;span&gt;集中管理，动态刷&lt;/span&gt;&lt;span&gt;新；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;支持读写分离、分库分表；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;丰富的监控信息在&lt;/span&gt;&lt;span&gt;CAT&lt;/span&gt;&lt;span&gt;上展现；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;异步化数据&lt;/span&gt;&lt;span&gt;库请求，多数据源支持。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Zebra 简化了读写分离、分库分表的开发工作，使得业务方在分库分库、读写分离的情况下，依然可以像操作单个库那样去操作，屏蔽底层实现的复杂性，对业务透明。Zebra还提供了从读写分离到分库分表全生命周期的技术支持。Zebra提供的完善的监控体系帮助开发掌控数据库请求的整个链路，快速定位问题。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Zebra 目前star1.9k fork 583，最新版本是2.9.1，当然最后一次更新是2018年12月17日，社区活跃度不是很高，所以一般从技术选型的角度，优先推荐Apache-Shardingsphere或者Mycat。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;对比以上三种分库分表解决方案&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如下表，只是对比了Apache-Shardingsphere和Mycat，因为Zebra技术选型不是很多，在这里就不做横向对比。&lt;/span&gt;&lt;/p&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Apache-Shardingsphere&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Mycat&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;工作层面&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;JDBC协议&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Mysql协议/JDBC协议&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;运行方式&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Jar包或者代理客户端&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;独立服务以及代理客户端独立部署&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;开发方式&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;代码/配置改动&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;连接地址（数据源）&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;运维方式&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;无&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;管理独立服务，运维成本高&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;性能&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;高并发、高性能&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;独立服务+网络开销，存在性能损耗风险。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;功能范围&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;协议范围&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;分布式事务和数据迁移等&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;适用操作&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;OLTP&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;OLTP+OLAP&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;支持数据库&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;基于JDBC协议的数据库&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;Mysql和其他支持JDBC协议的数据库&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;分布式事务&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;支持XA和Seata AT模式&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;支持弱XA，支持XA分布式事务（1.6.5）&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;是否支持自定义sharding路由&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;支持&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;支持&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;最大支持sharding路由维度&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;2&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;1&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;支持语言&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;Java&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;支持JDBC协议的开发语言&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;动态调整数据源&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;研发/或者第三方插件支持（Mybatis-Plus）&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;添加新组合配置并重启Mycat&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span/&gt;        &lt;strong&gt;      &lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;为什么选择ShardingSphere&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;除了上述技术优势以外，主要还是ShardingSphere偏主流，比如它支持Seata，后续还会支持Nacos等，这些都和Spring Cloud Alibaba契合度非常高的，所以在选择一个技术之前，不要只看它的技术有多牛，要看是否是主流的技术趋势。&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>e66c2828bc2f18c7208bdfb3c27c3b61</guid>
<title>面试官问，Redis 是单线程还是多线程?我懵了</title>
<link>https://toutiao.io/k/kd3u5dk</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;RichText ztext Post-RichText css-hnrfcf&quot; options=&quot;[object Object]&quot;&gt;&lt;p data-pid=&quot;DOz5cV2M&quot;&gt;我们平时看到介绍 Redis 的文章，都会说 Redis 是单线程的。但是我们学习的时候，比如 Redis 的 bgsave 命令，它的作用是在后台异步保存当前数据库的数据到磁盘，那既然是异步了，肯定是由别的线程去完成的，这怎么还能说 Redis 是单线程的呢？&lt;/p&gt;&lt;p data-pid=&quot;7jL_mr2i&quot;&gt;其实通常说的 Redis 是单线程，主要是指 Redis 对外提供键值存储服务的主要流程，即网络 IO 和键值对读写是由⼀个线程来完成的。除此外 Redis 的其他功能，比如持久化、 异步删除、集群数据同步等，是由额外的线程执⾏的。在这一点上 Node 也是一样的，一般提到 Node 也是单线程的，但其实 Node 只有一个主线程是单线程，其他异步任务则由其他线程完成。这样做的原因是防止有同步代码阻塞，导致主线程被占用后影响后续的程序代码执行。&lt;/p&gt;&lt;p data-pid=&quot;H9afwmen&quot;&gt;因此，严格地说 Redis 并不是单线程。但是我们⼀般把 Redis 称为单线程高性能，这样显得 Redis 更强一些。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;Redis 为什么用单线程&lt;/b&gt;&lt;/h2&gt;&lt;p data-pid=&quot;mRleqHb6&quot;&gt;Redis 为什么用单线程？在回答这个问题前，先来看大家都很熟悉的数据库 MySQL，它使用的就是多线程。MySQL 不会每有一个连接就创建一个线程，因为线程过多会带来额外的开销，其中包括创建销毁线程的开销、调度线程的开销等，同时也会降低计算机的整体性能。这个正是多线程会遇到的难点。&lt;/p&gt;&lt;p data-pid=&quot;d326LPc6&quot;&gt;此外多线程系统中通常会存在被多线程同时访问的共享资源，比如一个共享的数据结构，当有多个进程要修改这个共享资源时，为了保证共享资源的正确性，就需要有额外的机制进行保证，而这个额外的机制，也会带来额外的开销。还是以 MySQL 举例，MySQL 引入了锁机制来解决这个问题。&lt;/p&gt;&lt;p data-pid=&quot;N1OHAy3c&quot;&gt;从上面不难看出，多线程开发中并发访问控制是⼀个难点，需要精细的设计才能处理。如果只是简单地处理，比如简单地采⽤⼀个粗粒度互斥锁，只会出现不理想的结果。即便增加了线程，系统吞吐率也不会随着线程的增加而增加，因为大部分线程还在等待获取访问共享资源的互斥锁。而且，大部分采用多线程开发引入的同步原语保护共享资源的并发访问，也会降低系统代码的易调试性和可维护性。&lt;/p&gt;&lt;p data-pid=&quot;Ao1xZBNA&quot;&gt;而正是以上这些问题，才让 Redis 采⽤了单线程模式。&lt;/p&gt;&lt;p data-pid=&quot;18UJ2Hrs&quot;&gt;看到这里大家可能有点疑惑，前面说了 Redis 不是单线程，现在我们也说了 Redis 的键值对读写操作使用采用了单线程模式，那么它的其他线程是是什么样的呢？&lt;/p&gt;&lt;h2&gt;&lt;b&gt;主进程的其它线程&lt;/b&gt;&lt;/h2&gt;&lt;p data-pid=&quot;iWbOj44Q&quot;&gt;Redis 3.0 版本后，主进程中除了主线程处理网络 IO 和命令操作外，还有 3 个辅助 BIO 线程。这 3 个 BIO 线程分别负责处理，文件关闭、AOF 缓冲数据刷新到磁盘，以及清理对象这三个任务队列，从而避免这些任务对主 IO 线程的影响。&lt;/p&gt;&lt;p data-pid=&quot;jHiYKxeo&quot;&gt;Redis 在启动时，会同时启动这三个 BIO 线程，但是 BIO 线程只有在需要执行相关类型后台任务时才会唤醒，其他时间会休眠等待任务。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-351f345326168d65546e6c487f4836ff_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;580&quot; data-rawheight=&quot;316&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic4.zhimg.com/v2-351f345326168d65546e6c487f4836ff_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;580&quot; data-rawheight=&quot;316&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic4.zhimg.com/v2-351f345326168d65546e6c487f4836ff_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-351f345326168d65546e6c487f4836ff_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;多进程&lt;/b&gt;&lt;/h2&gt;&lt;p data-pid=&quot;B-szwmns&quot;&gt;除了主进程，在以下场景如果需要进行重负荷任务的处理，Redis 会 fork 一个子进程来处理：&lt;/p&gt;&lt;ul&gt;&lt;li data-pid=&quot;dYviL92T&quot;&gt;&lt;b&gt;收到 bgrewriteaof 命令：&lt;/b&gt;Redis fork 一个子进程，然后子进程往临时 AOF文件中写入重建数据库状态的所有命令。写入完毕后，子进程会通知父进程把新增的写操作追加到临时 AOF 文件。最后将临时文件替换旧的 AOF 文件，并重命名。&lt;/li&gt;&lt;li data-pid=&quot;rjwQWi84&quot;&gt;&lt;b&gt;收到 bgsave 命令：&lt;/b&gt;Redis 构建子进程，子进程将内存中的所有数据通过快照做一次持久化落地，写入到 RDB 中。&lt;/li&gt;&lt;li data-pid=&quot;OgO1Ffnf&quot;&gt;&lt;b&gt;当需要进行全量复制：&lt;/b&gt;master 启动一个子进程，子进程将数据库快照保存到 RDB 文件。在写完 RDB 快照文件后，master 会把 RDB 发给 slave，同时将后续新的写指令都同步给 slave。&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;b&gt;Redis6.0 多线程&lt;/b&gt;&lt;/h2&gt;&lt;p data-pid=&quot;XtAzZXGD&quot;&gt;多线程是 Redis6.0 推出的一个新特性。正如上面所说 Redis 是核心线程负责网络 IO ，命令处理以及写数据到缓冲，而随着网络硬件的性能提升，单个主线程处理⽹络请求的速度跟不上底层⽹络硬件的速度，导致网络 IO 的处理成为了 Redis 的性能瓶颈。&lt;/p&gt;&lt;p data-pid=&quot;3MpKb3wd&quot;&gt;而 Redis6.0 就是从单线程处理网络请求到多线程处理，通过多个 IO 线程并⾏处理网络操作提升实例的整体处理性能。需要注意的是对于读写命令，Redis 仍然使⽤单线程来处理，这是因为继续使⽤单线程执行命令操作，就不⽤为了保证 Lua 脚本、事务的原⼦性，额外开发多线程互斥机制了。&lt;/p&gt;&lt;p data-pid=&quot;sA5x_gRv&quot;&gt;需要注意的是在 Redis6.0 中，多线程机制默认是关闭的，需要在 redis.conf 中完成以下两个设置才能启用多线程。&lt;/p&gt;&lt;ul&gt;&lt;li data-pid=&quot;9V-g4QW9&quot;&gt;设置 io-thread-do-reads 配置项为 yes，表示启用多线程。&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt;&lt;li data-pid=&quot;z6J_1bYT&quot;&gt;设置线程个数。⼀般来说，&lt;b&gt;线程个数要小于&lt;/b&gt; &lt;b&gt;Redis&lt;/b&gt; &lt;b&gt;实例所在机器的&lt;/b&gt; &lt;b&gt;CPU&lt;/b&gt; &lt;b&gt;核数&lt;/b&gt;，例如，对于⼀个 8 核的机器来说，Redis 官⽅建议配置 6 个 IO 线程。&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;&lt;b&gt;多线程流程&lt;/b&gt;&lt;/h3&gt;&lt;p data-pid=&quot;F9JJ4wz-&quot;&gt;来具体看一下在 Redis6.0 中，主线程和 IO 线程是如何协作完成请求处理的。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f184dac090a6f0bef7ee70f849dcb398_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;486&quot; data-rawheight=&quot;732&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-f184dac090a6f0bef7ee70f849dcb398_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;486&quot; data-rawheight=&quot;732&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-f184dac090a6f0bef7ee70f849dcb398_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-f184dac090a6f0bef7ee70f849dcb398_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p data-pid=&quot;6_Fge9xa&quot;&gt;全部流程分为以下 4 阶段：&lt;/p&gt;&lt;p data-pid=&quot;jeptKXXJ&quot;&gt;&lt;b&gt;阶段⼀：服务端和客⼾端建立&lt;/b&gt; &lt;b&gt;Socket&lt;/b&gt; &lt;b&gt;连接，并分配处理线程&lt;/b&gt;&lt;/p&gt;&lt;p data-pid=&quot;1TPkUKV5&quot;&gt;当有客⼾端请求和实例建立 Socket 连接时，主线程会创建和客户端的连接，并把 Socket 放入全局等待队列中。然后主线程通过轮询方法把 Socket 连接分配给 IO 线程。&lt;/p&gt;&lt;p data-pid=&quot;V3ArTfwg&quot;&gt;&lt;b&gt;阶段⼆：IO&lt;/b&gt; &lt;b&gt;线程读取并解析请求&lt;/b&gt;&lt;/p&gt;&lt;p data-pid=&quot;aUtuJdMH&quot;&gt;主线程把 Socket 分配给 IO 线程后，会进⼊阻塞状态等待 IO 线程完成客户端请求读取和解析。&lt;/p&gt;&lt;p data-pid=&quot;f0853DrM&quot;&gt;&lt;b&gt;阶段三：主线程执⾏请求操作&lt;/b&gt;&lt;/p&gt;&lt;p data-pid=&quot;TBH25YZ_&quot;&gt;IO 线程解析完请求后，主线程以单线程的⽅式执⾏这些命令操作。&lt;/p&gt;&lt;p data-pid=&quot;-kzwpKka&quot;&gt;&lt;b&gt;阶段四：IO&lt;/b&gt; &lt;b&gt;线程回写&lt;/b&gt; &lt;b&gt;Socket&lt;/b&gt; &lt;b&gt;和主线程清空全局队&lt;/b&gt;&lt;/p&gt;&lt;p data-pid=&quot;uJ0R7qAX&quot;&gt;主线程执行完请求操作后，会把需要返回的结果写入缓冲区。然后，主线程会阻塞等待 IO 线程把这些结果回写到 Socket 中，并返回给客户端。等到 IO 线程回写 Socket 完毕，主线程会清空全局队列，等待客户端的后续请求。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;总结&lt;/b&gt;&lt;/h2&gt;&lt;p data-pid=&quot;X20Vou0a&quot;&gt;看完了这篇文章，相信大家对 Redis 是单线程的说法已经有了大致概念。我们说它是单线程，主要是因为在以前的版本中网络 IO 和键值对读写是由⼀个线程来完成的。而之所以说 Redis 是多线程，则是因为 Redis6.0 以后的版本里，网络 IO 的部分变为了多线程处理。而且除了主线程，还有 3 个辅助 BIO 线程，分别是 fsync 线程、close 线程、清理回收线程。当然不能忘记的是，想要体验多线程机制，就得通过修改配置文件开启多线程功能。&lt;/p&gt;&lt;p data-pid=&quot;0sC_lR2J&quot;&gt;&lt;b&gt;推荐阅读：&lt;/b&gt;&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.upyun.com/tech/article/683/%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%25E7%2581%25B0%25E5%25BA%25A6%25E6%259B%25B4%25E6%2596%25B0%25E5%25AE%259E%25E8%25B7%25B5.html&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-8f104356f3f3ddcb0d1906098658cc1e_180x120.jpg&quot; data-image-width=&quot;1280&quot; data-image-height=&quot;503&quot; data-text=&quot;云原生灰度更新实践&quot; class=&quot;LinkCard new&quot;&gt;&lt;span class=&quot;LinkCard-contents&quot;&gt;&lt;span class=&quot;LinkCard-title loading&quot; data-text=&quot;true&quot;/&gt;&lt;span class=&quot;LinkCard-desc loading&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-image LinkCard-image--default&quot;/&gt;&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.upyun.com/tech/article/652/MySQL%2520%25E4%25B8%25AD%25E5%25AD%2598%25E5%2582%25A8%25E6%2597%25B6%25E9%2597%25B4%25E7%259A%2584%25E6%259C%2580%25E4%25BD%25B3%25E5%25AE%259E%25E8%25B7%25B5.html&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic1.zhimg.com/v2-c930bdf5e4303330e0c3d9b7dfb313b8_180x120.jpg&quot; data-image-width=&quot;685&quot; data-image-height=&quot;350&quot; data-text=&quot;MySQL 中存储时间的最佳实践&quot; class=&quot;LinkCard new&quot;&gt;&lt;span class=&quot;LinkCard-contents&quot;&gt;&lt;span class=&quot;LinkCard-title loading&quot; data-text=&quot;true&quot;/&gt;&lt;span class=&quot;LinkCard-desc loading&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-image LinkCard-image--default&quot;/&gt;&lt;/a&gt;&lt;p/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7a4cb9de69e680821655c10858b4ed84</guid>
<title>python实现B站UP主自动监控</title>
<link>https://toutiao.io/k/p8i7cpt</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1.确定小目标&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;首先，确定一下我们想实现的脚本的功能：&lt;/span&gt;&lt;span&gt;给&lt;/span&gt;&lt;span&gt;定一些UP主的ID，我们自动关注这些UP主，并开始监控这些UP主是否有更新视频，如果有则微信进行通知并自动下载这些视频。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;2.&lt;/span&gt;&lt;span&gt;模拟登录&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;既然要实现自动关注功能当然还是要先实现B站的模拟登录啦，这里我们还是借助公众号之前开源的DecryptLogin包，先安装一下：&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;nginx&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__attribute&quot;&gt;pip&lt;/span&gt; install DecryptLogin --upgrade&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;然后简单写几行代码就ok啦：&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; DecryptLogin &lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; login&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;lg = login.Login()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;infos_return, session = lg.bilibili(mode=&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;scanqr&#x27;&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;3.自动关注&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;我们先来抓包看看关注UP主时需要请求的接口吧，简单调试之后发现以下这个链接不管从名字还有从需要携带的参数看都很可疑：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5041567695961995&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zZTbkic2pYRqickgglaYr7Z4BX5SMYcKZAHQnzC2BiavZw4WNjsULKAgJkKrcXzp5jBEpxfPJ17pA4Wmibmdqch7Pw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1684&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;于是，我们可以先写个脚本测试一下我们的想法，可以看到请求这个接口需要携带的参数如下：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2068230277185501&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zZTbkic2pYRqickgglaYr7Z4BX5SMYcKZA3gLg4McKK6xdsoUcOVNTBFC90CuAIzx1tib6RokWLQhmczib41WC5vOg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1407&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;经过测试，必须要携带的参数是这些：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;kotlin&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;fid: 想要关注的UP主的ID；&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;act: 固定值, 为&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;；&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;re_src: 固定值, 为&lt;span class=&quot;code-snippet__number&quot;&gt;11&lt;/span&gt;；&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;jsonp: 固定值, 为jsonp；&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;csrf: 从登录的cookies中可以拿到。&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;代码实现如下：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;python&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;&#x27;&#x27;关注某个UP主&#x27;&#x27;&#x27;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;follow&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(self, up_id)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    url = &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;https://api.bilibili.com/x/relation/modify&#x27;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    data = {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;fid&#x27;&lt;/span&gt;: up_id,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;act&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;re_src&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;11&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;jsonp&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;jsonp&#x27;&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;csrf&#x27;&lt;/span&gt;: self.session.cookies.get_dict(domain=&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;.bilibili.com&#x27;&lt;/span&gt;).get(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;bili_jct&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;&#x27;&lt;/span&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    headers = {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;Host&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;api.bilibili.com&#x27;&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;Origin&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;https://space.bilibili.com&#x27;&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;Referer&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__string&quot;&gt;f&#x27;https://space.bilibili.com/&lt;span class=&quot;code-snippet__subst&quot;&gt;{up_id}&lt;/span&gt;/&#x27;&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    response = self.session.post(url, data=data, headers=headers)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    response_json = response.json()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; response_json[&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;code&#x27;&lt;/span&gt;], response_json.get(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;message&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;&#x27;&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;测试之后登录客户端看发现确实可以成功关注对应的UP主，于是这部分内容也顺利地完成啦~&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4.实时监控&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;实时监控其实也很简单，只需要先把目标UP主当前首页的作品信息获取到，然后每隔一段时间对比一次，看看有没有新的作品出现就行啦。&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;具体而言，我们需要先获取到UP主当前首页的作品信息：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;python&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;&#x27;&#x27;获得UP主首页所有视频信息&#x27;&#x27;&#x27;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;getupvids&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(self, up_id)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    up_vids, aids = [], []&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    headers = {&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;User-Agent&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.117 Safari/537.36&#x27;&lt;/span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    params = {&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;keyword&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;mid&#x27;&lt;/span&gt;: up_id, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;ps&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;tid&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;pn&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;order&#x27;&lt;/span&gt;: &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;pubdate&#x27;&lt;/span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    response = self.session.get(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;https://api.bilibili.com/x/space/arc/search&#x27;&lt;/span&gt;, headers=headers, params=params)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    response_json = response.json()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; response_json[&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;data&#x27;&lt;/span&gt;][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;list&#x27;&lt;/span&gt;][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;vlist&#x27;&lt;/span&gt;]:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        aids.append(item[&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;aid&#x27;&lt;/span&gt;])&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; aid &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; aids:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        params = {&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;aid&#x27;&lt;/span&gt;: aid}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        response = self.session.get(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;https://api.bilibili.com/x/web-interface/view&#x27;&lt;/span&gt;, headers=headers, params=params)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        response_json = response.json()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        up_vids.append(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;https://www.bilibili.com/video/&#x27;&lt;/span&gt; + response_json[&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;data&#x27;&lt;/span&gt;][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;bvid&#x27;&lt;/span&gt;])&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; up_vids&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;然后每隔一段时间对比一下就行：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;python&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; up_id &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; self.up_ids:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    self.logging(&lt;span class=&quot;code-snippet__string&quot;&gt;f&#x27;正在检查UP主&lt;span class=&quot;code-snippet__subst&quot;&gt;{ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;username&quot;&lt;/span&gt;]}&lt;/span&gt;是否更新了视频...&#x27;&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    vids = self.getupvids(up_id)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;updated_vids&#x27;&lt;/span&gt;] = []&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; vid &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; vids:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; vid &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;vids&#x27;&lt;/span&gt;]: &lt;span class=&quot;code-snippet__keyword&quot;&gt;continue&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;updated_vids&#x27;&lt;/span&gt;].append(vid)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;vids&#x27;&lt;/span&gt;].append(vid)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;最后把对比结果打印出来，有更新则进行微信消息推送即可：&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;python&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; up_id &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; self.up_ids:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; len(ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;updated_vids&#x27;&lt;/span&gt;]) &amp;gt; &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        msg = &lt;span class=&quot;code-snippet__string&quot;&gt;f&#x27;你关注的UP主&lt;span class=&quot;code-snippet__subst&quot;&gt;{ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;username&quot;&lt;/span&gt;]}&lt;/span&gt;更新啦...&#x27;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        self.pushwechat(msg)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        self.logging(msg)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; vid &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;updated_vids&#x27;&lt;/span&gt;]:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            os.system(&lt;span class=&quot;code-snippet__string&quot;&gt;f&#x27;videodl -i &lt;span class=&quot;code-snippet__subst&quot;&gt;{vid}&lt;/span&gt; -s &lt;span class=&quot;code-snippet__subst&quot;&gt;{ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;username&quot;&lt;/span&gt;]}&lt;/span&gt;&#x27;&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        msg = &lt;span class=&quot;code-snippet__string&quot;&gt;f&#x27;你关注的UP主&lt;span class=&quot;code-snippet__subst&quot;&gt;{ups_recorder[up_id][&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;username&quot;&lt;/span&gt;]}&lt;/span&gt;暂时没有更新...&#x27;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        self.logging(msg)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;span&gt;大功告成啦，完整源代码详见相关文件~&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>44e8e955f8aad49b4262418036fb48f1</guid>
<title>某大厂37岁程序员，月薪3万，200万存款加一套房：内卷到抑郁，想躺平！</title>
<link>https://toutiao.io/k/6gshid6</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;p class=&quot;original_area_primary&quot;&gt;
                                                                                                &lt;/p&gt;

                    
                                            &lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section powered-by=&quot;xiumi.us&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;img class=&quot;__bg_gif rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/iaky1Xjn7W0DiaoHmA4gHqSMxiaGJFTLQjiatEZ0wiaqbaOqN5LxYyicln5e5G8A85Tiaf0dGFhFLGxFDcKZGdXEuRwrQ/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;300&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt; 关注&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;“&lt;/span&gt;&lt;span&gt;脚本之家&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;”&lt;/span&gt;，与百万开发者在一起&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;385&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6638297872340425&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/LGh7bn8KbYDKibO5vtAFFTGjGARLfdiaaD9pNRwoLAsIgKUBYXUMZeXicdbVYGJo71AoxHPD5JqA3hAlOcIFaHYCQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;940&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;作者| Mr.K   编辑| Emma&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;来源| 技术领导力(ID：jishulingdaoli)&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;已获得原公众号的授权转载&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;文末送书   &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在某职场社交App上看到一个帖子：&lt;/span&gt;&lt;span&gt;一&lt;/span&gt;&lt;span&gt;名程序员今年37岁，薪资30k&lt;/span&gt;&lt;span&gt;，有200万存款，一套房还有30多万房贷。&lt;/span&gt;&lt;span&gt;他说自己很疲惫，有抑郁症，压力很大，想裸辞在家休息一段时间，又怕出来不好找工作，很纠结要不要辞职。&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6055555555555555&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/fEsWkVrSk56uibFYLDYx9lpJaXrXxUlUtY2xyURwJY5tOicrJSwvby6UuKEooBlUyJnRQE4BU58Gg15Ssrfy9m1w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;许多网友都劝他休息一下，毕竟身体是革命的本钱，何况刚刚发生了字节程序员猝死事件，让自己舒服一点更重要。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3022598870056497&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/fEsWkVrSk56uibFYLDYx9lpJaXrXxUlUtEZWgNOl19WFzAsdDrlIwofviaBFs3sU9oF959ibOeibDZvmohM56t4jBg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1062&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;有人说，200万存银行，4%的利率，每个月收益6600，欲望不高的话完全够生活，可以休息一段时间再出发。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.21851851851851853&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/fEsWkVrSk56uibFYLDYx9lpJaXrXxUlUtuBYlZAxKqneOMjZzuEt8zicPzibBWXRxrmEmVSx2Dcu55TlWMCmMkYWA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;还有网友说，把生命浪费在加班上不值得。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.33425925925925926&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/fEsWkVrSk56uibFYLDYx9lpJaXrXxUlUtOKyTpNOB5rM4eZxGuhc81CP55VicjzDevf3ZNJVntYOzNlxuJ7scBTQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;K哥说过，&lt;strong&gt;每个人都是自己这家公司的CEO&lt;/strong&gt;。每一位职场人，要像经营一家公司一样经营你自己。任何对自己的透支行为，都是不可取的，要以打造“百年老店”的心态去用心经营。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;本文就来聊一聊，怎样才能经营好自己这家公司？结合K哥自己的经历和心得，总结下来有以下三个方面：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;01&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;第一，不要挣死工资，而是要积累「职场资本」&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;作为成本的你，是为了完成工作任务而存在的成本消耗品；而作为资本的你，是为了创造价值而存在的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;可以使用下面这个公式来评估自己的职场价值：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;一个人当前的职场价值（PV）＝未来现金流量的平均值（CF）÷折现率（R）&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;从公式来看，想要提高一个人当前的职场价值，需要做两件事：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;第一，增大分子，提高未来现金流量平均值&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;关注两个方面：1）利用平台提升你的个人能力；2）工作成果显性化，善于管理他人预期。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;第二，减小分母，降低折现率&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;做好两点：1）控制情绪，做一个“确认性”高的人；2）在风险可控范围内接一些有挑战性的项目。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;02&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;第二，提高自己的「职场估值」&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;具体要提升4个要素：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1）核心竞争力&lt;/strong&gt;。就好像是企业的护城河，在职场上需要不断挖掘并且展示出来。每个人的核心竞争力是不一样的，甚至同一个人在不同时期、不同公司的核心竞争力也是不一样的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;怎样建立核心竞争力呢？就是要做好&lt;strong&gt;「优势管理」&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们都听过一句话，“成功就是99%的努力，加1%的天分”，其实这句话还有下半句“如果没有这1%的天分，再努力也是白搭”。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;细细品味这句话，你会发现，找到自己的职业优势所在，有多么重要。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;《现在发现你的职业优势》一书中，作者马库斯•白金汉，也就是优势理论的创始人，提出一个寻找优势信号的SIGN模型，通过这个模型，你能够找到被自己忽略已久的优势。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Success ：你的“自我效能感”很强，觉得自己肯定能成&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;以老K为例，我第一次读到一个朋友写的一本书，感觉就是----这我也可以啊。同事们觉得我在吹牛，然后经过半年多的撰写，我出版了自己的第一本书，而且非常幸运，这本书很畅销。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Instinct ：你自动自发 ，迫不及待想尝试&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;比如那些你一听就很感兴趣，希望参与，甚至不仅是兴趣，而是热爱和渴望的领域。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Grow：你发现自己，学得很快&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;据说丁俊晖第一次打桌球，就比他父亲打得好。16岁的南京少年陈智强通过90分钟记住了88幅沙画并击败3名选手，加冕“全球脑王”。他接触记忆训练只有2年，刚接触就取得中国青少年组第1，中国第11，世界第46。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;你有没有一些领域，一接触就明显比其他人进步更快一些？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Need：事后充满了满足感&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;脱口秀演员呼兰，他此前是个互联公司的技术高管，职业上已经非常成功了，然而他却感觉不到成就，自己不喜欢。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;于是他利用业余时间学习无道具表演，几年后参加了“奇葩说”、“吐槽大会”，虽然作为新人，需要从头开始，但是他干得非常起劲，充满了满足感，最后成为了出色的脱口秀演员。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2）未来潜力&lt;/strong&gt;。包括对企业的忠诚、优秀的理解与学习能力、超强的适应性。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这些素质都是企业非常看重的，职场人需要重点关注这些方面的提升。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3）赛道价值&lt;/strong&gt;。要对本专业的潮流保持敏感，要具备快速学习的能力，成为新问题的解决专家。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;有一句话叫做：&lt;strong&gt;早就是优势&lt;/strong&gt;。把握好所在行业的发展趋势，成为第一批吃螃蟹的人，&lt;strong&gt;赚时间红利的钱&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;4）口碑反馈&lt;/strong&gt;。做一个正直、专业、善良的人。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在职场当中，要把自己当作一件产品来打造，为自己建立口碑，你的客户才会源源不断。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;03&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;第三，以经济周期的视角，看待自己的职业周期&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;要遵守下面几个原则：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1）对面顺境逆境要有平常心，顺利时不要春风得意，遇到阻碍时要客观分析再做出选择&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;大家都是职场成年人，不要被情绪脑所控制，你所有的决策都应该以利弊作为依据，什么样的决定对自己最有利，而不是：我做得不爽，我要离职。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2）在职业生涯的高速发展期，打造自己的品牌&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当你处在一个不错的平台，做到了不错的职位，这个时候更要借助平台的优势打造自己的品牌，建立你在行业中的影响力。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;K哥就是在担任某互联网公司技术总监的时候，频繁出席各大技术论坛担任分享嘉宾、出版自己的著作、写作公众号，逐渐在行业里建立了影响力，成为别人眼中的大咖。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我得到的所谓“名气”，为我后来的职业发展提供了许多帮助，让我获得了比别人更多的发展机会，许多同事和下属都是我的读者，天然具备信任感。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3）职业瓶颈时期，要安心、沉心，专注在主业和学习中，耐心地等待下一个好机会的出现&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;巴顿将军说过：“衡量一个人成功的标志，不是看他等到顶峰的高度，而是看他跌到谷底的反弹力”。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;处于职业瓶颈时期、职业发展低谷期，不要放弃自己，这个时候要安下心来专注主业，不断提高，等待下一次机会的来临。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;4）关注经济周期，避开高风险行业，找到高速航行中的船，让自己职业发展尽量平滑一些&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果把公司比作船，那么你就是船上的水手，所在行业就好比大海。你不仅要做好本分，确保这艘船的航行，还要关注海浪和天气。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当你预知到巨浪即将来临，仔细评估这艘船是否足以应对风浪，否则就要果断下船，找一艘更大的船，或者找到另一片更适合航行的大海。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;比如我的几位朋友，在K12行业面临巨变之前，跳槽去金融、电商、直播等行业，收入不仅没有影响，还得到了不错的发展机会。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;结束语&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;以上，总结了把自己当作一家公司来经营，需要关注的三个方面。没有谁的职场发展是一帆风顺的，也没有哪一家公司是基业长青的，都会遇到各种各样的问题。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;张瑞敏说过：“&lt;strong&gt;没有成功的企业，只有时代的企业&lt;/strong&gt;”。&lt;/span&gt;&lt;span&gt;对于职场发展也是一样的，唯有不断学习、自我迭代，才能跟上时代，才能在这个无限游戏当中，不被淘汰。&lt;/span&gt;&lt;/section&gt;&lt;table data-sort=&quot;sortDisabled&quot; interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;93&quot; data-backw=&quot;85&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.098314606741573&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sqibwUCydDhyPe6dbTWarUE0uP2G3N2LzsibOj1PxTlwuJH6cvwy86ER1diaxq9J4WiclgoTlsTzHMvic9l5KPDsCpA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;356&quot;/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;作者简介&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：&lt;/span&gt;&lt;strong&gt;&lt;span&gt;Mr.&lt;/span&gt;&lt;span&gt;K&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，“技术领导力”公众号 作者，从一名普通程序员逆袭成为独角兽公司技术高管。出版过多本畅销书，写出多篇10W+文章。分享：行业趋势、职场经验&lt;span&gt;、团队管理、&lt;/span&gt;商业通识等话题。&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;__bg_gif rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-type=&quot;gif&quot; data-w=&quot;22&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/7ibzJsmgW5wguO21SlkBAdxJgAicEOVCzDiaObyzEAEMTI527clib7gHvKfBtDu8MJZLwwEIVuVBmqfn01fmLDdTfQ/640?wx_fmt=gif&quot;/&gt;&lt;/p&gt;&lt;pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot; data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgba(163, 163, 163, 0.85)&quot; data-darkmode-original-color-16094717623268=&quot;rgba(0, 0, 0, 0.85)&quot; data-style=&quot;margin-top: 2.2em; margin-bottom: 4px; caret-color: rgb(62, 62, 62); color: rgba(0, 0, 0, 0.85); line-height: 1.5em; letter-spacing: 0.75px;&quot; class=&quot;js_darkmode__45&quot;&gt;&lt;section data-role=&quot;paragraph&quot; data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(0, 0, 0)&quot; data-style=&quot;letter-spacing: 0.544px; widows: 1; caret-color: rgb(51, 51, 51); color: rgb(0, 0, 0);&quot; class=&quot;js_darkmode__46&quot;&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot; data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(0, 0, 0)&quot;&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;93518&quot; data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(0, 0, 0)&quot;&gt;&lt;section data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(0, 0, 0)&quot;&gt;&lt;section data-width=&quot;100%&quot; data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(14, 124, 226)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(14, 124, 226)&quot;&gt;&lt;section data-width=&quot;100%&quot; data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(14, 124, 226)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(14, 124, 226)&quot;&gt;&lt;section data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(14, 124, 226)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(14, 124, 226)&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(89, 89, 89)&quot; data-style=&quot;margin-top: -10px; padding-right: 10px; padding-left: 10px; line-height: 1.6; word-break: break-word; font-size: 15px; letter-spacing: 0.05em; color: rgb(89, 89, 89);&quot; class=&quot;js_darkmode__47&quot;&gt;&lt;section data-role=&quot;paragraph&quot; data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(0, 0, 0)&quot; data-style=&quot;font-size: 16px; letter-spacing: 0.544px; color: rgb(0, 0, 0);&quot; class=&quot;js_darkmode__52&quot;&gt;&lt;section class=&quot;js_darkmode__53&quot;&gt;&lt;section data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(62, 62, 62)&quot;&gt;&lt;section data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(62, 62, 62)&quot;&gt;&lt;section data-darkmode-bgcolor-16094717623268=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16094717623268=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16094717623268=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16094717623268=&quot;rgb(62, 62, 62)&quot;&gt;&lt;pre&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot;&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100065159&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/LGh7bn8KbYCutb7a5HokX6l8ficLRmQIOj9lIkcqBVgvic0u31vHSHGRib3ANib1UCSpS3Ogfq5FKfRGtppA3LRrpQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&lt;strong&gt;本周粉丝送书福利 &lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt; &lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100065158&quot; data-ratio=&quot;1&quot; data-type=&quot;png&quot; data-w=&quot;18&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/LGh7bn8KbYCutb7a5HokX6l8ficLRmQIOj9lIkcqBVgvic0u31vHSHGRib3ANib1UCSpS3Ogfq5FKfRGtppA3LRrpQ/640?wx_fmt=png&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;mpcps frameborder=&quot;0&quot; class=&quot;js_editor_cps&quot; data-datakey=&quot;1646724180718_0.8086280535989845&quot; data-uid=&quot;1646724180619&quot; data-type=&quot;1&quot; data-product=&quot;&quot; data-templateid=&quot;list&quot; data-pid=&quot;29301490&quot; data-categoryid=&quot;3&quot; data-appuin=&quot;3084391334&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;《&lt;/span&gt;&lt;span&gt;&lt;strong&gt;统计分析（以R语言为工具）&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;》&lt;/span&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;本书围绕经典的统计方法与 R 语言工具，从基本的统计描述分析方法出发，讲解了参数估计与假设检验、线性回归、逻辑回归、降维分析方法，每一章重点介绍一种经典方法或统计模型，对其基本定义、模型形式、统计方法的推导与解读等都给出了细致的讲解。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;mpcps frameborder=&quot;0&quot; class=&quot;js_editor_cps&quot; data-datakey=&quot;1646724180719_0.2738948122305538&quot; data-uid=&quot;1646724180620&quot; data-type=&quot;1&quot; data-product=&quot;&quot; data-templateid=&quot;list&quot; data-pid=&quot;29128606&quot; data-categoryid=&quot;3&quot; data-appuin=&quot;3084391334&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;《&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;Python Web开发从入门到精通&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;》&lt;/span&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;span&gt;本书力求简单、全面，坚持以实战为主、理论为辅，覆盖了 Web 开发的全部过程。&lt;/span&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;mpcps frameborder=&quot;0&quot; class=&quot;js_editor_cps&quot; data-datakey=&quot;1646724180721_0.24976917891911987&quot; data-uid=&quot;1646724180625&quot; data-type=&quot;1&quot; data-product=&quot;&quot; data-templateid=&quot;list&quot; data-pid=&quot;29326930&quot; data-categoryid=&quot;3&quot; data-appuin=&quot;3084391334&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;《自然语言处理NLP从入门到项目实战（Python语言实现）》&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;本书内容通俗易懂，案例丰富，实用性强，特别适合使用Python语言人工智能自然语言处理的入门和进阶的读者阅读，也适合产品经理、人工智能研究者等对人工智能自然语言处理感兴趣的读者阅读。另外，本书也适合作为相关培训机构的教材使用。&lt;/span&gt;&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot;&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100065159&quot; data-ratio=&quot;1&quot; data-type=&quot;png&quot; data-w=&quot;18&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/LGh7bn8KbYCutb7a5HokX6l8ficLRmQIOj9lIkcqBVgvic0u31vHSHGRib3ANib1UCSpS3Ogfq5FKfRGtppA3LRrpQ/640?wx_fmt=png&quot;/&gt;  &lt;span&gt;&lt;strong&gt;留言赠书参与方法 &lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100065158&quot; data-ratio=&quot;1&quot; data-type=&quot;png&quot; data-w=&quot;18&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/LGh7bn8KbYCutb7a5HokX6l8ficLRmQIOj9lIkcqBVgvic0u31vHSHGRib3ANib1UCSpS3Ogfq5FKfRGtppA3LRrpQ/640?wx_fmt=png&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;分享一下你喜欢以上书籍中的哪一本，以及平时工作学习积累的经验，或者分享关于这篇推文内容的个人理解&lt;/span&gt;，&lt;/span&gt;&lt;span&gt;&lt;strong&gt;活动截止之前会选出幸运小锦鲤，中奖者可以获得上面的纸质书籍&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;1本&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;，免费包邮到家&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;活动截止时间：&lt;/strong&gt;&lt;span&gt;2022年3月10日&lt;/span&gt; 16：00 整&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;兑奖截止时间：&lt;/strong&gt;&lt;span&gt;2022年3月11日 16：00 整&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/h3&gt;&lt;/pre&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>