<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>0ddcc0a0c03505a97ab426f8cd457328</guid>
<title>三分钟快速上手 Spring 事件机制</title>
<link>https://toutiao.io/k/304f3j8</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;小伙伴们好呀~ 今天来和大家分享下这个 &lt;strong&gt;Spring事件机制&lt;/strong&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;内容概览&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.45977011494252873&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AYgomKNKiceUw6ibeGs7oJllDnxKjlQrN6Dths8icvQnx8ZfQJ2unErLfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;522&quot;/&gt;&lt;figcaption&gt;image-20210829132019387&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;原理&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.3425034387895461&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AXsSrxiamlypk68PzEGkqkpibsaBJkJg6guDn7cO96vuWBlIOlEumN3FQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;727&quot;/&gt;&lt;figcaption&gt;image-20210828184103069&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这个熟悉 &lt;strong&gt;观察者模式&lt;/strong&gt; 的小伙伴应该一眼就看出来啦~&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;其实就是个简单版的 &lt;strong&gt;发布-订阅模式&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;有三个核心类👇&lt;/strong&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;事件&lt;/strong&gt; &lt;code&gt;ApplicationEvent&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;事件发布器&lt;/strong&gt; &lt;code&gt;ApplicationEventPublisher&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;事件监听器&lt;/strong&gt; &lt;code&gt;ApplicationListener&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;用途👇&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;事件发布器发布事件，监听器监听到对应的事件后做出相应的反应~&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;为什么使用&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;因为需求也不确定 🙄&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;场景&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;领导：想在用户操作完后发个邮件通知下A&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我：好的&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;几天后……&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;领导：算了，先站内提醒就好了，后面再考虑发短信通知啥的，看看哪个效果好点&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我：……好的&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一开始我也没用这个事件机制的，没多想就写一起了&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;后面觉得有点不对劲，才想起来用这招的😄&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;优点👇&lt;/strong&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;解耦&lt;/strong&gt; 可以将业务代码和发邮件，站内提醒，短信等进行分离&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;异步通知&lt;/strong&gt; 不用等待这些事件的完成&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;提高扩展性&lt;/strong&gt; 后面再扩展其他操作也方便多啦&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;提醒&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;体量小的系统还可以用，大点的还是直接用消息中间件去解决靠谱&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;项目实战&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AdJ2DEFPYMaUgicIYcAo8bKDebJTk7uF6h0FcWUHerR6iaPZJ0Eo9Skxg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.6508563899868248&quot; data-w=&quot;759&quot;/&gt;&lt;figcaption&gt;image-20210829102043376&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;功能&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;根据小伙伴反馈事件去发送短信和邮件&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;主要源码&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一. 小伙伴反馈事件 &lt;code&gt;ReaderFeedbackEvent&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27Axf17HibYBYnx7BThloCtKvHUtxIss4XWzvuW4wcjlZ1YHsIDY6DYbWw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.4794520547945205&quot; data-w=&quot;803&quot;/&gt;&lt;figcaption&gt;image-20210829094311899&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;特点和作用👇&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;继承 &lt;code&gt;ApplicationEvent&lt;/code&gt; ，保存反馈信息的DTO&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;二. 事件发布器 &lt;code&gt;ReaderFeedbackEventPublisher&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AfxX4MibT7iaOfFE7sZkwjfY6wMrXdyrl0iarRTZHgXy9DC5cJEOpjID3Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5361875637104995&quot; data-w=&quot;981&quot;/&gt;&lt;figcaption&gt;image-20210829102353506&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;特点和作用👇&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;实现 &lt;code&gt;ApplicationEventPublisherAware&lt;/code&gt; 这个接口，获取 &lt;code&gt;ApplicationEventPublisher&lt;/code&gt; 事件发布器去发布事件&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;三. 监听 &lt;code&gt;ReaderFeedbackEvent&lt;/code&gt; 事件并发送邮件&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AIsiczFMOqsneibATGibEuaLORF2icaKjlpCE9aV8sKFqFVgfnsVu3HfJKw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.8741633199464525&quot; data-w=&quot;747&quot;/&gt;&lt;figcaption&gt;image-20210829102540185&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;特点和作用👇&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;实现 &lt;code&gt;ApplicationListener&lt;/code&gt; 这个接口，获取事件中的反馈信息，并发送邮件&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;四. 当反馈信息有点赞时才发送短信通知😄&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AyuE0fiaw06oicm1tG116FYbHFEJ5W5YeQbynya17ZtPVIU9yCyiaoDA1g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.6862170087976539&quot; data-w=&quot;682&quot;/&gt;&lt;figcaption&gt;image-20210829102736577&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;特点和作用👇&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;监听器的第二种写法—— &lt;strong&gt;注解&lt;/strong&gt; ，比较方便，这里监听并判断是不是点赞，再去发送短信😝&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;测试&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里直接在 &lt;code&gt;IDEA&lt;/code&gt; 中进行测试，&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AExkhibcfN8L58cDOYnrBkibxzp2oPNwZqEvVfA0FouqN4rebLdocITiaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5962910128388017&quot; data-w=&quot;701&quot;/&gt;&lt;figcaption&gt;image-20210829111125716&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;效果如下👇&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;like = false&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AmAUibOK3CBic0hSQwpBKQHl7w2fVBSHITibOsMlZKvr89fMfn7bibN4H4w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.22592592592592592&quot; data-w=&quot;1080&quot;/&gt;&lt;figcaption&gt;image-20210829111409325&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;like = true&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AjXhz7LjIQxuibKdC969YrkCBXAVzfr5Muz6eaIzJkbyicibibw6y9ZUTgQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.21296296296296297&quot; data-w=&quot;1080&quot;/&gt;&lt;figcaption&gt;image-20210829124910499&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;收到的短信&lt;/strong&gt;&lt;/p&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27ApRJH7El1RFmyt5gJKpiaHSlw7AZ2j26eIDkfzgspEez73WLKyke2PVg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.3690596562184024&quot; data-w=&quot;989&quot;/&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;小结&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;可以看到功能模块很简单，监听反馈事件，然后去发送短信和邮件~&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27A8q8Ef1CGzDMPWyXuUflmgdyfVcq3yZmialrkpqlEvfxY4uNkvvTUyqw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.4883177570093458&quot; data-w=&quot;856&quot;/&gt;&lt;figcaption&gt;image-20210829130532523&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;这部分代码上传到我的 &lt;code&gt;GitHub&lt;/code&gt; 仓库啦 （&lt;strong&gt;地址在文末&lt;/strong&gt;）😝&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;Spring源码解读&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;异步/同步&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里我们打个断点，就可以轻易的来到这里啦 👇&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27ALTYIiczFYHns6axOO5LibyjYib3amVKibkAmspicBwWH4tice6uLz3upICRQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.3034934497816594&quot; data-w=&quot;916&quot;/&gt;&lt;figcaption&gt;image-20210829104327436&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这个方法在&lt;strong&gt;事件多播器&lt;/strong&gt; &lt;code&gt;SimpleApplicationEventMulticaster&lt;/code&gt; 中，可以看到当有配置这个&lt;strong&gt;线程池&lt;/strong&gt;时，是走&lt;strong&gt;异步&lt;/strong&gt;通知路线的&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;那怎么调用监听器的呢？&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;可以看到就这简单&lt;strong&gt;3步&lt;/strong&gt; ，最后就是回到我们的 &lt;code&gt;onApplicationEvent&lt;/code&gt; 方法中去处理的&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;invokeListener&lt;/code&gt; ——&amp;gt; &lt;code&gt;doInvokeListener&lt;/code&gt; ——&amp;gt; &lt;code&gt;onApplicationEvent&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AXWVAMeTJhKWNY2aa9APC2uZYPRqjY5a2rSR31cjwrHARCMIqHxWzOg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.12761020881670534&quot; data-w=&quot;862&quot;/&gt;&lt;figcaption&gt;image-20210829104759111&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;总结&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;活学活用，快去试试叭！😆&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;项目地址👉&lt;/strong&gt;：https://github.com/Java4ye/springboot-demo-4ye&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;喜欢的话，点个小星星呀⭐⭐😝&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AlLpbOhpMwRIdpn1TwsiaScXZYjw0Y8hJj8DhlrbedEcD86miaXTcHbYg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.4898148148148148&quot; data-w=&quot;1080&quot;/&gt;&lt;figcaption&gt;image-20210829144304728&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;本期思维导图如下👇&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEbNXYvTfT3ZtGErmLIW27AAejyonRiazYF1XrsfLxdR8vgwXV0DeWsO8BjBnicAMJVoBTZKjRpRphg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5638888888888889&quot; data-w=&quot;1080&quot;/&gt;&lt;figcaption&gt;image-20210829132531501&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;ps：最近忙起来啦，更文速度会慢一些哦~ 🐷&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;我是4ye 咱们下期应该……很快再见！！&lt;/strong&gt; 😆&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;喜欢的话可以关注下公众号 &lt;strong&gt;Java4ye&lt;/strong&gt; 支持下 &lt;strong&gt;4ye&lt;/strong&gt; 呀😝&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg2MjUzODc5Mw==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFUAO47rDkQycV4q8RTDe4kKXORDlaNmjGLiaxZxbHdOJ32ict5W0wEejBficWOLqDYELibIe5IEdtzeA/0?wx_fmt=png&quot; data-nickname=&quot;Java4ye&quot; data-alias=&quot;Java4ye&quot; data-signature=&quot;定个小目标，写个3年先 ！！&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-recommend-type=&quot;list-title&quot; data-recommend-tid=&quot;6&quot; data-mpa-template=&quot;t&quot; data-mid=&quot;&quot; data-from=&quot;yb-recommend&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;往期推荐&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247488696_1&quot; data-recommend-article-time=&quot;1629331740&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYGqvAqme7rHsR0aJib5pwwQIfYbqqAxIX5re6ibwLamHyPUMzH0LNYuzxXcdzoABREicGwskgQqpkibbQ/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;Spring的这七大模块你了解吗？&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488696&amp;amp;idx=1&amp;amp;sn=ba2f3f2e2ae2c646c0d3f5d149ec65dc&amp;amp;chksm=ce0709fef97080e86a5a0b0a8a102e21eb3636b55b757845dd5602ed4e916122b13a7f90add2#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488696&amp;amp;idx=1&amp;amp;sn=ba2f3f2e2ae2c646c0d3f5d149ec65dc&amp;amp;chksm=ce0709fef97080e86a5a0b0a8a102e21eb3636b55b757845dd5602ed4e916122b13a7f90add2&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;Spring的这七大模块你了解吗？&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247488663_1&quot; data-recommend-article-time=&quot;1628390239&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYFLt03csToVvV7xiaGPViaa8uVeTcVibUuQvJZYHBRPnRpEn27Fj8ibgDQYhNsQmVNxnRsrgCf82cRG6w/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;这5个GitHub项目+3个网站，助你一飞冲天！&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488663&amp;amp;idx=1&amp;amp;sn=577fde8f514b13b001ce53f9417280c6&amp;amp;chksm=ce0709d1f97080c7fbef1345d4efb025d2bfcc90b54cccaa367a3f2f0617b7a7ebf7b931366a#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488663&amp;amp;idx=1&amp;amp;sn=577fde8f514b13b001ce53f9417280c6&amp;amp;chksm=ce0709d1f97080c7fbef1345d4efb025d2bfcc90b54cccaa367a3f2f0617b7a7ebf7b931366a&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;这5个GitHub项目+3个网站，助你一飞冲天！&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247488639_1&quot; data-recommend-article-time=&quot;1628089489&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYGedsiaeO9EMGW92cZR1bCiblQ6zDZYZF8x9zqfiaicKaENv02xTEia7fwYapiaI4g0oQmYrbcARzIVsOCg/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;三分钟快速了解Spring中的工厂模式&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488639&amp;amp;idx=1&amp;amp;sn=e772f1c8ba3110b4311df9ce39837966&amp;amp;chksm=ce070939f970802ff4610e4cddbd90ca65ad2405eb0d63ddf7f6271e80922fbab5d432fbbce5#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488639&amp;amp;idx=1&amp;amp;sn=e772f1c8ba3110b4311df9ce39837966&amp;amp;chksm=ce070939f970802ff4610e4cddbd90ca65ad2405eb0d63ddf7f6271e80922fbab5d432fbbce5&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;三分钟快速了解Spring中的工厂模式&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247488545_1&quot; data-recommend-article-time=&quot;1626591737&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYFbuTaDJFr2GVFwExLIgiaia8Jz3TP9R3cs5eZ3UV4lOk0Oia0iaNELsxWV1tP8WKXQR5AYRcQhr6emibA/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;简单两步搞定Springboot自定义starter&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488545&amp;amp;idx=1&amp;amp;sn=7edd49f9ad5b105289fb8ab42abfe7e2&amp;amp;chksm=ce070967f97080717fd22e94bd7dc0b1f7ae45b63917e4b3fa43d38d3f41026056add4b9a79a#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488545&amp;amp;idx=1&amp;amp;sn=7edd49f9ad5b105289fb8ab42abfe7e2&amp;amp;chksm=ce070967f97080717fd22e94bd7dc0b1f7ae45b63917e4b3fa43d38d3f41026056add4b9a79a&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;简单两步搞定Springboot自定义starter&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247488498_1&quot; data-recommend-article-time=&quot;1625619303&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYHkK4EImyKiaVSKlAAoLoE4xZvs0xgPvV1ICdefyibL4xHfD5ibdq8hohe1X4ib3zsgXCKib4Oibaibo3wjw/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;花了2个钟才搞懂这AOP为啥没生效，水友却睡着了……&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488498&amp;amp;idx=1&amp;amp;sn=928ceffb140a9b9ae49a6dd50a8ccbf1&amp;amp;chksm=ce070eb4f97087a290ea52ee027c7c41aa3464e0bb4fc1b95591cbbba8d587e2db4f7c5313d7#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488498&amp;amp;idx=1&amp;amp;sn=928ceffb140a9b9ae49a6dd50a8ccbf1&amp;amp;chksm=ce070eb4f97087a290ea52ee027c7c41aa3464e0bb4fc1b95591cbbba8d587e2db4f7c5313d7&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;花了2个钟才搞懂这AOP为啥没生效，水友却睡着了……&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247487868_1&quot; data-recommend-article-time=&quot;1624252157&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYGGu1JGcLyrfM0fWECBsfibFicOHEXnAvibG3AhMcR8oR5ZbnhK8mm6s0tjG7jo4l4ibobto8sA06tmag/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;四种引用类型在Springboot中的使用&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247487868&amp;amp;idx=1&amp;amp;sn=715f982805871beca12e4891a810015c&amp;amp;chksm=ce070c3af970852cc8e9690a4bc1bf5818d4a708245c8fd2cd6c258be867e581d4dea8c92a57#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247487868&amp;amp;idx=1&amp;amp;sn=715f982805871beca12e4891a810015c&amp;amp;chksm=ce070c3af970852cc8e9690a4bc1bf5818d4a708245c8fd2cd6c258be867e581d4dea8c92a57&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;四种引用类型在Springboot中的使用&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247487780_1&quot; data-recommend-article-time=&quot;1623893808&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYFJAKHwk0A4UZ6aR7icNwR53KBN4p7PQCkia1pKspJNac5hvgWFlsXfXUvAiakujW6ibhKadqEeBHvUmQ/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;Springboot自动装配原理探索&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247487780&amp;amp;idx=1&amp;amp;sn=618b88be9f5e81659a6a6ce4450972e8&amp;amp;chksm=ce070c62f97085742a3e26a376065229be04e5527f89de599b71c33c5f9a1735c6fa74b698f7#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247487780&amp;amp;idx=1&amp;amp;sn=618b88be9f5e81659a6a6ce4450972e8&amp;amp;chksm=ce070c62f97085742a3e26a376065229be04e5527f89de599b71c33c5f9a1735c6fa74b698f7&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;Springboot自动装配原理探索&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247488415_1&quot; data-recommend-article-time=&quot;1625155144&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYFpO5v3RblLZrj2iaCVlp98I17MxfbNGgqu8HWB1AibSgeb2VFKCm25V3NgHf4My8WWziaVIdHia8Jiaiag/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;Cglib动态代理探索（ASM，Spring）&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488415&amp;amp;idx=1&amp;amp;sn=2ac254a9862f49a7bb1d3b94cba27b86&amp;amp;chksm=ce070ed9f97087cf182f3ab4c49e5cfdfa7cb5a1b16a3f573302d991a919adbc23f62da0d56e#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247488415&amp;amp;idx=1&amp;amp;sn=2ac254a9862f49a7bb1d3b94cba27b86&amp;amp;chksm=ce070ed9f97087cf182f3ab4c49e5cfdfa7cb5a1b16a3f573302d991a919adbc23f62da0d56e&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;Cglib动态代理探索（ASM，Spring）&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247487968_1&quot; data-recommend-article-time=&quot;1624725156&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYGSDNAfYKqerWkVR1icWzYw1VricWhIc650yrxvK6T4fkRiboYfQDrMqmTbicWxXE3HRMn9aWQI4XZutw/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;Java代理模式和字节码的探索&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247487968&amp;amp;idx=1&amp;amp;sn=c2dbbdc444461b3568712119c170242e&amp;amp;chksm=ce070ca6f97085b01100a97994836e4f92b24395dfb2ffd3fbbf75ef8c511b1df4fa25522ce4#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247487968&amp;amp;idx=1&amp;amp;sn=c2dbbdc444461b3568712119c170242e&amp;amp;chksm=ce070ca6f97085b01100a97994836e4f92b24395dfb2ffd3fbbf75ef8c511b1df4fa25522ce4&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;Java代理模式和字节码的探索&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;6&quot; data-recommend-article-id=&quot;2247487726_1&quot; data-recommend-article-time=&quot;1623420490&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYHicGhYCpJhx1lCWAZKWBvrXE8rUTZBZ8U96P7nKfZI7wKe5GnoKEpibicAfUB4nrkbiaEexOkPSHJRNw/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;服务发现机制SPI居然是破坏者？！&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247487726&amp;amp;idx=1&amp;amp;sn=6bf3c4599c77152895d8684e842b0469&amp;amp;chksm=ce070da8f97084be2399915e747e291e088da0a91b28d4c469a3b0d358958a0393bbcafd0536#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&amp;amp;mid=2247487726&amp;amp;idx=1&amp;amp;sn=6bf3c4599c77152895d8684e842b0469&amp;amp;chksm=ce070da8f97084be2399915e747e291e088da0a91b28d4c469a3b0d358958a0393bbcafd0536&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;服务发现机制SPI居然是破坏者？！&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;div class=&quot;reward_qrcode_area reward_area tc&quot; id=&quot;js_reward_qrcode&quot;&gt;
                                &lt;p class=&quot;tips_global&quot; aria-hidden=&quot;true&quot; id=&quot;js_a11y_reward_qr_title&quot;&gt;Long-press QR code to transfer me a reward&lt;/p&gt;
                                                                &lt;p role=&quot;option&quot; aria-labelledby=&quot;js_a11y_reward_qr_word js_a11y_comma js_a11y_reward_qr_title js_a11y_reward_qr_money&quot; aria-describedby=&quot;js_a11y_reward_qr_tips &quot; class=&quot;reward_tips&quot; id=&quot;js_a11y_reward_qr_word&quot;/&gt;
                                &lt;span class=&quot;reward_qrcode_img_wrp&quot;&gt;&lt;img alt=&quot;赞赏二维码&quot; class=&quot;reward_qrcode_img&quot; id=&quot;js_reward_qrcode_img&quot;/&gt;&lt;/span&gt;
                                &lt;p aria-hidden=&quot;true&quot; id=&quot;js_a11y_reward_qr_tips&quot; class=&quot;tips_global&quot;&gt;As required by Apple&#x27;s new policy, the Reward feature has been disabled on Weixin for iOS. You can still reward an Official Account by transferring money via QR code.&lt;/p&gt;
                            &lt;/div&gt;
                                                                            
                              
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>d289b324d8f92e04c8884f927381c9c7</guid>
<title>写了一个没啥用的文件传输工具</title>
<link>https://toutiao.io/k/szucx0p</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;h1 data-mpa-powered-by=&quot;yiban.io&quot;&gt;这是在干嘛？&lt;/h1&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.75&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/dlEwIVcKGs4DibtWgPia9FFLKUwlibgOfNsrw6TOI7KjYxzLRicIYL5jdibJlcVFEXbvZkUOVW53VsxxjrT1b4QNzjA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;h1&gt;起因&lt;br/&gt;&lt;/h1&gt;&lt;p&gt;之前看到有开发者使用二维码+tun/tap, 实现了使用二维码扫码作为物理传输的IP网络。大家感兴趣的话传送门在这里 https://hackaday.com/2016/11/22/ip-over-qr-codes/&lt;/p&gt;&lt;p&gt;p叔觉得很 cool 。于是我也想用二维码来做点啥。之前也想搞想 &lt;code&gt;tun/tap&lt;/code&gt;，无奈node.js 上 &lt;code&gt;tun/tap&lt;/code&gt; 的库在 macOS上不是很友好，再加上 pshu 智商和时间都不够，就没再折腾。退而求其次，在假期就用二维码做一个文件传输的工具。&lt;/p&gt;&lt;p&gt;搜了下资料，单个二维码能承载的最大信息量是3k左右，用来做信息传输还是有可能的。（实际情况来看，由于 pshu 用的摄像头质量比较差，超过1k 的二维码就很难识别出来）&lt;/p&gt;&lt;p&gt;用二维码来传输文件背后的原理十分地简单，把需要传输的文件切割成合适大小的片段，然后每一段文件转换成二维码，依次显示二维码；接收端识别这些二维码，等所有的片段都收集完整之后，重新组合成文件即可。&lt;/p&gt;&lt;h1&gt;也不是这么简单&lt;/h1&gt;&lt;p&gt;但是注意这里有个限制条件就是：文件的发送方和接收方之间没有任何通信方式的；如果有其他任何通信方式的话，就不用这么费劲用二维码来传输文件了。所以文件的发送方只能按照一定的频率切换不同分段对应的二维码，而接收方也只能尽量快地识别二维码，以尽快组装成原来的文件。&lt;/p&gt;&lt;p&gt;由于二维码的识别是需要时间的，而发送双方无法做流控，所以如果接收方丢失了一个分段的数据，就是要发送方全部显示完一轮之后，才“有机会”看到，等这个机会来临的时候接收方也不一定能识别到。所以朴素地按照一定顺序显示文件片段的二维码的方式来传输文件实际传送时效率是非常低的。&lt;/p&gt;&lt;h1&gt;喷泉码&lt;/h1&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.45674740484429066&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/dlEwIVcKGs4DibtWgPia9FFLKUwlibgOfNsfGUn7icwBHRQBkicpcrCuLS1loVhmJ3TEguck9qalrC9u1r0xMzDKnew/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;867&quot;/&gt;&lt;/p&gt;&lt;p&gt;后来 pshu 看到一个叫做“喷泉码”的编码方式，它所带来的好处就是，只要接收方收集足够多不同的片段，就能恢复出原始的文件。就像在喷泉附近放置一个水桶，只要放的时间足够久，喷泉溅起的水珠会盛满这个水桶。喷泉码一个比较简单的实现就是 LT码（ &lt;span&gt;&lt;strong&gt;Luby transform codes&lt;/strong&gt;&lt;/span&gt; ），这个实现也是pshu 要用的。&lt;/p&gt;&lt;p&gt;&lt;span&gt;LT码的背后的原理非常地简单：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;1.&lt;/span&gt;将需要传输的数据等分成N分段，并编号&lt;/span&gt;&lt;span&gt;&lt;span&gt;2.&lt;/span&gt;根据预先设定的概率分布，生成一个k（k在区间：[1,N]），然后取k个片段，将这个k 片段的数据做异或操作，发送异或后的数据，和k个片段的编号信息。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;其中 k 的概率分布主要集中在1和2附近。&lt;/p&gt;&lt;p&gt;3.在接收方根据收到的异或后的数据和片段信息，通过异或的特性，可以逐个恢复出原本的数据片段。&lt;/p&gt;&lt;p&gt;举个例子，假设我们需要发送数据只有三个字节，我们区间分成3段，分别是 0x11, 0x22,0x44, &lt;/p&gt;&lt;p&gt;第一批发送的数据是：0,1号片段的异或，即 0x33。&lt;/p&gt;&lt;p&gt;第二批发送的数据是：1,2号片段的异或，即 0x66。&lt;/p&gt;&lt;p&gt;第三批发送的数据是：0号片段:0x11。&lt;/p&gt;&lt;p&gt;在接收方，首先知道0号片段是 0x11,  接着通过异或运算知道1号片段为 0x22（0x33^0x11），最后使用相同的方法计算出2号片段 0x44 (0x66^0x22)。&lt;/p&gt;&lt;p&gt;数据传输的大致原理就是如此。但是这里还有一个很有趣的细节，就是在选取k个数据片段的时候，需要发送方和接收方能够采用一致的方式选取k的数值和如何随机地选取这k个片段。如果直接发送k和相应选取片段的k 个编号，这种同步方法是最简单的，但是也带来了一个问题就是，这样的通信效率太低，除了发送k ，还要额外发送k个编号信息，如果k 的随机值较大这样的效率就很低。&lt;/p&gt;&lt;p&gt;LT码实现的时候，通信双方协商好了一个随机数生成的函数，那么确定好这个随机函数的随机种子，那么就能唯一地确定好 k，以及k个分片的编号。通过这样的协议就能大大地提高传输的效率。&lt;/p&gt;&lt;h1&gt;上代码&lt;/h1&gt;&lt;p&gt;原理讲清楚了，直接上代码地址 https://github.com/stormslowly/lt-node.js&lt;/p&gt;&lt;h2&gt;如何使用&lt;/h2&gt;&lt;p&gt;先 clone  代码，安装依赖后，执行&lt;/p&gt;&lt;section class=&quot;code-snippet__github&quot;&gt;&lt;pre data-lang=&quot;bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;npx ts&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;node src&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;send&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;ts &lt;/span&gt;&lt;span&gt;&amp;lt;需要发送的文件名&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;建议发500k以下的文件，如果你时间足够多足够无聊，可以帮我测测大文件的传输时间，哈哈。&lt;/p&gt;&lt;p&gt;这个时候命令行上就会出现，不停变化的二维码，这个就是文件喷泉码编码后的文件碎片。调整下命令行程序的字体大小，让二维码尽量大的显示。&lt;/p&gt;&lt;p&gt;在另外一台有摄像头的电脑上，执行 &lt;/p&gt;&lt;section class=&quot;code-snippet__github&quot;&gt;&lt;pre data-lang=&quot;bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;npx ts&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;node src&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;wsRecev&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;ts&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;然后打开本地8080端口的页面，申请摄像头权限，使用摄像头拍摄二维码，尽量让二维码占满画面，增加解码成功率。这个时候你大概会出现一个类似网站开头的的画面了。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.43337334933973587&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/dlEwIVcKGs4DibtWgPia9FFLKUwlibgOfNsQemIAvsjlpcJicyakJIgdd3B3fTxvvdurEAHrYKjWkWNpWd5TdACib8Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;833&quot;/&gt;&lt;/p&gt;&lt;p&gt;然后等上“亿点点”时间，接收程序会自动退出，说明文件接收完毕，当前目录下就会有一个 a.out 的文件，就是接收到的文件，重命名你想要的文件名即可。&lt;/p&gt;&lt;p&gt;如果想更加详细的了解背后的原理和时效，关注代码里面 &lt;code&gt;Encoder&lt;/code&gt; 和 &lt;code&gt;Decoder&lt;/code&gt; 两个类，也可以参考下test目录下的用例。&lt;/p&gt;&lt;h1&gt;完&lt;/h1&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/dlEwIVcKGs7DV2ibxf0bvmnR6fbnx9mZ3MduXGhaiasb3KxjEUBteJ7AszE5f3hSh3lhYvZH1qdibM5ibB8UxEFeRw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;258&quot;/&gt;&lt;/p&gt;&lt;p&gt;欢迎点赞转发！&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>bbb0d10a629aabf54249f9f820ea4596</guid>
<title>一文教你如何学会写 Shell 脚本</title>
<link>https://toutiao.io/k/88px9ws</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4576612903225806&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/tWOhQMr1wdAZfVhlQjibm04ySHUqmracVj9e4j5VwFOnjzaTAvbiczcPiby1rBmZOjOMTbMpzic2rPiaibpg7vZVpMag/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;992&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;做 Java 的肯定都接触过 Linux 系统，那么很多时候我们在开发的过程中都是把我们项目打成一个jar包，或者是war包的形式，然后通过 XFTP 上传到我们服务器的指定目录，然后运行一端启动脚本，让我们&lt;/span&gt;的&lt;span&gt;项目变得可以访问 就像 &lt;/span&gt;&lt;code&gt;./sh service.sh start&lt;/code&gt;&lt;span&gt; 然后启动我们写好的 &lt;/span&gt;&lt;code&gt;sh&lt;/code&gt;&lt;span&gt; 的shell脚本。&lt;/span&gt;&lt;span&gt;接下来我们就来学习一下关于 Shell 脚本是如何写出来的。&lt;/span&gt;&lt;/p&gt;&lt;h4&gt;&lt;span&gt;Shell 脚本&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;Shell 脚本是什么？Shell是一个命令解释器，它的作用是解释执行用户输入的命令及程序等，也就是说，我们用户每输入一条命令，Shell 就会相对应的执行一条命令。当命令或程序语句不在命令行下执行，而是通过一个程序文件来执行时，该程序文件就被称为Shell脚本。&lt;/p&gt;&lt;p&gt;在我们的 Shell 脚本中，会有各种各样的内容，赋值，计算，循环等一系列的操作，接下来我们就来看看这个 Shell 脚本怎么写吧&lt;/p&gt;&lt;p&gt;1.查看自己当前系统默认的 Shell&lt;/p&gt;&lt;p&gt;&lt;code&gt;echo $SHELL&lt;/code&gt;&lt;/p&gt;&lt;p&gt;输出：/bin/bash&lt;/p&gt;&lt;p&gt;2.查看系统支持的Shell&lt;/p&gt;&lt;p&gt;&lt;code&gt;cat /etc/shells&lt;/code&gt;&lt;/p&gt;&lt;p&gt;输出：&lt;/p&gt;&lt;p&gt;/bin/sh /bin/bash /usr/bin/sh /usr/bin/bash&lt;/p&gt;&lt;p&gt;也就是说，我们的云服务器是支持我们在这里给他安排 Shell 脚本的&lt;/p&gt;&lt;h5&gt;&lt;span&gt;Shell 脚本怎么写出来的&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;我们这时候先来安排一下 &lt;code&gt;sh&lt;/code&gt; 的文件,创建一个文件夹，然后在其中创建一个 &lt;code&gt;sh&lt;/code&gt; 的文件。&lt;/p&gt;&lt;p&gt;&lt;code&gt;mkdir /usr/local/shelltest&lt;/code&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;touch test.sh&lt;/code&gt;&lt;/p&gt;&lt;p&gt;创建完成我们编辑一下内容&lt;/p&gt;&lt;p&gt;&lt;code&gt;vim test.sh&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;#!/bin/bash&lt;/span&gt;&lt;br/&gt;&lt;span&gt;echo&lt;/span&gt; &lt;span&gt;&quot;Hello World Shell&quot;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后我们出来运行一下我们的 Shell 的第一个脚本&lt;/p&gt;&lt;p&gt;&lt;code&gt;bash test.sh&lt;/code&gt;&lt;/p&gt;&lt;p&gt;出来的结果是 &lt;code&gt;Hello World Shell&lt;/code&gt;&lt;/p&gt;&lt;p&gt;一个及其简单的脚本出现了，接下我们就分析一波我们写了点啥？&lt;/p&gt;&lt;p&gt;&lt;code&gt;#!/bin/bash&lt;/code&gt;&lt;/p&gt;&lt;p&gt;#! 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell&lt;/p&gt;&lt;p&gt;我们在之前也使用了 &lt;code&gt;echo $SHELL&lt;/code&gt; 来查看了自己系统默认的是哪一种 &lt;code&gt;sh&lt;/code&gt; 解析器，之前看到的是/bin/bash，所以我们在写 Shell 脚本的时候，我们在开头默认的约定中，我们写了这个是用 /bin/bash 来进行解释的，&lt;/p&gt;&lt;p&gt;那么我们如何像之前调用我们的当前目录中的 Shell 脚本一样去调用他呢？就像这个样子的 &lt;code&gt;./sh service.sh start&lt;/code&gt;&lt;/p&gt;&lt;p&gt;1.授权，&lt;/p&gt;&lt;p&gt;我们先不授权试一下看看能通过 ./test.sh 进行调用么&lt;/p&gt;&lt;p&gt;bash: ./test.sh: Permission denied 会提示这个，也就是没有授权定义，&lt;/p&gt;&lt;p&gt;授权命令：chmod +x test.sh&lt;/p&gt;&lt;p&gt;2.执行 ./test.sh&lt;/p&gt;&lt;p&gt;然后调用就能正常输出了,就是说，在当前的目录下执行这个脚本命令。&lt;/p&gt;&lt;h5&gt;&lt;span&gt;Shell 脚本的变量&lt;/span&gt;&lt;/h5&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;定义变量和使用&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;变量命名实际上很简单，我们先来试一下&lt;/p&gt;&lt;p&gt;&lt;code&gt;name=zhiyikeji&lt;/code&gt;&lt;/p&gt;&lt;p&gt;这时候我们怎么使用变量呢？实际上只要在前面加上一个符号就可以 $&lt;/p&gt;&lt;p&gt;&lt;code&gt;echo $name&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# echo $name&lt;/span&gt;&lt;br/&gt;zhiyikeji&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# echo ${name}&lt;/span&gt;&lt;br/&gt;zhiyikeji&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;上面的两种写法都是可以的，外面的大括号加和不加区别不大，可以省略，直接就&lt;code&gt;$name&lt;/code&gt; 就可以使用你定义的变量&lt;/p&gt;&lt;p&gt;&lt;span&gt;使用括号的意义一般在于区别某些变量，比如你写了一串的内容，可能写的是 &lt;code&gt;echo $nameismyfriend&lt;/code&gt;,如果连在一起，是不是有点尴尬，这时候就可以使用括号区别一下，&lt;code&gt;echo ${name}ismyfriend&lt;/code&gt; 不&lt;/span&gt;使&lt;span&gt;用括号的时候，他就去找nameismyfriend这个变量了，就无法出来我们要的效果。&lt;/span&gt;&lt;/p&gt;&lt;ol start=&quot;2&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;删除自己定义的变量&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;code&gt;unset name&lt;/code&gt;&lt;/p&gt;&lt;p&gt;这时候我们就把我们刚才定义的 &lt;code&gt;name=zhiyikeji&lt;/code&gt; 这个变量给去掉了，我们可以调用一下我们的变量看是什么？&lt;/p&gt;&lt;p&gt;&lt;code&gt;echo $name&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# unset name&lt;/span&gt;&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# echo $name&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这是不是就证明我们自己定义的变量已经删除了&lt;/p&gt;&lt;ol start=&quot;3&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;只读变量&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;那么我们需要一个关键字，大家肯定能想到是什么关键字 &lt;code&gt;readonly&lt;/code&gt;&lt;/p&gt;&lt;p&gt;我们先给name赋值，然后使用 readonly 设置只读，然后再改变一下试试，&lt;/p&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# name=zhiyikeji&lt;/span&gt;&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# echo $name&lt;/span&gt;&lt;br/&gt;zhiyikeji&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# readonly name&lt;/span&gt;&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# echo $name&lt;/span&gt;&lt;br/&gt;zhiyikeji&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# name=ceshi&lt;/span&gt;&lt;br/&gt;-bash: name: &lt;span&gt;readonly&lt;/span&gt; variable&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# &lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;竟然是真的，如果不设置只读，是不是会重新可以进行赋值，我们测试个年龄，&lt;/p&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# age=10&lt;/span&gt;&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# echo $age&lt;/span&gt;&lt;br/&gt;10&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# age=20&lt;/span&gt;&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ ~]&lt;span&gt;# echo $age&lt;/span&gt;&lt;br/&gt;20&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;所以我们就可以肯定，readonly就是设置只读的关键词，记住了么？&lt;/p&gt;&lt;p&gt;那么设置只读的变量可以删除么？毕竟总有杠精的面试官会提问这个棘手的问题，但是，阿粉试过的所有方式好像都是不行的，阿粉就直接重启了自己的服务器，这样临时的变量就不存在了！&lt;/p&gt;&lt;h5&gt;&lt;span&gt;Shell 脚本的流程控制&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;说真的，Shell脚本的流程控制数一般才是yyds，为什么这么说，因为你在写大部分的脚本的时候，流程控制的地方永远是最多的，判断，选择，等等一系列的函数，当时熟练使用的时候，就发现这东西确实很有意思。&lt;/p&gt;&lt;h5&gt;&lt;span&gt;IF&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;我们先说最简单的 &lt;code&gt;if else&lt;/code&gt; 这也是我们最经常使用的判断，在写 &lt;code&gt;Shell&lt;/code&gt; 脚本的时候,就不像我们的 Java 中直接写&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;(...){&lt;br/&gt;    &lt;br/&gt;}&lt;span&gt;else&lt;/span&gt;{&lt;br/&gt;    ....&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;Xshell&lt;/code&gt; 中的语法就不是这个样子的，&lt;code&gt;Xshell&lt;/code&gt;语法：&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt; ...&lt;br/&gt;&lt;span&gt;then&lt;/span&gt;&lt;br/&gt;    &lt;br/&gt;    ...&lt;br/&gt;&lt;span&gt;else&lt;/span&gt;&lt;br/&gt;    ...&lt;br/&gt;&lt;span&gt;fi&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;末尾的 fi 就是 if 倒过来拼写,我们可以写一个 &lt;code&gt;if&lt;/code&gt; 的脚本试一下这个流程能否理解。&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;#! /bin/bash&lt;br/&gt;  &lt;/span&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; [ &lt;span&gt;$1&lt;/span&gt; -gt 2 ];&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;then&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;echo&lt;/span&gt; &lt;span&gt;&quot;值大于2&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;else&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;echo&lt;/span&gt; &lt;span&gt;&quot;值小于2&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;exit&lt;/span&gt;&lt;br/&gt;&lt;span&gt;fi&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里申明一下，&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;-ge&lt;/code&gt;标识的是大于等于符号;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;-le&lt;/code&gt;表示的是小于等于符号;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;-gt&lt;/code&gt; 表示大于符号;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;-lt&lt;/code&gt; 表示小于符号;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;-eq&lt;/code&gt; 表示等于符号;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;-ne&lt;/code&gt; 表示不等于符号;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;我们在上面这段脚本中写就是内容就是，我们给脚本传入一个值，然后比对这个值和2的大小关系，然后输出我们指定的内容。&lt;/p&gt;&lt;p&gt;运行后就能看到&lt;/p&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ shelltest]&lt;span&gt;# sh test2.sh 1&lt;/span&gt;&lt;br/&gt;值小于2&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ shelltest]&lt;span&gt;# sh test2.sh 3&lt;/span&gt;&lt;br/&gt;值大于2&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;$1&lt;/code&gt; 表示我们给 Shell 脚本输入的第一个参数, &lt;code&gt;$0&lt;/code&gt;就是你写的shell脚本本身的名字,$2 是我们给 Shell 脚本传的第二个参数&lt;/p&gt;&lt;p&gt;大家在部署某些项目的时候，是不是启动命令就很简洁，就是 &lt;code&gt;sh service.sh start&lt;/code&gt; 类似这种的，那我们来看看一般这种是怎么写的，这就用到了另外一块的内容，和 &lt;code&gt;if&lt;/code&gt; 类似，在 Java 中也有，那就是 &lt;code&gt;Case&lt;/code&gt;.&lt;/p&gt;&lt;h5&gt;&lt;span&gt;Case&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;我们先来看看 &lt;code&gt;Case&lt;/code&gt; 的语法，&lt;/p&gt;&lt;p&gt;&lt;code&gt;case ... esac&lt;/code&gt; 实际上就和 Java 中的 Case 是非常相似的，case 语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令.&lt;code&gt;esac&lt;/code&gt;是一个结束的标志。&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;case&lt;/span&gt; 值 &lt;span&gt;in&lt;/span&gt;&lt;br/&gt;匹配值1)&lt;br/&gt;    command1&lt;br/&gt;    command2&lt;br/&gt;    &lt;br/&gt;    ;;&lt;br/&gt;&lt;span&gt;匹配值2&lt;/span&gt;）&lt;br/&gt;    command1&lt;br/&gt;    command2&lt;br/&gt;    ;;&lt;br/&gt;&lt;span&gt;esac&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;光说不练，假把式，我们来搞一下试试写一个脚本来搞一下。就用我们刚才说的 &lt;code&gt;sh servic.sh start&lt;/code&gt; 来进行测试。&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;case&lt;/span&gt; &lt;span&gt;$1&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;br/&gt;  &lt;br/&gt;start)&lt;br/&gt;        &lt;span&gt;#输出启动命令&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;echo&lt;/span&gt; &lt;span&gt;&quot;start已经开始&quot;&lt;/span&gt;&lt;br/&gt;        ;;&lt;br/&gt;stop)&lt;br/&gt;        &lt;span&gt;#输出停止命令&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;echo&lt;/span&gt; &lt;span&gt;&quot;stop命令执行&quot;&lt;/span&gt;&lt;br/&gt;        ;;&lt;br/&gt;&lt;span&gt;esac&lt;/span&gt;&lt;br/&gt;&lt;span&gt;exit&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;我们来看看运行结果&lt;/p&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ shelltest]&lt;span&gt;# sh service.sh start&lt;/span&gt;&lt;br/&gt;start已经开始&lt;br/&gt;[root@iZbp10j01t7sgfqekyefpoZ shelltest]&lt;span&gt;# sh service.sh stop&lt;/span&gt;&lt;br/&gt;stop命令执行&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;那么这段 Shell 脚本是什么意思呢？其实很简单，匹配我们传入的第一个字符，和 &lt;code&gt;start&lt;/code&gt; 还有 &lt;code&gt;stop&lt;/code&gt; 进行比较，如果匹配上之后，输出命令，最后退出即可。&lt;/p&gt;&lt;p&gt;是不是感觉没有那么复杂了呢？&lt;/p&gt;&lt;h5&gt;&lt;span&gt;For&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;说到流程控制,那么肯定不能不说 for , 毕竟 for 循环在 Java 中那可是重头戏。&lt;/p&gt;&lt;p&gt;我们先看他的格式&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;for&lt;/span&gt; i &lt;span&gt;in&lt;/span&gt; item1 item2 ... itemN&lt;br/&gt;&lt;span&gt;do&lt;/span&gt;&lt;br/&gt;    command1&lt;br/&gt;    command2&lt;br/&gt;    ...&lt;br/&gt;    commandN&lt;br/&gt;&lt;span&gt;done&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;那么我们有没有说像是 Java 中那种 for 循环一样的方式呢？比如说这个&lt;code&gt;for ((i=1; i&amp;lt;=j; i++))&lt;/code&gt;&lt;/p&gt;&lt;p&gt;实际上也是支持这种的，我们来写一个试试。&lt;/p&gt;&lt;pre&gt;&lt;code&gt;j=&lt;span&gt;$1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; ((i=1;i&amp;lt;=j;i++))&lt;br/&gt;&lt;span&gt;do&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;echo&lt;/span&gt; &lt;span&gt;$i&lt;/span&gt;&lt;br/&gt;&lt;span&gt;done&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;执行一下看看&lt;/p&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ shelltest]&lt;span&gt;# sh fortest.sh 6&lt;/span&gt;&lt;br/&gt;1&lt;br/&gt;2&lt;br/&gt;3&lt;br/&gt;4&lt;br/&gt;5&lt;br/&gt;6&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;既然有 for 那是不是就有 while 呢？是的，没错，确实是有 while ，也是循环的意思，但是写法有略微不一样的地方&lt;/p&gt;&lt;h5&gt;&lt;span&gt;While&lt;/span&gt;&lt;/h5&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;while&lt;/span&gt; condition&lt;br/&gt;&lt;span&gt;do&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;command&lt;/span&gt;&lt;br/&gt;&lt;span&gt;done&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;我们来举个尝试打印九九乘法表来看一下&lt;/p&gt;&lt;pre&gt;&lt;code&gt;a=1&lt;br/&gt;b=1&lt;br/&gt;&lt;span&gt;while&lt;/span&gt; ((a &amp;lt;=9))&lt;br/&gt;&lt;span&gt;do&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;while&lt;/span&gt; ((b&amp;lt;=a))&lt;br/&gt;                &lt;span&gt;do&lt;/span&gt;&lt;br/&gt;                        &lt;span&gt;let&lt;/span&gt; &lt;span&gt;&quot;c=a*b&quot;&lt;/span&gt;   &lt;span&gt;#声明变量c&lt;/span&gt;&lt;br/&gt;                        &lt;span&gt;echo&lt;/span&gt; -n  &lt;span&gt;&quot;&lt;span&gt;$a&lt;/span&gt;*&lt;span&gt;$b&lt;/span&gt;=&lt;span&gt;$c&lt;/span&gt; &quot;&lt;/span&gt;&lt;br/&gt;                        &lt;span&gt;let&lt;/span&gt; b++&lt;br/&gt;                &lt;span&gt;done&lt;/span&gt;&lt;br/&gt;                        &lt;span&gt;let&lt;/span&gt; a++&lt;br/&gt;&lt;br/&gt;     &lt;span&gt;let&lt;/span&gt; b=1  &lt;span&gt;#因为每个乘法表都是1开始乘，所以b要重置&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;             &lt;span&gt;echo&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt; &lt;span&gt;#显示到屏幕换行&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;     &lt;span&gt;done&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;[root@iZbp10j01t7sgfqekyefpoZ shelltest]&lt;span&gt;# sh whileTest.sh &lt;/span&gt;&lt;br/&gt;1*1=1 &lt;br/&gt;2*1=2 2*2=4 &lt;br/&gt;3*1=3 3*2=6 3*3=9 &lt;br/&gt;4*1=4 4*2=8 4*3=12 4*4=16 &lt;br/&gt;5*1=5 5*2=10 5*3=15 5*4=20 5*5=25 &lt;br/&gt;6*1=6 6*2=12 6*3=18 6*4=24 6*5=30 6*6=36 &lt;br/&gt;7*1=7 7*2=14 7*3=21 7*4=28 7*5=35 7*6=42 7*7=49 &lt;br/&gt;8*1=8 8*2=16 8*3=24 8*4=32 8*5=40 8*6=48 8*7=56 8*8=64 &lt;br/&gt;9*1=9 9*2=18 9*3=27 9*4=36 9*5=45 9*6=54 9*7=63 9*8=72 9*9=81 &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;是不是也挺简单的？&lt;/p&gt;&lt;p&gt;其实 Shell 脚本的编写一般都是在实际应用中提升，单纯的写测试脚本，也是可以让自己对知识的掌握比较充分，而我们一般都是写一些比较简单的脚本，复杂的不是还有运维么？&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&amp;lt; END &amp;gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;告诉大家一个好消息，Java极客技术读者交流群（摸鱼为主），时隔 2 年后再次开放了，感兴趣的朋友，可以在公号回复：&lt;strong&gt;999&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;267&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;198&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.3693333333333333&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/tWOhQMr1wdDUPe5kG8qNUeSVZwfYRMjGpjiaiczm9oTmUPwicVxxW4TsLOjibicP0WMaAib4lhYfkf4v4voMZic36KeBw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;750&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;喜欢就&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;分享&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;认同就&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;点赞&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;支持就&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;在看&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;一键四连，你的offer也四连&lt;/strong&gt;&lt;/span&gt;&lt;img class=&quot;rich_pages __bg_gif&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;539&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;105&quot; data-ratio=&quot;0.1949685534591195&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/ianc8gowe95SWT9QpjR1RWJoYvwicx4prnZMR2NxgzMNg7zCJTO7YR2CmgwPmHdfz8xNWMw2WxljnnJjU5PHsnSw/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;636&quot;/&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>4ab4f517a0b8a95116c7812bf5f12ab8</guid>
<title>大家想要的 ClickHouse UDF 这次终于来啦</title>
<link>https://toutiao.io/k/wg35d8p</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p&gt;大家一直想要的自定义函数，这次终于来啦，虽然目前还有点简单，不过 CH 的功能进一步丰富了。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;这几天发现，一直有关注的自定义simple lambda function 这个 feature 被合并到主线了，那还不赶紧试一试？（文末会放上PR地址)&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;自定义 lambda 函数的语法如下:&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;nginx&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__attribute&quot;&gt;CREATE&lt;/span&gt; FUNCTION {fn_name} &lt;span class=&quot;code-snippet__attribute&quot;&gt;as&lt;/span&gt; ({parameters}) -&amp;gt; {code}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;例如创建一个自定义函数 testFunc:&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;FUNCTION&lt;/span&gt; testFunc &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; (a, b) -&amp;gt; (a + b)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;: da558806&lt;span class=&quot;code-snippet__number&quot;&gt;-259&lt;/span&gt;f&lt;span class=&quot;code-snippet__number&quot;&gt;-428&lt;/span&gt;b-b777&lt;span class=&quot;code-snippet__number&quot;&gt;-5&lt;/span&gt;ecbbea8bae1&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Ok.&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; set. Elapsed: &lt;span class=&quot;code-snippet__number&quot;&gt;0.004&lt;/span&gt; sec.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;创建之后，就可以在查询中使用了：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; testFunc(&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;9&lt;/span&gt;fba3a87-e577&lt;span class=&quot;code-snippet__number&quot;&gt;-44&lt;/span&gt;ae-bfe2&lt;span class=&quot;code-snippet__number&quot;&gt;-332&lt;/span&gt;c587aa180&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;┌─plus(&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;)─┐&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│          &lt;span class=&quot;code-snippet__number&quot;&gt;3&lt;/span&gt; │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;└────────────┘&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; set. Elapsed: &lt;span class=&quot;code-snippet__number&quot;&gt;0.003&lt;/span&gt; sec.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;让我们来一点复杂的情况:&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;FUNCTION&lt;/span&gt; testFunc1 &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; (a, b, c) -&amp;gt; a + b &amp;gt; c &lt;span class=&quot;code-snippet__keyword&quot;&gt;AND&lt;/span&gt; c &amp;lt; &lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;验证结果:&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    testFunc1(&lt;span class=&quot;code-snippet__number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    testFunc1(&lt;span class=&quot;code-snippet__number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;19&lt;/span&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    testFunc1(&lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;40&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;30&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;17&lt;/span&gt;cfe0a7&lt;span class=&quot;code-snippet__number&quot;&gt;-681&lt;/span&gt;f&lt;span class=&quot;code-snippet__number&quot;&gt;-4&lt;/span&gt;b28&lt;span class=&quot;code-snippet__number&quot;&gt;-81&lt;/span&gt;fa&lt;span class=&quot;code-snippet__number&quot;&gt;-718&lt;/span&gt;fe38f8a2a&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;┌─&lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt;(greater(plus(&lt;span class=&quot;code-snippet__number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;6&lt;/span&gt;), &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;code-snippet__keyword&quot;&gt;less&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;))─┬─&lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt;(greater(plus(&lt;span class=&quot;code-snippet__number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;6&lt;/span&gt;), &lt;span class=&quot;code-snippet__number&quot;&gt;19&lt;/span&gt;), &lt;span class=&quot;code-snippet__keyword&quot;&gt;less&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;19&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;))─┬─&lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt;(greater(plus(&lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;40&lt;/span&gt;), &lt;span class=&quot;code-snippet__number&quot;&gt;30&lt;/span&gt;), &lt;span class=&quot;code-snippet__keyword&quot;&gt;less&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;))─┐&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│                                        &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │                                          &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │                                            &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;└──────────────────────────────────────────┴────────────────────────────────────────────┴──────────────────────────────────────────────┘&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;1 rows in set. Elapsed: &lt;span class=&quot;code-snippet__number&quot;&gt;0.003&lt;/span&gt; sec.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;在自定义函数中，尝试调用系统函数:&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;function&lt;/span&gt; createInfo &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; (perfix,state) -&amp;gt; multiIf(state==&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;code-snippet__keyword&quot;&gt;concat&lt;/span&gt;(perfix,&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;未开始&#x27;&lt;/span&gt;),state&amp;gt;&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; state&amp;lt;&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; ,&lt;span class=&quot;code-snippet__keyword&quot;&gt;concat&lt;/span&gt;(perfix,&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;进行中&#x27;&lt;/span&gt;),state&amp;gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; ,&lt;span class=&quot;code-snippet__keyword&quot;&gt;concat&lt;/span&gt;(perfix,&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;已完成&#x27;&lt;/span&gt;),&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;未知状态&#x27;&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br/&gt;查询是OK的，但是好像列名没有办法设置别名:&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; create_info(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;任务&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; n1&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;46&lt;/span&gt;c12694&lt;span class=&quot;code-snippet__number&quot;&gt;-3335&lt;/span&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;-4&lt;/span&gt;d0b&lt;span class=&quot;code-snippet__number&quot;&gt;-8&lt;/span&gt;d55-e60802c68d2e&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;┌─multiIf(equals(&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;code-snippet__keyword&quot;&gt;concat&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;任务&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;未开始&#x27;&lt;/span&gt;), &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt;(greater(&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;code-snippet__keyword&quot;&gt;less&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;)), &lt;span class=&quot;code-snippet__keyword&quot;&gt;concat&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;任务&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;进行中&#x27;&lt;/span&gt;), greaterOrEquals(&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;code-snippet__keyword&quot;&gt;concat&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;任务&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;已完成&#x27;&lt;/span&gt;), &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;未知状态&#x27;&lt;/span&gt;)─┐&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│ 任务未开始                                                                                                                                                             │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; set. Elapsed: &lt;span class=&quot;code-snippet__number&quot;&gt;0.003&lt;/span&gt; sec.&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;直接使用表字段也没有问题:&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    testFunc(JavaEnable, GoodEvent),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    JavaEnable,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    GoodEvent&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; hits_100m_obfuscated&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;code-snippet__number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;30e05&lt;/span&gt;cdd-da21&lt;span class=&quot;code-snippet__number&quot;&gt;-46&lt;/span&gt;db&lt;span class=&quot;code-snippet__number&quot;&gt;-8&lt;/span&gt;a11&lt;span class=&quot;code-snippet__number&quot;&gt;-49&lt;/span&gt;c5fb348668&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;┌─plus(JavaEnable, GoodEvent)─┬─JavaEnable─┬─GoodEvent─┐&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│                           &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │          &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │         &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│                           &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │          &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │         &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│                           &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │          &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │         &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│                           &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │          &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │         &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│                           &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │          &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │         &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;└─────────────────────────────┴────────────┴───────────┘&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; set. Elapsed: &lt;span class=&quot;code-snippet__number&quot;&gt;0.006&lt;/span&gt; sec.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;进到 ClickHouse 的存储目录，会发现多了一个 user_defined 目录，专门用于保存 UDF 的元数据：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;css&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;% &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;data&lt;/span&gt;/&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;user_defined&lt;/span&gt; % &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;-l&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;total&lt;/span&gt; 16&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;-rw-r-----&lt;/span&gt;  1 &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;nauu&lt;/span&gt;  &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;staff&lt;/span&gt;  46  9 18 08&lt;span class=&quot;code-snippet__selector-pseudo&quot;&gt;:00&lt;/span&gt; &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;function_testFunc&lt;/span&gt;&lt;span class=&quot;code-snippet__selector-class&quot;&gt;.sql&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;-rw-r-----&lt;/span&gt;  1 &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;nauu&lt;/span&gt;  &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;staff&lt;/span&gt;  71  9 18 08&lt;span class=&quot;code-snippet__selector-pseudo&quot;&gt;:03&lt;/span&gt; &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;function_testFunc1&lt;/span&gt;&lt;span class=&quot;code-snippet__selector-class&quot;&gt;.sql&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;typescript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;% cat ./&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;code-snippet__title&quot;&gt;_testFunc&lt;/span&gt;.&lt;span class=&quot;code-snippet__title&quot;&gt;sql&lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__title&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;FUNCTION&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;testFunc&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;AS&lt;/span&gt; (&lt;span class=&quot;code-snippet__params&quot;&gt;a, b&lt;/span&gt;) -&amp;gt; (&lt;span class=&quot;code-snippet__params&quot;&gt;a + b&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;我们也可以使用 Drop Function 删除 UDF:&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;FUNCTION&lt;/span&gt; testFunc1&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;41&lt;/span&gt;b61849-a186&lt;span class=&quot;code-snippet__number&quot;&gt;-47&lt;/span&gt;b9&lt;span class=&quot;code-snippet__number&quot;&gt;-8072&lt;/span&gt;-c4af18be6bab&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Ok.&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; set. Elapsed: &lt;span class=&quot;code-snippet__number&quot;&gt;0.006&lt;/span&gt; sec.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;自定义的函数也会被添加到系统表：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; *&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; system.functions&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;testFunc&#x27;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;code-snippet__number&quot;&gt;97037&lt;/span&gt;df5-cda6&lt;span class=&quot;code-snippet__number&quot;&gt;-471&lt;/span&gt;f&lt;span class=&quot;code-snippet__number&quot;&gt;-933&lt;/span&gt;f&lt;span class=&quot;code-snippet__number&quot;&gt;-278670&lt;/span&gt;f3b113&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;┌─&lt;span class=&quot;code-snippet__keyword&quot;&gt;name&lt;/span&gt;─────┬─is_aggregate─┬─case_insensitive─┬─alias_to─┬─create_query──────────────────────────────────┐&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;│ testFunc │            &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │                &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; │          │ &lt;span class=&quot;code-snippet__keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;FUNCTION&lt;/span&gt; testFunc &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; (a, b) -&amp;gt; (a + b) │&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;└──────────┴──────────────┴──────────────────┴──────────┴───────────────────────────────────────────────┘&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;in&lt;/span&gt; set. Elapsed: &lt;span class=&quot;code-snippet__number&quot;&gt;0.003&lt;/span&gt; sec. Processed &lt;span class=&quot;code-snippet__number&quot;&gt;1.06&lt;/span&gt; thousand &lt;span class=&quot;code-snippet__keyword&quot;&gt;rows&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;46.30&lt;/span&gt; KB (&lt;span class=&quot;code-snippet__number&quot;&gt;304.53&lt;/span&gt; thousand &lt;span class=&quot;code-snippet__keyword&quot;&gt;rows&lt;/span&gt;/s., &lt;span class=&quot;code-snippet__number&quot;&gt;13.24&lt;/span&gt; MB/s.)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;好了，今天就分享到这里吧，PR在此：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://github.com/ClickHouse/ClickHouse/pull/23978&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;原创不易，如果这篇文章对你有帮助，欢迎 &lt;/span&gt;&lt;span&gt;点赞、转发、在看 &lt;/span&gt;&lt;span&gt;三连击&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;欢迎大家扫码关注我的&lt;/span&gt;&lt;span&gt;公众号&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;ClickHouse的秘密基地&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/OIyE3Zib48wMzw1n32iaibic8DREUYDNEWQ6vib8b3VicraCF7JicHcNAOz1uq6DGibcVMf4bKicWPzI7wuAfgI1ickQzoGQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;258&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;往期精彩推荐:&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA4MDIwNTY4MQ==&amp;amp;action=getalbum&amp;amp;album_id=1931467025848074243#wechat_redirect&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;【专辑】ClickHouse实战系列课程&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;amp;album_id=1336889409916043265&amp;amp;__biz=MzA4MDIwNTY4MQ==#wechat_redirect&quot; textvalue=&quot;【专辑】ClickHouse的资讯手札&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;【专辑】ClickHouse的资讯手札&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;amp;album_id=1339543307420106752&amp;amp;__biz=MzA4MDIwNTY4MQ==#wechat_redirect&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;【专辑】ClickHouse的原理巩固&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;amp;album_id=1342290453848326144&amp;amp;__biz=MzA4MDIwNTY4MQ==#wechat_redirect&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;【专辑】ClickHouse的经验分享&lt;/a&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>b1c24dfb2cd8c87c854184aeff303d00</guid>
<title>假期别闲着！快来吧！</title>
<link>https://toutiao.io/k/6uvskld</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;码农周刊是什么？&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;码农周刊是一份专为广大程序员、编程爱好者们打造的 IT 技术周刊。每周发送。&lt;br/&gt;2013 年 9 月 12 日创刊至今，已发送 300 多期，订阅用户超 20 万。&lt;br/&gt;&lt;/span&gt;&lt;span&gt;专业、简单、有用&lt;/span&gt;&lt;span&gt;，是我们一直坚持的办刊宗旨。一路走来，我们见证了不少订阅用户从编程新手进阶成了高级程序员、架构师、CTO……&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;2020 年 4 月，为了给用户提供更优质的服务，我们推出了「&lt;/span&gt;&lt;span&gt;码农周刊VIP会员&lt;/span&gt;&lt;span&gt;」服务。&lt;br/&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;你与 BAT 技术大牛，只差一份「码农周刊VIP会员」的距离！&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;VIP会员特权&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1. 52 期码农周刊VIP会员&lt;span&gt;专属邮件周报&lt;/span&gt;，让你及时掌握技术动向；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2. 只限VIP会员加入的&lt;span&gt;交流圈子&lt;/span&gt;，让你与技术大牛切磋学习；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3. VIP会员独享的&lt;span&gt;工作机会&lt;/span&gt;，为你介绍好公司的好机会；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4. 更多会员特权，持续更新……&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;如何加入「码农周刊VIP会员」？&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;1. 微信扫描下方二维码，加入码农周刊VIP会员知识星球。&lt;/span&gt;&lt;strong&gt;&lt;span&gt;促销期间，一年仅需 108 元！平均一天花费不到 3 毛！&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-cropselx1=&quot;34&quot; data-cropselx2=&quot;356&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;425&quot; data-ratio=&quot;1.0857487922705313&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/t8lpVibticjQ6h6x4EnYInRLic6PibFNWw4zSv28rAxcJu9dumVJF03PwHGOWxOzeJKIsydVa7UJuTo4jOjrct9NZw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;828&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2. 加入码农周刊VIP会员知识星球后，客服会联系您，请留意知识星球内的私信。&lt;br/&gt;3. 客服向您发送码农周刊VIP会员欢迎邮件，开启您的码农周刊VIP会员之旅。&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;心动不如心动，赶快订阅吧！&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>