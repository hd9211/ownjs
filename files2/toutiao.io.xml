<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>2db5c7c629cc996e3a584b829df0054d</guid>
<title>字节一面：Redis 主节点的 Key 已过期，但从节点依然读到过期数据</title>
<link>https://toutiao.io/k/ptbzpm7</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大家好，我是Tom哥~&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们知道，大部分的业务场景都是读多写少，为了利用好这个特性，提升Redis集群系统的吞吐能力，通常会采用&lt;code&gt;主从架构&lt;/code&gt;、&lt;code&gt;读写分离&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7384615384615385&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2KTof9YshwfzDic3iauEiaaW9ett6QtZqbXoY9GPAgniaaS8ddrtgH3oUUohEyfRTzbalMAtuhuAc4iaIIPEd4MfsdA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如上图所示：其中&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Master节点：负责业务的写操作&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Slave节点：实时同步Master节点的数据，提供读能力&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;为了提高吞吐量，采用一主多从的架构，将业务的读压力分摊到多台服务器上&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;上述方案，看似合理，但其实可能存在一定隐患！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.31953125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2KTof9YshwfzDic3iauEiaaW9ett6QtZqbXHvTcicoe2mV5C4fABvOibTSSiav4ib3bvic4xBkwBxP11c5CzicUwic5p37ww/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;strong&gt;一、拉取过期数据&lt;/strong&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;Redis性能高主要得益于纯内存操作，但内存存储介质的成本过高，所以数据的存储有一定的约束。&lt;/span&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通常会设置&lt;code&gt;过期时间&lt;/code&gt;，对于一些使用不是很频繁的数据，会定期删除，提高资源的利用率。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;删除过期数据，Redis提供了两种策略：&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1、惰性删除。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;也称被动删除，当数据过期后，并不会马上删除。而是等到有请求访问时，对数据检查，如果数据过期，则删除数据。&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;优点：不需要单独启动额外的扫描线程，减少了CPU资源的损耗。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;缺点：大量的过期数据滞留内存中，需要主动触发、检查、删除，否则会一直占用内存资源。&lt;span/&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;2、定期删除。每隔一段时间，&lt;code&gt;默认100ms&lt;/code&gt;，Redis会随机挑选一定数量的Key，检查是否过期，并将过期的数据删除。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;你可能会为问了，既然Redis有过期数据删除策略，那为什么还会拉取到已经过期的数据呢？&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;1.040909090909091&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2KTof9YshwfzDic3iauEiaaW9ett6QtZqbX4CdibSED5Ovs4tWFv0ASLvkoVKnSsv16vTtnHMetMo7OwE4t2iaRT7Yw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;220&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这要从&lt;code&gt;主从同步&lt;/code&gt;讲起了，我们先来看张流程图&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.745417515274949&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2KTof9YshwfzDic3iauEiaaW9ett6QtZqbXkNcHXuGkGfbWicxZcOMOyY6oV1v8AcdlGuMaEowxwiaU0Yk5oKh8cXKQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;982&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;当客户端往主库写入数据后，并设置了过期时间，数据会以异步方式同步给从库。&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1、如果此时读主库，数据已经过期，主库的&lt;code&gt;惰性删除&lt;/code&gt;会发挥作用，主动触发删除操作，客户端不会拿到已过期数据&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;2、但是如果读从库，则有可能拿到过期数据。原因有两个&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;原因一：&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;跟 Redis 的版本有关系，Redis 3.2 之前版本，读从库并不会判断数据是否过期，所以有可能返回过期数据。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;升级Redis的版本，至少要3.2 以上版本，读从库，如果数据已经过期，则会过滤并返回空值。&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;特别注意：&lt;/p&gt;&lt;p&gt;&lt;br/&gt;此时同步过来的数据，虽然已经过期，但本着谁生产谁维护的原则，从库并不会主动删除同步的数据，需要依赖于主节点同步过来的key删除命令。&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;原因二：&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;跟过期时间的设置方式有关系，我们一般采用 &lt;code&gt;EXPIRE 和 PEXPIRE&lt;/code&gt;，表示从执行命令那个时刻开始，往后延长 ttl 时间。严重依赖于 &lt;code&gt;开始时间&lt;/code&gt; 从什么时候算起。&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.63984375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2KTof9YshwfzDic3iauEiaaW9ett6QtZqbXjRudlLG4uMBUISLFsC20zcaJ2DVH0FhABpX001xpticlI8iahfgq8gvg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如上图所示，简单描述下过程：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;主库在 t1 时刻写入一个带过期时间的数据，数据的有效期一直到 t3&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;由于网络原因、或者缓存服务器的执行效率，从库的命令并没有立即执行。一直等到了 t2 才开始执行，
数据的有效期则会延后到 t5&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;如果，此时客户端访问从库，发现数据依然处于有效期内，可以正常使用&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;可以采用Redis的另外两个命令，&lt;code&gt;EXPIREAT 和 PEXPIREAT&lt;/code&gt;，相对简单，表示过期时间为一个具体的时间点。避免了对&lt;code&gt;开始时间&lt;/code&gt;从什么时候算起的依赖。&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;EXPIREAT：单位为秒&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;PEXPIREAT：单位为毫秒&lt;span/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;span&gt;特别注意：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;EXPIREAT 和 PEXPIREAT 设置的是时间点，所以要求主从节点的时钟保持一致，需要与NTP 时间服务器保持时钟同步。&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.7014925373134329&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2KTof9YshwfzDic3iauEiaaW9ett6QtZqbXwC727N72ogX6tXyUpAurkuurBdrRQFsNe8v32nGLjSjnASqtet5gpQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;268&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;br/&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;主从同步，除了&lt;code&gt;读从库&lt;/code&gt;可能拉取到过期数据，还可能遇到数据一致性问题。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;继续往下看&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;strong&gt;二、主从数据不一致&lt;/strong&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;解释下，什么是主从数据不一致？指客户端从库中读取到的值与主库中读取的值不一致！&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5945017182130584&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2KTof9YshwfzDic3iauEiaaW9ett6QtZqbXhicx7jjBwxP3yQeYiapMIHnuhVgN0csbJLZVYJibScTMQicZfDhuWNPNlA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1164&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如图所示：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;客户端写入主库，值为100&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;然后，主库将值100 同步给 从库&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;接着，客户端又访问主库，将值更新为 200&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;由于主从同步是异步进行的，有一定延迟，假如最新数据还没有同步到从库，那么从库读取的就不是最新值。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;从库同步落后的原因主要有两个：&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1、主从服务器间的网络传输可能有延迟&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;2、从库已经收到主库的命令，由于是单线程执行，前面正在处理一些耗时的命令（如：pipeline批处理），无法及时同步执行。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1、主从服务器尽量部署在同一个机房，并保持服务器间的网络良好通畅&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;2、监控主从库间的同步进度，通过&lt;code&gt;info replication&lt;/code&gt;命令 ，查看主库接收写命令的进度信息（master_repl_offset），从库的复制写命令的进度信息（slave_repl_offset）&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.415625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2KTof9YshwfzDic3iauEiaaW9ett6QtZqbXId8Ro71pYrT9CkEuEHXReyGsQxfzbFY6vdd0PIgEHtsx3icjbpBBACw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;master_repl_offset - slave_repl_offset&lt;/p&gt;&lt;p&gt;得到从库与主库间的复制进度差&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们可以开发一个监控程序，定时拉取主从服务器的进度信息，计算进度差值。如果超过我们设置的阈值，则通知客户端断开从库的连接，全部访问主库，一定程度上减少数据不一致情况。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;待同步进度跟上后，我们再恢复客户端与从节点的读操作。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;关于我：Tom哥，前阿里P7技术专家，多年大厂实战经验。欢迎关注，我会持续输出更多经典原创文章，为你大厂助力。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;欢迎小伙伴找Tom哥唠嗑聊天， 技术交流，围观朋友圈，打怪人生不再寂寞。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100003916&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.069090909090909&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2KTof9YshwcdJhGaQRdAk0VWLIAIU548z3Izf6mwqwwUX9X86hvNHZq158VYMEaxegjfRg8ic02O0HeWD4xIsiaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;550&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;原创不易，看到这里，还请点个&lt;/span&gt;&lt;span&gt;「赞」&lt;/span&gt;&lt;span&gt;和&lt;/span&gt;&lt;span&gt;「在看」&lt;/span&gt;&lt;span&gt;，谢谢大家支持&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>9b7815927b83c3673d6f528b2126788f</guid>
<title>最详细的 Go+ 快速入门体验教程</title>
<link>https://toutiao.io/k/rk2w5jr</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;237&quot; data-fileid=&quot;100000976&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4255555555555556&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeA0KflzC88CqGU0f7fUncIeOXXFbqgdLRxh3VESicgzTTLlQkgIDTnCRA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;900&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Go+ 1.0 的发布会过去有几天了，想着要不直接干一个 Demo 到本地玩玩，于是就有了这篇文章。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;你也可以根据这篇文章一步一步的搭建你的 Go+ 开发环境。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果你只是想体验下，可以直接到 play 页面体验，地址如下：&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;https://play.goplus.org/&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000965&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.45294855708908405&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeAtxx7ghOMS1dTRia2TMdGuia7RBH9NhVv2YlvfBNBqENuq7WzzRTaPcCA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;797&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;环境安装&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先我们去到 Go+ 的官网：goplus.org&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000966&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5026223776223776&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeAFRibbm6O8ia0EXhc1eyF8uOxMuD0PpogrxFnXLdm4Xb6iabbpDF4onY2A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1144&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一头可爱的小牛牛，非常具有七牛的辨别度。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;根据官网可以看出 Go+ 的定位更多的是往工程、STEM教育和数据科学这几个方面。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;点击 Download Go+ 按钮，就会直达他们的 Github Release 页面：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000967&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5829846582984658&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeArvBfc4dV1WprI7aQ27xibSSmuW8815gWVo5jjPfIROsJ2lbuBQopCtQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1434&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我现在看到的是 1.0.16 版，或许你看到时版本会更高些。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里根据你的系统下载对应的包即可，我使用的 Mac 电脑，所以选择 Darwin 的包。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下载解压后，应该能看到有 2 个可执行的二进制文件：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000968&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.29549902152641877&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeAIWQ6lh7514jIMO2QkAYicjaUVjicPB1G2T02LiaVF9qsETiba1hlGAcw2Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1022&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;此时我们就需要把这两个二进制文件放到，已经添加到你的环境变量的目录下面，方便我们可以在任意文件夹下执行 gop xxx 命令。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我这里选择放到 GOPATH 下面的 bin 目录下面。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;到此就安装完毕了。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;开发工具和插件&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;有人问有官方的开发工具没，我好像没在官网找到有。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;所以我这里使用的 VScode 作为开发工具，因为方便安装插件。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先我们需要在插件中心找到一个名叫 goplus 的插件：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000969&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.75&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeAicvwqUFKoyUsT8iaDfyLiclg7EUaWDK1ibF7dvN5Yf7iclObvbfbGobFEfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2000&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;安装完毕，我们就可以开始编写代码了。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;编写 Demo 代码&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我在我的桌面上新建了一个名为 gop 的目录，并用 vscode 打开了。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;因为 Go+ 其实是对 Go 进行了一些扩展，其开发环境还是需要依赖 Go 的。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果你没在 GOPATH 下新建工程，就需要使用 Go Model 来处理依赖，所以我们这里在工程目录下面执行下 Go Model 的初始化命令：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;go mod init gop&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里 gop 是你的工程名字，你可以随意。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000970&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeAQic7xVibRyXkfqYNWnshYhgia00ucdVscWmJ1nPmOicJcufR6mKW8XB1HQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;此时文件夹下面会多一个 go.mod 文件，这里不做过多解释了。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;随后开始编写我们的 gop 文件，新建一个 main.gop 文件，写入如下内容：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt; &lt;span&gt;println&lt;/span&gt;(&lt;span&gt;&quot;hello&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;和 Go 的代码很相似，但是 Go 的输出需要使用 fmt 包，在 Go+ 里面则不需要。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;现在编译执行下这个文件：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;gop run main.&lt;span&gt;go&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;你会发现少依赖：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000971&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.34615384615384615&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeADC3xSz2Zp0yh8XdC9PrSt9YD9PAicRX4icvQ6QV2gbHYnftAnKKNia7Aw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1300&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;直接在命令行执行他提示的安装命令即可：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;go&lt;/span&gt; get github.com/goplus/gop/builtin&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;安装完毕后，再次执行就可以了：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000972&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeA44Rmw6jfxHXgYJzcQmolMibAiaEvQo8Z8jYFBGGCxaHkBy2tCoLsGcBA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;你会发现他把 gop 文件翻译成了 autogen.go 文件，这个直接用 go 执行那个文件也是一样的效果。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;Mac环境特有的问题&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果你是 Mac 环境，你在第一次执行时，你应该会遇到下面这个提示：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000973&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.0076923076923077&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeA8uNqT4aFk86Q0qVaxFlVvFzXgZP68ODtsicDfTL6KC8vf0ps9t6WV1Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;520&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;此时你大可不必【移到废纸篓】里面，点击取消到【安全性与隐私】的【通用】里面点击【仍然允许】即可。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100000974&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8787425149700598&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oiccOczwQpF88XZfFX8iaYHGIYjGpFicYeAF5htcWlaQpN2stBvzxth8pjReUaoZdLlBHBTTiaiaEOaF0l6oBU8ibCAw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1336&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;随后 gop 的提示也是一样的处理方式。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;一些 Go+ 的特性&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Go+ 给我们提供了很多语法糖的东西给我们，让我们的代码看起来更加的人性化，写起代码来更加丝滑，当然不止语法糖这一个好处，后期可能还会有科学计算方面的支持等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;所以这篇文章接下来就给大家挑一些语法糖给大家说说：&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;混合切片&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这是我给他取的名字哈，在 Go 里面除了 interface 类型的以外，一个切片只能存放一种类型，所以在创建时就得定义好。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;但是 Go+ 里面你大可不必关心数据类型，你可以任意地放类型。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt; a := [&lt;span&gt;1&lt;/span&gt;, &lt;span&gt;&quot;abc&quot;&lt;/span&gt;, &lt;span&gt;2.3&lt;/span&gt;]&lt;br/&gt; &lt;span&gt;println&lt;/span&gt;(a)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;---&lt;br/&gt;$ gop run main.gop &lt;br/&gt;[&lt;span&gt;1&lt;/span&gt; abc &lt;span&gt;2.3&lt;/span&gt;]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;然后你去看 autogen.go 文件，你会发现，他进行了自动类型推导。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;切片的遍历&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt; a := [&lt;span&gt;1&lt;/span&gt;, &lt;span&gt;2.3&lt;/span&gt;, &lt;span&gt;45&lt;/span&gt;]&lt;br/&gt; &lt;span&gt;println&lt;/span&gt;([item*&lt;span&gt;2&lt;/span&gt; &lt;span&gt;for&lt;/span&gt; item &amp;lt;- a])&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;---&lt;br/&gt;$ gop run main.gop &lt;br/&gt;[&lt;span&gt;2&lt;/span&gt; &lt;span&gt;4.6&lt;/span&gt; &lt;span&gt;90&lt;/span&gt;]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种写法其他语言好像也是支持的，类似高阶函数。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;更加人性化的错误处理&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Go 里面的错误处理机制是最让人烦恼的，所以 Go+ 里面给出了他的处理方式：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;expr! &lt;span&gt;// panic if err&lt;/span&gt;&lt;br/&gt;expr? &lt;span&gt;// return if err&lt;/span&gt;&lt;br/&gt;expr?:defval &lt;span&gt;// use defval if err&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;怎么用呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;假如我们需要写一个方法，把 string 类型的转换成 int 类型，如果转换成功返回 int 数据，如果转换异常就返回 0。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下面是 Go 的代码：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;ToInt&lt;/span&gt;&lt;span&gt;(in &lt;span&gt;string&lt;/span&gt;)&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt; res, err := strconv.Atoi(in)&lt;br/&gt; &lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;br/&gt; } &lt;span&gt;else&lt;/span&gt; {&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; res&lt;br/&gt; }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下面是 Go+ 的写法：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;ToInt&lt;/span&gt;&lt;span&gt;(in &lt;span&gt;string&lt;/span&gt;)&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt; &lt;span&gt;return&lt;/span&gt; strconv.Atoi(in)?:&lt;span&gt;0&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;是不是简洁了很多，这种写法和 swift 很类似。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;写在最后的&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Python 之所以很多人用，有很多原因，但是有一点是少不了的，那就是他的库多，所以 Python 又称为胶水语言。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;所以如果后期 Go+ 里面能纳入更多的库，相信将会是 Go 的重磅炸弹，当然这个还是主要看 Go+ 的社群了。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一起期待 Go+ 未来的进一步动作吧！&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>6f7008bc43467cb7bcfb23bfc6986938</guid>
<title>一个反直觉的 SQL</title>
<link>https://toutiao.io/k/mfl969k</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;引子&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;在&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247485779&amp;amp;idx=1&amp;amp;sn=95a8b630d96dc0e76436f7b1c3d5bd51&amp;amp;chksm=fafde3fdcd8a6aebaf8128b65255d8d38bdd695a02c2c218e5435e29073726b1c2e5525a9355&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;《容易引起雪崩的两个处理》&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;《容易引起雪崩的两个处理》&lt;/a&gt;里，我提到一个慢查询的问题。本文先从整洁架构的角度讲讲慢查询sql完成的功能以及设计，再介绍对sql进行的实施测试现象以及思考。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;设计讲解&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;一见杨过误终身，有多少萌妹子败给了一个痴字。金庸笔下的痴儿怨女数量之多就需要单独申请服务器，用独立存储单元进行存储。&lt;/p&gt;&lt;p&gt;先说神雕侠侣的杨过，陆无双和程英两姐妹苦等他16年最终等来了他和小龙女撒了一波狗粮而去；郭芙含怨20多年；完颜萍一生为杨过梦绕魂牵；郭襄做了尼姑；最惨&lt;span&gt;公孙绿萼，&lt;/span&gt;&lt;span&gt;为救&lt;/span&gt;&lt;span&gt;他而死，用生命换来的解药杨过转身扔进绝情谷底，&lt;span&gt;公孙绿萼&lt;/span&gt;在天上看到此情此景也会气的骂娘吧。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;再说雪山飞狐的胡斐，出家的袁紫衣；为救他惨死的程灵素……&lt;/p&gt;&lt;p&gt;从领域驱动设计的角度讲，上面都是值对象。今天不讲值对象，讲实体。所以先拉回来。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3658787255909558&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRlicwyMoVfkKaltdY7gIqsowozHAw31RhAjVHPyiaaFEXdgP29rwQAmFcbHCict6ZFsgLgI5WBLUpZuWw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;973&quot;/&gt;&lt;/p&gt;&lt;p&gt;功能简单来说如上图，就是从页面发起查询，查询入口有多个。有个页面是查询角色的仇人，比如杨过的仇人有金轮法王、公孙止、赵志敬……；有个页面是查询角色撩过的妹子，比如杨过撩过的妹子有凌洪波、&lt;span&gt;陆无双、程英……；有些人在几个查询页面都能查到，比如李莫愁既是杨过撩过的妹子，又是杨过的仇人。这里我们把一种页面叫一个请求方。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;请求方发起更新查询请求，比如请求方要查询杨过的所有仇人。请求经过转接系统将请求落库后转发到MQ。MQ异步返回包含杨过、胡斐在内的所有仇人的结果。转接系统根据结果反查请求信息，将结果存储。请求方3s后再发起结果查询，这时就会根据请求条件直接返回杨过的所有仇人。这里值得注意的是一次请求返回的结果有的100多条，有的200多条。就是说杨过、胡斐等这些金庸笔下的人物目前仇人列表总数是100多条；杨过、胡斐等这些金庸笔下的人物目前撩过的妹子列表总数是200多条。编辑还在不断录入数据，过一段时间，数据会变化。&lt;/p&gt;&lt;p&gt;功能的设计整体采用整洁架构中的&lt;strong&gt;&lt;span&gt;事件溯源&lt;/span&gt;&lt;/strong&gt;的变通方法。对于发起请求，只有增加和查询操作；对于回执结果，因为查询只会查询最新回执。所以一个请求方结果返回后会将所有之前的老数据更新为is_new=N，新插入记录is_new=Y。&lt;/p&gt;&lt;p&gt;回执结果记录数据表设计如下：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5706521739130435&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRlicwyMoVfkKaltdY7gIqsowo3oFibpXfn6OaSLcXCe0LQQsGK5cecMc20Qic3ibmtOpt7lBvmGsNEZmHA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;368&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;问题描述&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;这个查询系统受到不少人的喜爱，不知不觉间，查询次数过多，事件溯源的设计导致回执结果记录数据表积累了358万条数据。之前没有索引，结果出现一次请求查询20多秒，更新处理直接把数据库拖挂了。&lt;/p&gt;&lt;p&gt;在&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247485779&amp;amp;idx=1&amp;amp;sn=95a8b630d96dc0e76436f7b1c3d5bd51&amp;amp;chksm=fafde3fdcd8a6aebaf8128b65255d8d38bdd695a02c2c218e5435e29073726b1c2e5525a9355&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;《容易引起雪崩的两个处理》&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;《容易引起雪崩的两个处理》&lt;/a&gt;里，我讲解过给is_new加上索引，虽然is_new只有N和Y两个值，总体数据区分度不高，但是对于这种N和Y的值占比是万比一比例，只会查其中少的那部分，却是比普通索引有更高的效率。&lt;/p&gt;&lt;p&gt;问题来了，请求方的查询条件是where is_new=Y and 角色名=杨过 and 查询来源=仇人。我是该建立三个字段联合索引还是两个字段联合索引还是单个索引？&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;反直觉！&lt;/span&gt;&lt;/strong&gt;经过试验：&lt;br/&gt;1&amp;gt;is_new、角色名、查询来源 三个字段加索引&lt;br/&gt;2&amp;gt;is_new、查询来源两个字段加索引&lt;/p&gt;&lt;p&gt;3&amp;gt;is_new、角色名两个字段加索引&lt;br/&gt;4&amp;gt;is_new单个字段加索引&lt;br/&gt;四种情况sql执行速度在ms级别没有任何差别！几次测试都是6ms返回！而更新时间虽然增加了建索引的时间，反而耗时大大减少！&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;原理分析&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;查询时间分析&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;上面所列的索引添加方式都是索引全中，假设is_new的数据共400多条，某查询来源的数据是一二百条，某角色名大概十几条。B+树底层：&lt;br/&gt;1&amp;gt; is_new、角色名、查询来源 三个字段加索引时索引命中十几条，然后通过主键查到数据返回&lt;/p&gt;&lt;p&gt;2&amp;gt; is_new、查询来源  两个字段加索引时索引命中一二百条，然后扫描这一二百条数据，查到需要的十几条数据返回&lt;/p&gt;&lt;p&gt;3&amp;gt;is_new、角色名  两个字段加索引时索引命中二十几条，然后扫描这二十几条数据，查到需要的十几条数据返回&lt;/p&gt;&lt;p&gt;4&amp;gt;is_new单个字段加索引时索引命中400多条，然后扫描这400多条数据，查到需要的十几条数据返回&lt;/p&gt;&lt;p&gt;之所以单个索引和联合索引查询结果区别不大呢，是因为扫描的数据共400多条，按照数据库的处理能力来说不算什么，这6ms时间主要花在了组装数据和传输数据上。如果查询条件不命中(返回数据条数为0)，查询时间几乎为0！&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;更新时间分析&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;上面提到每次查询都会把上次结果的is_new更新为N，新数据插入时is_new=Y。所以读写比例为1:1。更新性能就是不能不考虑的问题。当然最重要的是更新操作是数据库被拖挂的罪魁祸首。&lt;/p&gt;&lt;p&gt;update 回执结果记录数据表 set is_new=N where is_new=Y and 查询来源=仇人。&lt;/p&gt;&lt;p&gt;我测试了一下：&lt;/p&gt;&lt;p&gt;1&amp;gt; is_new、角色名、查询来源 三个字段加索引时更新时间90ms。&lt;/p&gt;&lt;p&gt;2&amp;gt; is_new、查询来源  两个字段加索引时更新时间60ms。&lt;/p&gt;&lt;p&gt;3&amp;gt;is_new、角色名 两个字段加索引时更新时间60ms。&lt;/p&gt;&lt;p&gt;4&amp;gt;is_new单个字段加索引时更新时间30ms。&lt;/p&gt;&lt;p&gt;这个更新操作，涉及索引重建。层数越多越慢不难理解。但是为什么时间是几十毫秒级别呢？没建索引之前查询都要20s。原因是B+树是树形结构。示意图如下所示，声明：下面的解释只是针对这个问题一个脑补过程，实际上有很多不严谨的地方。比如B+树还有最底层的叶子节点来存放数据。叶子节点之间有双向链表，与主题无关，没画那么细。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.41782407407407407&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRlicwyMoVfkKaltdY7gIqsowojpT1XyyWUhWGg649HfA2fL7ApnFOibrWqczwlfibbdXiaqfgMFxmlkR1Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;864&quot;/&gt;&lt;/p&gt;&lt;p&gt;更新操作会首先进行一个查询，is_new=Y，然后会在is_new=Y这个范围内将is_new=Y涉及的一二百条数据，再到is_new=N下面自己的位置进行插入。如果是三层，每层的数据都需要先找自己的位置，最慢。这里面没有画的叶子节点是从左到右按id顺序排序的。如果只有一层is_new=Y的整个直接放到is_new=N下面的最后就可以了，最快。这就解释了四种更新方式的更新时间差异。&lt;/p&gt;&lt;p&gt;但是为什么加了索引和完全不加索引之间有有多于千倍的性能差异呢？更新操作的时间也主要是花在查询上。如果完全不加索引，一二百条数据每条插入前先进行查找，查找要全表扫描，358万条数据，16K为一个内存换页。我就不具体算了，但是要进行很多次内存换页才能查出来。还要乘以数据条数。而加了索引，因为有is_new=Y条件，进行一次内存换页就可以了。因为is_new=Y数据总共就400多条，1个内存页是可以存下的。所以一二百条数据中下一条就不需要内存换页了，查询总共就需要1次内存换页，基本不花什么时间。剩下的就是一条条插入具体位置了。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;最终结论&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;通过上面比较，自然是只加单索引is_new最高效。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;往期推荐&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5e2b6a98e00ef9f39193a950153b21b9</guid>
<title>教你一个快速掌握知识的学习方法</title>
<link>https://toutiao.io/k/rd17z33</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;p id=&quot;js_tags&quot; class=&quot;article-tag__list single-tag__wrp js_single js_wx_tap_highlight wx_tap_card&quot; data-len=&quot;1&quot; role=&quot;link&quot; aria-labelledby=&quot;js_article-tag-card__left&quot; aria-describedby=&quot;js_article-tag-card__right&quot;&gt;
                                            
                                                                                    &lt;span aria-hidden=&quot;true&quot; id=&quot;js_article-tag-card__left&quot; class=&quot;article-tag-card__left&quot;&gt;
                                    &lt;span class=&quot;article-tag-card__title&quot;&gt;收录于话题&lt;/span&gt;
                                    &lt;span class=&quot;article-tag__item-wrp no-active js_tag&quot; data-url=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA3MDg5MDkzOA==&amp;amp;action=getalbum&amp;amp;album_id=1536569434063077381#wechat_redirect&quot; data-tag_id=&quot;&quot; data-album_id=&quot;1536569434063077381&quot; data-tag_source=&quot;4&quot;&gt;
                                        &lt;span class=&quot;article-tag__item&quot;&gt;#认知升级迭代&lt;/span&gt;
                                    &lt;/span&gt;
                                &lt;/span&gt;
                                &lt;span aria-hidden=&quot;true&quot; id=&quot;js_article-tag-card__right&quot; class=&quot;article-tag-card__right&quot;&gt;27个&lt;span class=&quot;weui-hidden_abs&quot;&gt;内容&lt;/span&gt;&lt;/span&gt;
                                                                                        &lt;/p&gt;

                
                                
                
                

                
                                                                

                
                                


                
                
                
                
                                                
                                                                
                                
                                
                
                &lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section class=&quot;mp_profile_iframe_wrp&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzA3MDg5MDkzOA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgQmUQ0Aca9qSYNFn0tQEXQc5EibBkqQLYtibYBj1hXuagwXkNc3kVwplHxIl7KQfBIiagysgn9GDUUibw/0?wx_fmt=png&quot; data-nickname=&quot;架构精进之路&quot; data-alias=&quot;jiagou_jingjin&quot; data-signature=&quot;十年研发风雨路，大厂架构师，CSDN博客专家，InfoQ写作平台签约作者。专注软件架构研究，技术学习与职业成长，坚持分享接地气儿的架构技术干货文章！&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;编者按：面对技术的不断升级迭代，&lt;span&gt;作为技术同学&lt;/span&gt;需要不断的自我学习和迭代。费曼是一个有趣且博学的科学家，他的学习技术是可以复制的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;费曼学习技巧是掌握大量知识的极佳方式，希望对您有所启发。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6428571428571429&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgQaTL4ZYJgeO6tibM96Q73MU1jjDxwl21RzoNGED9aYSx5Unj7ZqKMKkziaw9byia953WDenLq0HTOfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;700&quot;/&gt;&lt;/p&gt;&lt;p&gt;Feynman illustration by Sunny Labh inspired by ZenPencils&lt;/p&gt;&lt;p&gt;理查德·费曼（Richard Feynman）被认为是科学史上最不可思议的人物之一。费曼博士是1965年量子电动力学诺贝尔奖得主(与J. Schwinger和Tomonaga一起)，他是一位非常了不起的教育家和伟大的物理学家。&lt;/p&gt;&lt;p&gt; &lt;em&gt;坦诚地讲，费曼既是天才又是小丑。“深刻的思考”和“快乐的扮小丑”并不是分裂人格的两个独立部分。——Freeman Dyson, 1988年对费曼的评论。&lt;/em&gt;&lt;em/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7171428571428572&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Z2bVaFK6CgQaTL4ZYJgeO6tibM96Q73MUhmrg6JaskjHUUKTmiaxia0lCT3xIgmL7c1samNLFDBdSa3ES5VvbTzsw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;700&quot;/&gt;&lt;/p&gt;&lt;p&gt;Feynman at Caltech&lt;/p&gt;&lt;p&gt;理查德·费曼的天才之处在于他的三卷本物理学著作《费曼物理学讲义》（The Feynman Lectures on Physics），这是根据他1961-1963年在加州理工学院的演讲改编的。&lt;/p&gt;&lt;p&gt;理查德·费曼(Richard Feynman)十几岁时就读的高中没有开设任何微积分课程。在他上高中的时候，他决定自学微积分，并阅读了《实用微积分》。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Z2bVaFK6CgQaTL4ZYJgeO6tibM96Q73MUHEjHW8Jv81hKToxEvxAXzVZ7wJog6d7e9nyl8Ke5uzuTfO4e1NEwfg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;Credits: Melinda Baldwin&lt;/p&gt;&lt;p&gt;费曼始终认为，如果一个人不能用简单的语言解释一件事，那他就没有理解它。阿尔伯特·爱因斯坦也曾说过类似的话。不管这个观点是否来自费曼，这个想法都是正确的，事实上，这也是费曼学习方法的基础。费曼经常被认为是“伟大的解释者”，因为他能够以一种非科学背景的人也能理解的方式，用极其简单易懂的方式解释科学中复杂的概念，尤其是物理学。&lt;/p&gt;&lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;190&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;section&gt;他打开一本新的笔记本，在书的扉页上写道：“记录我不知道的事”（NOTEBOOK OF THINGS I DON’T KNOW ABOUT）。这是他第一次(但不是最后一次)重新整理他的知识。他花了几个星期的时间拆解物理学的每个分支，给零件上油，然后再把它们组装起来，同时一直在寻找原始边界和不一致之处。他试图找出每门学科的核心。&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;——詹姆斯·格莱克（James Gleick）评价理查德·费曼的传记&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;h3 label=&quot;二级标题&quot;&gt;&lt;br/&gt;&lt;/h3&gt;&lt;h3 label=&quot;二级标题&quot;&gt;&lt;strong&gt;&lt;span&gt;那费曼技术是什么？&lt;/span&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;费曼的学习技巧主要包括四个简单的步骤：&lt;/p&gt;&lt;h3 label=&quot;二级标题&quot;&gt;&lt;span&gt;步骤1：&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;费曼技术几乎适用于任何学科和概念，而并不局限于数学或物理，它可以应用到更广泛的领域。使用这种技巧的第一步是选择主题，并开始研究它。&lt;/p&gt;&lt;p&gt;现在，&lt;span&gt;学习并不意味着仅仅记住知识&lt;/span&gt;。&lt;/p&gt;&lt;p&gt;事实上，费曼本人一直反对死记硬背的文化，他一直认为一个人应该学习和理解原则，而不是死记硬背事实或公式。另一个学习的好方法是写。在纸上写东西会刺激大脑的海马体，这部分大脑主要负责记忆和学习。&lt;/p&gt;&lt;h3 label=&quot;二级标题&quot;&gt;&lt;span&gt;步骤2：&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;如果你想掌握某件事，那就把这件事教给别人。&lt;span&gt;教学是学习的有力工具&lt;/span&gt;。&lt;/p&gt;&lt;p&gt;用你自己的话解释某个概念，并试着向孩子或完全不熟悉这个话题的人解释。你也可以假装向桌子上的一只橡皮鸭解释。&lt;/p&gt;&lt;p&gt;这个想法是，试图用尽可能简单明了的语言把事情分解。尽量使用简单的术语和词汇，不要只局限于你所学的领域。你也可以列举一个或两个例子，使事情更容易理解。如果你这样做，你会更容易理解更深层次的东西，并帮助你建立知识的联系。&lt;/p&gt;&lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;120&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;section&gt;所有的东西都是由原子组成的，原子是一种永无休止运动的小粒子，当它们相距不远时，就会相互吸引，但一旦相互挤压，它们就会相互排斥。在这句话里，有大量关于这个世界的信息。——他认为，科学知识中最有价值的信息，是用最少的词在一句话里陈述了原子假说。&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;h3 label=&quot;二级标题&quot;&gt;&lt;span&gt;步骤3：&lt;/span&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p&gt;这是一个非常关键的步骤，可以让你发现自己的不足之处。&lt;/p&gt;&lt;p&gt;当你用简单的语言来解释或写东西时，你总是会遇到一些难以解释或建立联系或表述例子的地方。这时候，你就要回归到资源材料，书籍或期刊或互联网，无论你的主要参考资料是什么，回去看看，并填补你的知识空白。你可以通过几个例子来寻找自己的差距，比如无法解释或简化某事，忘记了一些重要的要点，等等。我们的想法是回到过去，再次修改。这有助于你更好地理解事物。&lt;/p&gt;&lt;p&gt;在这一步中，你知道你需要努力和关注的领域，这是学习过程的重要部分。了解自己的局限性，然后努力去更好地理解它们是这一步的重点，它就像魔法一样有效。&lt;/p&gt;&lt;h3 label=&quot;二级标题&quot;&gt;&lt;span&gt;步骤4：&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;现在检验成果的时候来了。一旦你纠正了自己的错误，就能简化自己的解释，使它变得更好。&lt;/p&gt;&lt;p&gt;无论何时遇到问题，你总是可以回到第二步和第三步，直到你对主题有一个清晰的理解。你的笔记和例子现在是尽可能最简单的形式，你对学习的主题有了更深的理解。你可以一遍又一遍地遵循这个方法，直到你觉得你已经掌握了这个概念。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8142857142857143&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Z2bVaFK6CgQaTL4ZYJgeO6tibM96Q73MULrw5sTvCESJAfiakOBFicTL3duhjWYAIP3sdWADDlrlEWZyGy2iaYx37Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;700&quot;/&gt;&lt;/p&gt;&lt;p&gt;Dr. Feynman teaching at Caltech&lt;/p&gt;&lt;p&gt;当你的最终解释准备好后，你可以把它传达给你的同事、朋友或熟悉你的领域的专业人士，并反思你对事物的理解。这种&lt;span&gt;“边测试边学习”（Test-and-Learn）&lt;/span&gt;的方法非常有效。&lt;/p&gt;&lt;p&gt;费曼始终认为，真理存在于简单之中，当事物简单而优雅时，人们可以更好地理解它们。如果一个人倾向于把事情弄得过于复杂，这往往表明他缺乏深刻的理解。这个想法是，让事情简单到任何人都能理解，然后使用这个工具来让自己更深入地理解知识。&lt;/p&gt;&lt;p&gt;费曼学习技巧可以帮助你从不同的角度学习和理解事物。它不仅可以用于学术目的，还可以用于建立企业，建立心智模型等等。&lt;/p&gt;&lt;p&gt;费曼技术是掌握大量信&lt;span&gt;息的好方法，大家不妨可以试一下，&lt;/span&gt;&lt;span&gt;相比学习的输入，学习之后的内化和吸收更加重要&lt;/span&gt;&lt;span&gt;！&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzA3MDg5MDkzOA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgQmUQ0Aca9qSYNFn0tQEXQc5EibBkqQLYtibYBj1hXuagwXkNc3kVwplHxIl7KQfBIiagysgn9GDUUibw/0?wx_fmt=png&quot; data-nickname=&quot;架构精进之路&quot; data-alias=&quot;jiagou_jingjin&quot; data-signature=&quot;十年研发风雨路，大厂架构师，CSDN博客专家，InfoQ写作平台签约作者。专注软件架构研究，技术学习与职业成长，坚持分享接地气儿的架构技术干货文章！&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5163398692810458&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/9TPn66HT930CzevNBb2yMhKjOn9yuJqsCPbyzicCBx6Zm9sNJCWibo6VzGRYbxrSfjJaaGibSRuyZFQmr3KcX07sw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;306&quot;/&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>c35b535f695774312344a46bdea84e8b</guid>
<title>产品经理职业发展框架</title>
<link>https://toutiao.io/k/8s4emvf</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;blockquote&gt;&lt;p&gt;&lt;em&gt;要想成为优秀的产品经理，要想在组织中建立优秀的产品团队，产品经理的职业发展框架必不可少，只有定义好明确的目标，才能保证每一步努力都在朝着目标前进。原文：The product management career framework your team deserves&lt;span&gt;[1]&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0WxFJoxPxn9icYribv0XH8P0CIY0XnIpz1u8wuavPxjRU01ytX0p7WpHokjUoXewRe7iakq5CNPjQxUw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在产品经理职业发展框架中需要构建四个部分&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;本文概述了优秀的产品经理职业框架的四个关键组成部分：（1）职业发展路径（2）产品管理技能（3）绩效评估流程（4）个人发展与成长过程。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;如果你希望成长为产品经理、项目经理或产品负责人(PM)，那么本文就是为你准备的。如果你已经在领导一个产品经理团队，本文可以帮助你以可扩展的方式发展组织和团队。&lt;/p&gt;&lt;/blockquote&gt;&lt;h1&gt;什么是产品经理职业发展框架？为什么这个框架可以帮助专业成长？&lt;/h1&gt;&lt;p&gt;职业发展框架概况：&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;em&gt;你的职业发展路径&lt;/em&gt;，或者是你或你的团队成员期望在组织中达到的职业发展水平。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;期望在每个职级上达到的&lt;em&gt;技能&lt;/em&gt;（参见完整的&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2MTgxODgwNA==&amp;amp;mid=2247484282&amp;amp;idx=1&amp;amp;sn=4e108d0f8352790427b0c5ee48f414ae&amp;amp;chksm=fc73bea1cb0437b704c0d286b71e9a119e43176ab2219fe3fb782201db74bce7af87e412338c&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;产品经理技能手册&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;产品经理技能手册&lt;/a&gt;，其中包含5个维度和27种技能）。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;em&gt;绩效评估流程：如何以及何时评估员工的职业生涯？&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;em&gt;个人发展和成长过程&lt;/em&gt;：产品经理如何基于绩效评估的结果实现成长。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;本文将详细介绍每个方面的内容。&lt;/p&gt;&lt;p&gt;&lt;span&gt;良好的职业发展框架是组织中所有产品经理职业发展的基础&lt;/span&gt;&lt;/p&gt;&lt;p&gt;如果使用得当，这个框架会产生一些积极的结果：&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;成功将公司的利益与产品经理的个人发展相结合&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;更好的绩效，更高质量的产品，更好的结果&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;产品经理更愿意在组织中长期服务&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;构建更大的人才库，可以从中“培养”产品经理&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;职业框架的局限性&lt;/span&gt;&lt;/p&gt;&lt;p&gt;没有什么是对每个人都有效的，职业框架也是如此。职业发展过程中会有许多变量：业务类型、技术、人员、整个环境等等，因此，重要的是要自己判断什么对你、你的团队和你的公司是有用的。&lt;/p&gt;&lt;p&gt;此外，如果“产品”在你的组织中不起作用，那么建立一个职业框架可能就不是需要优先考虑的事情。例如，如果你在一个大型IT部门工作，而不是专门的技术组织，你的任务优先级是上级交给你的，而不是在与利益相关者的对话中自我驱动的，那么这就应该是你需要优先处理的问题，职业规划并不能解决这个问题。&lt;/p&gt;&lt;p&gt;记住这些，让我们继续深入了解框架中的每个元素。&lt;/p&gt;&lt;hr/&gt;&lt;h1&gt;1. 产品经理职业发展路径&lt;/h1&gt;&lt;p&gt;&lt;em&gt;在组织中，个人可以沿着怎样的职业路径发展？&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4816666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0WxFJoxPxn9icYribv0XH8P0CodRE969TPXUC1fXOa1QE1ZiaYEERz646M7ibiacJq78C1ZGqRVCCSqxxw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;职业路径示例，其中不包括C-levels。这些职级可以作为不同公司相互比较的粗略指南。来源:levels.fyi&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;职业路径代表以职业水平衡量的职位名称，几乎所有公司都采用某种等级制度，这种制度通常也与福利和薪酬挂钩。如果你是一家处于早期阶段的公司，可能不需要所有这些级别。但即使你是初创公司的创始人，想要招聘第一位产品经理，也需要了解你要招聘的是谁。&lt;/p&gt;&lt;p&gt;因为不同公司对产品管理的解释并不相同，所以很难直接比较两个公司的职级。我们列出了Forto使用的头衔和级别如何对应于其他公司，这样当我们从顶级公司招聘员工时，会很有帮助，同时也为我们自己的产品经理提供了一个参照点。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;em&gt;例如，如果你是亚马逊的principal product manager，并有兴趣申请谷歌的职位，你应该考虑product manager 3或senior product manager职位。&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;我建议大家看一下levels.fyi，了解对比一下自己公司和潜在雇主。无论你是招聘者还是应聘者，这都是非常有价值的资源。如果你正在找工作，需要记住，你只能将这种水平比较作为粗略的指导，并不是所有公司都严格使用这些头衔，一些业务单位在头衔上可能更灵活，但在薪水上并不那么灵活。你应该尽一切可能去了解潜在职位的薪资范围，然后在这些范围内进行谈判。如果你申请的是一家非常大的公司，可以问一下你申请的职位的等级，这会给你一个准确的判断。&lt;/p&gt;&lt;h1&gt;2. 产品管理技能集&lt;/h1&gt;&lt;p&gt;&lt;em&gt;你应该在每个职级中达到的技能&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5531428571428572&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0WxFJoxPxn9icYribv0XH8P0CK8pdR5vsXHhjN9Ir2P2xcjyIjBbzmOQqlwyU32tsnAFZoicQJPJvkPA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;875&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;产品管理技能集定义了你希望产品经理拥有的技能。我在前一篇文章&lt;em&gt;“&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2MTgxODgwNA==&amp;amp;mid=2247484282&amp;amp;idx=1&amp;amp;sn=4e108d0f8352790427b0c5ee48f414ae&amp;amp;chksm=fc73bea1cb0437b704c0d286b71e9a119e43176ab2219fe3fb782201db74bce7af87e412338c&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;产品经理技能手册&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;产品经理技能手册&lt;/a&gt;”&lt;/em&gt;中详细介绍了这一方面，所以就不重复了（这一技能集拥有5个维度和27个技能等级，包括能力成熟度等级定义，所有内容都是免费的）。在这里重申一下，我们在Forto实际应用了这个框架，并与来自顶级公司的产品经理们实际验证它的可行性。产品经理往往是成长导向的、对新事物充满好奇的人，因此技能发展是职业发展框架的关键部分。&lt;/p&gt;&lt;p&gt;这个框架的特别之处在于每个职业级别的能力成熟度模型，成熟度模型可以帮助产品经理（以及他们的上级经理）更有意识的推动个人成长。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.32&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0WxFJoxPxn9icYribv0XH8P0Cy83A3R99ezKZicHcqiaAeKeSySm7AibmrcgniaBD86w7XkMvRFJfMbqUgw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1150&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;示例：“考虑客户”技能和成熟度模型&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;h1&gt;3. 产品经理绩效评估流程&lt;/h1&gt;&lt;p&gt;&lt;em&gt;如何以及何时评估员工的职业生涯？&lt;/em&gt;&lt;/p&gt;&lt;p&gt;要建立专业的绩效评估程序，首先需要决定绩效评估的频率，包括可能的晋升和加薪指导。在此之后，应该有关于如何评估绩效的明确、透明的指导。&lt;/p&gt;&lt;h5&gt;1. 绩效考核频率&lt;/h5&gt;&lt;p&gt;在大多数公司，每年会进行一次绩效考核，晋升机会通常取决于各个部门和个人的情况。&lt;/p&gt;&lt;p&gt;在Forto，我们每年有两次绩效考核。每个人都会得到全面的绩效评估，但不是每个人每次都能升职或加薪。这取决于他们所处的职业生涯阶段。例如，我们每12个月进行一次薪酬评估（我们也会根据市场行情进行调整），而晋升机会相对较少，这取决于目标业绩以及个人发展。&lt;/p&gt;&lt;h5&gt;2. 如何评估产品经理绩效&lt;/h5&gt;&lt;p&gt;这是一项复杂的任务，需要谨慎处理。为了使本文保持简短，我只提供这个过程的简短概述。这将是后面一篇文章的主题。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.31201248049922&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0WxFJoxPxn9icYribv0XH8P0CUGq0LAw9gTOb5OXyBhJMxaibpHFyDI2EztgprTkq96xH393p53fFC8Q/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;641&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;图片来源：https://dilbert.com/&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;h1&gt;4. 个人发展/成长过程&lt;/h1&gt;&lt;p&gt;&lt;em&gt;基于绩效评估，你的产品经理生涯将如何成长。&lt;/em&gt;&lt;/p&gt;&lt;p&gt;这看上去显而易见，定义清晰的个人发展和成长计划可以确保人们获得真正的成长。这一模块的存在是为了确保产品经理能够提升他们的技能，扩大他们的工作范围，并通过产品增加他们的影响力。只有通过个人成长，人们才能在职业道路上继续前进，重新开始新的循环。这个过程有四个主要步骤。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5657142857142857&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0WxFJoxPxn9icYribv0XH8P0CxFp0SzVa6ibAr7zibXC4BZBgROWXlFMcGgATaOKEQr7qOKTDHGoJzrfQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;875&quot;/&gt;&lt;/p&gt;&lt;h4&gt;设定个人发展目标&lt;/h4&gt;&lt;p&gt;个人发展和成长过程的第一步是进行包括技能在内的全面绩效评估，然后设定个人发展目标就变得相对容易了。明确员工在未来6-12个月内需要解决的首要问题是很重要的。产品经理和他/她的直接经理应该进行对话，从而可以确定并同意发展目标的优先级。&lt;/p&gt;&lt;h4&gt;为个人成长和发展积极探索各种机会&lt;/h4&gt;&lt;p&gt;这是产品经理和他/她的经理的责任。人们必须被给予适当的机会来发展他们的技能。例如，如果你的团队中有人想要学习如何支持招聘，那么他们就应该学习如何进行面试。项目经理和部门经理都应该对此承诺。&lt;/p&gt;&lt;h4&gt;定期的个人发展谈话&lt;/h4&gt;&lt;p&gt;应定期提供反馈。把反馈留到绩效反馈过程中，用过去6个月或12个月的错误来打别人的脸，这不是一种好的做法。相反，要尽快给出具体的基于证据的反馈。&lt;/p&gt;&lt;p&gt;&lt;em&gt;Susie，再次感谢你昨天的陈述。我注意到你的利益相关者似乎忽略了这次会议的主要内容，而是问了很多细节问题。你如何在未来优化与利益相关者的准备工作？&lt;/em&gt;&lt;/p&gt;&lt;h4&gt;培训&lt;/h4&gt;&lt;p&gt;如果你对团队的成长是认真的，就必须为他们提供培训，鼓励他们在工作中学习，没有合理的借口回避这一点。对某些公司来说，筹集资金是一项挑战，但还是有办法解决这个问题的。&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;创业公司缺乏资金：作为创业公司，虽然没有太多资金，但可以给员工留出个人发展的时间。像Medium这样的资源可以给人们提供学习新东西的机会。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;如果有一点资金可用：你的产品经理可以明智地投资于Udemy提供的众多课程之一。例如，产品管理或沟通课程的学费通常只有9.99美元。此外，更资深和更有经验的人可以为更初级的员工提供培训，这将帮助他们整理自己的技能，使他们成为更好的管理者，并提升你的组织水平。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;在一个更大、更成熟的公司：有足够的培训费预算，可以考虑利用外部教练、培训计划，甚至建立自己的培训组织。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;无论采用何种方法，良好培训的基本原则是不变的：应该集中在个人发展的重要方面，并应转化为日常工作中的行动。没有必要培训一天，然后还是用原来的方式做事情。&lt;/p&gt;&lt;h1&gt;总结&lt;/h1&gt;&lt;p&gt;本文涵盖了完整的产品经理职业发展框架，包含4个组件：&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;职业发展路径&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;技能集&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;绩效评估流程&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;个人发展计划&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;本文提供的职业发展框架可以帮助你实现个人发展，推动改善产品组织或架构，建立你自己的伟大的产品组织。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;References:&lt;/span&gt;&lt;br/&gt;[1] https://medium.com/forto-tech-blog/the-product-management-career-framework-your-team-deserves-c5ab379f6a72&lt;/p&gt;&lt;/blockquote&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>