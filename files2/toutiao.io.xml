<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>4666a148faab9d5d521d525ca086497f</guid>
<title>再见 Go 面试官：GMP 模型，为什么要有 P？</title>
<link>https://toutiao.io/k/2fe4jjq</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大家好，我是煎鱼。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;最近金三银四，是面试的季节。在我的 Go 读者交流群里出现了许多小伙伴在讨论自己面试过程中所遇到的一些 Go 面试题。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;今天的主角，是 Go 面试的万能题 GMP 模型的延伸题（疑问），那就是 ”&lt;strong&gt;GMP 模型，为什么要有 P&lt;/strong&gt;？“&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;进一步推敲问题的背后，其实这个面试题本质是想问：”&lt;strong&gt;GMP 模型，为什么不是 G 和 M 直接绑定就完了，还要搞多一个 P 出来，那么麻烦，为的是什么，是要解决什么问题吗&lt;/strong&gt;？“&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这篇文章煎鱼就带你一同探索，GM、GMP 模型的变迁是因为什么原因。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;GM 模型&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 Go1.1 之前 Go 的调度模型其实就是 GM 模型，也就是没有 P。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;今天带大家一起回顾过去的设计。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;解密 Go1.0 源码&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们了解一个东西的办法之一就是看源码，和煎鱼一起看看 Go1.0.1 的调度器源码的核心关键步骤：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;br/&gt;&lt;span&gt;schedule&lt;/span&gt;&lt;span&gt;(G *gp)&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;{&lt;br/&gt; ...&lt;br/&gt; schedlock();&lt;br/&gt; &lt;span&gt;if&lt;/span&gt;(gp != nil) {&lt;br/&gt;  ...&lt;br/&gt;  &lt;span&gt;switch&lt;/span&gt;(gp-&amp;gt;status){&lt;br/&gt;  &lt;span&gt;case&lt;/span&gt; Grunnable:&lt;br/&gt;  &lt;span&gt;case&lt;/span&gt; Gdead:&lt;br/&gt;   &lt;span&gt;// Shouldn&#x27;t have been running!&lt;/span&gt;&lt;br/&gt;   runtime·&lt;span&gt;throw&lt;/span&gt;(&lt;span&gt;&quot;bad gp-&amp;gt;status in sched&quot;&lt;/span&gt;);&lt;br/&gt;  &lt;span&gt;case&lt;/span&gt; Grunning:&lt;br/&gt;   gp-&amp;gt;status = Grunnable;&lt;br/&gt;   gput(gp);&lt;br/&gt;   &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;  }&lt;br/&gt;&lt;br/&gt; gp = nextgandunlock();&lt;br/&gt; gp-&amp;gt;readyonstop = &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt; gp-&amp;gt;status = Grunning;&lt;br/&gt; m-&amp;gt;curg = gp;&lt;br/&gt; gp-&amp;gt;m = m;&lt;br/&gt; ...&lt;br/&gt; runtime·gogo(&amp;amp;gp-&amp;gt;sched, &lt;span&gt;0&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;调用 &lt;code&gt;schedlock&lt;/code&gt; 方法来获取全局锁。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;获取全局锁成功后，将当前 Goroutine 状态从 Running（正在被调度） 状态修改为 Runnable（可以被调度）状态。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;调用 &lt;code&gt;gput&lt;/code&gt; 方法来保存当前 Goroutine 的运行状态等信息，以便于后续的使用。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;调用 &lt;code&gt;nextgandunlock&lt;/code&gt; 方法来寻找下一个可运行 Goroutine，并且释放全局锁给其他调度使用。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;获取到下一个待运行的 Goroutine 后，将其运行状态修改为 Running。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;调用 &lt;code&gt;runtime·gogo&lt;/code&gt; 方法，将刚刚所获取到的下一个待执行的 Goroutine 运行起来，进入下一轮调度。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;思考 GM 模型&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过对 Go1.0.1 的调度器源码剖析，我们可以发现一个比较有趣的点。那就是调度器本身（schedule 方法），在正常流程下，是不会返回的，也就是不会结束主流程。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.6170940170940171&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/KVl0giak5ib4hia2z5uVFmZ7SQvFnicib7HSQ8YsJibALnx8pMMnYzkqjegtsE7LTwD5XXYt4F4gia8hfackwaib1F9cjw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1170&quot;/&gt;&lt;figcaption&gt;G-M模型简图&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;他会不断地运行调度流程，GoroutineA 完成了，就开始寻找 GoroutineB，寻找到 B 了，就把已经完成的 A 的调度权交给 B，让 GoroutineB 开始被调度，也就是运行。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;当然了，也有被正在阻塞（Blocked）的 G。假设 G 正在做一些系统、网络调用，那么就会导致 G 停滞。这时候 M（系统线程）就会被会重新放内核队列中，等待新的一轮唤醒。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;GM 模型的缺点&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这么表面的看起来，GM 模型似乎牢不可破，毫无缺陷。但为什么要改呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 2012 年时 Dmitry Vyukov 发表了文章《Scalable Go Scheduler Design Doc》，目前也依然是各大研究 Go 调度器文章的主要对象，其在文章内讲述了整体的原因和考虑，下述内容将引用该文章。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;当前（代指 Go1.0 的 GM 模型）的 Goroutine 调度器限制了用 Go 编写的并发程序的可扩展性，尤其是高吞吐量服务器和并行计算程序。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;实现有如下的问题：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;存在单一的全局 mutex（Sched.Lock）和集中状态管理：&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;mutex 需要保护所有与 goroutine 相关的操作（创建、完成、重排等），导致锁竞争严重。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;Goroutine 传递的问题：&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;goroutine（G）交接（G.nextg）：工作者线程（M&#x27;s）之间会经常交接可运行的 goroutine。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;上述可能会导致延迟增加和额外的开销。每个 M 必须能够执行任何可运行的 G，特别是刚刚创建 G 的 M。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;每个 M 都需要做内存缓存（M.mcache）：&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;会导致资源消耗过大（每个 mcache 可以吸纳到 2M 的内存缓存和其他缓存），数据局部性差。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;频繁的线程阻塞/解阻塞：&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;在存在 syscalls 的情况下，线程经常被阻塞和解阻塞。这增加了很多额外的性能开销。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;GMP 模型&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;为了解决 GM 模型的以上诸多问题，在 Go1.1 时，Dmitry Vyukov 在 GM 模型的基础上，新增了一个 P（Processor）组件。并且实现了 Work Stealing 算法来解决一些新产生的问题。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.64453125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/KVl0giak5ib4hia2z5uVFmZ7SQvFnicib7HSQ4Q50Kia5k7ibkwtsLV5DudHq5aicHn5MLs2t5cW4CuWbRwjUFWl9J9aqw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;GMP 模型，在上一篇文章《&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxMDI4MDc1NA==&amp;amp;mid=2247487250&amp;amp;idx=1&amp;amp;sn=3004324a9d2ba99233c4af48843dba64&amp;amp;chksm=f9041a4fce7393597151804174e0d9ac1889f1fff7ac46b1c64de4b4c477e9f1b596eda21d3e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Go 群友提问：Goroutine 数量控制在多少合适，会影响 GC 和调度？&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Go 群友提问：Goroutine 数量控制在多少合适，会影响 GC 和调度？&lt;/a&gt;》中已经讲解过了。&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUxMDI4MDc1NA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/KVl0giak5ib4iac2xQZIq5icSiaTepuae8zLIUMiaxibbUM8ic735ewo6e89GRtjGbUBlgNYibwCjAicglQcvz6dCQ6yTKOw/0?wx_fmt=png&quot; data-nickname=&quot;脑子进煎鱼了&quot; data-alias=&quot;eddycjy&quot; data-signature=&quot;分享计算机基础、Go 语言、微服务架构和系统设计；著有图书《Go 语言编程之旅》。&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;觉得不错的小伙伴可以关注一下，这里就不再复述了。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;带来什么改变&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;加了 P 之后会带来什么改变呢？我们再更显式的讲一下。&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;每个 P 有自己的本地队列，大幅度的减轻了对全局队列的直接依赖，所带来的效果就是锁竞争的减少。而 GM 模型的性能开销大头就是锁竞争。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;每个 P 相对的平衡上，在 GMP 模型中也实现了 Work Stealing 算法，如果 P 的本地队列为空，则会从全局队列或其他 P 的本地队列中窃取可运行的 G 来运行，减少空转，提高了资源利用率。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;为什么要有 P&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这时候就有小伙伴会疑惑了，如果是想实现本地队列、Work Stealing 算法，那&lt;strong&gt;为什么不直接在 M 上加呢，M 也照样可以实现类似的功能&lt;/strong&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;为什么又再加多一个 P 组件？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;结合 M（系统线程） 的定位来看，若这么做，有以下问题。&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一般来讲，M 的数量都会多于 P。像在 Go 中，M 的数量最大限制是 10000，P 的默认数量的 CPU 核数。另外由于 M 的属性，也就是如果存在系统阻塞调用，阻塞了 M，又不够用的情况下，M 会不断增加。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;M 不断增加的话，如果本地队列挂载在 M 上，那就意味着本地队列也会随之增加。这显然是不合理的，因为本地队列的管理会变得复杂，且 Work Stealing 性能会大幅度下降。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;M 被系统调用阻塞后，我们是期望把他既有未执行的任务分配给其他继续运行的，而不是一阻塞就导致全部停止。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;因此使用 M 是不合理的，那么引入新的组件 P，把本地队列关联到 P 上，就能很好的解决这个问题。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;总结&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;今天这篇文章结合了整个 Go 语言调度器的一些历史情况、原因分析以及解决方案说明。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;”GMP 模型，为什么要有 P“ 这个问题就像是一道系统设计了解，因为现在很多人为了应对面试，会硬背 GMP 模型，或者是泡面式过了一遍。而理解其中真正背后的原因，才是我们要去学的要去理解。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;知其然知其所以然，才可破局。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;hr/&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;关注煎鱼公众号，吸取精华：&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUxMDI4MDc1NA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/KVl0giak5ib4iac2xQZIq5icSiaTepuae8zLIUMiaxibbUM8ic735ewo6e89GRtjGbUBlgNYibwCjAicglQcvz6dCQ6yTKOw/0?wx_fmt=png&quot; data-nickname=&quot;脑子进煎鱼了&quot; data-alias=&quot;eddycjy&quot; data-signature=&quot;分享计算机基础、Go 语言、微服务架构和系统设计；著有图书《Go 语言编程之旅》。&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;👆 点击关注煎鱼，在知识的海洋里遨游&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;学习资料分享，关注公众号回复指令：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;回复【000】，下载 LeetCode 题解大全。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;回复【001】，下载 Go 进阶图书 Mastering Go。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;div class=&quot;reward_qrcode_area reward_area tc&quot; id=&quot;js_reward_qrcode&quot;&gt;
                                &lt;p class=&quot;tips_global&quot;&gt;Long-press QR code to transfer me a reward&lt;/p&gt;
                                                                &lt;p class=&quot;reward_tips&quot;&gt;来一个反馈！&lt;/p&gt;
                                &lt;span class=&quot;reward_qrcode_img_wrp&quot;&gt;&lt;img class=&quot;reward_qrcode_img&quot; id=&quot;js_reward_qrcode_img&quot;/&gt;&lt;/span&gt;
                                &lt;p class=&quot;tips_global&quot;&gt;As required by Apple&#x27;s new policy, the Reward feature has been disabled on Weixin for iOS. You can still reward an Official Account by transferring money via QR code.&lt;/p&gt;
                            &lt;/div&gt;
                                                                            
                              
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>ad35a8d5c3e8c9a0b454434e71d3b24f</guid>
<title>Elasticsearch 警惕使用 wildcard 检索！然后呢？</title>
<link>https://toutiao.io/k/eq90xv4</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;1、wildcard 检索定义&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;wildcard 检索可以定义为：支持通配符的模糊检索。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;类似 Mysql 中的 like 模糊匹配，如下所示：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.17420066152149946&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7vFz8cjHv0NwLBFlnWS9iceichpozyY2sjONr2iaBkTiaeBwpgyiabUAbENw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;907&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;Elasticsearch 中的 wildcard 使用方式如下：&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.4918032786885246&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7UZ2aQGjbvDQOficPibudF7So3cibIiafvvezhjicKRIR6Kmra06tsrZE9icA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;427&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;通配符运算符是匹配一个或多个字符的占位符。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;通配符支持两种：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;? : 支持模糊匹配单个字符。举例：Ma?s 仅能匹配：Mars, Mass, 和 Maps。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;: 支持模糊匹配零个或者多个字符。举例：Ma*s 能匹配：Mars, Matches 和 Massachusetts等。&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2、全局视野——wildcard 检索所处位置&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;全局认知非常重要，检索核心类型大致（非严谨、精确）分为：精准匹配检索（Term-level queries）和基于分词的全文匹配检索（Full text queries）。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;全文匹配检索细分如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1.815686274509804&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7rALAExKYpgeiaau5Qz6DibmibKoBGicv7r0JibhiaqkZ8tMmYKwrgdtCAwCg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;255&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;精准匹配检索细分如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1.9656652360515021&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7yw1gnqaRKxLK67ib5WqIs8zCfAia4x2JSBjEZ0k5RscyLibvgwe9v4OuQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;233&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;也就是：wildcard 是和Term、Terms检索&lt;/span&gt;&lt;span&gt;平级&lt;/span&gt;&lt;span&gt;的检索。&lt;/span&gt;&lt;/p&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3、wildcard 检索适用场景&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;适用于：召回率要求高的业务场景。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;基于分词的全文检索，可能会导致明明存在，但是检索不到。可能的原因如下：&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;举个例子一看就明白了：&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;前置说明：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;1、纯属举例，不涉及针对具体人。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;2、Ik 词典main.dic 非原生，做了互联网词库的扩展，但词库中依然没有“刘强东”三个字。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;3、如果你在本地测试结果和文章不一致，极大可能是词典不一样导致的。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;PUT &lt;span&gt;test&lt;/span&gt;-004&lt;br/&gt;{&lt;br/&gt;  &lt;span&gt;&quot;mappings&quot;&lt;/span&gt;: {&lt;br/&gt;    &lt;span&gt;&quot;properties&quot;&lt;/span&gt;: {&lt;br/&gt;      &lt;span&gt;&quot;title&quot;&lt;/span&gt;: {&lt;br/&gt;        &lt;span&gt;&quot;type&quot;&lt;/span&gt;: &lt;span&gt;&quot;text&quot;&lt;/span&gt;,&lt;br/&gt;        &lt;span&gt;&quot;analyzer&quot;&lt;/span&gt;: &lt;span&gt;&quot;ik_max_word&quot;&lt;/span&gt;,&lt;br/&gt;        &lt;span&gt;&quot;fields&quot;&lt;/span&gt;: {&lt;br/&gt;          &lt;span&gt;&quot;keyword&quot;&lt;/span&gt;: {&lt;br/&gt;            &lt;span&gt;&quot;type&quot;&lt;/span&gt;: &lt;span&gt;&quot;keyword&quot;&lt;/span&gt;&lt;br/&gt;          }&lt;br/&gt;        }&lt;br/&gt;      }&lt;br/&gt;    }&lt;br/&gt;  }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;POST &lt;span&gt;test&lt;/span&gt;-004/_bulk&lt;br/&gt;{&lt;span&gt;&quot;index&quot;&lt;/span&gt;:{&lt;span&gt;&quot;_id&quot;&lt;/span&gt;:1}}&lt;br/&gt;{&lt;span&gt;&quot;title&quot;&lt;/span&gt;:&lt;span&gt;&quot;英文官网承认刘强东一度被捕的原因是涉嫌XX&quot;&lt;/span&gt;}&lt;br/&gt;{&lt;span&gt;&quot;index&quot;&lt;/span&gt;:{&lt;span&gt;&quot;_id&quot;&lt;/span&gt;:2}}&lt;br/&gt;{&lt;span&gt;&quot;title&quot;&lt;/span&gt;:&lt;span&gt;&quot;别提了朋友哥哥刘强东窗事发了&quot;&lt;/span&gt;}&lt;br/&gt;{&lt;span&gt;&quot;index&quot;&lt;/span&gt;:{&lt;span&gt;&quot;_id&quot;&lt;/span&gt;:3}}&lt;br/&gt;{&lt;span&gt;&quot;title&quot;&lt;/span&gt;:&lt;span&gt;&quot;刘强东施效颦，没想到竟然收获了流量&quot;&lt;/span&gt;}&lt;br/&gt;{&lt;span&gt;&quot;index&quot;&lt;/span&gt;:{&lt;span&gt;&quot;_id&quot;&lt;/span&gt;:4}}&lt;br/&gt;{&lt;span&gt;&quot;title&quot;&lt;/span&gt;:&lt;span&gt;&quot;刘强东是谁？我不认识&quot;&lt;/span&gt;}&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;POST &lt;span&gt;test&lt;/span&gt;-004/_search&lt;br/&gt;{&lt;br/&gt;  &lt;span&gt;&quot;query&quot;&lt;/span&gt;: {&lt;br/&gt;    &lt;span&gt;&quot;match_phrase&quot;&lt;/span&gt;: {&lt;br/&gt;      &lt;span&gt;&quot;title&quot;&lt;/span&gt;: &lt;span&gt;&quot;刘强东&quot;&lt;/span&gt;&lt;br/&gt;    }&lt;br/&gt;  }&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;用的短语检索 match_phrase，搜索结果如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1.3222222222222222&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7e6xuicLNZDr3ZvEropkpmiaBwcEK97Y3TlrjSDSx8objg3swdicItOvOA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;450&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;原因说明，analyzer API 能说明一切。&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;POST &lt;span&gt;test&lt;/span&gt;-004/_analyze&lt;br/&gt;{&lt;br/&gt;  &lt;span&gt;&quot;text&quot;&lt;/span&gt;: [&lt;br/&gt;    &lt;span&gt;&quot;京东英文官网承认刘强东一度被捕的原因是涉嫌XX&quot;&lt;/span&gt;&lt;br/&gt;  ],&lt;br/&gt;  &lt;span&gt;&quot;analyzer&quot;&lt;/span&gt;: &lt;span&gt;&quot;ik_max_word&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;分词结果如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1.2261640798226163&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib75iaxQbfhicdJzDWu74fAYSq1nA6Zp6djvWBorSU7WF8sKJJ8V1q7UlYA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;451&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;面对如上召回情况，部分不追求精准率只追求召回率的业务场景，可能会需要文档_id = 1、2、3、4 全部都要召回。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;这时候，如果不改变分词的情况下，可能的解决方案之一就是：wildcard 检索实现。&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;POST &lt;span&gt;test&lt;/span&gt;-004/_search&lt;br/&gt;{&lt;br/&gt;  &lt;span&gt;&quot;query&quot;&lt;/span&gt;: {&lt;br/&gt;    &lt;span&gt;&quot;wildcard&quot;&lt;/span&gt;: {&lt;br/&gt;      &lt;span&gt;&quot;title.keyword&quot;&lt;/span&gt;: &lt;span&gt;&quot;*刘强东*&quot;&lt;/span&gt;&lt;br/&gt;    }&lt;br/&gt;  }&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;如上的方式，文档1、2、3、4全部召回。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;相当于在原有DSL的基础上，只改动检索方式和字段名称就搞定了产品经理的提高召回率的需求。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;貌似，可以交差大吉了。实则，有非常大的隐患。&lt;/span&gt;&lt;/p&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;4、wildcard 可能的风险&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;官方文档是这么说的：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.08710801393728224&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7thONyu6xR4LsJ7ibpgGDbguRpcKZh8iaO3zdic6JCEV0woRgh6Ngkx4Hg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;861&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;中文含义是：避免以*或？开头的模式。这会增加查找匹配项所需的迭代次数并降低搜索性能。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;wildcard 到底有多慢？如下示例可见一斑：&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.42839036755386567&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib77G0ibTVXxTRwicsv1RMWJfEOicAVKbAlu9RSKRqAAicxR1cut50Wkpejdw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;789&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;wildcard 检索字段指定的字符数多了以后，会报错如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.34447900466562986&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7U5R4BymODhiaYUzbK1c5A6CxYNeZaZialDSrEibsEOQYiaQZjnd8JWgWMQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1286&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;在 wood 大叔 2017年的文章中，曾经指出如下的核心点：&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;用户输入的字符串长度没有做限制，导致首尾通配符中间可能是很长的一个字符串。后果就是对应的wildcard Query执行非常慢，非常消耗CPU。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;为了加速通配符和正则表达式的匹配速度，Lucene4.0开始会将输入的字符串模式构建成一个DFA (Deterministic Finite Automaton)，带有通配符的pattern构造出来的DFA可能会很复杂，开销很大。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;源码及细节推荐阅读：&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;https://elasticsearch.cn/article/171&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;https://elasticsearch.cn/article/186&lt;/span&gt;&lt;/p&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;5、wildcard 实战中的悲剧&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;如下，采用原汁原味的技术群交流内容，更具有说服力。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;更能警示大家：慎用 Wildcard！&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;5.1 悲剧1：一味的满足产品经理的需求，wildcard 不考虑性能的乱用。&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;2.181547619047619&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7GIMzYpTic2v22FMqe9GLTUJZFMzuNRRVia5rczkdhzmXZf9sibCVGGrDw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;336&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;5.2 悲剧2：wildcard 参数传了一篇文章进来，导致集群宕机！&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;2.6310344827586207&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7uibyf5J7VRq7KllAFicSZ5HvkaJficzpl96Zlic1rNufq5HIrrxxib2EiaUw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;290&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;5.3 悲剧3：wildcard 搜索一百个汉字，导致CPU利用率 100%！&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;注意是：不同100个字组合，一直搜。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.41098901098901097&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mjl8GCpsL9afReB8mS8z8nDXLsQOeRib7XBjvqWxicdS034QhGX1MfqhzRwwxtNP7jdQWVB1FmiblGHuv2hvvCnMA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;455&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;5.4 悲剧4：客户现场演示，集群宕机！&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;根因：bool 组合了近 100 组+ wildcard 不同关键词的检索。&lt;/span&gt;&lt;/p&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;6、wildcard 可能的替代方案&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;在寻求解决方案的时候，我们要先问一下：为什么大家喜欢用 wildcard 实现模糊检索?&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;得到的答复往往是：&lt;span&gt;顺手&lt;/span&gt;，类似Mysql like 查询，短、平、快的达到了产品经理的要求，满足了项目需求。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;但，这忽略了性能问题以及可能带来的灾难后果。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;所以，解决方案应该从根源上入手，以寻求彻底解决。&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;6.1 替代方案一：写入时分词优化，使用 Ngram 分词。&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;更细粒度分词，更有利于数据的召回！&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;PUT &lt;span&gt;test&lt;/span&gt;-005&lt;br/&gt;{&lt;br/&gt;  &lt;span&gt;&quot;settings&quot;&lt;/span&gt;: {&lt;br/&gt;    &lt;span&gt;&quot;index.max_ngram_diff&quot;&lt;/span&gt;: 10,&lt;br/&gt;    &lt;span&gt;&quot;analysis&quot;&lt;/span&gt;: {&lt;br/&gt;      &lt;span&gt;&quot;analyzer&quot;&lt;/span&gt;: {&lt;br/&gt;        &lt;span&gt;&quot;my_analyzer&quot;&lt;/span&gt;: {&lt;br/&gt;          &lt;span&gt;&quot;tokenizer&quot;&lt;/span&gt;: &lt;span&gt;&quot;my_tokenizer&quot;&lt;/span&gt;&lt;br/&gt;        }&lt;br/&gt;      },&lt;br/&gt;      &lt;span&gt;&quot;tokenizer&quot;&lt;/span&gt;: {&lt;br/&gt;        &lt;span&gt;&quot;my_tokenizer&quot;&lt;/span&gt;: {&lt;br/&gt;          &lt;span&gt;&quot;type&quot;&lt;/span&gt;: &lt;span&gt;&quot;ngram&quot;&lt;/span&gt;,&lt;br/&gt;          &lt;span&gt;&quot;min_gram&quot;&lt;/span&gt;: 3,&lt;br/&gt;          &lt;span&gt;&quot;max_gram&quot;&lt;/span&gt;: 10,&lt;br/&gt;          &lt;span&gt;&quot;token_chars&quot;&lt;/span&gt;: [&lt;br/&gt;            &lt;span&gt;&quot;letter&quot;&lt;/span&gt;,&lt;br/&gt;            &lt;span&gt;&quot;digit&quot;&lt;/span&gt;&lt;br/&gt;          ]&lt;br/&gt;        }&lt;br/&gt;      }&lt;br/&gt;    }&lt;br/&gt;  },&lt;br/&gt;  &lt;span&gt;&quot;mappings&quot;&lt;/span&gt;: {&lt;br/&gt;    &lt;span&gt;&quot;properties&quot;&lt;/span&gt;: {&lt;br/&gt;      &lt;span&gt;&quot;title&quot;&lt;/span&gt;: {&lt;br/&gt;        &lt;span&gt;&quot;type&quot;&lt;/span&gt;: &lt;span&gt;&quot;text&quot;&lt;/span&gt;,&lt;br/&gt;        &lt;span&gt;&quot;analyzer&quot;&lt;/span&gt;: &lt;span&gt;&quot;my_analyzer&quot;&lt;/span&gt;,&lt;br/&gt;        &lt;span&gt;&quot;fields&quot;&lt;/span&gt;: {&lt;br/&gt;          &lt;span&gt;&quot;keyword&quot;&lt;/span&gt;: {&lt;br/&gt;            &lt;span&gt;&quot;type&quot;&lt;/span&gt;: &lt;span&gt;&quot;keyword&quot;&lt;/span&gt;&lt;br/&gt;          }&lt;br/&gt;        }&lt;br/&gt;      }&lt;br/&gt;    }&lt;br/&gt;  }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;POST &lt;span&gt;test&lt;/span&gt;-005/_bulk&lt;br/&gt;{&lt;span&gt;&quot;index&quot;&lt;/span&gt;:{&lt;span&gt;&quot;_id&quot;&lt;/span&gt;:1}}&lt;br/&gt;{&lt;span&gt;&quot;title&quot;&lt;/span&gt;:&lt;span&gt;&quot;英文官网承认刘强东一度被捕的原因是涉嫌性侵&quot;&lt;/span&gt;}&lt;br/&gt;{&lt;span&gt;&quot;index&quot;&lt;/span&gt;:{&lt;span&gt;&quot;_id&quot;&lt;/span&gt;:2}}&lt;br/&gt;{&lt;span&gt;&quot;title&quot;&lt;/span&gt;:&lt;span&gt;&quot;别提了朋友哥哥刘强东窗事发了&quot;&lt;/span&gt;}&lt;br/&gt;{&lt;span&gt;&quot;index&quot;&lt;/span&gt;:{&lt;span&gt;&quot;_id&quot;&lt;/span&gt;:3}}&lt;br/&gt;{&lt;span&gt;&quot;title&quot;&lt;/span&gt;:&lt;span&gt;&quot;刘强东施效颦，没想到竟然收获了流量&quot;&lt;/span&gt;}&lt;br/&gt;{&lt;span&gt;&quot;index&quot;&lt;/span&gt;:{&lt;span&gt;&quot;_id&quot;&lt;/span&gt;:4}}&lt;br/&gt;{&lt;span&gt;&quot;title&quot;&lt;/span&gt;:&lt;span&gt;&quot;刘强东是谁？我不认识&quot;&lt;/span&gt;}&lt;br/&gt;&lt;br/&gt;POST &lt;span&gt;test&lt;/span&gt;-005/_search&lt;br/&gt;{&lt;br/&gt;  &lt;span&gt;&quot;query&quot;&lt;/span&gt;: {&lt;br/&gt;    &lt;span&gt;&quot;match_phrase&quot;&lt;/span&gt;: {&lt;br/&gt;      &lt;span&gt;&quot;title&quot;&lt;/span&gt;: &lt;span&gt;&quot;刘强东&quot;&lt;/span&gt;&lt;br/&gt;    }&lt;br/&gt;  }&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;Ngram 实现推荐：&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDY1MTA3OQ==&amp;amp;mid=2247484758&amp;amp;idx=1&amp;amp;sn=1fa663c5f8b85a82ef25f8453af88394&amp;amp;chksm=eaa82d7edddfa4682a2ff4de9465d8d6fc99a6f925c3f018c0e77b6ee8f59406c687854648cf&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Elasticsearch能检索出来，但不能正确高亮怎么办？&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;Elasticsearch能检索出来，但不能正确高亮怎么办？&lt;/span&gt;&lt;/a&gt;&lt;span/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;6.2 替代方案二：7.9 + 以上的版本，使用 wildcard 数据类型。&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;wildcard &lt;/span&gt;&lt;span&gt;类型&lt;/span&gt;&lt;span&gt;出现的目的：一方面避免了某些场景下分词查询不准确的问题，另一方面也解决了通配符和正则检索的效率问题。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;注意：新上的&lt;/span&gt;&lt;span&gt;数据类型&lt;/span&gt;&lt;span&gt; wildcard，而非 wildcard 检索。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;使用方法参见：&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;https://www.elastic.co/guide/en/elasticsearch/reference/master/keyword.html#wildcard-field-type。&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;6.3 禁用方案：禁止使用wildcard 模糊检索&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;特殊业务场景需要禁止：wildcard 检索。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;实现如下：&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;PUT _cluster/settings&lt;br/&gt;{&lt;br/&gt;  &lt;span&gt;&quot;transient&quot;&lt;/span&gt;: {&lt;br/&gt;    &lt;span&gt;&quot;search.allow_expensive_queries&quot;&lt;/span&gt;: &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;  }&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;需要强调的是： &lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&quot;search.allow_expensive_queries&quot;  是 7.7+ 版本才有的功能，早期版本会报错。&lt;/span&gt;&lt;/p&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;7、小结&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;由于技术惯性，我们习惯于相同或者相通技术的技术迁移，比如：mysql like 查询迁移到 Elasticsearch 中的 wildcard 模糊检索。但迁移的时候一定要注意：不同技术点的实现差异，同时要多关注技术点不能可能导致的性能问题。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;即便 2017年 wood 大叔就发了两篇文章让大家警惕 wildcard 模糊检索可能带来的性能问题。但四年后的今天，仍然很多公司的实战业务中还未考虑性能及后果的前提下，乐此不疲的用着 wildcard 检索！&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;所以，本文算是 wood 大叔的 wildcard 警示文章接力，希望更多人看到。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;参考：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://t.zsxq.com/Y3zv7Eq &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://t.zsxq.com/bm62zZf&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7dca8b88dd966068e1cc12177be6f956</guid>
<title>一次性总结了 Pandas 提取数据的 15 种方法，统统只需 1 行代码</title>
<link>https://toutiao.io/k/poubxrt</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;p class=&quot;original_area_primary&quot;&gt;
                                                                                                &lt;/p&gt;

                    
                                            &lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;pandas是Python数据分析必备工具，它有强大的数据清洗能力，往往能用非常少的代码实现较复杂的数据处理&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;今天，总结了pandas筛选数据的15个常用技巧，主要包括5个知识点：&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;“&lt;/span&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;比较运算：&lt;code&gt;==、&amp;lt;、&amp;gt;、&amp;gt;=、&amp;lt;=、!=&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;范围运算：&lt;code&gt;between(left,right)&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;字符筛选:&lt;code&gt;str.contains&lt;/code&gt;(pattern或字符串,na=False)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;逻辑运算：&lt;code&gt;&amp;amp;（与）、|（或）、not(取反)&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;比较函数：&lt;code&gt;eq, ne, le, lt, ge, gt&lt;/code&gt;（相当于&lt;code&gt;==,=!，&amp;lt;=，&amp;lt;，&amp;gt;=，&amp;gt;&lt;/code&gt;）&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;apply&lt;/code&gt;和&lt;code&gt;isin&lt;/code&gt;函数&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;span&gt;”&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下面以超市运营数据为例，给大家逐个讲解首先读取数据：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;import pandas as pd&lt;br/&gt;data=pd.read_excel(&lt;span&gt;&#x27;超市运营数据模板.xlsx&#x27;&lt;/span&gt;)&lt;br/&gt;data&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZI24icKKLWCs7bHanfLtscI6UgTHiaQGQyj9gWElqPana0r9cLXG0Ect0Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5248713550600344&quot; data-w=&quot;583&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;先看一下各列的数据类型：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data.dtypes&lt;br/&gt;商品ID             int64&lt;br/&gt;类别ID             int64&lt;br/&gt;门店编号            object&lt;br/&gt;单价             float64&lt;br/&gt;销量             float64&lt;br/&gt;订单ID            object&lt;br/&gt;日期      datetime64[ns]&lt;br/&gt;时间              object&lt;br/&gt;dtype: object&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下面以实际应用场景为例开始讲解：&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;1.筛选门店编号为&#x27;CDXL&#x27;的运营数据&lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;①第一种方法，用比较运算符‘==’：&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[data.门店编号==&lt;span&gt;&#x27;CDXL&#x27;&lt;/span&gt;]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZI1F1zoYxVMCC86OZC0Vcd7kNT9Jiaz4FpZPYgicDlib1kYRiaHNUWlMtgHA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.4925619834710744&quot; data-w=&quot;605&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;②第二种方法，用比较函数&#x27;eq&#x27;：&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[data[&lt;span&gt;&#x27;门店编号&#x27;&lt;/span&gt;].eq(&lt;span&gt;&#x27;CDXL&#x27;&lt;/span&gt;)]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIhgg5MOcdEnuVqk6rIeganYIBu58ol7vAERFSMXpUhXSsCEynXYDZ4A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5190972222222222&quot; data-w=&quot;576&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;2.筛选单价小于等于10元的运营数据&lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;③第一种方法，用比较运算符‘&amp;lt;=’:&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[data.单价&amp;lt;=10]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIcKMiaCRVQt6QPkQwPIQ6EpyaYrcGmLEL07Q5wch5d1ZbbkV8oFLArAA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5246478873239436&quot; data-w=&quot;568&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;④第二种方法，用比较函数&#x27;le&#x27;：&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[data[&lt;span&gt;&#x27;单价&#x27;&lt;/span&gt;].le(10)]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIqajVl5bPJpRADlpL3rHQ3sx8oOfz0eiaqzN2sO6U0hFzibaoY3u3fywg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5094339622641509&quot; data-w=&quot;583&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;3.筛选销量大于2000的运营数据&lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑤第一种方法，用比较运算符‘&amp;gt;=’:&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[data.销量&amp;gt;2]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIUkXk4XfgKKHchxibXmZHHBm9wXbBL9ZzDc0eb4fXSMxxIrZRicicpy7yA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5227272727272727&quot; data-w=&quot;572&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑥第二种方法，用比较函数&#x27;ge&#x27;：&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[data[&lt;span&gt;&#x27;销量&#x27;&lt;/span&gt;].ge(2)]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIUkXk4XfgKKHchxibXmZHHBm9wXbBL9ZzDc0eb4fXSMxxIrZRicicpy7yA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5227272727272727&quot; data-w=&quot;572&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;4.筛选除门店&#x27;CDXL&#x27;外的运营数据&lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑦第一种方法，用比较运算符‘!=’:&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[data.门店编号!=&lt;span&gt;&#x27;CDXL&#x27;&lt;/span&gt;]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZItlTlncKK1rZkNaIEudHlKNm11YjX0b6MTJvVh7adQYNsnExiad1PkXg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.525305410122164&quot; data-w=&quot;573&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;br/&gt;⑧第二种方法，用比较函数&#x27;ne&#x27;:&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[data[&lt;span&gt;&#x27;门店编号&#x27;&lt;/span&gt;].ne(&lt;span&gt;&#x27;CDXL&#x27;&lt;/span&gt;)]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZILbIoakFXWuUEIVw8R6fPXibPN9uHqzk7QYLPp76R0FYWrjz8KM337NA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5136986301369864&quot; data-w=&quot;584&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;5.筛选2020年5月的运营数据&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先将日期格式化：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[&lt;span&gt;&#x27;日期&#x27;&lt;/span&gt;]=data[&lt;span&gt;&quot;日期&quot;&lt;/span&gt;].values.astype(&lt;span&gt;&#x27;datetime64&#x27;&lt;/span&gt;)  &lt;span&gt;#如果已为日期格式则此步骤可省略&lt;/span&gt;&lt;br/&gt;data[&lt;span&gt;&#x27;日期&#x27;&lt;/span&gt;]&lt;br/&gt;import datetime&lt;br/&gt;s_date = datetime.datetime.strptime(&lt;span&gt;&#x27;2020-04-30&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;%Y-%m-%d&#x27;&lt;/span&gt;).date()  &lt;span&gt;#起始日期&lt;/span&gt;&lt;br/&gt;e_date = datetime.datetime.strptime(&lt;span&gt;&#x27;2020-06-01&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;%Y-%m-%d&#x27;&lt;/span&gt;).date()  &lt;span&gt;#结束日期&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑨第一种方法，用逻辑运算符号&#x27;&amp;gt;&#x27; &#x27;&amp;lt;&#x27;和&#x27;&amp;amp;&#x27;：&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Pandasdatetime64[ns]&lt;/code&gt;不能直接与&lt;code&gt;datetime.date&lt;/code&gt;相比，需要用&lt;code&gt;pd.Timestamp&lt;/code&gt;进行转化&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[(data.日期&amp;gt;pd.Timestamp(s_date))&amp;amp;(data.日期&amp;lt;pd.Timestamp(e_date))]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIpJCBkxib3Q91icBGSfpSHa4jh2l1WTAbVqB5VfQqXqYvLicZia83FCGydg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5959252971137521&quot; data-w=&quot;589&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;/h4&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;⑩第二种，用比较函数&#x27;gt&#x27;&#x27;lt&#x27;和&#x27;&amp;amp;&#x27;:&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[(data[&lt;span&gt;&#x27;日期&#x27;&lt;/span&gt;].lt(pd.Timestamp(e_date)))&amp;amp;(data[&lt;span&gt;&#x27;日期&#x27;&lt;/span&gt;].gt(pd.Timestamp(s_date)))]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIf8ibA6gGWyDdbu2R70C5qCwxRIiaLSpnX7GVnyibt12MNApNCb3VhncrA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.503448275862069&quot; data-w=&quot;580&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑪第三种，用apply函数实现:&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;id_a=data.日期.apply(lambda x: x.year ==2020  and x.month==5)&lt;br/&gt;data[id_a]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIOSKb1BnLW0YhibVhficVlew8libQCaSD2KzIgqjN5xgBuURyrIBaCsrGw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.506108202443281&quot; data-w=&quot;573&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑫第四种，用between函数实现:&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;id_b=data.日期.between(pd.Timestamp(s_date),pd.Timestamp(e_date))&lt;br/&gt;data[id_b]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIh3FXUzo1CU6nXLRwuB75akibXjnuiaU7bFfRfZkLt6p7QSOgwyibzH4zg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5181975736568457&quot; data-w=&quot;577&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;6.筛选“类别ID”包含&#x27;000&#x27;的数据&lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑬第一种，用contains函数：&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[&lt;span&gt;&#x27;类别ID&#x27;&lt;/span&gt;]=data[&lt;span&gt;&#x27;类别ID&#x27;&lt;/span&gt;].values.astype(&lt;span&gt;&#x27;str&#x27;&lt;/span&gt;)  &lt;span&gt;#将该列转换为字符数据类型&lt;/span&gt;&lt;br/&gt;id_c=data.类别ID.str.contains(&lt;span&gt;&#x27;000&#x27;&lt;/span&gt;,na=False)&lt;br/&gt;data[id_c]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIOPb1yy6BmTUCln8lTldKfjeyZXAAbCybvu6coum25DPmuxtuPRagTA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5259515570934256&quot; data-w=&quot;&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑭第二种，用isin函数：&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;id_i=data.类别ID.isin([&lt;span&gt;&#x27;000&#x27;&lt;/span&gt;])  &lt;span&gt;#接受一个列表&lt;/span&gt;&lt;br/&gt;data[id_i]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;很遗憾，isin函数搞不定，因为它只能判断该列中元素是否在列表中&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;7.筛选商品ID以“301”开头的运营数据&lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;⑮需要用contains函数结合正则表达式使用：&lt;span/&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;data[&lt;span&gt;&#x27;商品ID&#x27;&lt;/span&gt;]=data[&lt;span&gt;&#x27;商品ID&#x27;&lt;/span&gt;].values.astype(&lt;span&gt;&#x27;str&#x27;&lt;/span&gt;)  &lt;span&gt;#将该列转换为字符数据类型&lt;/span&gt;&lt;br/&gt;id_c2=data.商品ID.str.contains(&lt;span&gt;&#x27;301\d{5}&#x27;&lt;/span&gt;,na=False)&lt;br/&gt;data[id_c2]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/I4gYnKQgV1V0ptEUG8Tn01nqPBZpXzZIOPb1yy6BmTUCln8lTldKfjeyZXAAbCybvu6coum25DPmuxtuPRagTA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5259515570934256&quot; data-w=&quot;&quot;/&gt;&lt;/figure&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;p&gt;为了方便大家学习，我已经将本文数据及代码打包好，请关注 数据分析与开发 公众号在后台回复关键字：&lt;span&gt;&lt;strong&gt;筛选数据 &lt;/strong&gt;&lt;/span&gt;获取。&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;- EOF -&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;section donone=&quot;shifuMouseDownCard(&#x27;shifu_c_030&#x27;)&quot; label=&quot;Copyright Reserved by PLAYHUDONG.&quot;&gt;&lt;section&gt;&lt;span&gt;推荐阅读&lt;/span&gt;  &lt;span&gt;点击标题可跳转&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;1、&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA5ODM5MDU3MA==&amp;amp;mid=2650869810&amp;amp;idx=2&amp;amp;sn=cea7c191f87235d091c30191eda28abc&amp;amp;chksm=8b67f777bc107e615e747b266937c032624708209d0339086d0edff9fe69fc843ee1aa696b4d&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Pandas 必知必会的使用技巧，值得收藏！&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2、&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA5ODM5MDU3MA==&amp;amp;mid=2650870875&amp;amp;idx=1&amp;amp;sn=b28725c5f3d3c0a6331550f008994f59&amp;amp;chksm=8b67f31ebc107a0814ddd5c943b13369e69adf4b9e628bb1746b4844868c0ecb0339a7730a59&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;一行 Pandas 代码搞定 Excel “条件格式”！&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3、&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA5ODM5MDU3MA==&amp;amp;mid=2650863849&amp;amp;idx=1&amp;amp;sn=fa0f58c0dcc172e0bbdd449731d980f5&amp;amp;chksm=8b661facbc1196baa215166eb69db5e831e4b0f4885fefcc15c185401d2b033d6066b2baec46&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python 数据处理库 pandas 进阶教程&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;看完本文有收获？请转发分享给更多人&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;推荐关注「数据分析与开发」，提升数据技能&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzA5ODM5MDU3MA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/DmibiaFiaAI4B3yECIF3LxR8ZMPVxnto79bB8LrraNT18VPT5aCHSDFGiczOnt4CYCQlBCWg5ykox33kcLydFc4jhA/0?wx_fmt=png&quot; data-nickname=&quot;数据分析与开发&quot; data-alias=&quot;DBDevs&quot; data-signature=&quot;「数据分析与开发」分享数据分析与开发相关技术文章、教程、工具&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;点赞和在看就是最大的支持&lt;/span&gt;&lt;span&gt;❤️&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>00ae2e387e90f5d1701039adf46b7569</guid>
<title>[译] 使用 Vue.js 和 MJML 创建响应式电子邮件</title>
<link>https://toutiao.io/k/wfkmex2</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;237&quot; data-ratio=&quot;0.6671232876712329&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WYoaOn5t0AMvmc7dL0N7fvxI4wZJTWXtLl1o11Acx1PiclTVCrBSuqUvPxtfmXayHAm3LXlk7eVFOv5aiaktRVxw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;730&quot;/&gt;&lt;span&gt;原文：https://blog.logrocket.com/creating-responsive-emails-using-mjml/&lt;br/&gt;&lt;span&gt;作者：Ogundipe Samuel&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;MJML是一种现代的电子邮件工具，使开发人员可以在所有设备和邮件客户端上创建美观、响应迅速的出色电子邮件。这种标记语言是为了减少编写响应式电子邮件的痛苦而设计的。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;它的语义语法使其易于使用。它还具有功能丰富的标准组件，可缩短开发时间。在本教程中，我们将使用MJML构建漂亮的响应式邮件，并在多个邮件客户端上进行测试。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;开始MJML&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;你可以使用npm安装MJML，以将其与Node.js或CLI结合使用：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; npm install -g mjml&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;构建我们的电子邮件&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先，请创建一个名为 &lt;code&gt;email.mjml&lt;/code&gt; 的文件，尽管你也可以选择其他任何名称。创建文件后，我们的响应式电子邮件将分为以下几部分：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;公司header&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;图片header&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Email介绍&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;栏目部分&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;图标&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;社交图标&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;栏目&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这些部分是我们响应式电子邮件的框架。如上所示，我们的电子邮件将分为六个部分，在我们的 &lt;code&gt;email.mjml&lt;/code&gt; 文件中：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;mjml&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- 公司 Header --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#f0f0f0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- 图片 Header --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#f0f0f0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- Email 介绍 --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#fafafa&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- 栏目部分 --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;white&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- 图标 --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#fbfbfb&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- 社交图标 --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#f0f0f0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mjml&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;从上面可以看到，我们正在使用两个MJML组件：&lt;code&gt;mj-body&lt;/code&gt; 和 &lt;code&gt;mj-section&lt;/code&gt;。&lt;code&gt;mj-body&lt;/code&gt; 定义了我们电子邮件的起点，而 &lt;code&gt;mj-section&lt;/code&gt; 定义了一个包含其他组件的节。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;对于定义的每个部分，还定义了具有各自十六进制值的 &lt;code&gt;background-color&lt;/code&gt; 属性。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;公司 Header&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们电子邮件的此部分仅在中心横幅位置包含我们的公司/品牌名称：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;!-- 公司 Header --&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#f0f0f0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt;  &lt;span&gt;font-style&lt;/span&gt;=&lt;span&gt;&quot;bold&quot;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;font-size&lt;/span&gt;=&lt;span&gt;&quot;20px&quot;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;align&lt;/span&gt;=&lt;span&gt;&quot;center&quot;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#626262&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    Central Park Cruise&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;mj-column&lt;/code&gt; 组件是用来定义一个列。&lt;code&gt;mj-text&lt;/code&gt; 组件用于我们的文本内容，并采取字体样式、字体大小、颜色等样式属性。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;图片 Header&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在本部分中，我们将有一个背景图片和一段文字，它们应代表我们的公司口号。我们还会有一个号召性用语按钮，指向一个包含更多详细信息的页面。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;要添加图片标题，你必须将该部分的背景颜色替换为 &lt;code&gt;background-url&lt;/code&gt;。与第一个标题相似，你将不得不在垂直和水平方向上居中放置文本，padding保持不变。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;按钮的 &lt;code&gt;href&lt;/code&gt; 设置按钮的位置。为了让背景在列中呈现全宽，将列宽设置为600px，&lt;code&gt;width=“600px&quot;&lt;/code&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们的电子邮件的这一部分将只包含我们的公司/品牌名称的中心横幅位置。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;!-- Image Header --&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-url&lt;/span&gt;=&lt;span&gt;&quot;https://ca-times.brightspotcdn.com/dims4/default/2af165c/2147483647/strip/true/crop/2048x1363+0+0/resize/1440x958!/quality/90/?url=https%3A%2F%2Fwww.trbimg.com%2Fimg-4f561d37%2Fturbine%2Forl-disneyfantasy720120306062055&quot;&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;background-size&lt;/span&gt;=&lt;span&gt;&quot;cover&quot;&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;background-repeat&lt;/span&gt;=&lt;span&gt;&quot;no-repeat&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;600px&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt;  &lt;span&gt;align&lt;/span&gt;=&lt;span&gt;&quot;center&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#fff&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;font-size&lt;/span&gt;=&lt;span&gt;&quot;40px&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;font-family&lt;/span&gt;=&lt;span&gt;&quot;Helvetica Neue&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Christmas Discount&lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-button&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#F63A4D&quot;&lt;/span&gt; &lt;span&gt;href&lt;/span&gt;=&lt;span&gt;&quot;#&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      See Promotions&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;要使用图像header，我们将向 &lt;code&gt;jms -section&lt;/code&gt; 组件添加 &lt;code&gt;background-url&lt;/code&gt; 属性，然后使用 &lt;code&gt;background-size&lt;/code&gt; 和 &lt;code&gt;background-repeat&lt;/code&gt; 属性设置图像的样式。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;对于我们的口号文本块，我们使用 &lt;code&gt;align&lt;/code&gt; 属性将文本在水平和垂直方向上居中对齐。你还可以根据需要设置文本颜色，字体大小，字体系列等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;号召性用语按钮是使用 &lt;code&gt;mj-button&lt;/code&gt; 组件实现的。&lt;code&gt;background-color&lt;/code&gt; 属性允许我们指定按钮的背景色，然后使用 &lt;code&gt;href&lt;/code&gt; 指定链接或页面的位置。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;372&quot; data-ratio=&quot;1.2733333333333334&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WYoaOn5t0AMvmc7dL0N7fvxI4wZJTWXtmwAuOSN3bibj0McvB5ziaHMzRJWpHllTbsRDxrbeuryNT69RQnCpcG2A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1350&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;Email件介绍&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;简介文字将由标题，主体文字和号召性用语组成。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;!-- Intro text --&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#fafafa&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;400px&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt; &lt;span&gt;font-style&lt;/span&gt;=&lt;span&gt;&quot;bold&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;font-size&lt;/span&gt;=&lt;span&gt;&quot;20px&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;font-family&lt;/span&gt;=&lt;span&gt;&quot;Helvetica Neue&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#626262&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Ultimate Christmas Experience&lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt; &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#525252&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin rutrum enim eget magna efficitur, eu semper augue semper. Aliquam erat volutpat. Cras id dui lectus. Vestibulum sed finibus lectus, sit amet suscipit nibh. Proin nec commodo purus. Sed eget nulla elit. Nulla aliquet mollis faucibus.&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-button&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#F45E43&quot;&lt;/span&gt; &lt;span&gt;href&lt;/span&gt;=&lt;span&gt;&quot;#&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Learn more&lt;span&gt;&amp;lt;/&lt;span&gt;mj-button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;栏目部分&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在这封邮件的部分，我们会有两栏：一栏是描述性的图片，二栏是我们的文字块，用来补充第一部分的图片。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;!-- Side image --&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;white&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;!-- Left image --&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-image&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;200px&quot;&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;src&lt;/span&gt;=&lt;span&gt;&quot;https://navis-consulting.com/wp-content/uploads/2019/09/Cruise1-1.png&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;!-- right paragraph --&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt; &lt;span&gt;font-style&lt;/span&gt;=&lt;span&gt;&quot;bold&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;font-size&lt;/span&gt;=&lt;span&gt;&quot;20px&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;font-family&lt;/span&gt;=&lt;span&gt;&quot;Helvetica Neue&quot;&lt;/span&gt;&lt;br/&gt;             &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#626262&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      Amazing Experiences&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt; &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#525252&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      Lorem ipsum dolor sit amet, consectetur adipiscing elit. &lt;br/&gt;      Proin rutrum enim eget magna efficitur, eu semper augue semper. &lt;br/&gt;      Aliquam erat volutpat. Cras id dui lectus. Vestibulum sed finibus &lt;br/&gt;      lectus.&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;左侧的第一列使用 &lt;code&gt;mj-image&lt;/code&gt; 组件指定要使用的图像。该图像可以是本地文件，也可以是远程托管的图像（在我们的情况下是这样）。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;右侧的第二列包含两个文本块，一个用于我们的标题，另一个用于主体文本。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;图标&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;图标部分将分为三列。你还可以添加更多内容，具体取决于你希望电子邮件的外观。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;!-- Icons --&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#fbfbfb&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-image&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;100px&quot;&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;=&lt;span&gt;&quot;https://191n.mj.am/img/191n/3s/x0l.png&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-image&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;100px&quot;&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;=&lt;span&gt;&quot;https://191n.mj.am/img/191n/3s/x01.png&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-image&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;100px&quot;&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;=&lt;span&gt;&quot;https://191n.mj.am/img/191n/3s/x0s.png&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;每列都有其自己的 &lt;code&gt;mj-image&lt;/code&gt; 组件，用于渲染图标图像。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;社交图标&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;本部分将包含指向我们的社交媒体帐户的图标。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#e7e7e7&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-social&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-social-element&lt;/span&gt; &lt;span&gt;name&lt;/span&gt;=&lt;span&gt;&quot;instagram&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-social&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;MJML带有 &lt;code&gt;mj-social&lt;/code&gt; 组件，可轻松用于显示社交媒体图标。在我们的电子邮件中，我们使用了 Twitter &lt;code&gt;mj-social-element&lt;/code&gt;。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;全部放在一起&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;至此，我们已经实现了所有部分，完整的 &lt;code&gt;email.mjml&lt;/code&gt; 应该如下所示：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;mjml&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;&lt;span&gt;mj-body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- Company Header --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#f0f0f0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt;  &lt;span&gt;font-style&lt;/span&gt;=&lt;span&gt;&quot;bold&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;font-size&lt;/span&gt;=&lt;span&gt;&quot;20px&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;align&lt;/span&gt;=&lt;span&gt;&quot;center&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#626262&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;          Central Park Cruises&lt;br/&gt;        &lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- Image Header --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-url&lt;/span&gt;=&lt;span&gt;&quot;https://ca-times.brightspotcdn.com/dims4/default/2af165c/2147483647/strip/true/crop/2048x1363+0+0/resize/1440x958!/quality/90/?url=https%3A%2F%2Fwww.trbimg.com%2Fimg-4f561d37%2Fturbine%2Forl-disneyfantasy720120306062055&quot;&lt;/span&gt;&lt;br/&gt;                &lt;span&gt;background-size&lt;/span&gt;=&lt;span&gt;&quot;cover&quot;&lt;/span&gt;&lt;br/&gt;                &lt;span&gt;background-repeat&lt;/span&gt;=&lt;span&gt;&quot;no-repeat&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;600px&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt;  &lt;span&gt;align&lt;/span&gt;=&lt;span&gt;&quot;center&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#fff&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;font-size&lt;/span&gt;=&lt;span&gt;&quot;40px&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;font-family&lt;/span&gt;=&lt;span&gt;&quot;Helvetica Neue&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Christmas Discount&lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-button&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#F63A4D&quot;&lt;/span&gt; &lt;span&gt;href&lt;/span&gt;=&lt;span&gt;&quot;#&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;          See Promotions&lt;br/&gt;        &lt;span&gt;&amp;lt;/&lt;span&gt;mj-button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- Email Introduction --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#fafafa&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;400px&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt; &lt;span&gt;font-style&lt;/span&gt;=&lt;span&gt;&quot;bold&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;font-size&lt;/span&gt;=&lt;span&gt;&quot;20px&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;font-family&lt;/span&gt;=&lt;span&gt;&quot;Helvetica Neue&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#626262&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Ultimate Christmas Experience&lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt; &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#525252&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin rutrum enim eget magna efficitur, eu semper augue semper. Aliquam erat volutpat. Cras id dui lectus. Vestibulum sed finibus lectus, sit amet suscipit nibh. Proin nec commodo purus. Sed eget nulla elit. Nulla aliquet mollis faucibus.&lt;br/&gt;        &lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-button&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#F45E43&quot;&lt;/span&gt; &lt;span&gt;href&lt;/span&gt;=&lt;span&gt;&quot;#&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Learn more&lt;span&gt;&amp;lt;/&lt;span&gt;mj-button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- Columns section --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;white&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;!-- Left image --&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-image&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;200px&quot;&lt;/span&gt;&lt;br/&gt;                  &lt;span&gt;src&lt;/span&gt;=&lt;span&gt;&quot;https://navis-consulting.com/wp-content/uploads/2019/09/Cruise1-1.png&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;!-- right paragraph --&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt; &lt;span&gt;font-style&lt;/span&gt;=&lt;span&gt;&quot;bold&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;font-size&lt;/span&gt;=&lt;span&gt;&quot;20px&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;font-family&lt;/span&gt;=&lt;span&gt;&quot;Helvetica Neue&quot;&lt;/span&gt;&lt;br/&gt;                 &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#626262&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;          Amazing Experiences&lt;br/&gt;        &lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-text&lt;/span&gt; &lt;span&gt;color&lt;/span&gt;=&lt;span&gt;&quot;#525252&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;          Lorem ipsum dolor sit amet, consectetur adipiscing elit. &lt;br/&gt;          Proin rutrum enim eget magna efficitur, eu semper augue semper. &lt;br/&gt;          Aliquam erat volutpat. Cras id dui lectus. Vestibulum sed finibus &lt;br/&gt;          lectus.&lt;br/&gt;        &lt;span&gt;&amp;lt;/&lt;span&gt;mj-text&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- Icons --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#fbfbfb&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-image&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;100px&quot;&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;=&lt;span&gt;&quot;https://191n.mj.am/img/191n/3s/x0l.png&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-image&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;100px&quot;&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;=&lt;span&gt;&quot;https://191n.mj.am/img/191n/3s/x01.png&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-image&lt;/span&gt; &lt;span&gt;width&lt;/span&gt;=&lt;span&gt;&quot;100px&quot;&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;=&lt;span&gt;&quot;https://191n.mj.am/img/191n/3s/x0s.png&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;!-- Social icons --&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;&lt;span&gt;mj-section&lt;/span&gt; &lt;span&gt;background-color&lt;/span&gt;=&lt;span&gt;&quot;#e7e7e7&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;&lt;span&gt;mj-social&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;          &lt;span&gt;&amp;lt;&lt;span&gt;mj-social-element&lt;/span&gt; &lt;span&gt;name&lt;/span&gt;=&lt;span&gt;&quot;instagram&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&amp;lt;/&lt;span&gt;mj-social&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;&amp;lt;/&lt;span&gt;mj-column&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&amp;lt;/&lt;span&gt;mj-section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&amp;lt;/&lt;span&gt;mj-body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;mjml&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;运行我们的应用程序&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;现在我们已经完成了电子邮件的构建，我们可以继续对其进行编译以查看其外观。为此，我们在终端中键入以下内容：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;mjml -r email.mjml -o .&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;-r&lt;/code&gt;：允许MJML读取和编译我们的 &lt;code&gt;mjml&lt;/code&gt; 文件&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;-o .&lt;/code&gt;：告诉MJML将编译后的 &lt;code&gt;mjml&lt;/code&gt; 输出保存到同一目录中&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;MJML完成编译后，你现在应该在同一目录中看到一个 &lt;code&gt;email.html&lt;/code&gt; 文件。使用你喜欢的电子邮件客户端或浏览器打开它，它的外观应类似于下图：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.535472972972973&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WYoaOn5t0AMvmc7dL0N7fvxI4wZJTWXtn3HhqzggLXRgwEfsIq81s9wCkvymMiaxNibbIHPicLp539xfTRhW5ENdw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;592&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;总结&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;正如我们刚才看到的，MJML帮助我们生成跨多个浏览器和客户机响应的高质量、漂亮的HTML电子邮件。&lt;/p&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>fe3b7214c1bf1326e7fcd8244e2de611</guid>
<title>基于 NextCloud 打造个人工作台</title>
<link>https://toutiao.io/k/dllg2zb</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;entry-content&quot;&gt;&amp;#13;

&lt;p&gt;Nextcloud 是一款开源免费的私有云存储网盘项目，除了保存数据，通过安装插件，实现更多功能。我已经用Nextcloud 工作一段时间了，本章介绍我的使用心得。&lt;/p&gt;



&lt;span id=&quot;more-363&quot;/&gt;



&lt;h3 id=&quot;数据管理&quot;&gt;数据管理&lt;/h3&gt;



&lt;p&gt;家里用树莓派4跑Nextcloud，外接一个1T的移动硬盘，用来存储全家的数据，打通电脑、手机、平板的数据交互。家里台式机有一块3T硬盘，每隔一段时间会使用台式机增量同步数据做二次备份。&lt;/p&gt;



&lt;p&gt;树莓派上有安装aria2做下载服务，下载在Samba共享的目录中。之所以不用Nextcloud做下载目录是因为每当目录内容变化，Nextcloud会自动索引。一个文件下载完会发现Nextcloud动态中全是这个文件的修改信息。&lt;/p&gt;



&lt;p&gt;Nextcloud存储的数据大多是照片、视频、文档。使用Samba挂载ara2的下载目录，方便访问下载的文件。&lt;/p&gt;



&lt;p&gt;在应用中找到“External storage support”，安装启用。该应用一般是默认安装。&lt;/p&gt;







&lt;p&gt;在设置中添加外部存储。&lt;/p&gt;







&lt;p&gt;使用Docker安装默认不支持Samba挂载，可参考之前写的这篇，开启Samba挂载：&lt;a href=&quot;https://engr-z.com/278.html&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;engr-z.com/278.html&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;在应用市中还可以下载其他插件，支持挂载Google Driver，OneDrive等插件。&lt;/p&gt;



&lt;h3 id=&quot;邮件管理&quot;&gt;邮件管理&lt;/h3&gt;



&lt;p&gt;虽然工作中大多使用IM沟通，但是正式场合邮件必不可少。一般我们都会有多个邮箱，通过Mail插件，我们可以把所有邮箱添加到Nextcloud方便管理和查阅。&lt;/p&gt;



&lt;p&gt;在应用中搜索“Mail”，安装启用。&lt;/p&gt;







&lt;p&gt;Mail的入口在顶部，支持IMAP收信和SMTP发送。&lt;/p&gt;







&lt;p&gt;和POP协议不同，IMAP协议的操作会同步到邮箱服务器，如果删除邮件，邮箱服务器的邮件也会同步删除。&lt;/p&gt;



&lt;h3 id=&quot;笔记&quot;&gt;笔记&lt;/h3&gt;



&lt;p&gt;虽然Nextcloud的笔记插件和专业笔记软件比起来差得远了，不过作为临时草稿本还是很实用的。&lt;/p&gt;



&lt;p&gt;在应用中搜索“Notes”，安装启用&lt;/p&gt;







&lt;p&gt;笔记支持纯文本的.txt文件和支持markdown语法的.md文件。&lt;/p&gt;







&lt;p&gt;笔记默认保存在“笔记”目录中，可以在设置中修改保存的文件夹和笔记默认文件格式。&lt;/p&gt;



&lt;h3 id=&quot;联系人管理&quot;&gt;联系人管理&lt;/h3&gt;



&lt;p&gt;在应用市场搜索“Contacts”，安装启用。&lt;/p&gt;







&lt;p&gt;联系人管理入口在顶部：&lt;/p&gt;







&lt;p&gt;支持 vCard 格式，可以导入/导出，并和手机同步。&lt;/p&gt;



&lt;h2 id=&quot;书签和密码&quot;&gt;书签和密码&lt;/h2&gt;



&lt;p&gt;对于常常需要使用多个浏览器的人，最痛苦的是书签和浏览器密码不同步。比如在Chrome中保存的书签，在Firefox中要再保存一次。在Edge中保存的密码，在Chrome又要输入。如果更新密码，则又要手动同步。而且Google账户在国内无法登录，无法使用Chrome同步功能。&lt;/p&gt;



&lt;p&gt;通过安装第三方书签和密码同步工具可以解决上述问题，而Nextcloud支持书签和密码同步。&lt;/p&gt;







&lt;p&gt;在应用中搜索“Bookmarks”，安装启用。&lt;/p&gt;







&lt;p&gt;书签支持导入导出，默认保存在“书签”文件夹中。&lt;/p&gt;







&lt;p&gt;我们可以建不同的文件夹，区分应用场景。比如建“个人”和“公司”文件夹。在公司只同步“公司”的书签。&lt;/p&gt;



&lt;p&gt;同步书签的浏览器插件是“floccus”，支持Chrome、Firefox、Edge，在各浏览器应用市场可以搜到。官网：&lt;a href=&quot;https://floccus.org/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;floccus.org&lt;/a&gt;&lt;/p&gt;







&lt;p&gt;设置好后可在浏览器中查看同步状态&lt;/p&gt;







&lt;p&gt;在手机上也可以查看书签。&lt;/p&gt;







&lt;p&gt;在应用中搜索“Passwords”，安装启用。&lt;/p&gt;







&lt;p&gt;Passwords入口在顶部，和书签一样，可以用不同文件夹区分不同场景。我做软件开发时常常要登录测试账号，可以建立“测试”文件夹用于保存账号密码。&lt;/p&gt;







&lt;p&gt;Passwords插件主流浏览器和Android/IOS手机APP，在Passwords界面提供插件下载入口：&lt;/p&gt;







&lt;p&gt;以Chrome为例，通过Passwords入口点击“Available on Firefox Add-ons”安装插件，然后点击“Connect with PassLink”连接。&lt;/p&gt;



&lt;p&gt;连接成功可查看状态：&lt;/p&gt;







&lt;p&gt;当浏览器跳到登录界面，如果有保存过密码，在插件中可以看到，点击后登录框会自动设置保存的用户名密码&lt;/p&gt;







&lt;p&gt;浏览器插件只支持查询，相关密码需要在Nextcloud中创建：&lt;/p&gt;











&lt;p&gt;有了这两个插件，可以在任意浏览器中切换。&lt;/p&gt;



&lt;p&gt;手机端也可以安装nextBookmark和Passwords同步管理书签和密码：&lt;/p&gt;







&lt;h3 id=&quot;外部站点&quot;&gt;外部站点&lt;/h3&gt;



&lt;p&gt;我们可以自定义外部站点，把第三方网站集成到Nextcloud中，比如，集成导航网站，集成搜索等。&lt;/p&gt;



&lt;p&gt;在应用中搜索“External sites”，安装启用&lt;/p&gt;







&lt;p&gt;在设置中找到“外部站点”，添加&lt;/p&gt;







&lt;p&gt;添加成功后在顶部可以看到入口&lt;/p&gt;







&lt;p&gt;我们还可以自定义图标，分组等。&lt;/p&gt;



&lt;h3 id=&quot;更多&quot;&gt;更多&lt;/h3&gt;



&lt;p&gt;Nextcloud的强大远不此如此，安装ONLYOFFICE插件还能处理office文件，还有ToDo类工具，计划任务，工作流等插件。由于篇幅有限就不一一说明了。&lt;/p&gt;



&lt;p&gt;我在安装应用时发现，安装较大的应用可能会很慢。我们可以手动在官网下载应用，解压到Nextcloud安装目录下的app目录，然后在“应用”管理中启用。&lt;/p&gt;



&lt;p&gt;Nextcloud App官网：&lt;a href=&quot;https://apps.nextcloud.com/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;apps.nextcloud.com&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;/div&gt;&amp;#13;
&amp;#13;
&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>