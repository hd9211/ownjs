<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>9d4ba53f93a476c977c185a9e26e57f4</guid>
<title>搞定这8个Kafka生产级容量评估，每日10亿+请求轻松拿捏！</title>
<link>https://toutiao.io/k/9gqhrpj</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;拿电商平台为例，kafka 集群每天需要承载10亿+请求流量数据，一天24小时，对于平台来说，晚上12点到凌晨8点这8个小时几乎没多少数据涌入的。这里我们使用&lt;/span&gt;&lt;strong&gt;&lt;span&gt;「二八法则」&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;来进行预估，也就是80%的数据（8亿）会在剩余的16个小时涌入，且8亿中的80%的数据（约6.4亿）会在这16个小时的20%时间 （约3小时）涌入。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过上面的场景分析，可以得出如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;QPS计算公式 = 640000000 ÷ (3 * 60 * 60) = 6万，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;也就是说高峰期集群需要扛住每秒6万的并发请求。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;假设&lt;/span&gt;&lt;strong&gt;&lt;span&gt;每条数据平均按20kb(生产端有数据汇总)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;来算, 那就是 &lt;/span&gt;&lt;strong&gt;&lt;span&gt;1000000000 * 20kb = 18T，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;一般情况下我们都会设置&lt;/span&gt;&lt;strong&gt;&lt;span&gt;3个副本，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;即&lt;/span&gt;&lt;strong&gt;&lt;span&gt;54T，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;另外 kafka 数据是有保留时间周期的,  一般情况是保留&lt;/span&gt;&lt;strong&gt;&lt;span&gt;最近3天的数据，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;即 &lt;/span&gt;&lt;strong&gt;&lt;span&gt;54T * 3 = 162T。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;两者主要区别如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section data-role=&quot;list&quot;/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;首先SSD硬盘性能好，主要是指的随机读写能力性能好，非常适合Mysql这样的集群，而&lt;/span&gt;&lt;strong&gt;&lt;span&gt;SSD的顺序读写性能跟机械硬盘的性能是差不多的。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Kafka 写磁盘是顺序追加写的，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;所以对于 kafka 集群来说，我们使用&lt;/span&gt;&lt;strong&gt;&lt;span&gt;普通机械硬盘&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;就可以了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、每台服务器需要多少块硬盘&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;根据&lt;/span&gt;&lt;strong&gt;&lt;span&gt;第一二步骤&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;计算结果，我们需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;7台物理机，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;一共需要存储&lt;/span&gt;&lt;strong&gt;&lt;span&gt;162T&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;数据，大约每台机器需要存储&lt;/span&gt;&lt;strong&gt;&lt;span&gt;23T&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;数据，根据以往经验一般服务器配置&lt;/span&gt;&lt;strong&gt;&lt;span&gt;11块&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;硬盘，这样每块硬盘大约存储2T的数据就可以了，另外为了服务器性能和稳定性，我们一般要保留一部分空间，保守按每块硬盘&lt;/span&gt;&lt;strong&gt;&lt;span&gt;最大能存储3T数据。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3、场景总结&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;要搞定&lt;/span&gt;&lt;strong&gt;&lt;span&gt;10亿+&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;请求，需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;7台物理机，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;使用&lt;/span&gt;&lt;strong&gt;&lt;span&gt;普通机械硬盘&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;进行存储，每台服务器&lt;/span&gt;&lt;strong&gt;&lt;span&gt;11块&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;硬盘，每块硬盘存储&lt;/span&gt;&lt;strong&gt;&lt;span&gt;2T&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;数据。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86122&quot; data-custom=&quot;#138bde&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;四、kafka容量评估之内存&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1、Kafka 写磁盘流程及内存分析&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;346&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.6098562628336756&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAppxmyvEpv43XubfYgBRian0N6mlcylJWT8or72IKYdQJ3EUCTPLhHsw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;974&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;从上图可以得出 Kafka 读写数据的流程主要都是基于os cache，所以基本上 Kafka 都是基于内存来进行数据流转的，这样的话要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;分配尽可能多的内存资源给os cache。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;kafka的核心源码基本都是用 scala 和 java (客户端)写的，底层都是基于 JVM 来运行的，所以要分配一定的内存给 JVM 以保证服务的稳定性。对于 Kafka 的设计，并没有把很多的数据结构存储到 JVM 中，&lt;/span&gt;&lt;strong&gt;&lt;span&gt;所以根据经验，给 JVM 分配6~10G就足够了。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;443&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.7798254122211445&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAu1Ickbq5vCeZL01AejBhfs56p6PLcCZ53AWAibOWicuxbGa4xiapYhMmA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1031&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;185&quot; data-backw=&quot;349&quot; data-ratio=&quot;0.5300859598853869&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAYcGw7ewrYPsiaSRUG72ibHGeibSl7YUtEe4sxs7HNlInagoIePEJjKKRw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;349&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;从上图可以看出一个 Topic 会对于多个 partition，一个 partition 会对应多个 segment ，一个 segment 会对应磁盘上4个log文件。假设我们这个平台总共100个 Topic ，那么总共有 &lt;/span&gt;&lt;strong&gt;&lt;span&gt;100 Topic * 5 partition * 3 副本 = 1500 partition 。&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;对于 partition 来说实际上就是物理机上一个文件目录， .log就是存储数据文件的，默认情况下一个&lt;/span&gt;&lt;strong&gt;&lt;span&gt;.log日志文件大小为1G。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果要保证这1500个 partition 的最新的 .log 文件的数据都在内存中，这样性能当然是最好的，需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt; 1500  * 1G = 1500 G&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;内存，但是我们没有必要所有的数据都驻留到内存中，我们只保证&lt;/span&gt;&lt;strong&gt;&lt;span&gt;25%左右&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;的数据在内存中就可以了，这样大概需要 &lt;/span&gt;&lt;strong&gt;&lt;span&gt;1500 * 250M = 1500 * 0.25G = 375G内存，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;通过&lt;/span&gt;&lt;strong&gt;&lt;span&gt;第二步&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;分析结果，我们总共需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;7台物理机，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;这样的话&lt;/span&gt;&lt;strong&gt;&lt;span&gt;每台服务器只需要约54G内存，外加上面分析的JVM的10G，总共需要64G内存。&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;还要保留一部分内存给操作系统使用，故我们选择&lt;/span&gt;&lt;strong&gt;&lt;span&gt;128G内存的服务器&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;是非常够用了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、场景总结&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;要搞定&lt;/span&gt;&lt;strong&gt;&lt;span&gt;10亿+&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;请求，需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;7台物理机，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;每台物理机内存选择&lt;/span&gt;&lt;strong&gt;&lt;span&gt;128G内存&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;为主，这样内存会比较充裕。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86122&quot; data-custom=&quot;#138bde&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;五、kafka容量评估之CPU压力&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1、CPU Core分析&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;我们评估需要多少个 CPU Core，主要是看 Kafka 进程里会有多少个线程，&lt;/span&gt;&lt;strong&gt;&lt;span&gt;线程主要是依托多核CPU来执行的，如果线程特别多，但是 CPU核很少，就会导致CPU负载很高，会导致整体工作线程执行的效率不高,性能也不会好。&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;所以我们要保证CPU Core的充足，来保障系统的稳定性和性能最优。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、Kafka 网络架构及线程数计算&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;270&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.4759259259259259&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAwn1ctLCrKzUtmJzSjlorE5fQQ7HwbbtNL7BY0LulSPAFsdJZx0fA4A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们评估下 Kafka 服务器启动后会有多少线程在跑，其实这部分内容跟kafka超高并发网络架构密切相关，&lt;/span&gt;&lt;strong&gt;&lt;span&gt;上图是Kafka 超高并发网络架构图，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;从图中我们可以分析得出：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;330&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.58&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAI7rYrRfEicH2CMyY06abdEEiczuGQyKdJJ0YFPApeUJOnlHeS0e6WicCg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;850&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;除了上图所列的还有其他一些线程，所以估算下来，一个 kafka 服务启动后，会&lt;/span&gt;&lt;strong&gt;&lt;span&gt;有100多个线程在跑。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;158&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.27744982290436837&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAypDCSGsIl6jrKCFDExfWSJE1MztMViaOEibsIzjad5Ry3icf5scNOTmsA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;847&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、场景总结&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;要搞定&lt;/span&gt;&lt;strong&gt;&lt;span&gt;10亿+&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;请求，需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;7台物理机，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;每台物理机内存选择&lt;/span&gt;&lt;strong&gt;&lt;span&gt;128G内存&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;为主，需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;16个cpu core(32个性能更好)。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86122&quot; data-custom=&quot;#138bde&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;六、kafka容量评估之网卡&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1、网卡对比分析&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;260&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.4581861012956419&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAf8PFFRwLLLvtFG7XPhvX85wCP9icn28icHYJ9bxTBOGwdIv3t3B5icuJQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;849&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过上图分析可以得出&lt;/span&gt;&lt;strong&gt;&lt;span&gt;千兆网卡和万兆网卡的区别最大之处在于网口的传输速率的不同，千兆网卡的传输速率是1000Mbps，万兆网卡的则是10Gbps万兆网卡是千兆网卡传输速率的10倍。&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;性能上讲，万兆网卡的性能肯定比千兆网卡要好。万兆网卡现在主流的是10G的，发展趋势正逐步面向40G、100G网卡。但还是要根据使用环境和预算来选择投入，毕竟千兆网卡和万兆网卡的性价比区间还是挺大的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、网卡选择分析&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;根据&lt;/span&gt;&lt;strong&gt;&lt;span&gt;第一二步&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;分析结果，高峰期的时候，每秒会有大约&lt;/span&gt;&lt;strong&gt;&lt;span&gt;6万&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;请求涌入，即每台机器&lt;/span&gt;&lt;strong&gt;&lt;span&gt;约1万&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;请求涌入&lt;/span&gt;&lt;strong&gt;&lt;span&gt;(60000 / 7)，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;每秒要接收的数据大小为: &lt;/span&gt;&lt;strong&gt;&lt;span&gt;10000 * 20 kb = 184 M/s，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;外加上数据副本的同步网络请求，总共需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt; 184 * 3 = 552 M/s。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;334&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.5889929742388759&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAT1yNWsETTXWBqka1Axn37ucgR710mCbXgUgXkTO4DFfR0jpmYYXbtA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;854&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;一般情况下，网卡带宽是不会达到上限的，对于千兆网卡，我们能用的基本在700M左右，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;通过上面计算结果，千兆网卡基本可以满足，万兆网卡更好。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3、场景总结&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;要搞定&lt;/span&gt;&lt;strong&gt;&lt;span&gt;10亿+&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;请求，需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;7台物理机，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;每台物理机内存选择&lt;/span&gt;&lt;strong&gt;&lt;span&gt;128G内存&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;为主，需要&lt;/span&gt;&lt;strong&gt;&lt;span&gt;16个cpu core(32个性能更好)，千兆网卡基本可以满足，万兆网卡更好。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86122&quot; data-custom=&quot;#138bde&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;7、kafka容量评估之核心参数&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;481&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.8466981132075472&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MA5Qgfvry2FuOZxmBmRrqQzobspsFQsIJt0dUrQwsltuw8AC7Wicg8brw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;848&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;508&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.8937426210153483&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAt3uAjQYTVcSxnvScU0spX11ia8DOhibR3uSrylmicGIOYoe58SK5Bicia3Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;847&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.3069657615112161&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAw3borzCq50cZicEiaPfhib8W2Y79kTKcevyBVckZmkdIqibPzibz3ktNzAQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;847&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86122&quot; data-custom=&quot;#138bde&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;8、kafka容量评估之集群规划&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1、集群部署规划&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;这里我采用五台服务器来构建 Kafka 集群，集群依赖 ZooKeeper，所以在部署 Kafka 之前，需要部署好 ZooKeeper 集群。这里我将 Kafka 和 ZooKeeper 部署在了一起，Kafka 集群节点操作系统仍然采用 Centos 7.7 版本，各个主机角色和软件版本如下表所示：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;302&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.5324675324675324&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MA15taS2wkMzLv9synicGbO72dib7barNeq7fvXGzjiaBVg8OtKhol3IvKA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;847&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这里需要注意：&lt;/span&gt;&lt;span&gt;Kafka 和 ZooKeeper 的版本，默认 Kafka2.11 版本自带的 ZooKeeper 依赖 jar 包版本为 3.5.7，因此 ZooKeeper 的版本至少在 3.5.7 及以上。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、下载与安装&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;Kafka 需要安装 Java 运行环境，你可以点击Kafka官网&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;(https://kafka.apache.org/downloads)获取 Kafka 安装包，推荐的版本是 kafka_2.11-2.4.1.tgz。将下载下来的安装包直接解压到一个路径下即可完成 Kafka 的安装，这里统一将 Kafka 安装到 /usr/local 目录下，我以在 kafka-zk1 主机为例，基本操作过程如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;[&lt;span class=&quot;code-snippet__meta&quot;&gt;root@kafkazk1~&lt;/span&gt;]&lt;span class=&quot;code-snippet__meta&quot;&gt;# tar -zxvf kafka_2.11-2.4.1.tgz  -C /usr/local&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;[&lt;span class=&quot;code-snippet__meta&quot;&gt;root@kafkazk1~&lt;/span&gt;]&lt;span class=&quot;code-snippet__meta&quot;&gt;# mv /usr/local/kafka_2.11-2.4.1  /usr/local/kafka&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这里我创建了一个 Kafka 用户，用来管理和维护 Kafka 集群，后面所有对 Kafka 的操作都通过此用户来完成，执行如下操作进行创建用户和授权：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;[&lt;span class=&quot;code-snippet__meta&quot;&gt;root@kafkazk1~&lt;/span&gt;]&lt;span class=&quot;code-snippet__meta&quot;&gt;# useradd kafka&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;[&lt;span class=&quot;code-snippet__meta&quot;&gt;root@kafkazk1~&lt;/span&gt;]&lt;span class=&quot;code-snippet__meta&quot;&gt;# chown -R kafka:kafka /usr/local/kafka&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在 kafka-zk1 节点安装完成 Kafka 后，先进行配置 Kafka，等 Kafka 配置完成，再统一打包复制到其他两个节点上。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cpp&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;broker.id=&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;listeners=PLAINTEXT:&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__built_in&quot;&gt;log&lt;/span&gt;.dirs=/usr/local/kafka/logs&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;num.partitions=&lt;span class=&quot;code-snippet__number&quot;&gt;6&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__built_in&quot;&gt;log&lt;/span&gt;.retention.hours=&lt;span class=&quot;code-snippet__number&quot;&gt;72&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__built_in&quot;&gt;log&lt;/span&gt;.segment.bytes=&lt;span class=&quot;code-snippet__number&quot;&gt;1073741824&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;zookeeper.connect=&lt;span class=&quot;code-snippet__number&quot;&gt;172.16&lt;/span&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;.213&lt;/span&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;.31&lt;/span&gt;:&lt;span class=&quot;code-snippet__number&quot;&gt;2181&lt;/span&gt;,&lt;span class=&quot;code-snippet__number&quot;&gt;172.16&lt;/span&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;.213&lt;/span&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;.32&lt;/span&gt;:&lt;span class=&quot;code-snippet__number&quot;&gt;2181&lt;/span&gt;,&lt;span class=&quot;code-snippet__number&quot;&gt;172.16&lt;/span&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;.213&lt;/span&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;.33&lt;/span&gt;:&lt;span class=&quot;code-snippet__number&quot;&gt;2181&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;auto&lt;/span&gt;.create.topics.enable=&lt;span class=&quot;code-snippet__literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;delete&lt;/span&gt;.topic.enable=&lt;span class=&quot;code-snippet__literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;num.network.threads=&lt;span class=&quot;code-snippet__number&quot;&gt;9&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;num.io.threads=&lt;span class=&quot;code-snippet__number&quot;&gt;32&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;message.max.bytes=&lt;span class=&quot;code-snippet__number&quot;&gt;10485760&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__built_in&quot;&gt;log&lt;/span&gt;.flush.interval.message=&lt;span class=&quot;code-snippet__number&quot;&gt;10000&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__built_in&quot;&gt;log&lt;/span&gt;.flush.interval.ms=&lt;span class=&quot;code-snippet__number&quot;&gt;1000&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;replica.lag.time.max.ms=&lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Kafka 配置文件修改完成后，接着打包 Kafka 安装程序，将程序复制到其他4个节点，然后进行解压即可。&lt;/span&gt;&lt;span&gt;注意，在其他4个节点上，broker.id 务必要修改，Kafka 集群中 broker.id 不能有相同的(唯一的)。&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86152&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span data-bgopacity=&quot;40%&quot;/&gt; &lt;span data-bgopacity=&quot;25%&quot;/&gt; &lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3、启动集群&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;五个节点的 Kafka 配置完成后，就可以启动了，但在启动 Kafka 集群前，需要确保 ZooKeeper 集群已经正常启动。接着，依次在 Kafka 各个节点上执行如下命令即可：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;[&lt;span class=&quot;code-snippet__meta&quot;&gt;root@kafkazk1~&lt;/span&gt;]&lt;span class=&quot;code-snippet__meta&quot;&gt;# cd /usr/local/kafka&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;[&lt;span class=&quot;code-snippet__meta&quot;&gt;root@kafkazk1 kafka&lt;/span&gt;]&lt;span class=&quot;code-snippet__meta&quot;&gt;# nohup bin/kafka-server-start.sh  config/server.properties &amp;amp;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;[&lt;span class=&quot;code-snippet__meta&quot;&gt;root@kafkazk1 kafka&lt;/span&gt;]&lt;span class=&quot;code-snippet__meta&quot;&gt;# jps&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;21840&lt;/span&gt; Kafka&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;15593&lt;/span&gt; Jps&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;15789&lt;/span&gt; QuorumPeerMain&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这里将 Kafka 放到后台(deamon)运行，启动后，会在启动 Kafka 的当前目录下生成一个 nohup.out 文件，可通过此文件查看 Kafka 的启动和运行状态。&lt;/span&gt;&lt;span&gt;通过 jps 指令，可以看到有个 Kafka 标识，这是 Kafka 进程成功启动的标志。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86122&quot; data-custom=&quot;#138bde&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;九、总结&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;整个场景总结：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;要搞定&lt;/span&gt;&lt;strong&gt;&lt;span&gt;10亿+&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;请求，经过上面深度剖析评估后需要以下资源：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;316&quot; data-backw=&quot;568&quot; data-ratio=&quot;0.5562130177514792&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ufWcjcomw8Zicoe8pJRtKkBFeL2ib8P4MAqc0nVdP3a72E0OMibrNFu2nqc0Uy25NE6ZFxTwXWzUHtNCXYPl6wy0w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;845&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;作者丨王江华&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;来源丨公众号：华仔聊技术（ID：gh_97b8de4b5b34）&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;dbaplus社群欢迎广大技术人员投稿，投稿邮箱：&lt;/span&gt;&lt;span&gt;editor@dbaplus.cn&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>e80af263a75324a20af475ac622f9fd1</guid>
<title>Go 项目使用 Makefile</title>
<link>https://toutiao.io/k/dagx8gt</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;大家好，我是 frank。&lt;br/&gt;欢迎大家点击标题下方&lt;span&gt;蓝色&lt;/span&gt;文字「Golang 语言开发栈」关注公众号。&lt;br/&gt;&lt;strong&gt;设为星标&lt;/strong&gt;，第一时间接收推送文章。&lt;br/&gt;&lt;strong&gt;文末扫码&lt;/strong&gt;，加群一起学 Golang 语言。&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;01 &lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;介绍&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Go 提供一个名为&lt;code&gt;go&lt;/code&gt;的命令，该命令可自动下载、构建、安装和测试 Go 包和命令。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Go 提供&lt;code&gt;go&lt;/code&gt;命令，官方的目的是为了不需要编写 Makefile，而是能够仅使用 Go 源代码本身中的信息来构建 Go 代码。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;但是，我们在 Go 项目中也不需要完全摒弃使用 make 和 Makefile，可以使用 Makefile 的“伪目标”，简化使用 &lt;code&gt;go&lt;/code&gt; 命令的复杂性，规范团队使用 &lt;code&gt;go&lt;/code&gt; 命令的方式，提升个人或团队的生产力。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;02 &lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;make 和 Makefile&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;make 命令行工具可以自动判断是否需要重新编译程序，实际上 make 不仅限于程序，我们可以使用它来描述任何任务，只要其他文件发生更改，某些文件就必须从其他文件自动更新。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在使用 make 命令行工具之前，我们需要编写一个名为 Makefile 的文件，该文件描述程序中文件之前的关系，并提供用于更新每个文件的命令。也就是说 Makefile 决定 make 做什么。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;关于 Makefile 的介绍，感兴趣的读者朋友，可以查阅相关资料深入学习，本文仅介绍 Makefile 的规则（格式），如下所示：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;target ... : prerequisites ...&lt;br/&gt;&amp;lt;Tab&amp;gt;command&lt;br/&gt;    ...&lt;br/&gt;    ...&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;或&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;target ... : prerequisites ...;command&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;阅读上面示例代码，target 是目标文件，多个目标文件之间使用空格分隔，一般只有一个目标文件，也可以是“伪目标”（某个操作的名字）；prerequisites 是先决条件；command 是“命令”，可以在 prerequisites 后面，使用分号分隔，也可以另起一行，但是必须以&lt;code&gt;&amp;lt;Tab&amp;gt;&lt;/code&gt;开头，如果想要使用其他键，可以使用内置变量 .RECIPEPREFIX 声明。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;target 目标是必须的，不可省略。&lt;span&gt;prerequisites 和 command 是可选的，但是二者必须存在其一。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;03 &lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Go 项目使用 Makefile&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 Go 项目中使用 Makefile，一般我们只会使用“伪目标”，我们使用 &lt;code&gt;go build&lt;/code&gt; 构建可执行文件为例，介绍 Go 项目怎么使用 Makefile。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;示例代码：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;build:&lt;br/&gt;  go build -o blog&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;阅读上面示例代码，我们编写一个简单的 Makefile，定义一个“伪目标” build，命令是 &lt;code&gt;go build -o blog&lt;/code&gt;，构建名为 blog 的可执行文件。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;使用 make 命令行工具，运行“伪目标”build。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;make build&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;运行 &lt;code&gt;make build&lt;/code&gt;，终端打印出 Makefile 中“伪目标” build 的命令。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;go build -o blog&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果我们不想打印出执行的命令，可以在命令前面加上 &lt;code&gt;@&lt;/code&gt; 符号。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在实际项目开发时，我们可能需要构建多个操作系统的可执行文件，我们再编写一个 Makefile，新增三个“伪目标”，分别是windows、linux 和 darwin。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;示例代码：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;APP=blog&lt;br/&gt;&lt;br/&gt;build:&lt;br/&gt;        @go build -o ${APP}&lt;br/&gt;windows:&lt;br/&gt;        @GOOS=windows go build -o ${APP}-windows&lt;br/&gt;linux:&lt;br/&gt;        @GOOS=linux go build -o ${APP}-linux&lt;br/&gt;darwin:&lt;br/&gt;        @GOOS=darwin go build -o ${APP}-darwin&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;阅读上面示例代码，我们定义一个自定义变量 &lt;code&gt;APP&lt;/code&gt;，在命令行中使用 &lt;code&gt;$(APP)&lt;/code&gt; 调用变量，并且 GOOS 指定操作系统，使用&lt;code&gt;@&lt;/code&gt;开头，不再打印执行命令。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;运行 &lt;code&gt;make windows&lt;/code&gt;、&lt;code&gt;make linux&lt;/code&gt; 和 &lt;code&gt;make darwin&lt;/code&gt;，分别构建 windows、linux 和 drawin 操作系统的可执行文件。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;运行结果如下：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;.&lt;br/&gt;├── Makefile&lt;br/&gt;├── blog&lt;br/&gt;├── blog-darwin&lt;br/&gt;├── blog-linux&lt;br/&gt;├── blog-windows&lt;br/&gt;├── go.mod&lt;br/&gt;└── main.go&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;需要注意的是，如果有文件名和“伪目标”同名，那么该“伪目标”无法使用 make 命令执行指定的 command。因为 make 发现与“伪目标”同名的文件已存在，将不会再重新构建，所以就不会运行指定的 command，为了避免出现该问题，可以使用内置目标名&lt;code&gt;.PHONY&lt;/code&gt;声明这些“伪目标”名是“伪目标”，而不是与“伪目标”同名的文件。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;完整 Makefile 文件：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;APP=blog&lt;br/&gt;&lt;br/&gt;.PHONY: help all build windows linux darwin&lt;br/&gt;&lt;br/&gt;help:&lt;br/&gt;        @echo &quot;usage: make &amp;lt;option&amp;gt;&quot;&lt;br/&gt;        @echo &quot;options and effects:&quot;&lt;br/&gt;        @echo &quot;    help   : Show help&quot;&lt;br/&gt;        @echo &quot;    all    : Build multiple binary of this project&quot;&lt;br/&gt;        @echo &quot;    build  : Build the binary of this project for current platform&quot;&lt;br/&gt;        @echo &quot;    windows: Build the windows binary of this project&quot;&lt;br/&gt;        @echo &quot;    linux  : Build the linux binary of this project&quot;&lt;br/&gt;        @echo &quot;    darwin : Build the darwin binary of this project&quot;&lt;br/&gt;all:build windows linux darwin&lt;br/&gt;build:&lt;br/&gt;        @go build -o ${APP}&lt;br/&gt;windows:&lt;br/&gt;        @GOOS=windows go build -o ${APP}-windows&lt;br/&gt;linux:&lt;br/&gt;        @GOOS=linux go build -o ${APP}-linux&lt;br/&gt;darwin:&lt;br/&gt;        @GOOS=darwin go build -o ${APP}-darwin&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;阅读上面示例代码，我们可以看到 Makefile 中第二个“伪目标” all，该目标只有 4 个先决条件，没有任何命令。执行 &lt;code&gt;make all&lt;/code&gt; 命令，可以批量执行多个“伪目标”。该命令等同于以下命令：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;make build&lt;br/&gt;make windows&lt;br/&gt;make linux&lt;br/&gt;make darwin&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;细心的读者朋友们阅读到此处，心中可能会有一个疑问，想要知道 Makefile 中包含哪些“目标”，必须查看 Makefile 文件吗？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;不必如此，我们可以在 Makefile 中编写一个“伪目标” help，用于描述 Makefile 中的“伪目标”列表和使用示例等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Make 命令运行时，如果不指定“目标”，默认执行 Makefile 文件的第一个“目标”。一般将 &lt;code&gt;help&lt;/code&gt; 作为 Makefile 的第一个“伪目标”，我们可以执行 &lt;code&gt;make&lt;/code&gt; 或 &lt;code&gt;make help&lt;/code&gt; 命令，输出使用方法。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;04 &lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;总结&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;本文我们介绍 make 和 Makefile 的使用方法，并且通过 &lt;code&gt;go&lt;/code&gt; 命令中的 &lt;code&gt;go build&lt;/code&gt; 介绍 Go 项目怎么使用 Makefile，大家可以举一反三，编写自己的 Go 项目 Makefile。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;推荐阅读：&lt;/strong&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot; list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA4Mjc1NTMyOQ==&amp;amp;mid=2247486020&amp;amp;idx=1&amp;amp;sn=0782a4791d0e5262ad46ecd7d5a1c198&amp;amp;chksm=9f81a02aa8f6293c9cf5db8f8945433dde8ec3c264a94877a7af7c23a8e327a227473ea2c42d&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Go 微服务工具包 Go kit 怎么集成 gRPC？&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Go 微服务工具包 Go kit 怎么集成 gRPC？&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA4Mjc1NTMyOQ==&amp;amp;mid=2247485896&amp;amp;idx=1&amp;amp;sn=7f13caa0a4a0efc9aa52f91449f1eee7&amp;amp;chksm=9f81a3a6a8f62ab0e4476eab641b65fc0376f817c7393dabdefeb239fcf8fb879bec353df558&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Golang 语言的多种变量声明方式和使用场景&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Golang 语言的多种变量声明方式和使用场景&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA4Mjc1NTMyOQ==&amp;amp;mid=2247485871&amp;amp;idx=1&amp;amp;sn=5e9eac1cce46b90fdab7be5ea14be9ef&amp;amp;chksm=9f81a3c1a8f62ad7f00ae7659154d87c2790097944d8606cf440aa5cd58e29c9b13cedad2099&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Golang 语言 vendor 在 GOPATH 和 Modules 中的区别&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Golang 语言 vendor 在 GOPATH 和 Modules 中的区别&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA4Mjc1NTMyOQ==&amp;amp;mid=2247484890&amp;amp;idx=1&amp;amp;sn=4fd66e7c91e0fb87f1723f14650941e5&amp;amp;chksm=9f81afb4a8f626a2188e082c00a8c81ebf48a8bc0d35f0757527b4cb90390994c8714775efb8&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Golang 语言 method 接收者使用值类型和指针类型的区别&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Golang 语言 method 接收者使用值类型和指针类型的区别&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA4Mjc1NTMyOQ==&amp;amp;mid=2247484749&amp;amp;idx=1&amp;amp;sn=6e5455fb53756f08c32940e476138753&amp;amp;chksm=9f81af23a8f626351263aaa520929fda1afd086bd7d708d2c6f7248880b0c764fd8ca3339caa&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Golang 语言中基础同步原语 Mutex 和 RWMutex 的区别&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Golang 语言中基础同步原语 Mutex 和 RWMutex 的区别&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;参考资料:&lt;/strong&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot; list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;https://en.wikipedia.org/wiki/Make_(software)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;https://www.gnu.org/software/make/manual/make.html#Introduction&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;https://www.gnu.org/software/make/manual/make.html#Phony-Targets&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;https://go.dev/doc/articles/go_command&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;https://tutorialedge.net/golang/makefiles-for-go-developers/&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>3859043f8b30a7e23851e9f8ae86a8bd</guid>
<title>Kafka 万亿级消息实践之资源组流量掉零故障排查分析</title>
<link>https://toutiao.io/k/ueclxtl</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;作者：vivo 互联网服务器团队-Luo Mingbo&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;一、Kafka 集群部署架构&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;为了让读者能与小编在后续的问题分析中有更好的共鸣，小编先与各位读者朋友对齐一下我们 Kafka 集群的部署架构及服务接入 &lt;span&gt;Kafka &lt;/span&gt;集群的流程。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;为了避免超大集群我们按照业务维度将整个每天负责十万亿级消息的 Kafka 集群拆分成了多个 Kafka 集群。拆分粒度太粗会导致单一集群过大，容易由于流量突变、资源隔离、限速等原因导致集群稳定性和可用性受到影响，拆分粒度太细又会因为集群太多不易维护，集群内资源较少应对突发情况的抗风险能力较弱。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;由于 Kafka 数据存储和服务在同一节点上导致集群扩缩容周期较长，遇到突发流量时不能快速实现集群扩容扛住业务压力，因此我们按照业务维度和数据的重要程度及是否影响商业化等维度进行 Kafka 集群的拆分，同时在 Kafka 集群内添加一层逻辑概念“资源组”，资源组内的 Node 节点共享，资源组与资源组之间的节点资源相互隔离，确保故障发生时不会带来雪崩效应。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.44765342960288806&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEa98E3UkHLxWIAWbTDsCUadP8pTLs2fmzaENT0j6tYkCrCQYGK8EDJg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;二、业务接入 Kafka 集群流程&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;.在 Kafka 平台注册业务项目。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;若项目的业务数据较为重要或直接影响商业化，用户需申请创建项目独立的资源组，若项目数据量较小且对数据的完整性要求不那么高可以直接使用集群提供的公共资源组无需申请资源组。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;项目与逻辑概念资源组绑定。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;创建 topic，创建 topic 时使用 Kafka 平台提供的接口进行创建，严格遵守 topic 的分区分布只能在项目绑定的资源组管理的 broker 节点上。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;授权对 topic 的读写操作。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.23465703971119134&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEpUpUicde1ayEAhdjtauQRD2pYREodh3NITiaDD7oRzgLDPMyWLeojqeA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;通过上述的架构部署介绍及接入流程接入介绍相信大家有很多相关知识点都与小编对齐了。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;从部署架构图我们可以清晰的了解到我们这套集群部署在服务端最小的资源隔离单元为“资源组”即在同一个资源组下的多个broker节点之间会有影响，不同的资源组下的broker节点做了逻辑隔离。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;上述的相关知识点对齐后我们将开启我们的故障排查之旅。&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;三、故障情况介绍&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;故障发生时，故障节点所在资源组的多个 topic 流量几乎全部掉零，生产环境我们对 &lt;span&gt;Kafka &lt;/span&gt;集群的磁盘指标READ、WRITE、IO.UTIL、AVG.WAIT、READ.REQ、WRITE.REQ做了告警监控，由于故障发生在凌晨，整个故障的处理过程持续实践较长，导致了业务方长时间的topic流量整体掉零对业务造成不小的影响。&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;四、监控指标介绍&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;4.1 流量监控情况&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;1、故障节点在故障发生时网络空闲率出现短暂的掉零情况，且与生产流量监控指标一致。一旦生产流量上升故障节点的网络空闲率就同步掉零。&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.4187725631768953&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEUBxcSc8nX008QibBoBaUhzrrjzHic9ZpcTTMRiaDPVHugfzSCzMqANiakQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt; 2、Grafana 监控指标中topic生产流量几乎全部掉零。&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.3194945848375451&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEVEJibMiaNS75EtCTUKicJ5QIiaYtKJUCDuN6vV7dT3O1ohsqWZYo2zmHFA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;3、Kafka 平台项目监控中也体现了当前项目的多个topic生产流量指标掉零。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.8267148014440433&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEiaDBkKIAeuawEVvYcUIF44Oyj2DuFtZftQibzyzIapHeLyqxR3OGsT5g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;4.2 磁盘指标监控&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;SDF 盘的IO.UTIL指标达到100%， 80%左右我们认为是服务可稳定运行的指标阈值。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-croporisrc=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEReo6FoBhLNpSMiamDMn4ykNAtNakgyr2T7EA83kypZ5CAyicWLWCrfJQ/640?wx_fmt=png&quot; data-cropx1=&quot;0&quot; data-cropx2=&quot;554&quot; data-cropy1=&quot;6&quot; data-cropy2=&quot;202&quot; data-ratio=&quot;0.35379061371841153&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEfMnrtW00eQDxoKnfSrpsH3g43cbznW2c0SNv3TZiaU1V2ag1l2soFSg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;SDF 盘的AVG.WAIT指标达到分钟级等待，一般400ms左右的延迟我们认为是服务可稳定运行的阈值。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.33574007220216606&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEkIxoVrW0aS9byW958NBBPrzP0WVt1faiazuSezNxFaHoe7Al0ddRemA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;4.3 Kafka 服务端日志及系统日志情况&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;Kafka集群controller节点的日志中出现Input/Output error的错误日志。&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.4403066812705367&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyE9WK25ibXcvnpG86Ywh94q9fiaJLA6BsGicW02HYCBibC34gN8XhCyorG6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;913&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;Linux 系统日志中出现Buffer I/O error 的错误日志&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.3116591928251121&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEp8U9feSPfrN7pkHrql10NowYo30ib7GI4qHTuC4xfKTsuKX7CxicmBMQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;892&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;五、故障猜想及分析&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;从上述的指标监控中很明显的可以得出结论，故障原因是由于 Kafka broker节点的sdf盘磁盘故障导致的，只需在对应的 Kafka broker 节点上将sdf盘踢掉重启即可恢复。那这样就结束了吗 ？of course not。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;对 Kafka 有一定认识的小伙伴应该都知道，创建topic时topic的分区是均匀分布到集群内的不同broker节点上的，即使内部某一台broker节点故障，其他分区应该能正常进行生产消费，如果其他分区能进行正常的生产和消费就不应该出现整个topic的流量几乎全掉零的情况。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.6949458483754513&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEH1oJ43icsGMvOHic1WD0lEmvz1ibopeBict6NpST3PmC5krVqm74kFejicw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;如上图所示，topicA 的三个分区分别分布在 brokerA、brokerB、brokerC三个物理主机节点上。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;生产者producer向TopicA发送消息时会分别与brokerA、brokerB、brokerC三个物理主机节点建立长链接进行消息的发送，此时若 brokerB 节点发生故障无法向外部提供服务时按照我们的猜想应该不会影响到brokerA和brokerC两个节点继续向producer提供接收消息的服务。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;但从监控指标的数据展示来分析当brokerB节点出现故障后topic整体流量掉零与我们的猜想大相径庭。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;既然是出现类似了服务雪崩的效应导致了部分topic的整体流量几乎掉零那么我们在猜想问题发生的原因时就可以往资源隔离的方向去思考，看看在整个过程中还有哪些地方涉及到资源隔离的环节进行猜想。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Kafka 服务端我们按照资源组的方式做了 Kafka broker的逻辑隔离且从Grafana监控上可以看出有一些topic的流量并没有严重掉零的情况，那么我们暂时将分析问题的目光转移到 Kafka  client端，去分析 Kafka  producer的发送消息的过程是否存在有资源隔离地方没有做隔离导致了整体的雪崩效应。&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;六、Kafka 默认分区器的分区规则&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5938628158844765&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyEE7qUsrHjHJ5X6yJINx0g2AuuoKz4dvnibsotsTLSua4CaKWya8A4bpQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;对 Kafka 生产流程流程有一定了解的同学肯定知道，Kafka 作为了大数据生态中海量数据的消息中间件，为了解决海量数据的并发问题 Kafka  在设计之初就采用了客户端缓冲消息，当消息达到一定批量时再进行批量消息的发送。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;通过一次网络IO将批量的数据发送到 &lt;span&gt;Kafka &lt;/span&gt;服务端。关于Kafka producer客户端缓冲区的设计小编后续会单独一个篇幅进行深入的探索，鉴于篇幅问题不再此处进行详细分析。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;基于此处的分析我们对一批消息发送到一个故障节点时的容错方案可以有以下猜想：&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;快速失败，记录故障节点信息。下次进行消息路由时&lt;strong&gt;只路由到健康的节点上&lt;/strong&gt;。快速释放消息缓冲内存。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;快速失败，记录故障节点信息，下次进行消息路由时&lt;strong&gt;当消息路由到故障节点上时直接报错&lt;/strong&gt;，快速释放缓冲区内存。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;等待超时，当次消息等待超时后，下次进行消息路由时&lt;strong&gt;依然会出现路由到故障节点上的情况&lt;/strong&gt;，且每次等待超时时间后才释放占用的资源。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;上述猜想中，如果是&lt;strong&gt;第一种情况&lt;/strong&gt;，那么每次消息路由只路由到健康的节点上不会出现雪崩效应耗尽客户端缓冲区资源的情况；&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;第二种情况&lt;/strong&gt;，当消息路由到故障节点上时，直接拒绝分配缓冲区资源也不会造成雪崩效应；&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;第三种情况&lt;/strong&gt;，每次需要在一个或多个超时时间后才能将故障节点所占用的客户端缓冲区资源释放，在海量消息发送的场景下一个超时时间周期内故障节点上的消息足以将客户端缓冲区资源耗尽，导致其他可用分区无法分配客户端缓冲区资源导致出现雪崩效应。&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;带着上述的猜想打开kafka client producer的源代码分析下defaultPartitioner的分区规则得到如下的分配逻辑：&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;发送消息时是否指定了分区，若指定了分区那消息就直接发往该分区无需重新路由分区。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;消息是否指定了key，若消息指定了key，使用key的hash值与topic的分区数进行模运算，得出消息路由的分区号（对应第三种猜想）。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;消息未指定分区也未指定key，使用自增变量与topic的可用分区进行模运算，得出消息路由的分区号（对应第一种猜想）。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5974729241877257&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4g5IMGibSxt4ia4WsQ6zQOibzFTdVeRZoyE3njmSs8rkBYF4icZ2b807E404JtlCfVGBMwjXspmrFOVQH0rxicbkCWg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;七、总结&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;从源码中分析出若发送消息的时候指定了key，并使用的是 &lt;span&gt;Kafka &lt;/span&gt;producer默认的分区分配器请款下会出现&lt;span&gt; Kafka&lt;/span&gt; producer 客户端缓冲区资源被耗尽而出现topic所有分区雪崩效应。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;跟业务系统同学了解了他们的发送逻辑确实在消息发送指定了key并使用的是 Kafka producer的默认分区分配器。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;3.问题得到论证。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;八、建议&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;若非必要发送消息时不要指定key，否则可能会出现topic所有分区雪崩效应。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;若确实需要发送消息指定key，建议不要使用Kafka producer默认的分区分配器，因为指定key的情况下使用 &lt;span&gt;Kafka &lt;/span&gt;producer的默认分区分配器会出现雪崩效应。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;九、扩展问题思考&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;为什么 Kafka producer提供的默认分区分配器要单独将指定key的情况采用topic所有分区进行模运算而在未指定key的采用是自增变量和可用分区进行模运算？&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;文章中分析的问题均为客户端缓冲区的粒度是producer实例级别的即一个producer共用一块内存缓冲区是否可以将缓冲区的粒度调整到分区级？&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;关于这系列的问题思考与分析，我们将在后续的文章中讲述，敬请关注。&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;END&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;span title=&quot;&quot; opera-tn-ra-cell=&quot;_$.pages:0.layers:0.comps:73.title1&quot;&gt;&lt;p&gt;猜你喜欢&lt;/p&gt;&lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>9b2225d4e28af6ef795cd0ad8af2e153</guid>
<title>性能调优｜生产环境kafka集群400W/tps为啥就扛不住了？</title>
<link>https://toutiao.io/k/k59acft</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;&lt;span data-raw-text=&quot;点&quot; data-textnode-index=&quot;0&quot; data-index=&quot;0&quot;&gt;&lt;span data-raw-text=&quot;点&quot; data-textnode-index=&quot;0&quot; data-index=&quot;0&quot;&gt;&lt;span data-raw-text=&quot;点&quot; data-textnode-index-1641215183112=&quot;0&quot; data-index-1641215183112=&quot;0&quot;&gt;点&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;击&quot; data-textnode-index=&quot;0&quot; data-index=&quot;1&quot;&gt;&lt;span data-raw-text=&quot;击&quot; data-textnode-index=&quot;1&quot; data-index=&quot;1&quot;&gt;&lt;span data-raw-text=&quot;击&quot; data-textnode-index-1641215183112=&quot;1&quot; data-index-1641215183112=&quot;1&quot;&gt;击&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;上&quot; data-textnode-index=&quot;0&quot; data-index=&quot;2&quot;&gt;&lt;span data-raw-text=&quot;上&quot; data-textnode-index=&quot;2&quot; data-index=&quot;2&quot;&gt;&lt;span data-raw-text=&quot;上&quot; data-textnode-index-1641215183112=&quot;2&quot; data-index-1641215183112=&quot;2&quot;&gt;上&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;方&quot; data-textnode-index=&quot;0&quot; data-index=&quot;3&quot;&gt;&lt;span data-raw-text=&quot;方&quot; data-textnode-index=&quot;3&quot; data-index=&quot;3&quot;&gt;&lt;span data-raw-text=&quot;方&quot; data-textnode-index-1641215183112=&quot;3&quot; data-index-1641215183112=&quot;3&quot;&gt;方&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span data-raw-text=&quot;“&quot; data-textnode-index=&quot;1&quot; data-index=&quot;4&quot;&gt;&lt;span data-raw-text=&quot;“&quot; data-textnode-index=&quot;4&quot; data-index=&quot;4&quot;&gt;&lt;span data-raw-text=&quot;“&quot; data-textnode-index-1641215183112=&quot;4&quot; data-index-1641215183112=&quot;4&quot;&gt;“&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;中&quot; data-textnode-index=&quot;1&quot; data-index=&quot;5&quot;&gt;&lt;span data-raw-text=&quot;中&quot; data-textnode-index=&quot;5&quot; data-index=&quot;5&quot;&gt;&lt;span data-raw-text=&quot;中&quot; data-textnode-index-1641215183112=&quot;5&quot; data-index-1641215183112=&quot;5&quot;&gt;中&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;间&quot; data-textnode-index=&quot;1&quot; data-index=&quot;6&quot;&gt;&lt;span data-raw-text=&quot;间&quot; data-textnode-index=&quot;6&quot; data-index=&quot;6&quot;&gt;&lt;span data-raw-text=&quot;间&quot; data-textnode-index-1641215183112=&quot;6&quot; data-index-1641215183112=&quot;6&quot;&gt;间&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;件&quot; data-textnode-index=&quot;1&quot; data-index=&quot;7&quot;&gt;&lt;span data-raw-text=&quot;件&quot; data-textnode-index=&quot;7&quot; data-index=&quot;7&quot;&gt;&lt;span data-raw-text=&quot;件&quot; data-textnode-index-1641215183112=&quot;7&quot; data-index-1641215183112=&quot;7&quot;&gt;件&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;兴&quot; data-textnode-index=&quot;1&quot; data-index=&quot;8&quot;&gt;&lt;span data-raw-text=&quot;兴&quot; data-textnode-index=&quot;8&quot; data-index=&quot;8&quot;&gt;&lt;span data-raw-text=&quot;兴&quot; data-textnode-index-1641215183112=&quot;8&quot; data-index-1641215183112=&quot;8&quot;&gt;兴&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;趣&quot; data-textnode-index=&quot;1&quot; data-index=&quot;9&quot;&gt;&lt;span data-raw-text=&quot;趣&quot; data-textnode-index=&quot;9&quot; data-index=&quot;9&quot;&gt;&lt;span data-raw-text=&quot;趣&quot; data-textnode-index-1641215183112=&quot;9&quot; data-index-1641215183112=&quot;9&quot;&gt;趣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;圈&quot; data-textnode-index=&quot;1&quot; data-index=&quot;10&quot;&gt;&lt;span data-raw-text=&quot;圈&quot; data-textnode-index=&quot;10&quot; data-index=&quot;10&quot;&gt;&lt;span data-raw-text=&quot;圈&quot; data-textnode-index-1641215183112=&quot;10&quot; data-index-1641215183112=&quot;10&quot;&gt;圈&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;”&quot; data-textnode-index=&quot;1&quot; data-index=&quot;11&quot;&gt;&lt;span data-raw-text=&quot;”&quot; data-textnode-index=&quot;11&quot; data-index=&quot;11&quot;&gt;&lt;span data-raw-text=&quot;”&quot; data-textnode-index-1641215183112=&quot;11&quot; data-index-1641215183112=&quot;11&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;&lt;span data-raw-text=&quot;选&quot; data-textnode-index=&quot;3&quot; data-index=&quot;13&quot;&gt;&lt;span data-raw-text=&quot;选&quot; data-textnode-index=&quot;13&quot; data-index=&quot;13&quot;&gt;&lt;span data-raw-text=&quot;选&quot; data-textnode-index-1641215183112=&quot;13&quot; data-index-1641215183112=&quot;13&quot;&gt;选&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;择&quot; data-textnode-index=&quot;3&quot; data-index=&quot;14&quot;&gt;&lt;span data-raw-text=&quot;择&quot; data-textnode-index=&quot;14&quot; data-index=&quot;14&quot;&gt;&lt;span data-raw-text=&quot;择&quot; data-textnode-index-1641215183112=&quot;14&quot; data-index-1641215183112=&quot;14&quot;&gt;择&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span data-raw-text=&quot;“&quot; data-textnode-index=&quot;4&quot; data-index=&quot;15&quot;&gt;&lt;span data-raw-text=&quot;“&quot; data-textnode-index=&quot;15&quot; data-index=&quot;15&quot;&gt;&lt;span data-raw-text=&quot;“&quot; data-textnode-index-1641215183112=&quot;15&quot; data-index-1641215183112=&quot;15&quot;&gt;“&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;设&quot; data-textnode-index=&quot;4&quot; data-index=&quot;16&quot;&gt;&lt;span data-raw-text=&quot;设&quot; data-textnode-index=&quot;16&quot; data-index=&quot;16&quot;&gt;&lt;span data-raw-text=&quot;设&quot; data-textnode-index-1641215183112=&quot;16&quot; data-index-1641215183112=&quot;16&quot;&gt;设&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;为&quot; data-textnode-index=&quot;4&quot; data-index=&quot;17&quot;&gt;&lt;span data-raw-text=&quot;为&quot; data-textnode-index=&quot;17&quot; data-index=&quot;17&quot;&gt;&lt;span data-raw-text=&quot;为&quot; data-textnode-index-1641215183112=&quot;17&quot; data-index-1641215183112=&quot;17&quot;&gt;为&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;星&quot; data-textnode-index=&quot;4&quot; data-index=&quot;18&quot;&gt;&lt;span data-raw-text=&quot;星&quot; data-textnode-index=&quot;18&quot; data-index=&quot;18&quot;&gt;&lt;span data-raw-text=&quot;星&quot; data-textnode-index-1641215183112=&quot;18&quot; data-index-1641215183112=&quot;18&quot;&gt;星&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;标&quot; data-textnode-index=&quot;4&quot; data-index=&quot;19&quot;&gt;&lt;span data-raw-text=&quot;标&quot; data-textnode-index=&quot;19&quot; data-index=&quot;19&quot;&gt;&lt;span data-raw-text=&quot;标&quot; data-textnode-index-1641215183112=&quot;19&quot; data-index-1641215183112=&quot;19&quot;&gt;标&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;”&quot; data-textnode-index=&quot;4&quot; data-index=&quot;20&quot;&gt;&lt;span data-raw-text=&quot;”&quot; data-textnode-index=&quot;20&quot; data-index=&quot;20&quot;&gt;&lt;span data-raw-text=&quot;”&quot; data-textnode-index-1641215183112=&quot;20&quot; data-index-1641215183112=&quot;20&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;点击下面图片直达文章合集&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzIzNzgyMjYxOQ==&amp;amp;mid=2247486570&amp;amp;idx=1&amp;amp;sn=25afad26c7986aaaf32e0be8de2fc334&amp;amp;chksm=e8c3fb9edfb4728831bd29cbc6b9805baea8b2670401cf54f21f0675c6026811bea511dac811&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;你已选中了添加链接的内容&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;1&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;484&quot; data-fileid=&quot;100004440&quot; data-ratio=&quot;0.56484375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Wkp2azia4QFvb8vlf6yzjyavLTicUhz4yF3LcyauVPlEuhGcMEvpGexLHhK5rvcWMGlpzbZgwKarPicPrncibdZ2Eg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;span&gt;大家好，我是威哥，《RocketMQ技术内幕》作者、RocketMQ社区首席布道师、中通快递基础架构资深架构师，越努力越幸运，唯有坚持不懈，与大家共勉。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;最近公司日志Kafka集群出现了性能瓶颈，单节点还没达到60W/tps时消息发送就出现了很大延迟，甚至最高超过了10s，截图说明如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.26796875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Wkp2azia4QFveQeb5S7ibWOUAffmyiaKhXJU8MHR2nhud5YxzYQIkJl2BK6ibQBRshRZ4X6mZwOF1IsbkbWfDY2CaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;虽说使用的机械磁盘，但这点压力对Kafka来说应该是小菜一碟，这引起了我的警觉，需要对其进行一番诊断了。&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过监控平台观察Kafka集群中相关的监控节点，发现cpu使用率才接近20%左右，磁盘IO等待等指标都并未出现任何异常，那会是什么问题呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通常CPU耗时不大，但性能已经明显下降了，我们优先会去排查kafka节点的线程栈，获取线程栈的方法比较简单，命令为：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;ps -ef | grep kafka // 获取pid&lt;br/&gt;jstack pid &amp;gt; j1.log&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过上述命令我们就可以获取到kafka进程的堆栈信息，通过查看线程名称中包含kafka-request-handler字眼的线程(Kafka中处理请求)，发现了大量的锁等待，具体截图如下所示：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.8453125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Wkp2azia4QFveQeb5S7ibWOUAffmyiaKhXJGO3YzXjMBwFibDhibcM3VBF4eRFUUVcXdibd273zxMaqyd1hiaicOmibQlQw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;并且在jstack文件中发现很多线程都在等待这把锁，截图如下：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.45078125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Wkp2azia4QFveQeb5S7ibWOUAffmyiaKhXJWLy445wDALaI73lAGKbTHGmYfQaicpTyRUonjZmiclZvzM1K904B9TAQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们先根据线程堆栈查看代码，找到对应的源代码如下图所示：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.87734375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Wkp2azia4QFveQeb5S7ibWOUAffmyiaKhXJhmuWm698RPiaicvudA0iaNEahaBbbibW4oq5EaoGboSGjoZRRaSibGCeArQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过阅读源码，这段代码是分区Leader在追加数据时为了保证写入分区时数据的完整性，对分区进行的加锁，即如果对同一个分区收到多个写入请求，则这些请求将串行执行，这个锁时必须的，无法进行优化，但仔细观察线程的调用栈，发现在锁的代码块出现了&lt;strong&gt;GZIPInputstream&lt;/strong&gt;，进行了zip压缩，一个压缩处在锁中，其执行性能注定低下，那在什么时候需要在服务端进行压缩呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;故我们继续看一下LogValidator的validateMessagesAndAssignOffsets方法，最终调用validateMessagesAndAssignOffsetsCompressed方法，部分代码截图如下所示：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.71875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Wkp2azia4QFveQeb5S7ibWOUAffmyiaKhXJLvA14lmxjUciaNX8BAstr7NwZqqso9Sf2fC9ialCXG9DcV1MyU4lm2Dg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这段代码的注释部分详细介绍了kafka在服务端需要进行压缩的4种情况，对其进行翻译，其实就是两种情况：&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1、客户端与服务端端压缩算法不一致&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;2、客户端与服务端端的消息版本格式不一样，包括offset的表示方法、压缩处理方法&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;关于客户端与服务端压缩算法不一致，这个基本不会出现，因为服务端通常可以支持多种压缩算法，会根据客户端的压缩算法进行自动匹配。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;最有可能的就是服务端与客户端端消息协议版本不一致，如果版本不一致，则需要在服务端重新偏移量，如果使用了压缩机制，则需要重新进行解压缩，然后计算位点，再进行压缩存储，性能消耗极大。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;后面排查日志使用端，确实是客户端版本与服务端版本不一致导致，最终需要对客户端进行统一升级。&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;关于Kafka的压缩、日志偏移量，消息存储的分析，请持续关注Kafka专栏，后续会持续更新，敬请期待。&lt;/p&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;span data-raw-text=&quot;最&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2943&quot;&gt;最&lt;/span&gt;&lt;span data-raw-text=&quot;后&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2944&quot;&gt;后&lt;/span&gt;&lt;span data-raw-text=&quot;说&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2945&quot;&gt;说&lt;/span&gt;&lt;span data-raw-text=&quot;一&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2946&quot;&gt;一&lt;/span&gt;&lt;span data-raw-text=&quot;句&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2947&quot;&gt;句&lt;/span&gt;&lt;span data-raw-text=&quot;(&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2948&quot;&gt;(&lt;/span&gt;&lt;span data-raw-text=&quot;求&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2949&quot;&gt;求&lt;/span&gt;&lt;span data-raw-text=&quot;关&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2950&quot;&gt;关&lt;/span&gt;&lt;span data-raw-text=&quot;注&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2951&quot;&gt;注&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2952&quot;&gt;，&lt;/span&gt;&lt;span data-raw-text=&quot;别&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2953&quot;&gt;别&lt;/span&gt;&lt;span data-raw-text=&quot;白&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2954&quot;&gt;白&lt;/span&gt;&lt;span data-raw-text=&quot;嫖&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2955&quot;&gt;嫖&lt;/span&gt;&lt;span data-raw-text=&quot;我&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2956&quot;&gt;我&lt;/span&gt;&lt;span data-raw-text=&quot;)&quot; data-textnode-index-1641215183112=&quot;112&quot; data-index-1641215183112=&quot;2957&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span data-raw-text=&quot;如&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2958&quot;&gt;如&lt;/span&gt;&lt;span data-raw-text=&quot;果&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2959&quot;&gt;果&lt;/span&gt;&lt;span data-raw-text=&quot;这&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2960&quot;&gt;这&lt;/span&gt;&lt;span data-raw-text=&quot;篇&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2961&quot;&gt;篇&lt;/span&gt;&lt;span data-raw-text=&quot;文&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2962&quot;&gt;文&lt;/span&gt;&lt;span data-raw-text=&quot;章&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2963&quot;&gt;章&lt;/span&gt;&lt;span data-raw-text=&quot;对&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2964&quot;&gt;对&lt;/span&gt;&lt;span data-raw-text=&quot;您&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2965&quot;&gt;您&lt;/span&gt;&lt;span data-raw-text=&quot;有&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2966&quot;&gt;有&lt;/span&gt;&lt;span data-raw-text=&quot;所&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2967&quot;&gt;所&lt;/span&gt;&lt;span data-raw-text=&quot;帮&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2968&quot;&gt;帮&lt;/span&gt;&lt;span data-raw-text=&quot;助&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2969&quot;&gt;助&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2970&quot;&gt;，&lt;/span&gt;&lt;span data-raw-text=&quot;或&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2971&quot;&gt;或&lt;/span&gt;&lt;span data-raw-text=&quot;者&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2972&quot;&gt;者&lt;/span&gt;&lt;span data-raw-text=&quot;有&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2973&quot;&gt;有&lt;/span&gt;&lt;span data-raw-text=&quot;所&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2974&quot;&gt;所&lt;/span&gt;&lt;span data-raw-text=&quot;启&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2975&quot;&gt;启&lt;/span&gt;&lt;span data-raw-text=&quot;发&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2976&quot;&gt;发&lt;/span&gt;&lt;span data-raw-text=&quot;的&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2977&quot;&gt;的&lt;/span&gt;&lt;span data-raw-text=&quot;话&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2978&quot;&gt;话&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2979&quot;&gt;，&lt;/span&gt;&lt;span data-raw-text=&quot;帮&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2980&quot;&gt;帮&lt;/span&gt;&lt;span data-raw-text=&quot;忙&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2981&quot;&gt;忙&lt;/span&gt;&lt;span data-raw-text=&quot;扫&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2982&quot;&gt;扫&lt;/span&gt;&lt;span data-raw-text=&quot;描&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2983&quot;&gt;描&lt;/span&gt;&lt;span data-raw-text=&quot;下&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2984&quot;&gt;下&lt;/span&gt;&lt;span data-raw-text=&quot;发&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2985&quot;&gt;发&lt;/span&gt;&lt;span data-raw-text=&quot;二&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2986&quot;&gt;二&lt;/span&gt;&lt;span data-raw-text=&quot;维&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2987&quot;&gt;维&lt;/span&gt;&lt;span data-raw-text=&quot;码&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2988&quot;&gt;码&lt;/span&gt;&lt;span data-raw-text=&quot;关&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2989&quot;&gt;关&lt;/span&gt;&lt;span data-raw-text=&quot;注&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2990&quot;&gt;注&lt;/span&gt;&lt;span data-raw-text=&quot;一&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2991&quot;&gt;一&lt;/span&gt;&lt;span data-raw-text=&quot;下&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2992&quot;&gt;下&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2993&quot;&gt;，&lt;/span&gt;&lt;span data-raw-text=&quot;您&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2994&quot;&gt;您&lt;/span&gt;&lt;span data-raw-text=&quot;的&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2995&quot;&gt;的&lt;/span&gt;&lt;span data-raw-text=&quot;支&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2996&quot;&gt;支&lt;/span&gt;&lt;span data-raw-text=&quot;持&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2997&quot;&gt;持&lt;/span&gt;&lt;span data-raw-text=&quot;是&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2998&quot;&gt;是&lt;/span&gt;&lt;span data-raw-text=&quot;我&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;2999&quot;&gt;我&lt;/span&gt;&lt;span data-raw-text=&quot;坚&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3000&quot;&gt;坚&lt;/span&gt;&lt;span data-raw-text=&quot;持&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3001&quot;&gt;持&lt;/span&gt;&lt;span data-raw-text=&quot;写&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3002&quot;&gt;写&lt;/span&gt;&lt;span data-raw-text=&quot;作&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3003&quot;&gt;作&lt;/span&gt;&lt;span data-raw-text=&quot;最&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3004&quot;&gt;最&lt;/span&gt;&lt;span data-raw-text=&quot;大&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3005&quot;&gt;大&lt;/span&gt;&lt;span data-raw-text=&quot;的&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3006&quot;&gt;的&lt;/span&gt;&lt;span data-raw-text=&quot;动&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3007&quot;&gt;动&lt;/span&gt;&lt;span data-raw-text=&quot;力&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3008&quot;&gt;力&lt;/span&gt;&lt;span data-raw-text=&quot;。&quot; data-textnode-index-1641215183112=&quot;113&quot; data-index-1641215183112=&quot;3009&quot;&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span data-raw-text=&quot;求&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3010&quot;&gt;求&lt;/span&gt;&lt;span data-raw-text=&quot;一&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3011&quot;&gt;一&lt;/span&gt;&lt;span data-raw-text=&quot;键&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3012&quot;&gt;键&lt;/span&gt;&lt;span data-raw-text=&quot;三&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3013&quot;&gt;三&lt;/span&gt;&lt;span data-raw-text=&quot;连&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3014&quot;&gt;连&lt;/span&gt;&lt;span data-raw-text=&quot;：&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3015&quot;&gt;：&lt;/span&gt;&lt;span data-raw-text=&quot;点&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3016&quot;&gt;点&lt;/span&gt;&lt;span data-raw-text=&quot;赞&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3017&quot;&gt;赞&lt;/span&gt;&lt;span data-raw-text=&quot;、&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3018&quot;&gt;、&lt;/span&gt;&lt;span data-raw-text=&quot;转&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3019&quot;&gt;转&lt;/span&gt;&lt;span data-raw-text=&quot;发&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3020&quot;&gt;发&lt;/span&gt;&lt;span data-raw-text=&quot;、&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3021&quot;&gt;、&lt;/span&gt;&lt;span data-raw-text=&quot;在&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3022&quot;&gt;在&lt;/span&gt;&lt;span data-raw-text=&quot;看&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3023&quot;&gt;看&lt;/span&gt;&lt;span data-raw-text=&quot;。&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3024&quot;&gt;。&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzIzNzgyMjYxOQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/Wkp2azia4QFvs5UnzjhzrS6h29QXbfK4I0GLibNP4Qlpt1ovSdmwfsoY7D4JYUZzkACtqe3wrKh6icG7oHUTMibJbA/0?wx_fmt=png&quot; data-nickname=&quot;中间件兴趣圈&quot; data-alias=&quot;dingwpmz_zjj&quot; data-signature=&quot;《RocketMQ技术内幕》作者维护，主打成体系剖析JAVA主流中间件架构与设计原理，为构建完备的互联网分布式架构体系而努力，助力突破职场瓶颈。&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span data-raw-text=&quot;关&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3025&quot;&gt;关&lt;/span&gt;&lt;span data-raw-text=&quot;注&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3026&quot;&gt;注&lt;/span&gt;&lt;span data-raw-text=&quot;公&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3027&quot;&gt;公&lt;/span&gt;&lt;span data-raw-text=&quot;众&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3028&quot;&gt;众&lt;/span&gt;&lt;span data-raw-text=&quot;号&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3029&quot;&gt;号&lt;/span&gt;&lt;span data-raw-text=&quot;：&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3030&quot;&gt;：&lt;/span&gt;&lt;span data-raw-text=&quot;「&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3031&quot;&gt;「&lt;/span&gt;&lt;span data-raw-text=&quot;中&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3032&quot;&gt;中&lt;/span&gt;&lt;span data-raw-text=&quot;间&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3033&quot;&gt;间&lt;/span&gt;&lt;span data-raw-text=&quot;件&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3034&quot;&gt;件&lt;/span&gt;&lt;span data-raw-text=&quot;兴&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3035&quot;&gt;兴&lt;/span&gt;&lt;span data-raw-text=&quot;趣&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3036&quot;&gt;趣&lt;/span&gt;&lt;span data-raw-text=&quot;圈&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3037&quot;&gt;圈&lt;/span&gt;&lt;span data-raw-text=&quot;」&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3038&quot;&gt;」&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3039&quot;&gt;，&lt;/span&gt;&lt;span data-raw-text=&quot;在&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3040&quot;&gt;在&lt;/span&gt;&lt;span data-raw-text=&quot;公&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3041&quot;&gt;公&lt;/span&gt;&lt;span data-raw-text=&quot;众&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3042&quot;&gt;众&lt;/span&gt;&lt;span data-raw-text=&quot;号&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3043&quot;&gt;号&lt;/span&gt;&lt;span data-raw-text=&quot;中&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3044&quot;&gt;中&lt;/span&gt;&lt;span data-raw-text=&quot;回&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3045&quot;&gt;回&lt;/span&gt;&lt;span data-raw-text=&quot;复&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3046&quot;&gt;复&lt;/span&gt;&lt;span data-raw-text=&quot;：&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3047&quot;&gt;：&lt;/span&gt;&lt;span data-raw-text=&quot;「&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3048&quot;&gt;「&lt;/span&gt;&lt;span data-raw-text=&quot;P&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3049&quot;&gt;P&lt;/span&gt;&lt;span data-raw-text=&quot;D&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3050&quot;&gt;D&lt;/span&gt;&lt;span data-raw-text=&quot;F&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3051&quot;&gt;F&lt;/span&gt;&lt;span data-raw-text=&quot;」&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3052&quot;&gt;」&lt;/span&gt;&lt;span data-raw-text=&quot;可&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3053&quot;&gt;可&lt;/span&gt;&lt;span data-raw-text=&quot;获&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3054&quot;&gt;获&lt;/span&gt;&lt;span data-raw-text=&quot;取&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3055&quot;&gt;取&lt;/span&gt;&lt;span data-raw-text=&quot;大&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3056&quot;&gt;大&lt;/span&gt;&lt;span data-raw-text=&quot;量&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3057&quot;&gt;量&lt;/span&gt;&lt;span data-raw-text=&quot;学&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3058&quot;&gt;学&lt;/span&gt;&lt;span data-raw-text=&quot;习&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3059&quot;&gt;习&lt;/span&gt;&lt;span data-raw-text=&quot;资&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3060&quot;&gt;资&lt;/span&gt;&lt;span data-raw-text=&quot;料&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3061&quot;&gt;料&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3062&quot;&gt;，&lt;/span&gt;&lt;span data-raw-text=&quot;回&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3063&quot;&gt;回&lt;/span&gt;&lt;span data-raw-text=&quot;复&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3064&quot;&gt;复&lt;/span&gt;&lt;span data-raw-text=&quot;「&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3065&quot;&gt;「&lt;/span&gt;&lt;span data-raw-text=&quot;专&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3066&quot;&gt;专&lt;/span&gt;&lt;span data-raw-text=&quot;栏&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3067&quot;&gt;栏&lt;/span&gt;&lt;span data-raw-text=&quot;」&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3068&quot;&gt;」&lt;/span&gt;&lt;span data-raw-text=&quot;可&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3069&quot;&gt;可&lt;/span&gt;&lt;span data-raw-text=&quot;获&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3070&quot;&gt;获&lt;/span&gt;&lt;span data-raw-text=&quot;取&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3071&quot;&gt;取&lt;/span&gt;&lt;span data-raw-text=&quot;1&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3072&quot;&gt;1&lt;/span&gt;&lt;span data-raw-text=&quot;5&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3073&quot;&gt;5&lt;/span&gt;&lt;span data-raw-text=&quot;个&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3074&quot;&gt;个&lt;/span&gt;&lt;span data-raw-text=&quot;主&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3075&quot;&gt;主&lt;/span&gt;&lt;span data-raw-text=&quot;流&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3076&quot;&gt;流&lt;/span&gt;&lt;span data-raw-text=&quot;J&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3077&quot;&gt;J&lt;/span&gt;&lt;span data-raw-text=&quot;a&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3078&quot;&gt;a&lt;/span&gt;&lt;span data-raw-text=&quot;v&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3079&quot;&gt;v&lt;/span&gt;&lt;span data-raw-text=&quot;a&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3080&quot;&gt;a&lt;/span&gt;&lt;span data-raw-text=&quot;中&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3081&quot;&gt;中&lt;/span&gt;&lt;span data-raw-text=&quot;间&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3082&quot;&gt;间&lt;/span&gt;&lt;span data-raw-text=&quot;件&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3083&quot;&gt;件&lt;/span&gt;&lt;span data-raw-text=&quot;源&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3084&quot;&gt;源&lt;/span&gt;&lt;span data-raw-text=&quot;码&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3085&quot;&gt;码&lt;/span&gt;&lt;span data-raw-text=&quot;分&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3086&quot;&gt;分&lt;/span&gt;&lt;span data-raw-text=&quot;析&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3087&quot;&gt;析&lt;/span&gt;&lt;span data-raw-text=&quot;专&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3088&quot;&gt;专&lt;/span&gt;&lt;span data-raw-text=&quot;栏&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3089&quot;&gt;栏&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3090&quot;&gt;，&lt;/span&gt;&lt;span data-raw-text=&quot;另&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3091&quot;&gt;另&lt;/span&gt;&lt;span data-raw-text=&quot;外&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3092&quot;&gt;外&lt;/span&gt;&lt;span data-raw-text=&quot;回&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3093&quot;&gt;回&lt;/span&gt;&lt;span data-raw-text=&quot;复&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3094&quot;&gt;复&lt;/span&gt;&lt;span data-raw-text=&quot;：&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3095&quot;&gt;：&lt;/span&gt;&lt;span data-raw-text=&quot;加&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3096&quot;&gt;加&lt;/span&gt;&lt;span data-raw-text=&quot;群&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3097&quot;&gt;群&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3098&quot;&gt;，&lt;/span&gt;&lt;span data-raw-text=&quot;可&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3099&quot;&gt;可&lt;/span&gt;&lt;span data-raw-text=&quot;以&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3100&quot;&gt;以&lt;/span&gt;&lt;span data-raw-text=&quot;跟&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3101&quot;&gt;跟&lt;/span&gt;&lt;span data-raw-text=&quot;很&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3102&quot;&gt;很&lt;/span&gt;&lt;span data-raw-text=&quot;多&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3103&quot;&gt;多&lt;/span&gt;&lt;span data-raw-text=&quot;B&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3104&quot;&gt;B&lt;/span&gt;&lt;span data-raw-text=&quot;A&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3105&quot;&gt;A&lt;/span&gt;&lt;span data-raw-text=&quot;T&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3106&quot;&gt;T&lt;/span&gt;&lt;span data-raw-text=&quot;大&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3107&quot;&gt;大&lt;/span&gt;&lt;span data-raw-text=&quot;厂&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3108&quot;&gt;厂&lt;/span&gt;&lt;span data-raw-text=&quot;的&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3109&quot;&gt;的&lt;/span&gt;&lt;span data-raw-text=&quot;前&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3110&quot;&gt;前&lt;/span&gt;&lt;span data-raw-text=&quot;辈&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3111&quot;&gt;辈&lt;/span&gt;&lt;span data-raw-text=&quot;交&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3112&quot;&gt;交&lt;/span&gt;&lt;span data-raw-text=&quot;流&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3113&quot;&gt;流&lt;/span&gt;&lt;span data-raw-text=&quot;和&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3114&quot;&gt;和&lt;/span&gt;&lt;span data-raw-text=&quot;学&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3115&quot;&gt;学&lt;/span&gt;&lt;span data-raw-text=&quot;习&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3116&quot;&gt;习&lt;/span&gt;&lt;span data-raw-text=&quot;。&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3117&quot;&gt;。&lt;/span&gt;&lt;span data-raw-text=&quot;。&quot; data-textnode-index-1641215183112=&quot;114&quot; data-index-1641215183112=&quot;3024&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span data-raw-text=&quot;。&quot; data-textnode-index-1641215183112=&quot;115&quot; data-index-1641215183112=&quot;3117&quot;/&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-style=&quot;white-space: normal; background-color: rgb(255, 255, 255); color: rgb(62, 62, 62); letter-spacing: 0.544px; font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; font-size: 16px;&quot; class=&quot;js_darkmode__155&quot;&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-role=&quot;paragraph&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;93589&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span data-raw-text=&quot;走&quot; data-textnode-index-1641215183112=&quot;116&quot; data-index-1641215183112=&quot;3118&quot;&gt;走&lt;/span&gt;&lt;span data-raw-text=&quot;进&quot; data-textnode-index-1641215183112=&quot;116&quot; data-index-1641215183112=&quot;3119&quot;&gt;进&lt;/span&gt;&lt;span data-raw-text=&quot;作&quot; data-textnode-index-1641215183112=&quot;116&quot; data-index-1641215183112=&quot;3120&quot;&gt;作&lt;/span&gt;&lt;span data-raw-text=&quot;者&quot; data-textnode-index-1641215183112=&quot;116&quot; data-index-1641215183112=&quot;3121&quot;&gt;者&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/pre&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzIzNzgyMjYxOQ==&amp;amp;mid=2247484618&amp;amp;idx=1&amp;amp;sn=e24d7d19006f0d66e697e8d2be4aa508&amp;amp;chksm=e8c3f33edfb47a286f4515c4b11e822c35eab9b6c7ada25ac2cce3d2f7e5dac0230b54c56646&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span data-raw-text=&quot;1&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6831&quot;&gt;&lt;span data-raw-text=&quot;1&quot; data-textnode-index-1641215183112=&quot;117&quot; data-index-1641215183112=&quot;3122&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;0&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6832&quot;&gt;&lt;span data-raw-text=&quot;0&quot; data-textnode-index-1641215183112=&quot;118&quot; data-index-1641215183112=&quot;3123&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;年&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6833&quot;&gt;&lt;span data-raw-text=&quot;年&quot; data-textnode-index-1641215183112=&quot;119&quot; data-index-1641215183112=&quot;3124&quot;&gt;年&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;I&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6834&quot;&gt;&lt;span data-raw-text=&quot;I&quot; data-textnode-index-1641215183112=&quot;120&quot; data-index-1641215183112=&quot;3125&quot;&gt;I&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;T&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6835&quot;&gt;&lt;span data-raw-text=&quot;T&quot; data-textnode-index-1641215183112=&quot;121&quot; data-index-1641215183112=&quot;3126&quot;&gt;T&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;老&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6836&quot;&gt;&lt;span data-raw-text=&quot;老&quot; data-textnode-index-1641215183112=&quot;122&quot; data-index-1641215183112=&quot;3127&quot;&gt;老&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;兵&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6837&quot;&gt;&lt;span data-raw-text=&quot;兵&quot; data-textnode-index-1641215183112=&quot;123&quot; data-index-1641215183112=&quot;3128&quot;&gt;兵&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;给&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6838&quot;&gt;&lt;span data-raw-text=&quot;给&quot; data-textnode-index-1641215183112=&quot;124&quot; data-index-1641215183112=&quot;3129&quot;&gt;给&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;职&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6839&quot;&gt;&lt;span data-raw-text=&quot;职&quot; data-textnode-index-1641215183112=&quot;125&quot; data-index-1641215183112=&quot;3130&quot;&gt;职&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;场&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6840&quot;&gt;&lt;span data-raw-text=&quot;场&quot; data-textnode-index-1641215183112=&quot;126&quot; data-index-1641215183112=&quot;3131&quot;&gt;场&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;新&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6841&quot;&gt;&lt;span data-raw-text=&quot;新&quot; data-textnode-index-1641215183112=&quot;127&quot; data-index-1641215183112=&quot;3132&quot;&gt;新&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;人&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6842&quot;&gt;&lt;span data-raw-text=&quot;人&quot; data-textnode-index-1641215183112=&quot;128&quot; data-index-1641215183112=&quot;3133&quot;&gt;人&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;的&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6843&quot;&gt;&lt;span data-raw-text=&quot;的&quot; data-textnode-index-1641215183112=&quot;129&quot; data-index-1641215183112=&quot;3134&quot;&gt;的&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;一&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6844&quot;&gt;&lt;span data-raw-text=&quot;一&quot; data-textnode-index-1641215183112=&quot;130&quot; data-index-1641215183112=&quot;3135&quot;&gt;一&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;些&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6845&quot;&gt;&lt;span data-raw-text=&quot;些&quot; data-textnode-index-1641215183112=&quot;131&quot; data-index-1641215183112=&quot;3136&quot;&gt;些&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;建&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6846&quot;&gt;&lt;span data-raw-text=&quot;建&quot; data-textnode-index-1641215183112=&quot;132&quot; data-index-1641215183112=&quot;3137&quot;&gt;建&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;议&quot; data-textnode-index=&quot;489&quot; data-index=&quot;6847&quot;&gt;&lt;span data-raw-text=&quot;议&quot; data-textnode-index-1641215183112=&quot;133&quot; data-index-1641215183112=&quot;3138&quot;&gt;议&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzIzNzgyMjYxOQ==&amp;amp;mid=2247486100&amp;amp;idx=1&amp;amp;sn=3166338465f9b4a47ad93ecf13df6e48&amp;amp;chksm=e8c3fd60dfb47476e0c3ff65673eee47a5b99c7455f70252d08d6d0330828ea9050b27526a7d&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span data-raw-text=&quot;“&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3139&quot;&gt;“&lt;/span&gt;&lt;span data-raw-text=&quot;我&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3140&quot;&gt;我&lt;/span&gt;&lt;span data-raw-text=&quot;”&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3141&quot;&gt;”&lt;/span&gt;&lt;span data-raw-text=&quot;被&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3142&quot;&gt;被&lt;/span&gt;&lt;span data-raw-text=&quot;阿&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3143&quot;&gt;阿&lt;/span&gt;&lt;span data-raw-text=&quot;里&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3144&quot;&gt;里&lt;/span&gt;&lt;span data-raw-text=&quot;巴&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3145&quot;&gt;巴&lt;/span&gt;&lt;span data-raw-text=&quot;巴&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3146&quot;&gt;巴&lt;/span&gt;&lt;span data-raw-text=&quot;宠&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3147&quot;&gt;宠&lt;/span&gt;&lt;span data-raw-text=&quot;幸&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3148&quot;&gt;幸&lt;/span&gt;&lt;span data-raw-text=&quot;了&quot; data-textnode-index-1641215183112=&quot;134&quot; data-index-1641215183112=&quot;3149&quot;&gt;了&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzIzNzgyMjYxOQ==&amp;amp;mid=2247485407&amp;amp;idx=1&amp;amp;sn=0e0de515b3a66ac91e55fdf583be5c0d&amp;amp;chksm=e8c3f02bdfb4793daecebbead9c5cdf6e64da25b80f2fd3f2bcfcc52a6c3a57b2414298bd0b5&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span data-raw-text=&quot;程&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6848&quot;&gt;&lt;span data-raw-text=&quot;程&quot; data-textnode-index-1641215183112=&quot;135&quot; data-index-1641215183112=&quot;3150&quot;&gt;程&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;序&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6849&quot;&gt;&lt;span data-raw-text=&quot;序&quot; data-textnode-index-1641215183112=&quot;136&quot; data-index-1641215183112=&quot;3151&quot;&gt;序&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;员&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6850&quot;&gt;&lt;span data-raw-text=&quot;员&quot; data-textnode-index-1641215183112=&quot;137&quot; data-index-1641215183112=&quot;3152&quot;&gt;员&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;如&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6851&quot;&gt;&lt;span data-raw-text=&quot;如&quot; data-textnode-index-1641215183112=&quot;138&quot; data-index-1641215183112=&quot;3153&quot;&gt;如&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;何&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6852&quot;&gt;&lt;span data-raw-text=&quot;何&quot; data-textnode-index-1641215183112=&quot;139&quot; data-index-1641215183112=&quot;3154&quot;&gt;何&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;提&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6853&quot;&gt;&lt;span data-raw-text=&quot;提&quot; data-textnode-index-1641215183112=&quot;140&quot; data-index-1641215183112=&quot;3155&quot;&gt;提&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;高&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6854&quot;&gt;&lt;span data-raw-text=&quot;高&quot; data-textnode-index-1641215183112=&quot;141&quot; data-index-1641215183112=&quot;3156&quot;&gt;高&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;影&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6855&quot;&gt;&lt;span data-raw-text=&quot;影&quot; data-textnode-index-1641215183112=&quot;142&quot; data-index-1641215183112=&quot;3157&quot;&gt;影&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;响&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6856&quot;&gt;&lt;span data-raw-text=&quot;响&quot; data-textnode-index-1641215183112=&quot;143&quot; data-index-1641215183112=&quot;3158&quot;&gt;响&lt;/span&gt;&lt;/span&gt;&lt;span data-raw-text=&quot;力&quot; data-textnode-index=&quot;490&quot; data-index=&quot;6857&quot;&gt;&lt;span data-raw-text=&quot;力&quot; data-textnode-index-1641215183112=&quot;144&quot; data-index-1641215183112=&quot;3159&quot;&gt;力&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzIzNzgyMjYxOQ==&amp;amp;mid=2247485573&amp;amp;idx=1&amp;amp;sn=4d936fa700b38b5158316bdaf1aeac68&amp;amp;chksm=e8c3ff71dfb476675613afe09c682bc5fbd454b35f8d3d6d0458360149d5f0d673965c8852c4&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span data-raw-text=&quot;优&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3160&quot;&gt;优&lt;/span&gt;&lt;span data-raw-text=&quot;秀&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3161&quot;&gt;秀&lt;/span&gt;&lt;span data-raw-text=&quot;程&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3162&quot;&gt;程&lt;/span&gt;&lt;span data-raw-text=&quot;序&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3163&quot;&gt;序&lt;/span&gt;&lt;span data-raw-text=&quot;员&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3164&quot;&gt;员&lt;/span&gt;&lt;span data-raw-text=&quot;必&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3165&quot;&gt;必&lt;/span&gt;&lt;span data-raw-text=&quot;备&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3166&quot;&gt;备&lt;/span&gt;&lt;span data-raw-text=&quot;技&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3167&quot;&gt;技&lt;/span&gt;&lt;span data-raw-text=&quot;能&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3168&quot;&gt;能&lt;/span&gt;&lt;span data-raw-text=&quot;之&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3169&quot;&gt;之&lt;/span&gt;&lt;span data-raw-text=&quot;如&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3170&quot;&gt;如&lt;/span&gt;&lt;span data-raw-text=&quot;何&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3171&quot;&gt;何&lt;/span&gt;&lt;span data-raw-text=&quot;高&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3172&quot;&gt;高&lt;/span&gt;&lt;span data-raw-text=&quot;效&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3173&quot;&gt;效&lt;/span&gt;&lt;span data-raw-text=&quot;阅&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3174&quot;&gt;阅&lt;/span&gt;&lt;span data-raw-text=&quot;读&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3175&quot;&gt;读&lt;/span&gt;&lt;span data-raw-text=&quot;源&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3176&quot;&gt;源&lt;/span&gt;&lt;span data-raw-text=&quot;码&quot; data-textnode-index-1641215183112=&quot;145&quot; data-index-1641215183112=&quot;3177&quot;&gt;码&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzIzNzgyMjYxOQ==&amp;amp;mid=2247484822&amp;amp;idx=1&amp;amp;sn=ecaada01b1bcf73b3a9fb750872b8e9d&amp;amp;chksm=e8c3f262dfb47b74d6f03be903dc734953e83ee720ac5b98e7ffcd92da39df5d68308b26bf85&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span data-raw-text=&quot;我&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3178&quot;&gt;我&lt;/span&gt;&lt;span data-raw-text=&quot;的&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3179&quot;&gt;的&lt;/span&gt;&lt;span data-raw-text=&quot;另&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3180&quot;&gt;另&lt;/span&gt;&lt;span data-raw-text=&quot;一&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3181&quot;&gt;一&lt;/span&gt;&lt;span data-raw-text=&quot;种&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3182&quot;&gt;种&lt;/span&gt;&lt;span data-raw-text=&quot;参&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3183&quot;&gt;参&lt;/span&gt;&lt;span data-raw-text=&quot;与&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3184&quot;&gt;与&lt;/span&gt;&lt;span data-raw-text=&quot; &quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3185&quot;&gt; &lt;/span&gt;&lt;span data-raw-text=&quot;R&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3186&quot;&gt;R&lt;/span&gt;&lt;span data-raw-text=&quot;o&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3187&quot;&gt;o&lt;/span&gt;&lt;span data-raw-text=&quot;c&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3188&quot;&gt;c&lt;/span&gt;&lt;span data-raw-text=&quot;k&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3189&quot;&gt;k&lt;/span&gt;&lt;span data-raw-text=&quot;e&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3190&quot;&gt;e&lt;/span&gt;&lt;span data-raw-text=&quot;t&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3191&quot;&gt;t&lt;/span&gt;&lt;span data-raw-text=&quot;M&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3192&quot;&gt;M&lt;/span&gt;&lt;span data-raw-text=&quot;Q&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3193&quot;&gt;Q&lt;/span&gt;&lt;span data-raw-text=&quot; &quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3194&quot;&gt; &lt;/span&gt;&lt;span data-raw-text=&quot;开&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3195&quot;&gt;开&lt;/span&gt;&lt;span data-raw-text=&quot;源&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3196&quot;&gt;源&lt;/span&gt;&lt;span data-raw-text=&quot;社&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3197&quot;&gt;社&lt;/span&gt;&lt;span data-raw-text=&quot;区&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3198&quot;&gt;区&lt;/span&gt;&lt;span data-raw-text=&quot;的&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3199&quot;&gt;的&lt;/span&gt;&lt;span data-raw-text=&quot;方&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3200&quot;&gt;方&lt;/span&gt;&lt;span data-raw-text=&quot;式&quot; data-textnode-index-1641215183112=&quot;146&quot; data-index-1641215183112=&quot;3201&quot;&gt;式&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span data-raw-text=&quot;点&quot; data-textnode-index-1641215183112=&quot;147&quot; data-index-1641215183112=&quot;3202&quot;&gt;点&lt;/span&gt;&lt;span data-raw-text=&quot;击&quot; data-textnode-index-1641215183112=&quot;147&quot; data-index-1641215183112=&quot;3203&quot;&gt;击&lt;/span&gt;&lt;span data-raw-text=&quot;查&quot; data-textnode-index-1641215183112=&quot;147&quot; data-index-1641215183112=&quot;3204&quot;&gt;查&lt;/span&gt;&lt;span data-raw-text=&quot;看&quot; data-textnode-index-1641215183112=&quot;147&quot; data-index-1641215183112=&quot;3205&quot;&gt;看&lt;/span&gt;&lt;span data-raw-text=&quot;“&quot; data-textnode-index-1641215183112=&quot;147&quot; data-index-1641215183112=&quot;3206&quot;&gt;“&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span data-raw-text=&quot;阅&quot; data-textnode-index-1641215183112=&quot;148&quot; data-index-1641215183112=&quot;3207&quot;&gt;阅&lt;/span&gt;&lt;span data-raw-text=&quot;读&quot; data-textnode-index-1641215183112=&quot;148&quot; data-index-1641215183112=&quot;3208&quot;&gt;读&lt;/span&gt;&lt;span data-raw-text=&quot;原&quot; data-textnode-index-1641215183112=&quot;148&quot; data-index-1641215183112=&quot;3209&quot;&gt;原&lt;/span&gt;&lt;span data-raw-text=&quot;文&quot; data-textnode-index-1641215183112=&quot;148&quot; data-index-1641215183112=&quot;3210&quot;&gt;文&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span data-raw-text=&quot;”&quot; data-textnode-index-1641215183112=&quot;149&quot; data-index-1641215183112=&quot;3211&quot;&gt;”&lt;/span&gt;&lt;span data-raw-text=&quot;，&quot; data-textnode-index-1641215183112=&quot;149&quot; data-index-1641215183112=&quot;3212&quot;&gt;，&lt;/span&gt;&lt;strong&gt;&lt;span data-raw-text=&quot;可&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3213&quot;&gt;可&lt;/span&gt;&lt;span data-raw-text=&quot;直&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3214&quot;&gt;直&lt;/span&gt;&lt;span data-raw-text=&quot;接&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3215&quot;&gt;接&lt;/span&gt;&lt;span data-raw-text=&quot;进&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3216&quot;&gt;进&lt;/span&gt;&lt;span data-raw-text=&quot;入&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3217&quot;&gt;入&lt;/span&gt;&lt;span data-raw-text=&quot;[&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3218&quot;&gt;[&lt;/span&gt;&lt;span data-raw-text=&quot;中&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3219&quot;&gt;中&lt;/span&gt;&lt;span data-raw-text=&quot;间&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3220&quot;&gt;间&lt;/span&gt;&lt;span data-raw-text=&quot;件&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3221&quot;&gt;件&lt;/span&gt;&lt;span data-raw-text=&quot;兴&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3222&quot;&gt;兴&lt;/span&gt;&lt;span data-raw-text=&quot;趣&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3223&quot;&gt;趣&lt;/span&gt;&lt;span data-raw-text=&quot;圈&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3224&quot;&gt;圈&lt;/span&gt;&lt;span data-raw-text=&quot;]&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3225&quot;&gt;]&lt;/span&gt;&lt;span data-raw-text=&quot;文&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3226&quot;&gt;文&lt;/span&gt;&lt;span data-raw-text=&quot;章&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3227&quot;&gt;章&lt;/span&gt;&lt;span data-raw-text=&quot;合&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3228&quot;&gt;合&lt;/span&gt;&lt;span data-raw-text=&quot;集&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3229&quot;&gt;集&lt;/span&gt;&lt;span data-raw-text=&quot;。&quot; data-textnode-index-1641215183112=&quot;150&quot; data-index-1641215183112=&quot;3230&quot;&gt;。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5938c8a1acbfcac95810ba25cc22ccac</guid>
<title>字节“FII事件”发生的那一夜；别再说谷歌取消OKR了；Go微服务生产指南清单｜码农周刊VIP会员专属邮件周报 Vol.091</title>
<link>https://toutiao.io/k/d9oheay</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;&lt;span&gt;本文内容节选自&lt;strong&gt;「码农周刊VIP会员专属邮件周报 Vol.091」&lt;/strong&gt;，感谢阅读。&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5MzA0ODkyMA==&amp;amp;mid=2655078432&amp;amp;idx=2&amp;amp;sn=f1ba1fa5fbfbcf98a3e6f610b258cf05&amp;amp;chksm=bd2918178a5e9101b993d9e84d783562c995577cec855adf32ccb5946ff4da21fd6e89ba078e&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;想邮件订阅周报？扫码即刻订阅！&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;↓↓↓&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;307&quot; data-ratio=&quot;0.5493333333333333&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/AjN1jquNavich3VaNkKeiaAwUhz7TQbQmic4fFsr58X9PAYleYzxqc1K1vZjeBoZDMUsmia0xH67EQYINGRvNOtLmA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;750&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;本期，首先分享的是&lt;strong&gt;避免「瞎忙活」的十条秘笈&lt;/strong&gt;，摘录几条，共勉。&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1）清晰的目标。&lt;br/&gt;2）垃圾时间处理信息。&lt;br/&gt;3）不要和别人比较。&lt;br/&gt;4）要有成长心态。&lt;br/&gt;5）锻炼身体。&lt;br/&gt;……&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;字节“FII事件”发生的那一夜&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://mp.weixin.qq.com/s/zqJ4AJjE5I9WDkcQFMlM6Q&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;信任不会忽然消失，但很难说清开头在哪里。&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;别再说谷歌取消OKR了&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://mp.weixin.qq.com/s/l6sZgjnKWoTN8JWTIIwtjA&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;在OKR这件事情上，优秀的学习者不会简单地只抄老大哥的答案，他们学习的是老大哥的解题思维和过程。&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;收钱吧生产环境全链路压测的实践&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://toutiao.io/k/3elzr5y&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;经验总结&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;分布式数据库的高可用性简史&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://toutiao.io/k/k44qn9i&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;在历史上是如何处理容错的，以及高可用性是什么样子的。&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;Android卡顿掉帧问题分析之工具篇&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://toutiao.io/k/w3j907a&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;详细介绍&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;一份Go微服务生产指南清单给你&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://toutiao.io/k/n6xubkw&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;供参考&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;如何打造一款简单易用的 React 状态管理工具&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://toutiao.io/k/kew0md8&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;一步步教你&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;做好这 16 项优化，你的 Linux 操作系统焕然一新&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://toutiao.io/k/63xesh3&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;实操干货&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;GitHub的4个神技，同桌直呼666&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://toutiao.io/k/oaoov9m&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;试试吧&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;4 种主流的 API 架构风格对比: SOAP vs REST vs GraphQL vs RPC&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;&lt;em&gt;https://toutiao.io/k/hydzart&lt;/em&gt;&lt;/span&gt;&lt;br/&gt;供参考&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5MzA0ODkyMA==&amp;amp;mid=2655078432&amp;amp;idx=2&amp;amp;sn=f1ba1fa5fbfbcf98a3e6f610b258cf05&amp;amp;chksm=bd2918178a5e9101b993d9e84d783562c995577cec855adf32ccb5946ff4da21fd6e89ba078e&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;想邮件订阅周报？扫码即刻订阅！&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;↓↓↓&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;307&quot; data-ratio=&quot;0.5493333333333333&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/AjN1jquNavich3VaNkKeiaAwUhz7TQbQmic4fFsr58X9PAYleYzxqc1K1vZjeBoZDMUsmia0xH67EQYINGRvNOtLmA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;750&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>