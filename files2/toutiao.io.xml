<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>eedb8610c644b3abe334f5f6ebde77ac</guid>
<title>ClickHouse 在大数据分析平台留存分析上的应用</title>
<link>https://toutiao.io/k/43p1n50</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;导语 &lt;span/&gt;&lt;span&gt;| &lt;/span&gt;&lt;/span&gt;本文实践了对于千万级别的用户，操作总数达万级别，每日几十亿操作流水的留存分析工具秒级别查询的数据构建方案。同时，除了留存分析，对于用户群分析，事件分析等也可以尝试用此方案来解决。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;文章作者：陈璐，腾讯高级数据分析师&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;  背景&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;你可能听说过Growingio、神策等数据分析平台，本文主要介绍实现留存分析工具相关的内容。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;留存分析是一种用来分析用户参与情况/活跃程度的分析模型，可考查进行初始行为后的用户中，有多少人会进行后续行为，这是衡量产品对用户价值高低的重要指标。如，为评估产品更新效果或渠道推广效果，我们常常需要对同期进入产品或同期使用了产品某个功能的用户的后续行为表现进行评估 [1]。大部分数据分析平台主要包括如图的几个功能（以神策为例）：&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.39453125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7djjGuFMQC5frmR4MaEZxu1aACgmM0VmzClz8bNIU4dwbsOPEMsLsNg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;本文主要介绍留存分析工具的优化方案（只涉及数据存储和查询的方案设计，不涉及平台）。&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;我想每个数据/产品同学在以往的取数分析过程中，都曾有一个痛点，就是每次查询留存相关的数据时，都要等到天荒地老，慢！而最近采用优化方案的目的也是为了提高查询的效率和减少数据的存储，可以帮助产品快速地查询/分析留存相关的数据。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;优化方案的核心是在Clickhouse中使用Roaringbitmap对用户进行压缩，将留存率的计算交给高效率的位图函数，这样既省空间又可以提高查询速度。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;希望本实践方案可以给你带来一些帮助和启示。下面主要分3个部分详细介绍：Roaringbitmap简介、思路与实现、总结与思考。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;一、Roaringbitmap 简介&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;下面先简单介绍一下高效的位图压缩方法Roaringbitmap。先来看一个问题:&lt;/span&gt;&lt;/section&gt;&lt;pre&gt;&lt;section&gt;&lt;span&gt;给定含有&lt;span&gt;40&lt;/span&gt;亿个不重复的位于&lt;span&gt;[&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;^&lt;/span&gt;&lt;span&gt;32&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;区间内的整数集合，如何快速判定某个数是否在该集合内？&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;显然，如果我们将这40亿个数原样存储下来，需要耗费高达14.9GB的内存，这是难以接受的。所以我们可以用位图(bitmap)来存储，即第0个比特表示数字0，第1个比特表示数字1，以此类推。如果某个数位于原集合内，就将它对应的位图内的比特置为1，否则保持为0，这样就能很方便地查询得出结果了，仅仅需要占用512MB的内存，不到&lt;span&gt;原来的&lt;/span&gt;3.4% [3]。但是这种方式也有缺点：比如我需要将1~5000w这5000w个连续的整数存储起来，用普通的bitmap同样需要消耗512M的存储，显然，对于这种情况其实有很大的优化空间。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;2016年由S. Chambi、D. Lemire、O. Kaser等人在论文《Better bitmap performance with Roaring bitmaps》与《Consistently faster and smaller compressed bitmaps with Roaring》中提出了roaringbitmap，主要特点就是可以极大程度地节约存储及提供了快速的位图计算，因此考虑用它来做优化。对于前文提及的存储连续的5000w个整数，只需要几十KB。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;它的主要思路是：将32位无符号整数按照高16位分桶，即最多可能有2^16&lt;span&gt;=65536个桶，论文内称为container。存储数据时，按照数据的高16位找到container（找不到就会新建一个），再将低16位放入container中。也就是说，一个roaringbitmap就是很多container的集合 [3]，具体细节可以自行查看文末的参考文章&lt;/span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;二、思路与实现&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;我们的原始数据主要分为：&lt;/span&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;1.用户操作行为数据table_oper_raw&lt;br/&gt;包括时间分区(ds)、用户标识id(user_id)和用户操作行为名称(oper_name)，如：20200701|6053002|点击首页banner 表示用户6053002在20200701这天点击了首页banner（同一天中同一个用户多次操作了同一个行为只保留一条）。实践过程中，此表每日记录数达几十亿行。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.用户属性数据table_attribute_raw&lt;br/&gt;表示用户在产品/画像中的属性，包括时间分区(ds)、用户标识(user_id)及各种用户属性字段（可能是用户的新进渠道、所在省份等），如20200701|6053002|小米商店|广东省。实践过程中，此表每日有千万级的用户数，测试属性在20+个。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;现在我们需要根据这两类数据，求出某天操作了某个行为的用户在后续的某一天操作了另一个行为的留存率，比如，在20200701这天操作了“点击banner”的用户有100个，这部分用户在20200702这天操作了“点击app签到”的有20个，那么对于分析时间是20200701，且“点击banner”的用户在次日“点击app签到”的留存率是20%。同时，还需要考虑利用用户属性对留存比例进行区分，例如只考虑广东省的用户的留存率，或者只考虑小米商店用户的留存率，或者在广东的小米商店的用户的留存率等等。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;一般来说，求留存率的做法就是两天的用户求交集，例如前文说到的情况，就是先获取出20200701的所有操作了“点击banner”的用户标识id集合假设为S1，然后获取20200702的所有操作了“点击app签到”的用户标识id集合假设为S2，最后求解S1和S2的交集：&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.49635036496350365&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7JM2bmia6bQibnZI0yjHVf5GmBDYGv20GB3e0mvX3lE6WJdG2Zm6f7IicQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;548&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;可以看到，当s1和s2的集合中用户数都比较大的时候，join的速度会比较慢。&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;在此我们考虑前文说到的bitmap，假若每一个用户都可以表示成一个32位的无符号整型，用bitmap的形式去存储，S1和S2的求交过程就是直接的一个位比较过程，这样速度会得到巨大的提升。而Roaringbitmap对数据进行了压缩，其求交的速度在绝大部分情况下比bitmap还要快，因此这里我们考虑使用Roaringbitmap的方法来对计算留存的过程进行优化。&lt;/span&gt;&lt;/section&gt;&lt;h2&gt;&lt;span&gt;1.数据构建&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;整个过程主要是：首先对初始的两张表——用户操作数据表table_oper_raw和用户筛选维度数据表table_attribute_raw中的user_id字段进行编码，将每个用户映射成唯一的id（32位的无符号整型），分别得到两个新表table_oper_middle和table_attribute_middle。再将他们导入clickhouse，使用roaringbitmap的方法对用户进行压缩存储，最后得到压缩后的两张表table_oper_bit和table_attribute_bit，即为最终的查询表。流程图如下：&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.9109375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7wPRPrVWW2ApyiaXVn4S8fvkNQTIdCGf041ibR4oCbQGfIGJq7p0Nb3hQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;(1).生成用户id映射表&lt;br/&gt;首先，需要构建一个映射表table_user_map，包含时间分区(ds)、用户标识id(user_d)及映射后的id(id)，它将每个用户(String类型)映射成一个32位的无符号整型。这里我们从1开始编码，这样每个用户的标识就转化成了指定的一个数字。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.23493975903614459&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7Gxgfwyiab2RO1ylAIEnGfc1w5icUdby5ZjjzD5h9sY5BMJlUd67Uiasag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;332&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;(2).初始数据转化&lt;br/&gt;分别将用户操作数据表和用户筛选维度数据中的imei字段替换成对应的数值，生成编码后的用户操作数据:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.11635220125786164&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7tpLtCFB2yfRFczs5qUibTp1EtoQ8zbOHPsf6FePKGXicZKsPYhQpPyrg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;636&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;和用户筛选维度数据:&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.09112709832134293&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7R2ZSW4zF4G0Q5HnlbUKTFQzAQjq91CXqSib9nlPQ8SvWz3WDy7suysg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;834&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;(3).导入clickhouse&lt;br/&gt;首先在clickhouse中创建相同结构的表，如table_oper_middle_ch。&lt;br/&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;同样的，在clickhouse中创建表table_attribute_middle_ch。然后用spark将这两份数据分别导入这两张表。这一步导入很快，几十亿的数据大概10分多钟就可以完成&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.3967828418230563&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7ib0IxqbeU1SILUhCrzs0iby23DFCbFe8rGiadMz5cvadRpGwdWAN9BPMA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;373&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;(4).Roaringbitmap压缩&lt;br/&gt;对于用户操作流水数据，我们先建一个可以存放bitmap的表table_oper_bit，建表语句如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.3259423503325942&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw78tV3UksY9Mia7wE2hSSmAfz8nicLkq91LIRgjWH2KjMogO164ZXjExAA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;451&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;用户属性数据table_attribute_bit也类似：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.38063063063063063&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7sUG3cp406UEqEPhO1CBYhYK1otykS1Cf2kY7CUKdMVVXicFFxudlVxQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;444&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;这里索引粒度可设置小值，接着用聚合函数groupBitmapState对用户id进行压缩：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.41455696202531644&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7gFXqiaqVibv4HwKJ1dQicFIyK56ibrZwNsib2ytCGNT1KF4BQcX9w1ZF7ibw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;316&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;这样，对于用户操作数据表，原本几十亿的数据就压缩成了几万行的数据，每行包括操作名称和对应的用户id形成的bitmap：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.15104166666666666&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7BzFicBUndWMm5QCaWfbK0vibGgiceDl4QQtfkjn2y73oja0G1KYjnc1wg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;384&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;同样的，用户属性的数据也可以这样处理，得到table_attribute_bit表，每行包括某个属性的某个属性值对应的用户的id形成的bitmap：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.12058212058212059&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7OibLlbhjic1SjicTcFxJtCGZbIfMo3kQ61aedM1g27p0tPoyaE4UzvfEA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;481&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;至此，数据压缩的过程就这样完成了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;span&gt;2.查询过程&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;首先，简要地介绍下方案中常用的bitmap函数（详细见文末的参考资料）：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;1.bitmapCardinality&lt;br/&gt;返回一个UInt64类型的数值，表示bitmap对象的基数。用来计算不同条件下的用户数，可以粗略理解为count(distinct)&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;2.bitmapAnd&lt;br/&gt;为两个bitmap对象进行与操作，返回一个新的bitmap对象。可以理解为用来满足两个条件之间的and，但是参数只能是两个bitmap&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;3.bitmapOr&lt;br/&gt;为两个bitmap对象进行或操作，返回一个新的bitmap对象。可以理解为用来满足两个条件之间的or，但是参数也同样只能是两个bitmap。如果是多个的情况，可以尝试使用groupBitmapMergeState&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;举例来说，假设20200701这天只有[1,2,3,5,8]这5个用户点击了banner，则有：&lt;/span&gt;&lt;/section&gt;&lt;pre&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;# 返回5&lt;/span&gt;&lt;br/&gt;select bitmapCardinality&lt;span&gt;(&lt;/span&gt;user_bit&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;from&lt;/span&gt; tddb&lt;span&gt;.&lt;/span&gt;table_oper_bit&lt;br/&gt;where ds &lt;span&gt;=&lt;/span&gt; &lt;span&gt;20200701&lt;/span&gt; AND oper_name &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&#x27;点击banner&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;又如果20200701从小米商店新进的用户是[1,3,8,111,2000,100000]，则有：&lt;/span&gt;&lt;/section&gt;&lt;pre&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;# 返回3,因为两者的重合用户只有1,3,8这3个用户&lt;/span&gt;&lt;br/&gt;select bitmapCardinality&lt;span&gt;(&lt;/span&gt;bitmapAnd&lt;span&gt;(&lt;/span&gt;&lt;br/&gt;&lt;span&gt;(&lt;/span&gt;SELECT user_bit&lt;br/&gt;         FROM tddb&lt;span&gt;.&lt;/span&gt;table_oper_bit&lt;br/&gt;         WHERE &lt;span&gt;(&lt;/span&gt;ds &lt;span&gt;=&lt;/span&gt; &lt;span&gt;20200701&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; AND &lt;span&gt;(&lt;/span&gt;oper_name &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&#x27;点击banner&#x27;&lt;/span&gt;&lt;span&gt;)),&lt;/span&gt; &lt;br/&gt;&lt;span&gt;(&lt;/span&gt;SELECT user_bit&lt;br/&gt; FROM tddb&lt;span&gt;.&lt;/span&gt;table_attribute_bit&lt;br/&gt; WHERE ds &lt;span&gt;=&lt;/span&gt; &lt;span&gt;20200701&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;attr_id &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&#x27;first_channel&#x27;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;attr_value IN &lt;span&gt;(&lt;/span&gt;&lt;span&gt;&#x27;小米商店&#x27;&lt;/span&gt;&lt;span&gt;)))))&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;有了以上的数据生成过程和bitmap函数，我们就可以根据不同的条件使用不同的位图函数来快速查询，具体来说，主要是以下几种情况：&lt;/span&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;a. 操作了某个行为的用户在后续某一天操作了另一个行为的留存：&lt;br/&gt;如“20200701点击了banner的用户在次日点击app签到的留存人数”，就可以用以下的sql快速求解:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.44764795144157815&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7q3XGdutJvsmXcSibb444YnHmHF20NnffOxyPxlHtXJ3uQ5zLSSGvUrA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;659&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;b. 操作了某个行为并且带有某个属性的用户在后续的某一天操作了另一个行为的留存：&lt;br/&gt;如“20200701点击了banner且来自广东/江西/河南的用户在次日点击app签到的留存人数”：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.2875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7K2q8kMUzbQsS1tq47Cnj1u6m52Mah2UY678DnibSetIPBEzH1V6Eb6g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1040&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;c. 操作了某个行为并且带有某几个属性的用户在后续的某一天操作了另一个行为的留存：&lt;br/&gt;如“20200701点击了banner、来自广东且新进渠道是小米商店的用户在次日点击app签到的留存人数”：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.4229287090558767&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7Nf7mtL6QhAxS7BxBmOy5s8hZflCW6F0z5Mp20n6QsGIQWwibBdBGibsg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1038&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;span&gt;3.实践效果&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;根据这套方案做了实践，对每日按时间分区、用户、操作名称去重后包括几十亿的操作记录，其中包含千万级别的用户数，万级别的操作数。最后实现了：&lt;/span&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;存储&lt;br/&gt;原本每日几十G的操作流水数据经压缩后得到的表table_oper_bit为4GB左右/天。而用户属性表table_attribute_bit为500MB左右/天&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;查询速度&lt;br/&gt;clickhouse集群现状：12核125G内存机器10台。clickhouse版本:20.4.7.67。查询的表都存放在其中一台机器上。测试了查询在20200701操作了行为oper_name_1(用户数量级为3000+w)的用户在后续7天内每天操作了另一个行为oper_name_2(用户数量级为2700+w)的留存数据(用户重合度在1000w以上)，耗时0.2秒左右&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.0796875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7VAlcIZchWNwDCJDymLTEFic2YEBfKOxtya0UkpkOquQk4VECt4JqyVA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;反馈&lt;br/&gt;最后和前端打通，效果也是有了明显的优化，麻麻再也不用担心我会转晕~&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.37846655791190864&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/o2eWePa4j5DWdeuDz8ibYF8eujg7tPgw7jlAz7DARIaq4uKa6LtXy1XJQCyoE5kgo43rjQNuuSp7rwVcTmroAicA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;613&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;三、总结与思考&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;总的来说，本方案的优点是：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;另外，根据本方案的特点，除了留存分析工具，对于用户群分析，事件分析等工具也可以尝试用此方案来解决。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;PS : 作者初入坑&lt;span&gt;ch&lt;/span&gt;，对于以上内容，有不正确/不严谨之处请轻拍~ 欢迎交流~&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;h3&gt;&lt;strong&gt;&lt;span&gt;参考文献：&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;[1] 解析常见的数据分析模型——留存分析：https://www.sensorsdata.cn/blog/jie-xi-chang-jian-de-shu-ju-fen-xi-mo-xing-liu-cun-fen-xi/&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;[2] &lt;/span&gt;RoaringBitmap数据结构及原理：&lt;/span&gt;&lt;span&gt;https://blog.csdn.net/yizishou/article/details/78342499&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;] &lt;/span&gt;高效压缩位图RoaringBitmap的原理与应用：&lt;/span&gt;&lt;span&gt;https://www.jianshu.com/p/818ac4e90daf&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;] 论文：Better bitmap performance with Roaring bitmaps：&lt;/span&gt;&lt;/span&gt;&lt;span&gt;https://arxiv.org/abs/1402.6407v9?utm_source=feedburner&amp;amp;utm_medium=feed&amp;amp;utm_campaign=Feed%3A+DanielLemiresArticlesOnArxiv+(Daniel+Lemire%27s+articles+on+arXiv)&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;] &lt;/span&gt;Clickhouse文档-位图函数：&lt;/span&gt;&lt;/span&gt;&lt;span&gt;https://clickhouse.tech/docs/zh/sql-reference/functions/bitmap-functions/&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section label=&quot;Copyright © 2016 playhudong All Rights Reserved.&quot; donone=&quot;shifuMouseDownPayStyle(&#x27;shifu_sig_022&#x27;)&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;腾讯云大数据&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/o2eWePa4j5DaCQzdVZibTicwrQId09Q0DzibuXlpp9fRibyulbDiafDHDk1ImSnbiaJ7PUHiajfOQLQlnLiczls7BVJFqQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot; title=&quot;https://image.ipaiban.com/upload-ueditor-image-20200619-1592556685554099336.jpg&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;长按二维码&lt;br/&gt;关注我们&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>e3640e8b0ce2df91038068d73193b247</guid>
<title>如何实现对 ELK 各组件的监控？试试 Metricbeat</title>
<link>https://toutiao.io/k/wr0i0k9</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;一、前言&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;开发排查系统问题用得最多的手段就是查看系统日志，&lt;code&gt;ELK&lt;/code&gt; 是 &lt;code&gt;Elastic&lt;/code&gt; 公司开源的实时日志处理与分析解决方案，已经为日志处理方案的主流选择。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;而在生产环境中，如何针对 &lt;code&gt;ELK&lt;/code&gt; 进行监控，保证各个组件正常运行？如何知道目前的资源是否能承受线上的压力呢？本文主要是以 &lt;code&gt;Elastic Stack 7.x&lt;/code&gt; 版本为例，介绍如何监控 &lt;code&gt;ELK&lt;/code&gt; 自身的各个组件。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;二、总体架构&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;常见的 &lt;code&gt;Elastic Stack&lt;/code&gt; 日志系统架构如下&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.6084142394822006&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Hic4icvNgYCicZukI9J3roL05Ty9icod4qE327VtA9hibf2HG2NkXAOd5A46ibFVA0N9cibRFUN91GEITGV51LWnfxatg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;927&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;其中可使用 &lt;code&gt;Metricbeat&lt;/code&gt; 组件作为轻量级监视代理，通过HTTP端点收集各个组件的监控信息，并把监控数据落盘到 &lt;code&gt;Elasticsearch&lt;/code&gt; 中，最终通过 &lt;code&gt;Kibana&lt;/code&gt; 以图形化的方式展示各种监控数据。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.7754056362083689&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Hic4icvNgYCicZukI9J3roL05Ty9icod4qE3ic3bN6DZWGmPVx7C1YmRz3BxMJsQgZKicRbhoCeSoRQ4Kx7uknkialAKQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1171&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;三、部署Metricbeat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;建议在每台服务器上都运行 &lt;code&gt;Metricbeat&lt;/code&gt; 收集指标，多个Metricbeat实例的指标将在 &lt;code&gt;Elasticsearch&lt;/code&gt; 服务器上合并。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下载对应版本的 &lt;code&gt;Metricbeat&lt;/code&gt; 地址如下：&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;https://www.elastic.co/cn/downloads/past-releases#metricbeat&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;3.1. 收集Elasticsearch信息&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 &lt;code&gt;Metricbeat&lt;/code&gt; 中启用并配置 &lt;code&gt;Elasticsearch x-pack&lt;/code&gt; 模块
从安装目录中，运行：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;./metricbeat modules enable elasticsearch-xpack&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;默认情况下，模块从 http://localhost:9200 收集 Elasticsearch 指标。如果本地服务器有不同的地址，请在 modules.d/elasticsearch-xpack.yml 中将其添加到主机设置。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;3.2. 收集Kibana信息&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 &lt;code&gt;Metricbeat&lt;/code&gt; 中启用并配置 &lt;code&gt;Kibana x-pack&lt;/code&gt; 模块&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;./metricbeat modules enable kibana-xpack&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;该模块将默认从 http://localhost:5601 收集 Kibana 监测指标。如果本地 Kibana 实例有不同的地址，则必须通过 modules.d/kibana-xpack.yml 文件中的 hosts 设置进行指定。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;3.3. 收集Logstash信息&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 &lt;code&gt;Metricbeat&lt;/code&gt; 中启用并配置 &lt;code&gt;Logstash x-pack&lt;/code&gt; 模块&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;./metricbeat modules enable logstash-xpack&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;该模块将默认从 http://localhost:9600 收集 Logstash 监测指标。如果本地 Logstash 实例有不同的地址，则必须通过 modules.d/logstash-xpack.yml 文件中的 hosts 设置进行指定。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;3.4. 收集Beats信息&lt;span/&gt;&lt;/h3&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;所有类型的 &lt;code&gt;Beats&lt;/code&gt; 配置都一样&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;3.4.1. 开启HTTP端点&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;需要开启 &lt;code&gt;Beats&lt;/code&gt; 自己的HTTP端点输出监控数据，例如 &lt;code&gt;Filebeat&lt;/code&gt; 修改 &lt;code&gt;filebeat.yml&lt;/code&gt; 文件，在最后添加以下配置&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;http:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;enabled:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;host:&lt;/span&gt; &lt;span&gt;0.0&lt;/span&gt;&lt;span&gt;.0&lt;/span&gt;&lt;span&gt;.0&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;port:&lt;/span&gt; &lt;span&gt;5066&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;3.4.2. 启用Beat模块&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 &lt;code&gt;Metricbeat&lt;/code&gt; 中启用并配置 &lt;code&gt;Beat x-pack&lt;/code&gt; 模块&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;./metricbeat modules enable beat-xpack&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;该模块将默认从 http://localhost:5066 收集 beat 监测指标。如果正在监测的 beat 实例有不同的地址，则必须通过 modules.d/beat-xpack.yml 文件中的 hosts 设置进行指定。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;3.5. 数据输出配置&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;配置 &lt;code&gt;Metricbeat&lt;/code&gt; 以发送至监测集群，在 &lt;code&gt;metricbeat.yml&lt;/code&gt; 文件中修改以下内容&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;output.elasticsearch:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;hosts:&lt;/span&gt; &lt;span&gt;[&quot;http://localhost:9200&quot;]&lt;/span&gt; &lt;span&gt;## Monitoring cluster&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;# Optional protocol and basic auth credentials.&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;#protocol: &quot;https&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;#username: &quot;elastic&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;#password: &quot;changeme&quot;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;strong&gt;「PS」&lt;/strong&gt;：地址、用户名和密码按实际情况修改&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;3.6. 启动Metricbeat&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;./metricbeat -e&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;四、收集Elasticsearch日志&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;使用 &lt;code&gt;Filebeat&lt;/code&gt; 收集 &lt;code&gt;Elasticsearch&lt;/code&gt; 自身的日志数据。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先需要在 &lt;code&gt;Elasticsearch&lt;/code&gt; 所在的服务器中安装 &lt;code&gt;Filebeat&lt;/code&gt; 组件。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;4.1. 启用es模块&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在 &lt;code&gt;Filebeat&lt;/code&gt; 中启用并配置 &lt;code&gt;Elasticsearch&lt;/code&gt; 模块，执行以下命令&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;./filebeat modules enable elasticsearch&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;4.2. 配置es模块&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;修改es模块的配置信息，指定日志路径&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;vim modules.d/elasticsearch.yml&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;修改为以下内容&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;-&lt;/span&gt; &lt;span&gt;module:&lt;/span&gt; &lt;span&gt;elasticsearch&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;server:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;enabled:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;var.paths:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;-&lt;/span&gt; &lt;span&gt;/app/elk/elasticsearch/logs/*_server.json&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;gc:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;enabled:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;var.paths:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;-&lt;/span&gt; &lt;span&gt;/app/elk/elasticsearch/logs/gc.log.[0-9]*&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;-&lt;/span&gt; &lt;span&gt;/app/elk/elasticsearch/logs/gc.log&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;audit:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;enabled:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;var.paths:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;-&lt;/span&gt; &lt;span&gt;/app/elk/elasticsearch/logs/*_audit.json&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;slowlog:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;enabled:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;var.paths:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;-&lt;/span&gt; &lt;span&gt;/app/elk/elasticsearch/logs/*_index_search_slowlog.json&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;-&lt;/span&gt; &lt;span&gt;/app/elk/elasticsearch/logs/*_index_indexing_slowlog.json&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;deprecation:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;enabled:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;var.paths:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;-&lt;/span&gt; &lt;span&gt;/app/elk/elasticsearch/logs/*_deprecation.json&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;strong&gt;「PS」&lt;/strong&gt;：日志路径按实际情况修改&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;4.3. 配置输出&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;修改 &lt;code&gt;filebeat.yml&lt;/code&gt; 文件，配置es相关信息&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;output.elasticsearch:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;hosts:&lt;/span&gt; &lt;span&gt;[&quot;localhost:9200&quot;]&lt;/span&gt;&lt;br/&gt;  &lt;br/&gt;  &lt;span&gt;# Optional protocol and basic auth credentials.&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;#protocol: &quot;https&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;#username: &quot;elastic&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;#password: &quot;changeme&quot;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;strong&gt;「PS」&lt;/strong&gt;：地址、用户名和密码按实际情况修改&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;4.4. 启动Filebeat&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;./filebeat -c filebeat.yml -e&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;五、查看监控界面&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;进入 &lt;code&gt;Kibana&lt;/code&gt; 的控制台界面，进入 &lt;code&gt;堆栈监测&lt;/code&gt; 菜单&lt;img data-ratio=&quot;2.018867924528302&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Hic4icvNgYCicZukI9J3roL05Ty9icod4qE3xDJfOj8cKlNEnH7RdB6utibWSo5MqnB4BhQQoTHT0h507ngQtepTUAQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;530&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt; &lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;即可查看各个组件的监控信息&lt;img data-ratio=&quot;0.4435129740518962&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Hic4icvNgYCicZukI9J3roL05Ty9icod4qE3AnbpjPSXGxBEtZLLvLibib1ibXhxoibaLwCjqsHmJOA5sIDp7ibO2t8kELg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2505&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.41686555290373906&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Hic4icvNgYCicZukI9J3roL05Ty9icod4qE336urvkQFM7u21axrMDMzWbfAS7Nn3f15pqpsGepjkM3ia9XOFDCTruA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2514&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>077b7873d0d2767a3141e374b4d47c4d</guid>
<title>[推荐] 架构师之路：微服务技术选型</title>
<link>https://toutiao.io/k/bxvxty9</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;作为一名架构师，需要规划产品技术路线，负责技术选型。而技术栈选型主要参考以下几个标准：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;安全稳定，不能经常被爆出安全漏洞&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;开源社区活跃度，加入Apache的组件优先考虑&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;一线互联网公司落地产品，有大公司为其背书&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;文档阅读性好&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;本篇为大家带来微服务架构的后端技术选型，当你需要进行技术选型时，可以参照他来设计自己的决策树。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;开发语言&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;JAVA&lt;/strong&gt;&lt;br/&gt;主流编程语言，适合构建大型后台服务&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Golang&lt;/strong&gt;&lt;br/&gt;Go语言是谷歌2009发布的第二款开源编程语言。专门针对多处理器系统应用程序的编程进行了优化，使用Go编译的程序可以媲美C或C++代码的速度，而且更加安全、支持并行进程。Google对Go寄予厚望。其设计是让软件充分发挥多核心处理器同步多工的优点，并可解决面向对象程序设计的麻烦。目前作为云计算领域的不二之选！&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;开发IDE&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;IntelliJ IDEA&lt;/strong&gt;&lt;br/&gt;jetbrains公司旗下产品，智能代码助手、J2EE支持、各类版本工具(git、svn、github等)、JUnit、CVS整合等。多语言支持，免费版只支持JAVA等少数语言。旗舰版为收费版本，同时提供免费版（功能上较旗舰版有减少）。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;VS Code&lt;/strong&gt;&lt;br/&gt;VS Code是一款免费的、开源的、高性能的、跨平台的、轻量级的代码编辑器，同时，在性能，语言支持、开源社区方面也做的很不错！&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;开发技术&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;微服务框架&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Spring Cloud / Spring Cloud alibaba&lt;/strong&gt;&lt;br/&gt;Spring Cloud是一系列框架的有序集合。它利用Spring Boot的开发便利性巧妙地简化了分布式系统基础设施的开发，提供了全套微服务解决方案。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;RPC框架&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;RestTemplate&amp;amp;WebClient&lt;br/&gt;&lt;/strong&gt;Spring RestTemplate 是 Spring 提供的用于访问 Rest 服务的客户端&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;gRPC&lt;/strong&gt;&lt;br/&gt;GRPC是google开源的一个高性能、跨语言的RPC框架，基于HTTP2协议，基于protobuf 3.x的一款rpc框架。多种语言支持；支持链接复用，集群内可采用长链接；性能简单调优后，可满足多数业务场景需求。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;分布式事务&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Seata&lt;/strong&gt;&lt;br/&gt;阿里巴巴重点开源项目、Java开发、性能高、无锁、代码无侵入AT模式0代码、支持MT模式非事务型存储、社区活跃，版本更新快，使用简单！&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;流量控制、熔断降级&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Sentinel&lt;/strong&gt;&lt;br/&gt;阿里巴巴重点开源项目、Java开发、二次开发方便、社区活跃&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;API网关&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Spring Cloud Gateway&lt;/strong&gt;&lt;br/&gt;Spring首选、方便二次开发、支持异步非阻塞&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Kong&lt;/strong&gt;&lt;br/&gt;Kong是一款基于Nginx_Lua模块写的高可用，易扩展由Mashape公司开源的API Gateway项目。性能优异，插件丰富基本开箱即用，二开有一定的使用门槛。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;配置中心&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Nacos&lt;/strong&gt;：&lt;br/&gt;阿里巴巴重点开源项目、可同时作为注册/中心配置中心，简化技术栈、有完善管理界面、Java开发、二次开发方便、社区活跃、还在不断更新迭代。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Apollo&lt;/strong&gt;：&lt;br/&gt;是携程框架部门研发的分布式配置中心，能够集中化管理应用不同环境、不同集群的配置，配置修改后能够实时推送到应用端，并且具备规范的权限、流程治理等特性，适用于微服务配置管理场景。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;服务发现&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Nacos:&lt;/strong&gt;&lt;br/&gt;阿里巴巴重点开源项目、可同时作为注册/中心配置中心，简化技术栈、有完善管理界面、Java开发、二次开发方便、社区活跃、AP/CP模式，还在不断更新迭代。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Zookeeper&lt;/strong&gt;：&lt;br/&gt;ZooKeeper 是一个分布式的，开放源码的分布式应用程序协调服务，是Google的Chubby一个开源的实现，是Hadoop和Hbase的重要组件；性能可以满足较大规模的服务发现和配置中心，生效实时性高，不适合大规模实时数据同步场景；CP模式。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;监控&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Prometheus&lt;/strong&gt;&lt;br/&gt;功能较为全面的开源监控系统，CNCF技术栈、社区活跃&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Grafana&lt;/strong&gt;&lt;br/&gt;Grafana是一个开源的度量分析与可视化套件。纯 Javascript 开发的前端工具，通过访问库（如InfluxDB），展示自定义报表、显示图表等。大多使用在时序数据的监控方面，如同Kibana类似。Grafana的UI更加灵活，有丰富的插件，功能强大。界面简洁美观，支持自由定制，社区有丰富的Dashboard支持。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;SkyWalking&lt;/strong&gt;&lt;br/&gt;分布式追踪系统，国产链路跟踪、社区文档丰富，Apache顶级项目。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;日志&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;ELK&lt;/strong&gt;&lt;br/&gt;分布式服务日志处理，围绕elasticsearch构建的日志生态系统。使用广泛，扩展方便。配合kibana可以很方便对日志进行检索，定位线上问题。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;数据库中间&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;ShardingSphere&lt;/strong&gt;&lt;br/&gt;Apache ShardingSphere 定位为关系型数据库中间件，支持数据分片、读写分离、多数据副本、数据加密、影子库压测等功能；社区文档丰富，目前已经成为Apache顶级项目。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;序列化&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Jackson&lt;/strong&gt;&lt;br/&gt;Spring首选、稳定&lt;strong&gt;安全&lt;/strong&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;protobuf&lt;/strong&gt;&lt;br/&gt;Protocol Buffer( 简称Protobuf) 是google开源的一种轻便高效的结构化数据存储格式，可以用于结构化数据串行化，很适合做数据存储或RPC 数据交换格式。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;不建议使用fastjson&lt;/strong&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;开发工具&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;构建工具&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Maven:&lt;/strong&gt;&lt;br/&gt;主流的项目构建和管理工具，Maven是 Apache 下的一个纯 Java 开发的开源项目，是一个项目构建和管理的工具；它提供了帮助管理 构建、文档、报告、依赖、scms、发布、分发的方法。可以方便的编译代码、进行依赖管理、管理二进制库等等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Gradle&lt;br/&gt;&lt;/strong&gt;Gradle是一个基于Apache Ant和Apache Maven概念的项目自动化建构工具。Gradle 构建脚本使用的是 Groovy 或 Kotlin 的特定领域语言来编写,它可以自动处理包相依关系，自动处理布署问题，条件判断写法直觉。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;接口请求工具&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;postman&lt;/strong&gt;&lt;br/&gt;postman是一款功能强大的网页调试和模拟发送HTTP请求的Chrome插件，支持几乎所有类型的HTTP请求，操作简单且方便。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;容器&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Docker&lt;/strong&gt;&lt;br/&gt;是一个开源的应用容器引擎，基于 Go 语言 并遵从Apache2.0协议开源。Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。使用Docker可以带来以下几个优势：1. 更快速的交付和部署；2. 高效的部署和扩容；3. 更高的资源利用率；4. 简单的管理&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;集群管理&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Kubernetes&lt;/strong&gt;&lt;br/&gt;Kubernetes一个用于容器集群的自动化部署、扩容以及运维的开源平台。通过Kubernetes,你可以快速有效地响应用户需求;快速而有预期地部署你的应用;极速地扩展你的应用;无缝对接新应用功能;节省资源，优化硬件资源的使用。为容器编排管理提供了完整的开源方案。生态丰富，易扩展；功能丰富稳定，大公司背书；易上手。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;镜像管理工具&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Harbor&lt;/strong&gt;&lt;br/&gt;Harbor是个开源制品（artifact）仓库，是首个原创于中国、并且成为 CNCF 毕业级的开源项目。用户可通过策略和基于角色的访问控制来保护制品（如容器镜像、Helm Chart等），扫描镜像并避免受安全漏洞的危害。Harbor扩展了开源项目 Docker Distribution，添加了用户所需的功能（例如安全性，身份，漏洞扫描和管理）。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;运行环境&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;操作系统：&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Linux&amp;lt;CentOS 7+&amp;gt;&lt;/strong&gt;&lt;br/&gt;Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和UNIX的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的UNIX工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;Web服务器&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Tomcat&amp;lt;8+&amp;gt;&lt;/strong&gt;&lt;br/&gt;Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级应用服务器，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP 程序的首选。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Nginx&lt;/strong&gt;&lt;br/&gt;轻量级的Web 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;NodeJs&lt;/strong&gt;&lt;br/&gt;服务端JavaScript环境&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>22f757d6c4c12fdf56118b364c402f3b</guid>
<title>[推荐] 7 年，从 “游戏少年” 到大厂技术总监的逆袭之路</title>
<link>https://toutiao.io/k/9dk11zm</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;▲ &lt;/span&gt;&lt;span&gt;点击上方&quot;pointers&quot;&lt;/span&gt;&lt;span&gt;关注公众号&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.6671875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/4XQ0RVoHjpx5goZfBeXlEAXKs4NWzw4NicUh9cibYTkicNGvnKxDEic4tgm0CVlGYj9ib9o9FW4LGcpR7q3lEeA3yVA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;成长&amp;amp;认知 &lt;/span&gt;&lt;/strong&gt;丨 作者&lt;/span&gt;&lt;span&gt; / &lt;/span&gt;&lt;span&gt;袁吴范&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这是&lt;/span&gt;&lt;span&gt;&lt;strong&gt;pointers公众号&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;分享的第&lt;/span&gt;&lt;span&gt;&lt;strong&gt;21&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;篇原创文章&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;写了20篇原创文章，一直没有正式的介绍过自己，一方面粉丝太少，另一方面确实没有时间写。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;算一算在杭州已经有11个年头了。算是一个彻头彻尾的杭漂，现在已经在杭州安家立业。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;希望大家看过我的经历，能够给到北漂、深漂和杭漂们一些&lt;/span&gt;鼓&lt;span&gt;励。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;&lt;strong&gt; 1&lt;/strong&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;无知&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;我是浙江人，出生在浙北的一个普通农村家庭，按照我老婆的话说是自带土气，这恐怕是农村人与生俱来的气质了吧。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;从小家里条件不是很好，在我模糊的印象中，冬天家里总是断电，父亲就会肩扛竹竿，在竹林里寻找断开的电线，再用竹竿把两头断线接上。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当时年小的我还不知道这个小小操作是如此的危险，就是觉得父亲总是什么都能搞定。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;应该是“开窍”晚的原因吧，直到一年级前，还不会从1数到10，别人家的娃已经可以加减乘除了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在小学期间，&lt;/span&gt;&lt;span&gt;&lt;strong&gt;我的成绩表现的可以用糟糕来形容&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;小学的成绩一直排名垫底，行动表现上，一直后知后觉，呆头呆脑，用我妈的话说就是傻傻的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;从那个时候开始就被我妈一直用别人家娃来激励我。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;你看别人芳芳又拿三好学生了&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;你看别&lt;/span&gt;人&lt;span&gt;优优又考试第一名了。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;不过还好，我有一点还可以的，就是体育&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在四年级的时候还获得镇上同年级200米和50米短跑比赛的第一名。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;为此学校的领导还在国旗前给我了奖状。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;这个奖状也就成为我小学期间唯一的奖状，有点心酸。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;所以我一直认为在小学期间，体育是最重要的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;一般体育好的学生，文化课都不会差，就算现在差，以后也会追上来的。&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;&lt;strong&gt; 2&lt;/strong&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;懵懂&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;初中的时候，进入到了镇上的中心学校，这所学校在县里应该算是最差的那种了吧。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在学校里，我第一次看到了电脑，当时看这个屁股大大的东西，看着很高科技感觉。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当时并不知道，这还只是个显示器，主机是在桌子下面的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;初一开始有了电脑课，当时的电脑课的机房是这样的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.752&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4XQ0RVoHjpwNmxAHfN2Sm5WGKL0QEVndLcoxwMMaeYibBJr0dJ7ZacKlibQK5In8eRbvK5ITrPnBQO89nq2R0aRA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;500&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;用的已经是xp系统了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;01年xp系统发布，03年我初一，现在想想当时用的还是挺先进的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;最开始学习的就是word，然后还学了flash制作动画，我也不知道学校为什么让学这个。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;之前对电脑只是存在脑海中的一个静态画面，当我第一次看到电脑能够通过笨拙的鼠标控制，我被震撼了，还可以这样用？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;我就被这个样子看起来怪怪的东西，深深的吸引了。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;快速发展20年的互联网，让人感到唏嘘，新技术层出不穷，微软还是那么的能打，从pc时代到移动互联时代，强者恒强，office套件已经家喻户晓，而flash逐渐快被淘汰。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;扯远了，话题拉回来。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在当时，电脑课是我最喜欢的课程，因为我学的很快，每次课堂作业，都是第一个完成。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;就因为接受的比较快，还经常被老师在课堂上，点名表扬。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这在其他课上还不可能存在的。不被老师抓到办公室批评就不错了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在那时，就是比较简单的想法，下定决心，一定要熟练的操作电脑。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;就因为对电脑的热爱，心中的火苗彻底被点燃，学会了一样对我之后的发展影响极大的技能，就是&lt;/span&gt;&lt;span&gt;&lt;strong&gt;盲打字的习惯&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;高中&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;进入高中后，学习成绩突飞猛进，一直在前十的状态，在县里的排名一直在前100名。按照以前的经验，前60名，就可以进入浙大了。所以高中阶段，一直是把浙大当做我的大学目标。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;可是高考成绩彻底将我的梦击碎，我的成绩只高出一本线20分。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;那段时间，情绪一直比较低迷，感觉世界都要崩塌，又来经过家人、朋友和老师的辅导下，渐渐缓了过来。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;填报志愿时候，没有选择离开浙江，还是填报了杭州的一所双非学校。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;浙江只有一所985、211高校，大家都懂了吧，浙江的学生难啊。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt; 大学&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;进入大学之后，下定决定刻苦学习，发誓要考上浙大研究生，去实现自己未完成的梦。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;可我的毅力弱的性格，再一次击败了我。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;整个大学四年，都沉迷在dota这款游戏当中。就是下图这个，大家好好看看，是不是很熟悉？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.75&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/4XQ0RVoHjpwNmxAHfN2Sm5WGKL0QEVnddoQ0TicJDS7sDpgl9bVzPfiaWUNPVfWTssjw6Ea2c71U8icicBsHzm7rjw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1024&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;最疯狂的一次，在天梯平台上，为了冲分数，从早上的八点，一直打到第二天的晚上的八点。整整36个小时，除了上厕所没有离开过凳子。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;整个大学生涯中，除了必须要签到的课，其他的基本没有参加过。不过还好，我没有挂科，我总是能最后时间内，完成临时抱佛脚，考试通过。顺利完成了毕业。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;心心念念的考研，去浙大上学，在颓废中，逐渐的放弃了。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;&lt;strong&gt; 3&lt;/strong&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;初露锋芒&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我的人生转折点，是在毕业找工作的那段时间。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;找了好几个月，都是产线普工的岗位，或者是需要经常出差的技术支持岗，又或者是销售岗位。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;根本不是我想要做的研发岗。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;在一次和我妈妈电话的过程中，我哭了。这是我大学四年来第一次流泪。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;男儿有泪不轻弹啊&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;感谢残酷而又现实的社会，让我感受到了可能会饿死的危机感和城市中无法生存的绝望感。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这一下子就把我迷迷糊糊的脑子，彻底打醒了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;心灰意冷的我，我静下心想了一个星期，下定决心，给自己定了一个小目标&lt;/span&gt;&lt;span&gt;&lt;strong&gt;：一周之内把常见的面试题全部刷了一遍，先找一个小厂，干几年学到技术之后，最终跳槽去大厂。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;为了实现这个目标，我近乎疯狂的学习，每天睡4个小时。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;终于功夫不负有心人，有一家新成立的创业公司，面试期间，我表现出的基础能力得到了面试官的认可，顺利拿到了研发岗的offer。不知道那天晚上多开心，立即给我妈打电话报喜。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;那家创业公司是要开发一款智能机器人，带队的是浙大航天学院的一个副教授，擅长机器视觉。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这是我实现目标过程中的选择，我到现在都觉得是一个正确的选择，也感谢当时给我机会。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这里的氛围是科研氛围，感觉能够学到东西（虽然工资很低，但是当时没有考虑薪资方面，有自知之明，管饱就行）。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;接下来就是没日没夜的看书，弥补自己的大学欠下的债。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;晚上9点下班，骑车回家，洗漱好，10点钟看书到12点睡觉。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;早上6点起床，看书到9点，骑车上班。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;甚至不放过吃饭时间——边吃饭边看书，这样的状态一直持续了2年。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这是我毕业后，工作前期这个阶段，我觉得需要做到3点：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;1.深蹲&amp;amp;积累&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这个阶段，认知收益和认知成本的比值非常小。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;好在我自己深知能力积累的“非线性增长”规律，所以也并没有过于气馁和急躁，一直积攒着能量。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我觉得，造成我们和优秀同事之间的能力巨大鸿沟的决定性因素其实是“知识能力”积累到一定程度带来的自身增值速度。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;只有深蹲，积攒强大的能量，在某个时刻能瞬间打通了任督二脉，厚积薄发，职场中一路飙升。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;2.整合&amp;amp;建立认知链接&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我认识到了积累的重要性了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;但是对不起，即便是日以继夜的积累，也可能达不到能力提升的目的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;最好还差一步，就是需要系统性思维。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过长期积累的知识并没有纳入到你自己的知识体系中去，他们还只是单纯的孤立的知识点。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们的记忆本质就是记忆逻辑，也就是记忆关联。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们需要将新知识和已有的认知进行连接。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这样才能达到融会贯通，才能达到信手拈来的程度。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;那如何培养自己的系统思维呢？&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我自己的学习方式是每当我学习到一个全新知识的时候，我会去思考这个知识点与我脑中现有的知识系统有何联系。然后再去想，我该去如何使用这些知识。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;打一个比方。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我学习数据结构的时候，其中有链表，二叉树等等，这时候你就要去想，这些数据结构是怎么使用的？在你的工作中哪些地方可以用到。跟你脑中的已经学习到的例如Linux内核有关系吗？是不是Linux内核中也使用这些数据结构？内核中为什么要这样使用的？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过这一番深度思考之后，是不是对知识的理解更加深刻，也就真正成为了我自己的东西了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;仔细想想为什么常常我们道理都明白，却很难做到？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;其实很多时候我们都犯了一个巨大的错误，那就是误把“知道”当作“明白”或者“感悟”。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;想知道，道理很容易，那些祖训大家都耳熟能详，但往往真正明白并内化到自己的骨子里却需要付出不少的精力。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;再看极少数身边优秀的人，在年轻时就能把这些有价值的道理真正内化到了自己的行动上，不得不说这才是他们身上一直被人们忽略的最大的天赋。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3.起跳&amp;amp;突破&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;不要满足于当前的得过且过状态，你身边的同事们正在暗暗较劲，拼劲学习，努力积累经验。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;此时将你们进行横向对比，确实差别不大。正所谓逆水行舟不进则退，倘若再过几年呢？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在认知收益和认知成本比值不断增大的情况下，在温水煮青蛙的状态下，在你还没有意识到时，对方能力的已经把你甩的老远。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;此时，对方已经开始崭露头角，领导的资源就慢慢向他倾斜。那时，你该如何是好呢？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;不要在本该奋斗的年纪选择安逸，那样以后的路越来越难走。天底下没有速成的秘诀，没有捷径可走。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;时刻保持危机感，设立高标准，严格要求自己。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;你要相信，能力是存在跃升，只是时间未到，多点耐心。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;你要相信，认知收益和成本会急剧的增大，要多积累。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;你要对自己的认知进行整合，建立认知链接，打造自己的知识体系。&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;&lt;strong&gt; 4&lt;/strong&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;披荆斩棘&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在这小厂的2年时间内，我就像井底的青蛙，&lt;/span&gt;&lt;span&gt;&lt;strong&gt;虽然练就了“一身武艺”&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;，但并不知道外面大厂的流程制度规范，技术能力到底是怎样的情况。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;所以，我决定跳出这个小圈子，去外面看一看、闯一闯。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;后来大家也知道了，我进入了海康。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1.赢得好印象&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;进入海康，第一件事情就是，赢得好印象。怎么做呢？&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;刚来第一个月里，一般情况下就是熟悉团队氛围和公司制度、文化的阶段，而我发现代码中的兼容性、扩展性都比较差，而且耦合特别大。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;就强制要求自己每天早上非常早的就来公司，晚上几乎11、12点下班，在一个月时间内就输出了一份软件架构方案，递到了领导的手上。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;最后虽然方案还是有漏洞，但是大的问题没有，在第二年就慢慢切换使用我设计的架构。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过这件事情，我获得了什么？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;在领导、同事心里：“能力强”，“有拼劲”，“执行力强”的标签，就一直伴随着我。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;获取正面的标签，这还不够，还需要做一件事情，&lt;/span&gt;&lt;span&gt;&lt;strong&gt;持续增加曝光&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;好印象=好的第一印象＋持续增加曝光&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当时作为新员工进来，一直非常的拼，在别人的印象中就是有拼劲，同时能力非常强，而且这种状态一直保持了5年，这就是持续地曝光。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;凡是都是有因果的，没有无缘无故的成功，只是很多的“因”由于自身的认知局限而被忽视了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这个阶段，我已经完成了领导心中的好印象。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;我要成功真正的管理者，必须要完成管理跃升&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2.完成管理跃升&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这次的跃升，是我真正叩开了管理的大门。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;虽然只是叩开了大门，但这对我来说，是整个能力系统的改变。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当我还是个人贡献者时，我的能力是这样的：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;发现问题、解决问题、总结和反思&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;而我是基层管理者时，我的能力要求，完全发生了变化：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;自己的工作发生了彻底的变化，要求变成了&lt;/span&gt;&lt;span&gt;协调、组织、反馈&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;所以下面这4个升级一定要做到。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;第一个升级，叫责任升级&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在个人贡献者的时候，我是对任务负责，领导交给我一件事情，把任务的细节和deadline告诉我。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我只需要在deadline之前，把这件事干好，就OK了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;例如：领导让我开发一个界面，开发一个测试工具等等。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;而现在我需要对这个事情的结果负责。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;也就是，同样是一样事情，不是由我亲自去干，而是由我分配任务给到下属，教练指导下属去完成这个任务，&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这个任务的结果好坏都是由我自己来承担&lt;/span&gt;&lt;span&gt;。 &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;切记中间多坎坷，作为基层管理者，都需要想方设法的达成目标&lt;/span&gt;&lt;span&gt;，因为这是你的责任。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;第二个升级，叫做行动升级&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;现在从单打独斗，成为了一个团队的管理者。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;作为一个新经理，总是会犯的一个错误，就是“总是觉得别人做的不好，自己亲自来”。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这个想法是非常愚蠢的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;一个人能力再强，也干不过一个有组织的团队。 &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;例如：&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;有一次一个系统崩溃问题，我并没有亲自去解决，而是&lt;/span&gt;&lt;span&gt;安排好计划，定好合适的责任人，下达任务命令。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;记住，千万不要替代他们解决问题。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;第三个升级，叫做协作升级&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在个人贡献者时，我的工作关系，比较简单，组内同事和领导。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当成为管理者时，工作关系，会变得复杂，领导、下属、兄弟同事、外部客户等。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这时候的协作方式就需要发生大的变化，我不仅仅需要考虑下属和领导，还需要考虑其他外部关系。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;在这期间我组织完成了一件重大的技术方案落地的项目，项目人员涉及到全公司各个领域，公共项目人员在&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;+人。关系变得复杂，工作的协作方式也需要升级。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;从单纯的组内同事之间的技术协作，升级为组间的配合协作和技术协作的混合模式。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;从封闭的协作范围，升级为开发的协作范围。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;关注的不仅仅是组内的工作，还需要考虑其他部门的工作情况。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;正如数学概念中的面升级到立体三维空间，协作方式也需要进行全新的升级&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;第四个升级，叫做成就升级&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我从个人成就，升级到团队成就。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过我的管理，我的下属持续成长，团队能力越来越强，这就是团队成就。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;作为基层管理者，只是单单做到个人成就，不注重成就下属，我们的团队是很难做强的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;一个团队的不强，想想你还能晋升吗？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;作为一个团队的老大，需要有成就下属的胸怀，才能走的更远。&lt;/span&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;span&gt;就这样，&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;年时间，我完成了&lt;/span&gt;&lt;span&gt;责任升级，行动升级，协作升级，成就升级&lt;/span&gt;&lt;span&gt;，这个阶段也算真正的一名管理者了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;最终，&lt;/span&gt;&lt;span&gt;事实也证明了，&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;年后，也就是&lt;/span&gt;&lt;span&gt;2018&lt;/span&gt;&lt;span&gt;年，我成功晋升为技术经理，带领着10+人的团队。&lt;/span&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;&lt;strong&gt; 5&lt;/strong&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;笑傲江湖&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2018年至2020年，这段时间是我的另一次的自我进化。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我称之为领导跃升。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;我从技术经理晋升到了技术总监。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这次跃升，是从基层管理者，跃升到团队的领导者。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;成为领导者需要从局部把控，变为对全局的掌握，领导团队运筹帷幄，披荆斩棘，以弱胜强，最终走向胜利。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我是从下面2个升级，完成了这个跃升。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;第一个就是战略升级。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;战略相对于战术，而战术只为实现战略的手段之一，基层管理者做的就是战术。 &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;争一时之长短，用战术就可以达到！如果是“争一世之雌雄”，就需要从全局出发去规划，这就是战略！&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;什么意思？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;运用到企业管理上就是要”&lt;/span&gt;&lt;span&gt;做正确的事情&lt;/span&gt;&lt;span&gt;“。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;而团队领导者，最重要的职责，是制定部门的战略目标、组织文化建设。 &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;要完成什么目标，怎么和供应商合作？规划未来3到5年做什么。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;团队需要怎样的组织架构，需要怎样的文化氛围等等。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;第二个就是影响力升级&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;影响力是用一种别人所乐于接受的方式，改变他人的思想和行动的能力。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;影响力，是一个非常重要的武器。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我通过影响力，建立了部门内的文化价值观，愿景，并且以身作则，激励团队，可以产生巨大的凝聚力。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;我们的团队正在破釜沉舟，越战越勇，期待我们部门分拆，独立上市的一天到来&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;&lt;strong&gt; 6&lt;/strong&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;em&gt;—&lt;/em&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;最后&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们职场生涯就是一次次对自己能力重构的过程，保持持续突破。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当你学会了走路，就要想学着跑步，当你学会了跑步，就要想着到水里，学着游泳。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;一直在不断的超越自我的路上，终生学习。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我是袁吴范，帮助你提升认知和能力提升。&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-right: 8px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; background-color: rgb(255, 255, 255); box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__134&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-right: 8px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; background-color: rgb(255, 255, 255); box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__135&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;em&gt;&lt;span&gt;推荐阅读（干货）&lt;/span&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-right: 8px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; background-color: rgb(255, 255, 255); box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__135&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NzUxMTgwNQ==&amp;amp;mid=2247484039&amp;amp;idx=1&amp;amp;sn=64ff331bd87889216754aa60311a493e&amp;amp;chksm=cf209795f8571e83b586a3211a4bea0343b053ba347ccb5c6b89b4c410a396ce90ee23049de5&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;面试过200人的经验，都在这里了&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-right: 8px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; background-color: rgb(255, 255, 255); box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__135&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NzUxMTgwNQ==&amp;amp;mid=2247484027&amp;amp;idx=1&amp;amp;sn=fb6fe35037e1693bf0f1c0a81d059bdc&amp;amp;chksm=cf209769f8571e7f311b5195d1f4c8fc1dc7f6905375bbdc6b0afbec0abc4775889b1012db7c&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;程序员成为高级管理者的三次跃升&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-right: 8px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; background-color: rgb(255, 255, 255); box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__135&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NzUxMTgwNQ==&amp;amp;mid=2247484011&amp;amp;idx=1&amp;amp;sn=e52d915760314e3300c145039ede831b&amp;amp;chksm=cf209779f8571e6f81be5951b70607c2a2518fd0fc94c80c8f96c3331f82bdd6e07807179ce4&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;技术总监7年总结，如何进行正确的沟通？&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-right: 8px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; background-color: rgb(255, 255, 255); box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__135&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;hr/&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot; data-style=&quot;margin-right: 8px; margin-bottom: 10px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; color: rgb(77, 77, 77); font-size: 16px; background-color: rgb(255, 255, 255); line-height: 25.5px; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__141&quot;&gt;&lt;span&gt;从业7年。从软件开发、高级软件开发、技术经理再到技术总监，分享职业发展、技术管理、职场晋升、技术成长等个人多年经验和心得。一起成长！有问题可以加我微信交流：&lt;/span&gt;&lt;span&gt;&lt;strong data-darkmode-bgcolor-16029336602567=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16029336602567=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16029336602567=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16029336602567=&quot;rgb(77, 77, 77)&quot; data-darkmode-bgcolor-16030173785544=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030173785544=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030173785544=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16030173785544=&quot;rgb(77, 77, 77)&quot; data-style=&quot;max-width: 100%; background-color: rgb(255, 255, 255); color: rgb(77, 77, 77); font-size: 14px; letter-spacing: 0.544px; white-space: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__145&quot; data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot;&gt;pointersss&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot; data-style=&quot;margin-right: 8px; margin-bottom: 10px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; color: rgb(77, 77, 77); font-size: 16px; background-color: rgb(255, 255, 255); line-height: 25.5px; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__146&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot; data-style=&quot;margin-right: 8px; margin-bottom: 10px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; color: rgb(77, 77, 77); font-size: 16px; background-color: rgb(255, 255, 255); line-height: 25.5px; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__148&quot;&gt;&lt;span&gt;&lt;strong data-darkmode-bgcolor-16029336602567=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16029336602567=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16029336602567=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16029336602567=&quot;rgb(77, 77, 77)&quot; data-darkmode-bgcolor-16030173785544=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030173785544=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030173785544=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16030173785544=&quot;rgb(77, 77, 77)&quot; data-style=&quot;max-width: 100%; background-color: rgb(255, 255, 255); color: rgb(77, 77, 77); font-size: 14px; letter-spacing: 0.544px; white-space: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__149&quot; data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot;&gt;关注我&lt;strong data-darkmode-bgcolor-16029336602567=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16029336602567=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16029336602567=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16029336602567=&quot;rgb(77, 77, 77)&quot; data-darkmode-bgcolor-16030173785544=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030173785544=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030173785544=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16030173785544=&quot;rgb(77, 77, 77)&quot; data-style=&quot;max-width: 100%; background-color: rgb(255, 255, 255); color: rgb(77, 77, 77); font-size: 14px; letter-spacing: 0.544px; white-space: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__149&quot; data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot;&gt;↓&lt;/strong&gt;&lt;strong data-darkmode-bgcolor-16029336602567=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16029336602567=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16029336602567=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16029336602567=&quot;rgb(77, 77, 77)&quot; data-darkmode-bgcolor-16030173785544=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030173785544=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030173785544=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16030173785544=&quot;rgb(77, 77, 77)&quot; data-style=&quot;max-width: 100%; background-color: rgb(255, 255, 255); color: rgb(77, 77, 77); font-size: 14px; letter-spacing: 0.544px; white-space: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__149&quot; data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot;&gt;↓&lt;/strong&gt;，帮你答疑解惑！&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot; data-style=&quot;margin-right: 8px; margin-bottom: 10px; margin-left: 8px; white-space: normal; max-width: 100%; font-family: -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; letter-spacing: 0.544px; color: rgb(77, 77, 77); font-size: 16px; background-color: rgb(255, 255, 255); line-height: 25.5px; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__148&quot;&gt;&lt;span data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot;&gt;&lt;strong data-darkmode-bgcolor-16029336602567=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16029336602567=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16029336602567=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16029336602567=&quot;rgb(77, 77, 77)&quot; data-darkmode-bgcolor-16030173785544=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030173785544=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030173785544=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16030173785544=&quot;rgb(77, 77, 77)&quot; data-style=&quot;max-width: 100%; background-color: rgb(255, 255, 255); color: rgb(77, 77, 77); font-size: 14px; letter-spacing: 0.544px; white-space: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__149&quot; data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(153, 153, 153)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(77, 77, 77)&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/4XQ0RVoHjpx4fJoOHia8o9pebg6ffoYJ3SueWibyfyfUpyBqtcmMwSUg5DrJ3bXLPnhrJya3Xjk0JHkJ9uJu7IrA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-ratio=&quot;1&quot; data-w=&quot;430&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span data-darkmode-bgcolor-16033270487548=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16033270487548=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16033270487548=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16033270487548=&quot;rgb(49, 49, 49)&quot; data-style=&quot;max-width: 100%; color: rgb(49, 49, 49); font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot; class=&quot;js_darkmode__1&quot;&gt;觉得不错，记得关注、转发和在看！多年经验分享，实属不易，感谢支持！&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section&gt;&lt;mp-qa class=&quot;js_uneditable custom_select_card qa_iframe&quot; data-pluginname=&quot;insertquestion&quot; data-id=&quot;1609666334655643654&quot; data-bizuin=&quot;Mzg3NzUxMTgwNQ==&quot; data-title=&quot;只求点个在看，谢谢啦！&quot;/&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>d827e236b6a0f8512fcd66587d7cded6</guid>
<title>[推荐] 超全面分布式缓存高可用方案：哨兵机制</title>
<link>https://toutiao.io/k/1k0udg9</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;1&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;2&quot;&gt;开发工作中对于分布式缓存高可用方案（搭建Redis缓存高可用方案），Redis主从架构下是如何保证高可用的呢？&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;3&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;4&quot;&gt;我们知道是应用了哨兵机制来实现。那Redis 服务部署的哨兵模式主要是什么，又解决了什么问题呢，于是利用周末时间整理了下，相信看完这篇文章，你也可以去给别人做技术分享了。O(∩_∩)O哈哈~&lt;/span&gt;&lt;/p&gt;&lt;h2 data-id-heading0=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;5&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;6&quot;&gt;问题铺垫&lt;/span&gt;&lt;/h2&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;7&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;8&quot;&gt;在讨论哨兵模式之前，我们先来看一个应用问题：&lt;span data-slate-leaf=&quot;true&quot; data-offset-key=&quot;9:0&quot; data-first-offset=&quot;true&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;Redis服务主机宕机&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;10&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;11&quot;&gt;实际使用过程中，会出现master宕机的情况（这样会导致没有写服务，只有读服务）。那我们要保证服务的可用，就需要从其他salve节点中选取一个来作为master节点，来继续提供服务能力。&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;12&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;13&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;那主要的动作抽象下：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;12&quot;&gt;&lt;span&gt;将宕机的master下线&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;12&quot;&gt;&lt;span&gt;找一个slave作为master&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;12&quot;&gt;&lt;span&gt;通知所有的slave连接新的master&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;12&quot;&gt;&lt;span&gt;全量数据或者部分数据同步&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;27&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;28&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;其中存在几个问题：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;39&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;40&quot;&gt;其实引入&lt;span data-slate-leaf=&quot;true&quot; data-offset-key=&quot;41:0&quot; data-first-offset=&quot;true&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;哨兵机制&lt;/strong&gt;&lt;/span&gt;，就可以很好的解决上述问题。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.4745011086474501&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgRzuof9uYrBaBicdVQUFNKQGeE7b36CFd05okdB5QbQjNicl4DjZaHu0HTtZluCRXb33ycxDnMHTTHg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;902&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;哨兵-Redis集群&lt;/span&gt;&lt;/p&gt;&lt;h2 data-id-heading1=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;46&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;47&quot;&gt;什么是哨兵？&lt;/span&gt;&lt;/h2&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;48&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;49&quot;&gt;Sentinel（哨兵）是Redis 的高可用性解决方案：由一个或多个Sentinel 实例组成的Sentinel 系统可以监视任意多个主服务，以及这些主服务器属下的所有从服务，并在被监视的主服务进入下线（不可服务）状态时，自动将下线主服务器属下的某个从服务器升级为新的主服务器。&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;50&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;51&quot;&gt;﻿&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;52&quot;&gt;&lt;span&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;总结一下哨兵的作用：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;58&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;59&quot;&gt;    不断的检查master和slave是否正常运行（master存活检测、master与slave运行情况检测）&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;64&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;65&quot;&gt;    当被监控的服务器出现问题时，向其他哨兵、客户端发送通知&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;70&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;71&quot;&gt;    断开故障master与slave的连接，选取一个slave作为新master，将其他slave连接到新的master并告知客户端新的服务器地址。&lt;/span&gt;&lt;/p&gt;&lt;blockquote data-slate-type=&quot;pm_blockquote&quot; data-slate-object=&quot;block&quot; data-key=&quot;74&quot;&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;75&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;76&quot;&gt;注意：哨兵也是一台Redis服务器，只是不提供数据服务；通常哨兵配置的数量为单数。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-id-heading2=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;77&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;78&quot;&gt;哨兵的工作原理&lt;/span&gt;&lt;/h2&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;79&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;80&quot;&gt;下面主要针对哨兵在进行故障转移过程中经历的三个阶段分别进行阐述。&lt;/span&gt;&lt;/p&gt;&lt;h3 data-id-heading3=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;81&quot;&gt;&lt;span&gt;1、集群监控&lt;/span&gt;&lt;/h3&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;83&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;84&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;step1：哨兵1连接到Redis集群&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;83&quot;&gt;&lt;span&gt;发送info命令到master，并建立cmd连接；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;83&quot;&gt;&lt;span&gt;哨兵端保存哨兵状态（SentinelStatus），保存所有哨兵状态，主节点和从节&lt;/span&gt;&lt;span&gt;点的信息；master端会记录 redis 实例的信息（SentinelRedisInstance）；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;83&quot;&gt;&lt;span&gt;哨兵根据master中获取的每个slave信息，去连接每个slave，发送同样也是info命令。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5700197238658777&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgRzuof9uYrBaBicdVQUFNKQGxxPLNq0TXY3mJAGKUGGVJywOJazQmAvGFTUicJdozhhPuc2PADdSQtg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1014&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;集群监控&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;96&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;97&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;step2：哨兵2加入进来后&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;96&quot;&gt;&lt;span&gt;同样会发送info命令到master节点，并建立cmd连接；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;96&quot;&gt;&lt;span&gt;发现master中存在其他哨兵节点的信息，哨兵2中保存哨兵信息（区别与哨兵1的是它保存了哨兵1和哨兵2的2个哨兵节点信息）；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;96&quot;&gt;&lt;span&gt;为了每个哨兵的信息都一致它们之间建立了一个发布订阅。为了哨兵之间的信息长期对称它们之间也会互发 ping 命令。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.46991869918699186&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgRzuof9uYrBaBicdVQUFNKQGlojD0ib1yRRRG9n5Kp2y12BleUZjsmC7t0aY3IB1XCic99ZbKR0tczPg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1230&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;集群监控&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;111&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;112&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;step3：哨兵3加入后&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.6419354838709678&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgRzuof9uYrBaBicdVQUFNKQGZt1atOq0us0xswSM2DQ1ahy13bgE5Y75lXS46oo2jZo9vTqUvwFibpA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;集群监控&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;123&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;124&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;小结一下：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3 data-id-heading4=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;132&quot;&gt;&lt;span&gt;2、消息通知&lt;/span&gt;&lt;/h3&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;134&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;135&quot;&gt;1）Sentinel节点会通过master/slave 节点建立的cmd连接获取其工作状态&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;136&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;137&quot;&gt;2）Sentinel收到反馈结果之后，会在哨兵内部进行信息的互通&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.4048059149722736&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgRzuof9uYrBaBicdVQUFNKQG8bwmsMVNqs7DysCvA5Nps2UHSop6fbYAzyDJiby1oGZDcmyniabPeh7Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1082&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;消息通知&lt;/span&gt;&lt;/p&gt;&lt;h3 data-id-heading5=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;141&quot;&gt;&lt;span&gt;3、故障转移&lt;/span&gt;&lt;/h3&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;143&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;144&quot;&gt;关于故障转移，严格来讲可划分两个步骤：&lt;span data-slate-leaf=&quot;true&quot; data-offset-key=&quot;145:0&quot; data-first-offset=&quot;true&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;故障判定&lt;/strong&gt;&lt;/span&gt;、&lt;span data-slate-leaf=&quot;true&quot; data-offset-key=&quot;147:0&quot; data-first-offset=&quot;true&quot;&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;故障转移&lt;/strong&gt;&lt;/span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;h4 data-id-heading6=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;149&quot;&gt;&lt;span&gt;Q1：如何判断一个节点出现故障？&lt;/span&gt;&lt;/h4&gt;&lt;blockquote data-slate-type=&quot;pm_blockquote&quot; data-slate-object=&quot;block&quot; data-key=&quot;155&quot;&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;156&quot;&gt;&lt;span&gt;直到主节点故障，哨兵报出 sdown，同时此哨兵还会向其他哨兵发布消息说这个主节点挂了。发送的指令是 sentinel is-master-down-by-address-port。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-slate-type=&quot;pm_blockquote&quot; data-slate-object=&quot;block&quot; data-key=&quot;164&quot;&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;165&quot;&gt;&lt;span&gt;其余的哨兵也会发送他们收到的信息并且发送指令 sentinel is-master-down-by-address-port 到自己的内网，确认一下第一个发送 sentinel is-master-down-by-address-port 的哨兵说你说的对，这个家伙确实挂了。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-slate-type=&quot;pm_blockquote&quot; data-slate-object=&quot;block&quot; data-key=&quot;173&quot;&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;174&quot;&gt;&lt;span&gt;当一个哨兵认为主节点挂了标记的是 sdown，当半数哨兵都认为挂了其标记的状态是 odown。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;176&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;177&quot;&gt;﻿&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;178&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;179&quot;&gt;一个哨兵认为master节点挂了称为主观下线（sdown），超半数哨兵认为master节点挂了则称为客观下线（odown）。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.46855345911949686&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgRzuof9uYrBaBicdVQUFNKQGpV8htDDEVhmloCiahrbBbCDTGp7dulSXEe8HOicP9aEPzZXVz1tJ7Tag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1272&quot;/&gt;&lt;/p&gt;&lt;h4 data-id-heading7=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;183&quot;&gt;&lt;span&gt;Q2：如何进行故障转移？&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;1）首先，哨兵选举出哨兵Leader去处理故障转移&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt; 此时选举方式应用的是Raft协议，这个之前有过介绍，感兴趣的同学可以移步了解：&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA3MDg5MDkzOA==&amp;amp;mid=2448762601&amp;amp;idx=1&amp;amp;sn=8bfef19e832b46b423d7e48bdf836ed4&amp;amp;chksm=8b34623cbc43eb2a5abcf0a6e40c1c01d36929e4052cb9f77f82cc0c19fa9870e433c7cc8224&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;一致性算法Raft 简易入门&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;2）其次，哨兵Leader从所有的slave节点找出一个作为master节点&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;193&quot;&gt;&lt;span&gt;主要的规则：&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;207&quot;&gt;&lt;span&gt;假如以上优先级均一致，会考虑其他优先原则：&lt;/span&gt;&lt;/p&gt;&lt;blockquote data-slate-type=&quot;pm_blockquote&quot; data-slate-object=&quot;block&quot; data-key=&quot;213&quot;&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;214&quot;&gt;&lt;span&gt;假如说 slave1 的 offset 为 50，slave2 偏移量为 55，则哨兵就会选择 slave2 为新的主节点。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-slate-type=&quot;pm_blockquote&quot; data-slate-object=&quot;block&quot; data-key=&quot;222&quot;&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;223&quot;&gt;&lt;span&gt;这点类似于职场中的论资排辈，也就说根据 runid 的创建时间来判断，时间早的先上位。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;225&quot;&gt;&lt;span&gt;﻿&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;227&quot;&gt;&lt;span&gt;&lt;strong data-slate-type=&quot;pm_bold&quot; data-slate-object=&quot;mark&quot;&gt;3）数据转移&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h2 data-id-heading8=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;236&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;237&quot;&gt;总结&lt;/span&gt;&lt;/h2&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;238&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;239&quot;&gt;Redis 主从复制的作用中有这么一句话“主从复制是高可用的基石”，那实现高可用必不可少的就是哨兵和集群。&lt;/span&gt;&lt;/p&gt;&lt;h3 data-id-heading9=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;240&quot;&gt;&lt;span&gt;1、Sentinel的作用&lt;/span&gt;&lt;/h3&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;246&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;247&quot;&gt;不断的检查master和slave是否正常运行（master存活检测、master与slave运行情况检测）&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;252&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;253&quot;&gt;当被监控的服务器出现问题时，向其他哨兵、客户端发送通知&lt;/span&gt;&lt;/p&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;258&quot;&gt;&lt;span data-slate-object=&quot;text&quot; data-key=&quot;259&quot;&gt;断开故障master与slave的连接，选取一个slave作为新master，将其他slave连接到新的master并告知客户端新的服务器地址。&lt;/span&gt;&lt;/p&gt;&lt;h3 data-id-heading10=&quot;&quot; data-slate-type=&quot;pm_heading&quot; data-slate-object=&quot;block&quot; data-key=&quot;260&quot;&gt;&lt;span&gt;2、Sentinel的工作方式&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;blockquote data-slate-type=&quot;pm_blockquote&quot; data-slate-object=&quot;block&quot; data-key=&quot;269&quot;&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;270&quot;&gt;&lt;span&gt; 若 Master 重新向 Sentinel 的 PING 命令返回有效回复， Master 的主观下线状态就会被移除。&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-slate-type=&quot;pm_blockquote&quot; data-slate-object=&quot;block&quot; data-key=&quot;279&quot;&gt;&lt;p data-slate-type=&quot;pm_paragraph&quot; data-slate-object=&quot;block&quot; data-key=&quot;280&quot;&gt;&lt;span&gt;若没有足够数量的 Sentinel 同意 Master 已经下线， Master 的客观下线状态就会被移除。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;hr/&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;span&gt;往期热文推荐：&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;98311&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;img data-cropselx1=&quot;0&quot; data-cropselx2=&quot;395&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;395&quot; data-ratio=&quot;0.36484375&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSxEpr7AzM5lGCicdEjfuE6jaiae9Rmj1CVCg85GJKaFKuico89ZlnhGicQiciciccOiaqVibE5cmKXwO1AOuA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot; data-width=&quot;100%&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;87502&quot;&gt;&lt;p&gt;&lt;span&gt;「技术架构精进」专注架构研究，技术分享&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Thanks for reading!&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>