<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>867de09290fc3ab1701a851685419bd7</guid>
<title>[推荐] 架构设计：基于消息中间件，图解柔性事务一致性</title>
<link>https://toutiao.io/k/ok2i1z8</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;h1&gt;&lt;span&gt;一、最大努力通知&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;TCC分段提交适用分布式架构中对一致性、实时性要求较高的业务场景，在实际业务中也存在实时性比较低的业务，例如常见的短信通知，客户端消息，运营体系更新等业务，这时候为了减轻核心流程的复杂度和压力，可以采取最大努力通知方式实现柔性事务的管理。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.576530612244898&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvCvdaJS9E9nCiaEZuDlOjFIxHh421rsdjTgmapvmHlTs9x1ckxW7SIbO9PxziaVTO8fE1hkFodZNaHg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;784&quot;/&gt;&lt;/p&gt;&lt;p&gt;例如常见的第三方支付业务中，本地业务和支付端业务处理完成之后都会生成消息通知，基本流程如下：&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;本地业务预处理完成之后；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;请求第三方支付服务；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;支付操作成功对该账号发送消息；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;支付服务回调本地业务；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;本地业务生成系统通知消息；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;上述流程的消息场景中有一些基础特点，在核心业务处理完成之后，发送消息通知，允许失败，在指定时间段内或者指定重试次数之后，允许消息丢失情况存在，即消息的不可靠性。&lt;/p&gt;&lt;p&gt;在实际的支付系统中，启动每日对账校验时会对当日的流水做校验，如果发现支付流水有未完成的流程，会有状态弥补，后续可以继续处理，这种手段在对账中很常用。&lt;/p&gt;&lt;h1&gt;&lt;span&gt;二、可靠消息&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;分布式事务基于可靠消息最终一致性的实现方案，既然是可靠消息，则要求MQ必须支持事务管理，这样才能保证业务前后一致性。&lt;/p&gt;&lt;h2&gt;&lt;span&gt;1、RocketMQ事务消息&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;RocketMQ在4.3版中开始支持分布式事务消息，采用2PC的思想来实现了提交事务消息，同时增加一个补偿逻辑来处理二阶段超时或者失败的消息，如下图所示：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.474155069582505&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvCvdaJS9E9nCiaEZuDlOjFIxhvPXfGzPGJ9VbdYsFTpdbDtAiaTYnpxEoE5MkbbfRdj5MGej5vVRubQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1006&quot;/&gt;&lt;/p&gt;&lt;p&gt;上图说明了事务消息的大致方案，其中分为两个流程：正常事务消息的发送及提交、事务消息的补偿流程。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1.1 发送及提交&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;(1)发送消息(half消息，即发送但不被消费);&lt;/p&gt;&lt;p&gt;(2)服务端响应消息写入结果;&lt;/p&gt;&lt;p&gt;(3)根据发送结果执行本地事务,如果写入失败，此时half消息对业务不可见，本地逻辑不执行;&lt;/p&gt;&lt;p&gt;(4) 根据本地事务状态执行Commit或者Rollback（Commit操作生成消息索引，消息对消费者可见）&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1.1 补偿流程&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;(1)对没有Commit/Rollback的事务消息（pending状态的消息），从服务端发起一次“回查”;&lt;/p&gt;&lt;p&gt;(2)Producer收到回查消息，检查回查消息对应的本地事务的状态;&lt;/p&gt;&lt;p&gt;(3)根据本地事务状态，重新Commit或者Rollback;&lt;/p&gt;&lt;p&gt;其中，补偿阶段用于解决消息Commit或者Rollback发生超时或者失败的情况。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1.3 设计原理&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;在RocketMQ事务消息的主要流程中，一阶段的消息如何对用户不可见。其中，事务消息相对普通消息最大的特点就是一阶段发送的消息对用户是不可见的。那么，如何做到写入消息但是对用户不可见呢？RocketMQ事务消息的做法是：如果消息是half消息，将备份原消息的主题与消息消费队列，然后改变主题为RMQ_SYS_TRANS_HALF_TOPIC。由于消费组未订阅该主题，故消费端无法消费half类型的消息，然后RocketMQ会开启一个定时任务，从Topic为RMQ_SYS_TRANS_HALF_TOPIC中拉取消息进行消费，根据生产者组获取一个服务提供者发送回查事务状态请求，根据事务状态来决定是提交或回滚消息。&lt;/p&gt;&lt;h2&gt;&lt;span&gt;2、最终一致性&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;基于上述RocketMQ事务消息可靠性的特点，即可以实现某类业务下事务的最终一致性。消息发送一致性是指产生消息的业务动作与消息发送一致，也就是说如果业务操作成功，那么由这个业务操作所产生的异步消息一定要发送出去，否则就业务失败回滚，消息也会丢弃。&lt;/p&gt;&lt;p&gt;流程基本如下：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6916488222698073&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvCvdaJS9E9nCiaEZuDlOjFIxH1kA3mHO1O1FsXGC8icbXdCmeuQU5FFMKjAwErwXJzJRiaOQ8t4D7SJg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;934&quot;/&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;发送half事务消息，无法被消费；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;本地业务代码逻辑处理完成；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;发送确认消息，标识该消息可以消费；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;如果消息生产方异常，取消整体动作；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;该流程主要针对消息生产方，在实际开发中，消息的消费方也一样很难处理，要保证最终一致性，必然会面对一个问题，消费方异常，消息不断的重试，可能存在部分业务处理成功，部分业务处理失败的情况，这时候就要解决服务接口的幂等性问题。&lt;/p&gt;&lt;h1&gt;&lt;span&gt;三、幂等接口&lt;/span&gt;&lt;/h1&gt;&lt;h2&gt;&lt;span&gt;1、幂等简介&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;编程中一个幂等操作的特点是其任意多次执行所产生的影响均与一次执行的影响相同。就是说，一次和多次请求某一个资源会产生同样的作用影响。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5102040816326531&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvCvdaJS9E9nCiaEZuDlOjFIx2ia9lqYbafUVQPO1VwEdY2EfK7qTpcicKlh5f9Un8F2qdNDpnhHRpFcg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;980&quot;/&gt;&lt;/p&gt;&lt;p&gt;在复杂的异步流程中，尤其注意失败重试问题，通常支付流程中，每次接口被请求，对每一步数据更新的操作，都会前置一步状态查询的流程，用来判断下一步的数据更新是否该执行。&lt;/p&gt;&lt;h2&gt;&lt;span&gt;2、幂等接口&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;在系统服务接口请求中，任何明确的接口响应，例如失败或成功，这样业务流程都好处理，但是例如支付场景如果请求超时，如何判断服务的结果状态：客户端请求超时，本地服务超时，请求支付超时，支付回调超时，客户端响应超时等，或者基于MQ的不断重试机制，在部分业务异常状态下，始终没有返回成功，则消息会一直重试。&lt;/p&gt;&lt;p&gt;这就需要设计流程化的状态管理，尤其在消息重试机制下，很少会再次对重试的业务接口使用重度的事务控制，有些业务被执行完毕，只需要判断一个状态，下次消息重试跳过即可，只需要把未处理的业务补偿处理即可，在重试机制下，在部分业务没有全部执行成功之前，消息会一直重试，直到最终全部完成。&lt;/p&gt;&lt;h1&gt;&lt;span&gt;四、源代码地址&lt;/span&gt;&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;GitHub·地址&lt;br/&gt;https:&lt;span&gt;//github.com/cicadasmile/data-manage-parent&lt;/span&gt;&lt;br/&gt;GitEE·地址&lt;br/&gt;https:&lt;span&gt;//gitee.com/cicadasmile/data-manage-parent&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.3783359497645212&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvCjMheLZtcM2iaVMBOpIUKR4CDRCG9FLT5K6NmGXvG7exrW0TSuDjnTKJQ5PDq8j8Y7PHDd17Z3gicA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1274&quot;/&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>4df88e9d7742e6aadbce9e47f50f77de</guid>
<title>[推荐] 研发效能杂谈</title>
<link>https://toutiao.io/k/zacmqw3</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;post-content&quot;&gt;&lt;p&gt;研发效能是什么？为什么现在都在谈如何提高研发效能？研发效能对于一个企业到底有多重要？本文按照Why、What、How三步走沉淀梳理了研发效能相关的知识点。&lt;/p&gt;




&lt;h2&gt;一. 为什么要提升研发效能&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;传统的职能部门组织架构带来的效率竖井问题&lt;/li&gt;
&lt;li&gt;人力的增加没有让项目进度加快&lt;/li&gt;
&lt;li&gt;长久加班导致团队士气低落，后续的效率降低&lt;/li&gt;
&lt;li&gt;上线前加班、熬夜，压力大&lt;/li&gt;
&lt;li&gt;上线后Bug、事故频发，实现效果与需求不匹配&lt;/li&gt;
&lt;li&gt;各种重复低效工作，疲于应付业务&lt;/li&gt;
&lt;li&gt;想要有限的人力做更多的产出&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;二. 什么是研发效能&lt;/h2&gt;

&lt;p&gt;对于一个企业来说，追求的是企业效能的最大化，包括：利润、用户规模、客户满意度、运营效率等。而对于需要研发自有产品的互联网公司来说，研发效能则是服务于企业效能的至关重要的因素。&lt;/p&gt;

&lt;p&gt;一个软件研发的完整流程如下图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/post_images/dev/devprocess.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;此流程交付期望产品的效率和能力，即研发效能。更进一步的《研发效率破局之道》中将研发效能定义为团队能够持续地为用户产生有效价值的效率，包括 &lt;strong&gt;有效性（Effectiveness）、效率（Efficiency）和可持续性（Sustainability）&lt;/strong&gt; 三个方面。其增加的可持续性指出研发效能应该着眼于长期效果。&lt;/p&gt;

&lt;p&gt;一句话来讲，研发效能就是持续快速交付价值的能力。&lt;/p&gt;

&lt;h2&gt;三. 如何提升研发效能&lt;/h2&gt;

&lt;p&gt;对应于第一部分中讲述的软件开发流程，如果想要提升研发效能，那么需要落实到研发流程（组织结构、项目管理、持续交付）、工程方法、个人效能以管理和文化的实践上。本文重点从研发流程、工程方法两方面来讲。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/post_images/dev/whole.png&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;3.1 衡量指标&lt;/h3&gt;

&lt;p&gt;评估一个组织持续快速交付价值的能力，需要一组可量化的数据或参数，用来跟踪和评估开发过程的“健康”状况。&lt;/p&gt;

&lt;h4&gt;3.1.1 指标分类&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;持续发布能力

&lt;ul&gt;
&lt;li&gt;发布频率：单位时间内的有效发布次数&lt;/li&gt;
&lt;li&gt;发布前置时间：从代码提交到功能上线花费的时间&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;需求响应周期

&lt;ul&gt;
&lt;li&gt;交付周期时间：从确认用户提出的需求开始，到需求上线经历的平均时长。&lt;/li&gt;
&lt;li&gt;开发周期时间：从开发团队理解需求开始，到需求可以上线所经历的平均时长。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;交付吞吐率


&lt;/li&gt;
&lt;li&gt;交付过程质量：质量内建

&lt;ul&gt;
&lt;li&gt;缺陷创建和修复时间分布：缺陷能够持续和及时地被发现，并在发现后尽快修复。&lt;/li&gt;
&lt;li&gt;缺陷库存：开发过程控制缺陷库存量，让产品始终处于接近可发布状态，是持续交付的基础&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;交付质量：系统的可用性


&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;3.1.2 通用目标&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;2：2周交付周期。从想法提出并确认到上线的时间。【跨职能、组织的协调一致和紧密协作】&lt;/li&gt;
&lt;li&gt;1：1周开发周期。从需求设计完成（对开发就绪）到达到可上线的时间。【需求的拆分和管理，开发团队的分工协作模式，持续交付实践】&lt;/li&gt;
&lt;li&gt;1：1小时的发布前置时间。代码提交后可以在1小时内完成发布。【持续交付流水线】&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;3.1.3 选择优化指标&lt;/h4&gt;

&lt;p&gt;流程中总是有一个核心瓶颈。分析关键路径、定位瓶颈，针对优化&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;使用指标来发现问题而不是做绩效考核&lt;/li&gt;
&lt;li&gt;使用指标来检验优化效果&lt;/li&gt;
&lt;li&gt;使用价值流图/累积流程图发现全局瓶颈，从而确定需要提升的度量指标&lt;/li&gt;
&lt;/ul&gt;


&lt;h3&gt;3.2 组织结构&amp;amp;&amp;amp;项目管理&lt;/h3&gt;

&lt;h4&gt;3.2.1 组织结构&lt;/h4&gt;

&lt;p&gt;避免“效率竖井”： 采用以业务为单位的组织架构，保证业务线全栈配齐，目标一致。并从全局定位瓶颈进而进行优化工作。&lt;/p&gt;

&lt;h4&gt;3.2.2 项目管理&lt;/h4&gt;

&lt;p&gt;使用敏捷开发来提升研发效率&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;敏捷 = 价值观 + 原则 + 一系列符合价值观和原则的方法。

&lt;ul&gt;
&lt;li&gt;软件应该一直处于可工作状态&lt;/li&gt;
&lt;li&gt;每个迭代都能将软件部署到一个类生产环境中，并向用户演示&lt;/li&gt;
&lt;li&gt;迭代长度不超过两周&lt;/li&gt;
&lt;li&gt;透明性、协作性、纪律性和持续改进&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;使用MVP，度量驱动开发&lt;/li&gt;
&lt;li&gt;流程尽快流动：工程方法支撑&lt;/li&gt;
&lt;li&gt;发现整个流程中的瓶颈，并解决：可视化工作流、事故复盘&lt;/li&gt;
&lt;li&gt;避免“小瀑布”

&lt;ul&gt;
&lt;li&gt;价值排序&lt;/li&gt;
&lt;li&gt;满足客户需要&lt;/li&gt;
&lt;li&gt;需求拆分成能够独立测试的需求！！！&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;看板

&lt;ul&gt;
&lt;li&gt;从个人转变到关注价值流动：待开发-&amp;gt;设计-&amp;gt;开发-&amp;gt;开发自测-&amp;gt;代码评审-&amp;gt;测试-&amp;gt;完成&lt;/li&gt;
&lt;li&gt;明确的“完成的定义”DoD，明确了状态迁移必须完成的活动&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;从实际出发、以终为始：以实用主义的态度，从原则出发，灵活优化流程&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;一个可供参考的项目管理标准动作可见：&lt;a href=&quot;https://www.rowkey.cn/blog/2020/07/31/project-manage/&quot;&gt;项目管理标准模板&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;3.3 持续交付&lt;/h3&gt;

&lt;p&gt;持续交付指的是在短周期内完成软件产品，以保证软件保持在随时可以发布的状态。让每一个变更都经过一条自动化的检验流水线，来检查每一个变更的质量，通过就进入下一个阶段。&lt;strong&gt;其不是一种工具，而是一种实践！&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;不要阻塞开发人员&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;每个团队指定构建负责人或者发布工程师：优化交付流水线，提升交付效率&lt;/li&gt;
&lt;li&gt;项目状态，应该对参与整个过程（包括构建、部署、测试和发布）的所有人都是可见的&lt;/li&gt;
&lt;li&gt;风险管理

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;迭代增量式交付&lt;/strong&gt;是有效风险管理的关键&lt;/li&gt;
&lt;li&gt;手工测试环境、试运行环境和生产环境总是需要严格的访问控制&lt;/li&gt;
&lt;li&gt;让风险识别成为每日立会的一部分&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;审计

&lt;ul&gt;
&lt;li&gt;手工测试环境、试运行环境和生产环境总是需要严格的访问控制：指定谁能够访问“特权”环境。&lt;/li&gt;
&lt;li&gt;要求每次部署都要进行审计，以确切知道到底修改了哪些内容。&lt;/li&gt;
&lt;li&gt;文档自动化、自文档&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;具体可见：&lt;a href=&quot;https://www.rowkey.cn/blog/2020/06/15/cd/&quot;&gt;持续交付这点事&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;3.3 工程方法&lt;/h3&gt;

&lt;h4&gt;3.3.1 技术债&lt;/h4&gt;

&lt;p&gt;在开发产品或者功能的过程中，没有使用最佳的实现方法而引入的技术问题。需要持续关注业务和技术债。对业务机会敏感，敢放手一搏大量借贷，也知道什么时候必须偿还技术债。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;利用技术债的好处，必要时要大胆“举债前行”&lt;/li&gt;
&lt;li&gt;控制技术债，在适当的时候偿还适当部分的技术债。&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;3.4.2 云计算&lt;/h4&gt;

&lt;p&gt;利用好云计算带来的&lt;strong&gt;服务化、自助化和弹性伸缩&lt;/strong&gt;三大优势。初创公司在业务刚起步时，使用 SaaS 或者 PaaS 快速开发业务；业务成长到一定规模之后，再逐步转到 IaaS 以及私有云降低成本。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;细节抽象得越多，云服务商负责的部分就越多，我们就越能够聚焦自己的业务，从而提高研发效能&lt;/li&gt;
&lt;li&gt;使用云资源时，通过工具或者 API 调用来完成工作，减少人工参与，达到自动化&lt;/li&gt;
&lt;li&gt;资源共享、弹性伸缩&lt;/li&gt;
&lt;li&gt;容器：不可变基础设施；基于K8S建设PaaS&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;在使用云计算时，要妥善处理它带来的挑战，比如分布式系统带来的安全和控制方面的问题。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;自治和集中管理相结合：信息可视化（系统整体的质量看板、调用链追踪）&lt;/li&gt;
&lt;li&gt;错误处理&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;3.4.3 测试机制&lt;/h4&gt;

&lt;p&gt;上文持续交付一部分中最关键的其实就是测试部分，只有具有完善、可靠的测试机制，才能保证研发质量和交付效果，才能从根本上提高研发效能。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;测试左移：质量内建，即持续交付中的测试机制。

&lt;ul&gt;
&lt;li&gt;按照功能的维度管理团队，让整个功能团队对产品负责；改变团队成员对测试工作的认知&lt;/li&gt;
&lt;li&gt;把测试添加到开发和产品需求步骤中&lt;/li&gt;
&lt;li&gt;频繁测试，快速测试：提升测试运行的速度，并行运行、提高构建速度、精准测试、分层测试、减少不必要的用例&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;测试右移

&lt;ul&gt;
&lt;li&gt;利用线上的真实环境测试：需要有完备的数据隔离机制&lt;/li&gt;
&lt;li&gt;测试人员介入线上监控和预警，及时发现问题并跟进解决&lt;/li&gt;
&lt;li&gt;混沌工程：即在真实环境中通过模拟各种不可预期的故障来验证系统稳定性&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;3.4.4 平台化&lt;/h4&gt;

&lt;p&gt;通过抽象共性组件、功能，达到代码、功能复用，从而减少重复开发，提高研发效能。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;技术平台：技术设施的复用&lt;/li&gt;
&lt;li&gt;数据中台：数据沉淀和输出能力&lt;/li&gt;
&lt;li&gt;移动中台：前端组件、跨平台开发、插件化、热加载&lt;/li&gt;
&lt;li&gt;业务中台


&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;相关资料可见：&lt;a href=&quot;https://www.rowkey.cn/blog/2019/11/23/middle-talk/&quot;&gt;中台简谈&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;3.5 个人效能&lt;/h3&gt;

&lt;p&gt;如何提高开发人员自身的开发效率，除了每个人自身的天赋能力外，也有一些可以刻意使用的高效工具和方法。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;高效工作方法


&lt;/li&gt;
&lt;li&gt;高效开发工具

&lt;ul&gt;
&lt;li&gt;好的IDE&lt;/li&gt;
&lt;li&gt;操作系统快捷键&lt;/li&gt;
&lt;li&gt;思维导图软件&lt;/li&gt;
&lt;li&gt;学习笔记软件&lt;/li&gt;
&lt;li&gt;文档撰写工具&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;持续学习：不断地学习新的开发技能，从而提升自己的开发效率&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;此外，还可以通过技术管理从外部驱动个人效能的提升，这在下面的技术管理部分会讲。&lt;/p&gt;

&lt;h3&gt;3.6 管理和文化&lt;/h3&gt;

&lt;h4&gt;3.6.1 技术管理&lt;/h4&gt;

&lt;p&gt;管理包括：看方向、管人、管事。做好技术管理是提高研发效能的关键部分。其中，3.4节个人效能部分的数字驱动也是技术管理的一部分。主要步骤包括：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;制定目标：兼顾业务目标和技术目标&lt;/li&gt;
&lt;li&gt;目标管理：使用OKR等目标管理方案&lt;/li&gt;
&lt;li&gt;计划并执行去实现目标&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;此外，技术管理中一个很难的问题是如何进行考核。这里可以使用数字化的方式，以驱动个人效能的提升。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;选择个人效能度量指标&lt;/li&gt;
&lt;li&gt;根据代码提交日志自动生成工作日报和周报、个人贡献值&lt;/li&gt;
&lt;li&gt;综合多维数据构建个人的数据画像

&lt;ul&gt;
&lt;li&gt;社会地位：用排名、榜单来实现；&lt;/li&gt;
&lt;li&gt;工作本身：用复合型报告去综合评价，告知员工究竟做得好不好&lt;/li&gt;
&lt;li&gt;自我改变：通过雷达图，进行多维度的数据分析，精准提炼员工的优点与不足，员工可以有针对性的取长补短。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;需要说明的是，如果指标不能全方面的衡量，就不要做为考核指标，仅仅用于发现问题，解决问题！&lt;/p&gt;

&lt;p&gt;一个可参考的技术管理标准动作模板见：&lt;a href=&quot;https://www.rowkey.cn/blog/2020/04/25/tech-leader-manage/&quot;&gt;技术管理标准模板&lt;/a&gt;&lt;/p&gt;

&lt;h4&gt;3.6.2 团队文化&lt;/h4&gt;

&lt;p&gt;团队文化是团队成员共同认可的价值观和行为准则，良好且有效的文化是保障团队高效产出的关键部分。很多互联网公司都是工程师文化主导的，包括Facebook、Google、百度等。他们也都具有自己独特的企业文化价值观，如百度的简单可依赖、谷歌的不作恶、Netflix的自由和责任。建立团队文化的步骤如下：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;定义：总结、明确自己团队的文化，提炼出简单易记的文字。&lt;/li&gt;
&lt;li&gt;主张：各种形式的传播。从我自己的经历来看，不断地念经是其中最有效的方式。&lt;/li&gt;
&lt;li&gt;追求：在奖惩中体现出文化价值观的作用。如对于文化价值观贯彻优秀的同学给与公开的肯定与奖励。&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;四. 参考资料&lt;/h2&gt;



&lt;/div&gt;



  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>bbe7881b9d9564a06a95cf3c1c247a5b</guid>
<title>[推荐] 面试：为了进阿里，死磕了 ConcurrentHashMap 源码和面试题（一）</title>
<link>https://toutiao.io/k/pcsh3lu</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;h1 cid=&quot;n0&quot; mdtype=&quot;heading&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;欢迎关注公众号【&lt;/strong&gt;&lt;span&gt;&lt;strong&gt;Ccww技术博客&lt;/strong&gt;&lt;/span&gt;&lt;strong&gt;】，原创技术文章第一时间推出&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;/h1&gt;&lt;hr/&gt;&lt;h3 cid=&quot;n7&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;前言&lt;/span&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p cid=&quot;n8&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;在平时中集合使用中，当涉及多线程开发时，如果使用&lt;code&gt;HashMap&lt;/code&gt;可能会导致死锁问题，使用&lt;code&gt;HashTable&lt;/code&gt;效率又不高。而&lt;code&gt;ConcurrentHashMap&lt;/code&gt;在保持同步同时并发效率比较高，&lt;code&gt;ConcurrentHashmap&lt;/code&gt;是最好的选择，那面试中也会被常常问到，那可能的问题是：&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h3 cid=&quot;n37&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;&lt;span&gt;ConcurrentHashMap&lt;/span&gt;的实现原理&lt;/span&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p cid=&quot;n38&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ConcurrentHashMap的出现主要为了解决hashmap在并发环境下不安全，JDK1.8ConcurrentHashMap的设计与实现非常精巧，大量的利用了volatile，CAS等乐观锁技术来减少锁竞争对于性能的影响，&lt;strong&gt;ConcurrentHashMap保证线程安全的方案是：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h4 cid=&quot;n44&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;JDK7 ConcurrentHashMap&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n45&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;在JDK1.7中ConcurrentHashMap由Segment(分段锁)数组结构和HashEntry数组组成，且主要通过Segment(分段锁)段技术实现线程安全。&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n46&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;Segment是一种可重入锁，是一种数组和链表的结构，一个Segment中包含一个HashEntry数组，每个HashEntry又是一个链表结构，因此在ConcurrentHashMap查询一个元素的过程需要进行两次Hash操作，如下所示：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot; cid=&quot;n47&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n49&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;第一次Hash定位到Segment，&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n51&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;第二次Hash定位到元素所在的链表的头部&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6092307692307692&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDrjDjpyooXYGkFXgwNX3HLcjIEhGc3OMPyicHoicpnZHicAZ4SaBEwqrPpdia9TCH9yK9xhpesMV1qPO8w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;650&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n53&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;正是通过Segment分段锁技术，将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问，能够实现真正的并发访问。&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n54&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;这样结构会使Hash的过程要比普通的HashMap要长，影响性能，但写操作的时候可以只对元素所在的Segment进行加锁即可，不会影响到其他的Segment，ConcurrentHashMap提升了并发能力。&lt;/span&gt;&lt;/p&gt;&lt;h4 cid=&quot;n55&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;JDK8 ConcurrentHashMap&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n56&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;在JDK8ConcurrentHashMap内部机构：数组+链表+红黑树，Java 8在链表长度超过一定阈值(8)时将链表（寻址时间复杂度为O(N)）转换为红黑树（寻址时间复杂度为O(long(N)))，结构基本上与功能和JDK8的HashMap一样，只不过ConcurrentHashMap保证线程安全性。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.8034188034188035&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDrjDjpyooXYGkFXgwNX3HLcjFiadqnv5R3YicqfsM8laEe46R6SzZjbSa8bGGAcN7Bm11CcGghfpaibFQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;585&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n58&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;在JDK1.8中摒弃了Segment分段锁的数据结构，基于CAS操作保证数据的获取以及使用synchronized关键字对相应数据段加锁来实现线程安全，这进一步提高了并发性。（&lt;strong&gt;CAS原理详情&lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2ODk2NDMwNw==&amp;amp;mid=2247484095&amp;amp;idx=1&amp;amp;sn=7b8da8730943c203a0d9b850fa361644&amp;amp;chksm=fc84a703cbf32e15b461357295c65fd2cc329fe636b12adcf2210e42ec1f7c57eda96ae55d30&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;《面试：为了进阿里，又把并发CAS（Compare and Swap）实现重新精读一遍》&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;《面试：为了进阿里，又把并发CAS（Compare and Swap）实现重新精读一遍》&lt;/a&gt;）&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__class&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;,&lt;span class=&quot;code-snippet__title&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Map&lt;/span&gt;.&lt;span class=&quot;code-snippet__title&quot;&gt;Entry&lt;/span&gt;&amp;lt;&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;,&lt;span class=&quot;code-snippet__title&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; hash;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; K key;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;span class=&quot;code-snippet__keyword&quot;&gt;volatile&lt;/span&gt; V val;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;span class=&quot;code-snippet__keyword&quot;&gt;volatile&lt;/span&gt; Node&amp;lt;K,V&amp;gt; next;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  ...&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n60&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ConcurrentHashMap采用Node类作为基本的存储单元，每个键值对(key-value)都存储在一个Node中，使用了volatile关键字修饰value和next，保证并发的可见性。其中Node子类有：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot; cid=&quot;n61&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n63&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ForwardingNode：扩容节点，只是在扩容阶段使用的节点，主要作为一个标记，在处理并发时起着关键作用，有了ForwardingNodes，也是ConcurrentHashMap有了分段的特性，提高了并发效率&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n65&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;TreeBin：TreeNode的代理节点，用于维护TreeNodes，ConcurrentHashMap的红黑树存放的是TreeBin&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n67&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;TreeNode：用于树结构中，红黑树的节点（当链表长度大于8时转化为红黑树），此节点不能直接放入桶内，只能是作为红黑树的节点&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n69&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ReservationNode：保留结点&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p cid=&quot;n70&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ConcurrentHashMap中查找元素、替换元素和赋值元素都是基于&lt;code&gt;sun.misc.Unsafe&lt;/code&gt;中&lt;strong&gt;原子操作&lt;/strong&gt;实现&lt;strong&gt;多并发的无锁化&lt;/strong&gt;操作。&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; &amp;lt;K,V&amp;gt; &lt;span class=&quot;code-snippet__function&quot;&gt;Node&amp;lt;K,V&amp;gt; &lt;span class=&quot;code-snippet__title&quot;&gt;tabAt&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(Node&amp;lt;K,V&amp;gt;[] tab, &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; i)&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; (Node&amp;lt;K,V&amp;gt;)U.getObjectAcquire(tab, ((&lt;span class=&quot;code-snippet__keyword&quot;&gt;long&lt;/span&gt;)i &amp;lt;&amp;lt; ASHIFT) + ABASE);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; &amp;lt;K,V&amp;gt; &lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;casTabAt&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(Node&amp;lt;K,V&amp;gt;[] tab, &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; i,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                                      Node&amp;lt;K,V&amp;gt; c, Node&amp;lt;K,V&amp;gt; v)&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; U.compareAndSetObject(tab, ((&lt;span class=&quot;code-snippet__keyword&quot;&gt;long&lt;/span&gt;)i &amp;lt;&amp;lt; ASHIFT) + ABASE, c, v);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; &amp;lt;K,V&amp;gt; &lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;setTabAt&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(Node&amp;lt;K,V&amp;gt;[] tab, &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; i, Node&amp;lt;K,V&amp;gt; v)&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      U.putObjectRelease(tab, ((&lt;span class=&quot;code-snippet__keyword&quot;&gt;long&lt;/span&gt;)i &amp;lt;&amp;lt; ASHIFT) + ABASE, v);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;hr/&gt;&lt;h3 cid=&quot;n231&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;ConcurrentHashMap的put()方法&lt;span md-inline=&quot;tab&quot;/&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p cid=&quot;n270&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ConcurrentHashMap的put的流程步骤&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n234&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;1.&lt;/strong&gt;如果key或者value为null，则抛出空指针异常，和HashMap不同的是HashMap单线程是允许为Null；&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n235&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;code&gt;if (key == null || value == null) throw new NullPointerException();&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n237&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;2.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;for的死循环，为了实现CAS的无锁化更新，如果table为null或者table的长度为0，则初始化table，调用&lt;code&gt;initTable()&lt;/code&gt;方法（第一次put数据，调用默认参数实现，其中重要的&lt;code&gt;sizeCtl&lt;/code&gt;参数）。&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;   &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;   &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; hash = spread(key.hashCode());&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;   &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; binCount = &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;   &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; (Node&amp;lt;K,V&amp;gt;[] tab = table;;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       Node&amp;lt;K,V&amp;gt; f; &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; n, i, fh; K fk; V fv;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (tab == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt; || (n = tab.length) == &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;           tab = initTable(); &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      ...&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p cid=&quot;n240&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;3.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;确定元素在Hash表的索引&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n241&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;通过hash算法可以将元素分散到哈希桶中。在ConcurrentHashMap中通过如下方法确定数组索引：&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n242&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt; 第一步：&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;spread&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; h)&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; (h ^ (h &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;code-snippet__number&quot;&gt;16&lt;/span&gt;)) &amp;amp; HASH_BITS;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n244&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;第二步：&lt;code&gt;(length-1) &amp;amp; (h ^ (h &amp;gt;&amp;gt;&amp;gt; 16)) &amp;amp; HASH_BITS);&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n246&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;4.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;通过&lt;code&gt;tableAt()&lt;/code&gt;方法找到位置&lt;code&gt;tab[i]&lt;/code&gt;的&lt;code&gt;Node&lt;/code&gt;,当Node为null时为没有&lt;code&gt;hash&lt;/code&gt;冲突的话，使用&lt;code&gt;casTabAt()&lt;/code&gt;方法&lt;code&gt;CAS&lt;/code&gt;操作将元素插入到&lt;code&gt;Hash&lt;/code&gt;表中，&lt;code&gt;ConcurrentHashmap&lt;/code&gt;使用&lt;code&gt;CAS&lt;/code&gt;无锁化操作，这样在高并发&lt;code&gt;hash&lt;/code&gt;冲突低的情况下，性能良好。&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; ((f = tabAt(tab, i = (n - &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;) &amp;amp; hash)) == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;           &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;               &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (casTabAt(tab, i, &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; Node&amp;lt;K,V&amp;gt;(hash, key, &lt;span class=&quot;code-snippet__keyword&quot;&gt;value&lt;/span&gt;)))&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                   &lt;span class=&quot;code-snippet__keyword&quot;&gt;break&lt;/span&gt;;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;          }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n249&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;5.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;当f不为null时，说明发生了hash冲突，当f.hash == MOVED==-1 时，说明&lt;code&gt;ConcurrentHashmap&lt;/code&gt;正在发生&lt;code&gt;resize&lt;/code&gt;操作,使用&lt;code&gt;helpTransfer()&lt;/code&gt;方法帮助正在进行resize操作。&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; ((fh = f.hash) == MOVED) &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       tab = helpTransfer(tab, f);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n252&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;6.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;以上情况都不满足的时，使用&lt;code&gt;synchronized&lt;/code&gt;同步块上锁当前节点&lt;code&gt;Node&lt;/code&gt;,并判断有没有线程对数组进行了修改，如果没有则进行：&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;synchronized (f) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (tabAt(tab, i) == f) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (fh &amp;gt;= &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;             binCount = &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;             &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; (Node&amp;lt;K,V&amp;gt; e = f;; ++binCount) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                   K ek;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                     &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (e.hash == hash &amp;amp;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                          ((ek = e.key) == key ||&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                          (ek != &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; key.&lt;span class=&quot;code-snippet__keyword&quot;&gt;equals&lt;/span&gt;(ek)))) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           oldVal = e.val;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (!onlyIfAbsent)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                               &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                               e.val = &lt;span class=&quot;code-snippet__keyword&quot;&gt;value&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           &lt;span class=&quot;code-snippet__keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                      }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                    Node&amp;lt;K,V&amp;gt; pred = e;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                     &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; ((e = e.next) == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           pred.next = &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; Node&amp;lt;K,V&amp;gt;(hash, key, &lt;span class=&quot;code-snippet__keyword&quot;&gt;value&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           &lt;span class=&quot;code-snippet__keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;          }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (f instanceof TreeBin) { &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                       Node&amp;lt;K,V&amp;gt; p;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                       binCount = &lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                       &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; ((p = ((TreeBin&amp;lt;K,V&amp;gt;)f).putTreeVal(hash, key,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                                                      &lt;span class=&quot;code-snippet__keyword&quot;&gt;value&lt;/span&gt;)) != &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           oldVal = p.val;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (!onlyIfAbsent)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                               &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                               p.val = &lt;span class=&quot;code-snippet__keyword&quot;&gt;value&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                      }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                   &lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (f instanceof ReservationNode)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                       &lt;span class=&quot;code-snippet__keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;Recursive update&quot;&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;              }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;          }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;ol class=&quot;list-paddingleft-2&quot; cid=&quot;n232&quot; mdtype=&quot;list&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;7.&lt;/strong&gt;执行完&lt;/span&gt;&lt;code&gt;&lt;span&gt;synchronized(f)&lt;/span&gt;&lt;/code&gt;&lt;span&gt;同步代码块之后会先检查&lt;/span&gt;&lt;code&gt;&lt;span&gt;binCount&lt;/span&gt;&lt;/code&gt;&lt;span&gt;,如果大于等于TREEIFY_THRESHOLD = 8则进行treeifyBin操作尝试将该链表转换为红黑树。&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;kotlin&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (binCount != &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;             &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;             &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (binCount &amp;gt;= TREEIFY_THRESHOLD)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                  treeifyBin(tab, i);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;             &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (oldVal != &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; oldVal;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;              &lt;span class=&quot;code-snippet__keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n263&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;8.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;执行了一个&lt;code&gt;addCount&lt;/code&gt;方法,主要用于统计数量以及决定是否需要扩容.&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;addCount(1L, binCount);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;h4 cid=&quot;n265&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;ConcurrentHashmap 不支持 key 或者 value 为 null 的原因？&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n111&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;code&gt;ConcurrentHashmap&lt;/code&gt;和&lt;code&gt;hashMap&lt;/code&gt;不同的是，&lt;code&gt;concurrentHashMap&lt;/code&gt;的&lt;code&gt;key&lt;/code&gt;和&lt;code&gt;value&lt;/code&gt;都不允许为null，&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n112&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;因为&lt;code&gt;concurrenthashmap&lt;/code&gt;它们是用于多线程的，并发的 ，如果&lt;code&gt;map.get(key)&lt;/code&gt;得到了null，不能判断到底是映射的value是null,还是因为没有找到对应的key而为空，&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n113&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;而用于单线程状态的&lt;code&gt;hashmap&lt;/code&gt;却可以用&lt;code&gt;containKey（key）&lt;/code&gt; 去判断到底是否包含了这个null。&lt;/span&gt;&lt;/p&gt;&lt;h4 cid=&quot;n114&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;put()方法如何实现线程安全呢？&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n115&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;1.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;在第一次put数据时，调用&lt;code&gt;initTable()&lt;/code&gt;方法&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;private&lt;/span&gt; transient &lt;span class=&quot;code-snippet__keyword&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; sizeCtl;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;private&lt;/span&gt; final Node&amp;lt;K,V&amp;gt;[] &lt;span class=&quot;code-snippet__title&quot;&gt;initTable&lt;/span&gt;(&lt;span class=&quot;code-snippet__params&quot;/&gt;)&lt;/span&gt; {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        Node&amp;lt;K,V&amp;gt;[] tab; &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; sc;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;while&lt;/span&gt; ((tab = table) == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt; || tab.length == &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; ((sc = sizeCtl) &amp;lt; &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;)  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            Thread.&lt;span class=&quot;code-snippet__keyword&quot;&gt;yield&lt;/span&gt;(); &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (U.compareAndSwapInt(&lt;span class=&quot;code-snippet__keyword&quot;&gt;this&lt;/span&gt;, SIZECTL, sc, &lt;span class=&quot;code-snippet__number&quot;&gt;-1&lt;/span&gt;)) {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            ...  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        } &lt;span class=&quot;code-snippet__keyword&quot;&gt;finally&lt;/span&gt; {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;           sizeCtl = sc;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;           &lt;span class=&quot;code-snippet__keyword&quot;&gt;break&lt;/span&gt;;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; tab;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n117&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;使用&lt;code&gt;sizeCtl&lt;/code&gt;参数作为控制标志的作用，当在从插入元素时，才会初始化Hash表。在开始初始化的时候，&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n123&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;2.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;在不存在hash冲突的时&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; ((f = tabAt(tab, i = (n - &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;) &amp;amp; hash)) == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;) {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (casTabAt(tab, i, &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; Node&amp;lt;K,V&amp;gt;(hash, key, &lt;span class=&quot;code-snippet__keyword&quot;&gt;value&lt;/span&gt;)))  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;break&lt;/span&gt;;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n125&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;code&gt;(f = tabAt(tab, i = (n - 1) &amp;amp; hash)) == null&lt;/code&gt;中使用tabAt原子操作获取数组，并利用&lt;code&gt;casTabAt(tab, i, null, new Node&amp;lt;K,V&amp;gt;(hash, key, value))&lt;/code&gt;CAS操作将元素插入到Hash表中&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n126&quot; mdtype=&quot;paragraph&quot;&gt;&lt;strong&gt;&lt;span&gt;3.&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;在存在hash冲突时，先把当前节点使用关键字&lt;code&gt;synchronized&lt;/code&gt;加锁，然后再使用&lt;code&gt;tabAt()&lt;/code&gt;原子操作判断下有没有线程对数组进行了修改，最后再进行其他操作。&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n127&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;为什么要锁住更新操作的代码块?&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n128&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;因为发生了哈希冲突，当前线程正在f所在的链表上进行更新操作，假如此时另外一个线程也需要到这个链表上进行更新操作，则需要等待当前线程更新完后再执行&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;synchronized&lt;/span&gt; (f) {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (tabAt(tab, i) == f) {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    ......&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;接下来内容看&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2ODk2NDMwNw==&amp;amp;mid=2247484131&amp;amp;idx=2&amp;amp;sn=5d47abac54e039c25dbd8d34c9e4ae57&amp;amp;chksm=fc84a75fcbf32e49ed5179794aad8227cdb9ea6a26da0162947dbc2834d2cdf5e666c08f5d44&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;《面试：为了进阿里，死磕了CurrentHashMap源码和面试题(二)》&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;《面试：为了进阿里，死磕了&lt;span&gt;ConcurrentHashMap&lt;/span&gt;源码和面试题(二)》&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n158&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;各位看官还可以吗？喜欢的话，动动手指点个再看💗呗！！谢谢支持！&lt;span md-inline=&quot;linebreak&quot;&gt;  &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n158&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;欢迎扫码关注，原创技术文章第一时间推出&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.36857142857142855&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;350&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDrgfBz2Ve78FylxcGWmXaueSuqPguurBCWEkeY1ibeLl1wlxUyibdesc4YeuiaJJjSt6HTiab2iaHyXyyicA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>316658b430649d4ba3b6467d213f6ca9</guid>
<title>[推荐] 写一个通用的幂等组件，我觉得很有必要</title>
<link>https://toutiao.io/k/jvghjpf</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span data-shimo-docs=&quot;[[20,&amp;quot;本文目录&amp;quot;,&amp;quot;8:1&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;init\&amp;quot;&amp;quot;],[20,&amp;quot;背景&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;9crj\&amp;quot;|list-start:\&amp;quot;1\&amp;quot;|ordered:\&amp;quot;decimal\&amp;quot;&amp;quot;],[20,&amp;quot;简单幂等实现&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;JpMI\&amp;quot;|list-start:\&amp;quot;2\&amp;quot;|ordered:\&amp;quot;decimal\&amp;quot;&amp;quot;],[20,&amp;quot;    2.1 数据库记录判断&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;No07\&amp;quot;&amp;quot;],[20,&amp;quot;    2.2 并发问题解决&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;XEao\&amp;quot;&amp;quot;],[20,&amp;quot;通用幂等实现&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;57em\&amp;quot;|list-start:\&amp;quot;3\&amp;quot;|ordered:\&amp;quot;decimal\&amp;quot;&amp;quot;],[20,&amp;quot;    3.1 设计方案&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;Djsy\&amp;quot;&amp;quot;],[20,&amp;quot;        3.1.1 通用存储&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;XVDa\&amp;quot;&amp;quot;],[20,&amp;quot;        3.1.2 使用简单&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;lAmZ\&amp;quot;&amp;quot;],[20,&amp;quot;        3.1.3 支持注解&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;FuKa\&amp;quot;&amp;quot;],[20,&amp;quot;        3.1.4 多级存储&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;gehy\&amp;quot;&amp;quot;],[20,&amp;quot;        3.1.5 并发读写&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;f9PN\&amp;quot;&amp;quot;],[20,&amp;quot;        3.1.6 执行流程&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;9IHk\&amp;quot;&amp;quot;],[20,&amp;quot;    3.2 幂等接口&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;PGMT\&amp;quot;&amp;quot;],[20,&amp;quot;    3.3 幂等注解&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;LreR\&amp;quot;&amp;quot;],[20,&amp;quot;    3.4 自动区分重复请求&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;6TLO\&amp;quot;&amp;quot;],[20,&amp;quot;    3.5 存储结构&amp;quot;],[20,&amp;quot;\n&amp;quot;,&amp;quot;24:\&amp;quot;ImhL\&amp;quot;&amp;quot;],[20,&amp;quot;    3.6 源码地址&amp;quot;]]&quot;&gt;&lt;p line=&quot;init&quot;&gt;&lt;strong&gt;本文目录&lt;/strong&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;背景&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;简单幂等实现&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p line=&quot;No07&quot;&gt;      2.1 数据库记录判断&lt;/p&gt;&lt;p line=&quot;XEao&quot;&gt;      2.2 并发问题解决&lt;/p&gt;&lt;ol start=&quot;3&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;通用 幂等实现&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p line=&quot;Djsy&quot;&gt;      3.1 设计方案&lt;/p&gt;&lt;p line=&quot;XVDa&quot;&gt;         3.1.1 通用存储&lt;/p&gt;&lt;p line=&quot;lAmZ&quot;&gt;         3.1.2 使用简单&lt;/p&gt;&lt;p line=&quot;FuKa&quot;&gt;         3.1.3 支持注解&lt;/p&gt;&lt;p line=&quot;gehy&quot;&gt;         3.1.4 多级存储&lt;/p&gt;&lt;p line=&quot;f9PN&quot;&gt;         3.1.5 并发读写 &lt;/p&gt;&lt;p line=&quot;9IHk&quot;&gt;         3.1.6 执行流程&lt;/p&gt;&lt;p line=&quot;PGMT&quot;&gt;      3.2 幂等接口&lt;/p&gt;&lt;p line=&quot;LreR&quot;&gt;      3.3 幂等注解&lt;/p&gt;&lt;p line=&quot;6TLO&quot;&gt;      3.4 自动区分重复请求&lt;/p&gt;&lt;p line=&quot;ImhL&quot;&gt;      3.5 存储结构&lt;/p&gt;&lt;p line=&quot;iwq4&quot;&gt;      3.6 源码地址&lt;/p&gt;&lt;/span&gt;&lt;/h2&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;背景&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;回答群友的问题：&lt;strong&gt;幂等有没有什么通用的方案和实践？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;关于什么是幂等，本文就不再阐述了。相信大家都知道，并且也都遇到过类似的问题以及有自己的一套解决方案。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;基本上所有业务系统中的幂等都是各自进行处理，也不是说不能统一处理，统一处理的话需要考虑的内容会比较多。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我个人认为核心的业务还是适合业务方自己去处理，比如订单支付，会有个支付记录表，一个订单只能被支付一次，通过支付记录表就可以达到幂等的效果。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;还有一些不是核心的业务，但是也有幂等的需求。比如网络问题，多次重试。用户点击多次等场景。这种场景下还是需要一个通用的幂等框架来处理，会让业务开发更加简单。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;简单幂等实现&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;幂等的实现其实并不复杂，方案也有很多种，首先介绍下基于数据库记录的方案来实现，后面再介绍通用方案。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;数据库记录判断&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;以文章开头讲的支付场景来举例。业务场景是一个订单只能支付一次，所以我们在支付之前会判断这个订单有没有支付过，如果没有支付过则进行支付，如果支付过了，就反正支付成功，幂等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种方式需要有一个额外的表来存储做过的动作，才能判断之前有没有做过这件事情。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;就好比你年龄大了，然后还是单身的技术宅。这个时候你家里着急了呀，你老妈天天给你介绍小姐姐。你每个周末都要打扮的非常帅气，去见你老妈给你介绍的小姐姐。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;去之前你得记录下吧，8 月第一周我见的 XXX, 第二周我见的 YYY, 如果第三周又让你去见 XXX, 如果这个时候你不喜欢 XXX, 你会翻出你的小本本看下，这个之前见过了，没必要再见了，不然见了多尴尬啊。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;并发问题解决&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过查询支付记录，判断能否进行支付在业务逻辑上没一点问题。但是在并发场景就会有问题。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1001 的订单发起了两次支付请求，当前两个请求同时查询支付记录，都没有查询到，然后都开始走支付的逻辑，最后发现同一个订单支付了两次，这就是并发导致的幂等问题。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;并发解决的方案也有很多种，简单点的直接用数据库的唯一索引解决，稍微麻烦点的都会用分布式锁来对同一个资源进行加锁。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;比如我们对订单 1001 进行加锁，如果同时发起了两次支付请求，那么同一时间只能有一个请求可以获取锁，另一个请求获取不到锁可以直接失败，也可以等待前面的请求执行完成。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果等待前面的请求执行完成，接着往下处理，就能查到 1001 已经支付过了，直接返回支付成功了。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;通用幂等实现&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;为了能够让大家更专注于业务功能的开发，简单场景的幂等操作我认为可以进行统一封装来处理，下面介绍一下通用幂等的实现。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.8486842105263158&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WRLYshvT39xHLNgtPkianubOzwaVAYgg4hyQBYoGDWVQglV3riaZwibKncbmL99Hbk2xyuibvicwzcbuuwib4fLsevGg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;912&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;设计方案&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;通用存储&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一般我们在程序内部做幂等的话都是先查询，然后根据查询的结果做对应的操作。同时会对相同的资源进行加锁来避免并发问题。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;加锁是通用的，不通用的部分就是判断这个操作之前有没有操作过，所以我们需要有一个通用的存储来记录所有的操作。&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;使用简单&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;提供通用的幂等组件，注入对应的类即可实现幂等，屏蔽加锁，记录判断等逻辑。&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;支持注解&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;除了通过代码的方式来进行幂等的控制，同时为了让使用更加简单，还需要提供注解的方式来支持幂等，使用者只需要在对应的业务方法上增加对应的注解，即可实现幂等。&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;多级存储&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;需要支持多级存储，比如一级存储可以用 Redis 来实现，优点是性能高，适用于 90%的场景。因为很多场景都是为了防止短时间内请求重复导致的问题，通过设置一定的失效时间，让 Key 自动失效。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;二级存储可以支持 Mysql, Mongo 等数据库，适用于时间长或者永久存储的场景。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;可以通过配置指定一级存储用什么，二级存储用什么。&lt;strong&gt;这个场景非常适合用策略模式来实现。&lt;/strong&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;并发读写&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;引入多级存储势必会涉及到并发读写的场景，可以支持两种方式，顺序和并发。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;顺序就是先写一级存储，再写二级存储，读也是一样。这样的问题在于性能会有点损耗。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;并发就是多线程同时写入，同时读取，提高性能。&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;幂等执行流程&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.8670886075949367&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WRLYshvT39xHLNgtPkianubOzwaVAYgg4icQBdhhBJl9TibmxWc8WzYaAicSNuS07CoyGOOCMVsxiaoEjvfKrvsU9PQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;948&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;幂等接口&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;幂等接口定义&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;public interface DistributedIdempotent {&lt;br/&gt;    /**&lt;br/&gt;     * 幂等执行&lt;br/&gt;     * @param key 幂等Key&lt;br/&gt;     * @param lockExpireTime 锁的过期时间&lt;br/&gt;     * @param firstLevelExpireTime 一级存储过期时间&lt;br/&gt;     * @param secondLevelExpireTime 二级存储过期时间&lt;br/&gt;     * @param timeUnit 存储时间单位&lt;br/&gt;     * @param readWriteType 读写类型&lt;br/&gt;     * @param execute 要执行的逻辑&lt;br/&gt;     * @param fail Key已经存在，幂等拦截后的执行逻辑&lt;br/&gt;     * @return&lt;br/&gt;     */&lt;br/&gt;    &amp;lt;T&amp;gt; T execute(String key, int lockExpireTime, int firstLevelExpireTime, int secondLevelExpireTime, TimeUnit timeUnit, ReadWriteTypeEnum readWriteType, Supplier&amp;lt;T&amp;gt; execute, Supplier&amp;lt;T&amp;gt; fail);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;使用方式&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;/**&lt;br/&gt; * 代码方式幂等-有返回值&lt;br/&gt; * @param key&lt;br/&gt; * @return&lt;br/&gt; */&lt;br/&gt;public String idempotentCode(String key) {&lt;br/&gt;    return distributedIdempotent.execute(key, 10, 10, 50, TimeUnit.SECONDS, ReadWriteTypeEnum.ORDER, () -&amp;gt; {&lt;br/&gt;        System.out.println(&quot;进来了。。。。&quot;);&lt;br/&gt;        return &quot;success&quot;;&lt;br/&gt;    }, () -&amp;gt; {&lt;br/&gt;        System.out.println(&quot;重复了。。。。&quot;);&lt;br/&gt;        return &quot;fail&quot;;&lt;br/&gt;    });&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;幂等注解&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;使用注解，能够让使用更加简单，比如我们的事务处理，缓存等都使用了注解来简化逻辑。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;幂等的场景也可以定义通用的注解来简化使用难度，在需要支持幂等的业务方法上增加注解，配置基本信息。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;idempotentHandler 是触发幂等规则后执行的方法，也就是我们用代码实现幂等时候的 Supplier&lt;t&gt;fail 参数。实现是用的阿里 Sentinel 限流，熔断后的处理那套逻辑。&lt;/t&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在幂等的场景下，如果是重复执行，通常返回跟正常执行一样的结果即可。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;/**&lt;br/&gt; * 注解方式幂等-指定幂等规则触发后执行的方法&lt;br/&gt; * @param key&lt;br/&gt; */&lt;br/&gt;@Idempotent(spelKey = &quot;#key&quot;, idempotentHandler = &quot;idempotentHandler&quot;, readWriteType = ReadWriteTypeEnum.PARALLEL, secondLevelExpireTime = 60)&lt;br/&gt;public void idempotent(String key) {&lt;br/&gt;    System.out.println(&quot;进来了。。。。&quot;);&lt;br/&gt;}&lt;br/&gt;public void idempotentHandler(String key, IdempotentException e) {&lt;br/&gt;    System.out.println(key + &quot;:idempotentHandler已经执行过了。。。。&quot;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;自动区分重复请求&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;代码方式处理幂等，需要传入幂等的 Key，注解方式处理幂等，支持配置 Key，支持 SPEL 表达式。这两种都是需要在使用的时候就确定好根据什么来作为幂等的唯一性判断。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;还有一种幂等的场景是比较常见的，就是防止重复提交或者网络问题超时重试。同样的操作会请求多次，这种场景下可以在操作之前先申请一个唯一的 ID，每次请求的时候带给后端，这样就能标识整个请求的唯一性。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我目前做了一个自动生成唯一标识的功能，简单来说就是根据请求的信息进行 MD5，如果 MD5 值没有变化就认为是同一次请求。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;需要进行 MD5 的内容有请求 URL 参数，请求体，请求头信息。请求头的信息在没有指定用户相关 Key 的场景下会进行全部拼接，如果配置了请求头 userId 为用户的标识，那么只会用 userId。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;会在请求的入口处进行幂等 Key 的自动生成，如果在使用幂等注解的时候没有指定 spelKey, 就会使用自动生成的 Key。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;存储结构&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Redis: 使用 String 类型存储，Key 是幂等 Key, Value 默认为 1。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Mysql: 需要创建一张记录表。（过期的数据需要定时清理，也可以永久存储）&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;CREATE TABLE `idempotent_record` (&lt;br/&gt;  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;主键&#x27;,&lt;br/&gt;  `key` varchar(50) NULL DEFAULT &#x27;&#x27;,&lt;br/&gt;  `value` varchar(50) NOT NULL DEFAULT &#x27;&#x27;,&lt;br/&gt;  `expireTime` timestamp NOT NULL COMMENT &#x27;过期时间&#x27;,&lt;br/&gt;  `addTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,&lt;br/&gt;  PRIMARY KEY (`id`)&lt;br/&gt;) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#x27;幂等记录&#x27;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Mongo: 字段跟 Mysql 一样，转换成 Json 格式即可。Mongo 会自动创建集合。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;源码地址&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;源码：https://github.com/yinjihuan/kitty&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;示列：https://github.com/yinjihuan/kitty-samples&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;码字不易，可以的话来个三连击，感谢！&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;关于作者&lt;/strong&gt;：尹吉欢，简单的技术爱好者，《Spring Cloud 微服务-全栈技术与案例解析》, 《Spring Cloud 微服务 入门 实战与进阶》作者, 公众号&lt;strong&gt;猿天地&lt;/strong&gt;发起人。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我整理了一份很全的学习资料，感兴趣的可以微信搜索「&lt;strong&gt;猿天地&lt;/strong&gt;」，回复关键字 「&lt;strong&gt;学习资料&lt;/strong&gt;」获取我整理好了的 Spring Cloud，Spring Cloud Alibaba，Sharding-JDBC 分库分表，任务调度框架 XXL-JOB，MongoDB，爬虫等相关资料。&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>f4db535f03a31c3e5cbcd0d9e0bc90c0</guid>
<title>[推荐] 试用了 2000 多个拓展，最后只留下了这 50 个</title>
<link>https://toutiao.io/k/1yhz4eh</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;section&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6255555555555555&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/5VykXMQgTjaJlxg3FU30XsKZSrhDFWbh6ZccVB7rbIxzSicNQ85FZf1tqFm5uMD4YoNyR8dDkFnYPmdDLmZQPAA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;900&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;阅读指引：&lt;/strong&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;1、阅读本文预计需要&lt;/span&gt;&lt;span&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;分钟，并提供资源下载。&lt;/span&gt;&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;2、本文是&lt;strong&gt;「&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;网上冲浪指南&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;」&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;Internet&lt;/strong&gt;&lt;/span&gt;&lt;span&gt; 专题中的&lt;/span&gt;&lt;span&gt;&lt;strong&gt; i03&lt;/strong&gt;&lt;/span&gt;&lt;span&gt; 篇&lt;/span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;更新版本&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，回复关键字 “&lt;span&gt;&lt;strong&gt;i&lt;/strong&gt;&lt;/span&gt;” 查看本专题所有内容。&lt;/span&gt;&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;3、第一时间获取更新，欢迎关注「&lt;/span&gt;&lt;span&gt;&lt;strong&gt;奔跑中的奶酪&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;」。&lt;/span&gt;&lt;/span&gt;&lt;span/&gt;&lt;span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section class=&quot;&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;导读&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;拓展之于浏览器，就像 APP 之于智能手机。&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;拓展的数量成千上万，但能够被用户知道的通常在100个左右，能被用户选择使用的也就50个左右，而大多数人安装的拓展也不会超过10个。&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;浏览器拓展的数量庞大，但真正好用的并不多。&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;我们经常能看到很多拓展推荐的文章，好的推荐文章各有不同，但&quot;&lt;strong&gt;没什么卵用&lt;/strong&gt;&quot;的推荐文章大多很相似。&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;一是喜欢标题党。&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;动不动就这个神器，那个黑科技，诸如此类的词汇被滥用。&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;二是喜欢推荐 Adblock Plus&lt;/strong&gt;。不是说 Adblock Plus 不好，而是实在太入门了，把你当做小白用户来看待。&lt;br/&gt;&lt;/span&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;三是喜欢把拓展（或扩展）说成是插件。&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;这是对拓展认识不足的表现，就好像是一个给你推荐电脑的人，他总是把硬盘说成内存。&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section class=&quot;&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;01&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;h2 class=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;我们需要什么样的拓展？&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;作为一个有着5年开发经验的用户，我很能感受到“&lt;strong&gt;好东西无人问津&lt;/strong&gt;”是一种什么样的体验。&lt;br/&gt;&lt;br/&gt;我试用了&lt;strong&gt;超过2000多款&lt;/strong&gt;浏览器拓展，这让我对浏览器拓展的选择有了新的理解。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;这第一个理解就是：很多拓展没有必要安装。&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;真正必备的拓展属于那些&lt;strong&gt;基础辅助的、使用率高的、大多数人都适用&lt;/strong&gt;的拓展，很多拓展其实没有必要安装。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;1、一些拓展包含了多个拓展的功能。&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;一些非常小的功能，比如以图搜图、二维码、网页缓存查询、站内搜索、相似网页查询等，我们没有必要为了这些功能都安装一个相应的拓展，有一款叫 &lt;/span&gt;&lt;span&gt;Selection Context Search&lt;/span&gt;&lt;span&gt; 的拓展就可以搞定以上所有功能。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;2、一些拓展可以用脚本代替。&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;相对于脚本来说，拓展显得更加重型，如果一个功能可以用脚本代替，那么就不要使用拓展了。&lt;br/&gt;&lt;br/&gt;比如悬浮查看大图的拓展 &lt;/span&gt;&lt;span&gt;Imagus&lt;/span&gt;&lt;span&gt;，我们能感觉得到&lt;span&gt;安装后&lt;/span&gt;，网页加载速度受到的影响，而类似的脚本 &lt;/span&gt;&lt;span&gt;PicViewer&lt;/span&gt;&lt;span&gt; 则几乎没有影响。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;3、一些拓展应该选择使用软件版。&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;由于浏览器应用层面的限制，拓展的功能范围，无论再怎么强大也无法穿透浏览器，拓展的功能都是带着“&lt;strong&gt;镣铐&lt;/strong&gt;”的，一些拓展可以选择相关的软件来代替。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;比如截图拓展 &lt;/span&gt;&lt;span&gt;Nimbus Screen Capture&lt;/span&gt;&lt;span&gt;、文字识别拓展 &lt;/span&gt;&lt;span&gt;Copyfish&lt;/span&gt;&lt;span&gt;、录屏拓展 &lt;/span&gt;&lt;span&gt;Loom&lt;/span&gt;&lt;span&gt;、下载拓展 &lt;/span&gt;&lt;span&gt;Video 
DownloadHelper&lt;/span&gt;&lt;span&gt;，它们都已经是同类拓展中的佼佼者了，但他们还是没有软件版来得更加强大、而且万能。&lt;br/&gt;&lt;br/&gt;比如截图软件用 &lt;/span&gt;&lt;span&gt;FastStone
 Capture&lt;/span&gt;&lt;span&gt;，文字识别软件用 &lt;/span&gt;&lt;span&gt;天若ORC&lt;/span&gt;&lt;span&gt;，录屏软件用 &lt;/span&gt;&lt;span&gt;Camtasia&lt;/span&gt;&lt;span&gt;，下载软件用 &lt;/span&gt;&lt;span&gt;IDM&lt;/span&gt;&lt;span&gt;。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;4、忽略行业领域之外的拓展。&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;一些拓展只有在特定的领域才用得上，比如&lt;strong&gt;开发类拓展、设计类拓展、英语类拓展、娱乐类拓展&lt;/strong&gt;等，如果它们已经超出了我们所在的行业领域，人生苦短，我们就应该直接略过它们。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;5、同类拓展中选择最为简洁的。&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;同样的功能，如果有多款拓展可以选择，&lt;strong&gt;那么旗帜鲜明地选择最为简洁的那一款，&lt;/strong&gt;简洁更具普适性，也更加符合高效的理念。&lt;br/&gt;&lt;br/&gt;比如脚本管理工具有 
GreaseMonkey、TamperMonkey、ViolentMonkey 可选，但 &lt;/span&gt;&lt;span&gt;ViolentMonkey&lt;/span&gt;&lt;span&gt; 更为简洁，管理也更加方便，那么选 ViolentMonkey。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section class=&quot;&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;02&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;h2 class=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;年度最喜欢浏览器拓展推荐&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;br/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;我的第二个理解是：有很多的拓展都是伪需求的。&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;我们总是喜欢尝试试用各种拓展，觉得像是在挖掘宝藏，但它满足的&lt;span&gt;可能&lt;/span&gt;仅仅是我们的猎奇心而已。&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;用户其实并不知道自己需要什么，&lt;/strong&gt;用户是想要一匹更快的马吗？不是，用户是想更快地到达目的地。&lt;br/&gt;&lt;br/&gt;我们想要的是各种各样的拓展吗？不是，我们是想要的更快地得到想要的结果。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;很多五花八门看似强大的拓展，&lt;strong&gt;对于很多用户来说其实是一种伪需求&lt;/strong&gt;。比如聊天是一种需求，但某款拓展提供可以为任意网页开启聊天室的功能，则是一种伪需求。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;在拓展的选择上，我的推荐原则是：&lt;strong&gt;从需要出发，然后倒推浏览器拓展&lt;/strong&gt;。&lt;br/&gt;&lt;br/&gt;下面是我总结的年度最喜欢浏览器拓展列表，支持 Chrome 和 Firefox。&lt;br/&gt;&lt;br/&gt;由于 Chrome 应用商店无法访问，推荐到 &lt;/span&gt;&lt;span&gt;https://crxdl.com&lt;/span&gt;&lt;span&gt; 下载。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-2 even&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;常用拓展&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-3 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;span&gt;&lt;strong&gt;功能&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;strong&gt;功能介绍&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-4 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;脚本管理&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;ViolentMonkey&lt;/span&gt;，相比 Tampermonkey、GreaseMonkey 更为简洁、方便。&lt;/span&gt;&lt;span&gt;❤&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-5 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;样式管理&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;xStyle&lt;/span&gt;，相比 Stylish、Stylus 更为简洁，管理也更加方便。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-6 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;拨号页&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;InfinityTab&lt;/span&gt;，可能是目前最好用的新标签页，但自带的图标有购物返利尾巴。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-7 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;翻译工具&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;沙拉查词&lt;/span&gt;，多功能自定义强大的聚合翻译拓展，翻译和学习英语的利器。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-8 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;代理工具&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Proxy SwitchyOmega&lt;/span&gt; ，操作简单，可以轻松管理和切换多个代理设置。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-9 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;截图工具&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Nimbus Screen Capture&lt;/span&gt;，全能截图拓展，但推荐使用软件 FastStone Capture。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-10 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;稍候阅读&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;In My Pocket&lt;/span&gt;，标记一时没来得急读完的网页，支持多平台同步。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-11 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;视频下载&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Video DownloadHelper&lt;/span&gt;，支持大多数网站，但推荐使用软件 IDM。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-12 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;广告过滤&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;广告净化器&lt;/span&gt;，同时支持网页广告和视频广告过滤，规则更新快，适合国内用户。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-13 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;密码管理&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;BitWardens&lt;/span&gt;，简单易用，多平台同步，且免费的密码管理工具。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-14 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;鼠标拖拽&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;GlitterDrag&lt;/span&gt;，提供文字、图片和链接的拖拽功能，Chrome 用 crxMouse。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-15 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;浏览器&lt;/span&gt;&lt;span&gt;&lt;br/&gt;请求&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Header Editor&lt;/span&gt;，一款同时拥有重定向，反盗链，用户代理修改等功能的拓展。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-16 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;右键搜索&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Context Search&lt;/span&gt;，功能最全的右键搜索拓展，支持诸多自定义选项搜索。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-17 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;RSS&lt;/span&gt;&lt;span&gt;&lt;br/&gt;阅读器&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Feeder&lt;/span&gt;，虽然 Feedy，Inoreader 都很好，但 Feeder 的使用体验更加友好。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-18 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;网页剪藏&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Evernote Web Clipper&lt;/span&gt;，一键标注和保存完整的网页内容到 Evernote 笔记上。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-19 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;恢复&lt;/span&gt;&lt;span&gt;&lt;br/&gt;关闭标签&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Undo Close Tab&lt;/span&gt;，简单且高效的标签恢复拓展。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-21 odd&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;功能增强&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-22 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;书签检测&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Bookmarks Organizer&lt;/span&gt;，一键查找失效、重复的书签，并支持重定向链接修复。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-23 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Cookie&lt;br/&gt;编辑&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;EditThisCookie&lt;/span&gt;，Cookie管理器，可以用于编辑Cookie，比如设置最大有效期。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-24 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;Aria2下载&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Aria2 manager&lt;/span&gt;，用于手动导出和自动拦截下载到Aria2下载器。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-25 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;邮件提醒&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Email Notifier&lt;/span&gt;，界面简洁，支持绝大多数邮箱网站。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-26 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;网页监测&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Distill Web Monitor&lt;/span&gt;，用于跟踪监测网页更新。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-27 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;云盘钥匙&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;云盘万能钥匙&lt;/span&gt;，自动填写网盘提取密码和检测链接否有效。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-28 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;二维码&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;二维码&lt;/span&gt;，将文本、链接、图片等生成二维码，也可识别二维码图片。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-29 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;OCR识别&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Copyfish&lt;/span&gt;，支持图片、截图等方式进行认别，但推荐使用软件“天若OCR”。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-30 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;填表工具&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Informenter&lt;/span&gt;，密码管理拓展一般都会填表功能，如果你不用，这是个不错的选择。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-31 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;链接多选&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Snap Links Plus&lt;/span&gt;，使用鼠标右键可框选多个链接，也可以框选多个复选框。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-32 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;浏览器&lt;br/&gt;调用&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Open With&lt;/span&gt;，用于调用其他浏览器打开当前网页，还可以用于运行多个浏览器配置。&lt;/span&gt;&lt;span/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-33 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;浏览&lt;br/&gt;记录分析&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;History Master&lt;/span&gt;，更加友好的可视化历史记录分析工具。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-34 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;自动化&lt;br/&gt;工具&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Wildfire&lt;/span&gt;，让工作实现操作自动化，可以用于替代 &lt;/span&gt;&lt;span&gt;iMacros&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-35 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;取消&lt;br/&gt;右键限制&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Enable Right Click and Copy&lt;/span&gt;，解除包括选择，复制，右键菜单等限制，支持白名单。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-36 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;限制访问&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Block Site&lt;/span&gt;，限制自己访问一些指定网站，还有上网时间，适合工作的时候使用。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-37 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;网页&lt;br/&gt;内容替换&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;FoxReplace&lt;/span&gt;，可以替换页面的文字内容，用于编辑时非常好用。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-38 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;输入内容&lt;br/&gt;保存&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Textarea Cache&lt;/span&gt;，自动保存输入框里的内容，做文字编辑时很有用。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-39 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;快捷键&lt;br/&gt;拓展&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Surfingkeys&lt;/span&gt;，让你像 VIM 一样通过键盘来操控浏览器，键盘流必备，按F键显示快捷键。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-41 odd&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;标签页管理&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-42 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;新标签页&lt;br/&gt;覆盖&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;New Tab Override&lt;/span&gt;，使修改新标签页显示的内容成为可能。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-43 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;标签页&lt;br/&gt;切换&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Astrolabe&lt;/span&gt;，使用页面缩略图的方式来切换标签页。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-44 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;标签页&lt;br/&gt;查看&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Tree Style Tab&lt;/span&gt;，以树的形式显示当前打开的标签页，Chrome 用 Aerys。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-45 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;会话管理&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Tab Session Manager&lt;/span&gt;，每隔15分钟自动保存用户的浏览会话。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-46 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;小号管理&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;SessionBox&lt;/span&gt;，方便快捷的小号管理拓展，让你在同一网站同时登录多个账户。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-47 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;节省内存&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;The Great Suspender&lt;/span&gt;，自动或手动冻结不用的标签页来节省内存占用，适合内存较小时。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-48 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;限制&lt;br/&gt;标签数量&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Limit Tabs&lt;/span&gt;，限制浏览器打开标签页的数量，超过时只能先关闭原有的标签页。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-49 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;正文内容&lt;br/&gt;索引&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Falcon&lt;/span&gt;，地址栏输入 f ，可以搜索历史记录里的正文内容。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-51 odd&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;网页浏览&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-52 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;阅读模式&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;简悦&lt;/span&gt;，更加优雅的阅读模式扩展。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-53 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;雅黑字体&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;替换字体的中文部分为雅黑&lt;/span&gt;，同时避免影响英文部分。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-54 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;手形工具&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;ScrollAnywhere&lt;/span&gt;，按住鼠标左键，像手机屏幕一样地滑动网页。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-55 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;维基阅读&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Wikiwand&lt;/span&gt;，让排版老旧的Wikipedia有一个全新的界面。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-56 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;亮度调整&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Adjust Screen Brightness&lt;/span&gt;，修改屏幕亮度。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-57 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;黑夜模式&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Dark Mode &lt;/span&gt;，将网页变成黑夜阅读模式。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-58 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;网页缩放&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Zoom Page WE&lt;/span&gt;，网页缩放拓展，能记住网站的设置。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-59 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;分屏浏览&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Tile Tabs WE&lt;/span&gt;，标签页分割同屏显示，适合于同时进行多项任务的情况。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-60 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;MD 浏览&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Markdown Viewer&lt;/span&gt;，在浏览器中直接查看 MarkDown 文件。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-61 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;EPUB浏览&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;EPUB Reader&lt;/span&gt;，在浏览器中直接查看 EPUB 文件。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-62 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;MOBI浏览&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;MOBI Reader&lt;/span&gt;，在浏览器中直接查看 MOBI 文件。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-64 even&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;图片浏览&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-65 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;图片&lt;br/&gt;查看助手&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Hover Zoom+&lt;/span&gt;，鼠标移动到图片上自动显示高清大图，但推荐使用脚本：&lt;/span&gt;&lt;span&gt;PicViewer&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-66 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;图片&lt;br/&gt;一键保存&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;SAVE IN... &lt;/span&gt;，一键将图片保存到指定位置，下载图片的同时又做好图片管理。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-67 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;图片&lt;br/&gt;批量下载&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;ImageAssistant&lt;/span&gt;，可以嗅探、分析网页图片、图片筛选、批量下载等功能。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-68 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;图床工具&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;微博图床&lt;/span&gt;，使用前需要登录微博网页版，而且还支持批量上传。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-69 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Google&lt;br/&gt;GIF&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;GoogleGIFs&lt;/span&gt;，解决谷歌图片搜索结果缩略图不支持播放 GIF 的问题。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-71 odd&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;音乐收听&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-72 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;音乐收听&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Listen 1&lt;/span&gt;，可以搜索和播放来自网易云音乐，虾米，QQ音乐等网站的歌曲。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-73 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;歌词展示&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Lyrics Here&lt;/span&gt;，在 Youtube，Spotify 等音乐网站上显示当前播放音乐的歌词。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-74 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;广播收听&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Search to Play the Song&lt;/span&gt;，Listen 1的简洁版，不但能听歌，还能听广播。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-75 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;歌曲识别&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;AHA Music&lt;/span&gt;，识别当前浏览器播放中的歌曲，也支持本地音乐。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-77 odd&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;视频观看&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-78 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;视频放大&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Maximize Video&lt;/span&gt;，将视频放大填充到网页全屏，但推荐类似的脚本 &lt;/span&gt;&lt;span&gt;视频网页全屏&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-79 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;视频弹窗&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Popup Tool&lt;/span&gt;，可将当前视频弹出到小窗播放，Chrome 用 Separate Window。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-80 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;视频&lt;br/&gt;倍数播放&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Video Speed Controller&lt;/span&gt;，Z、X为后退、前进，SD减慢加快，R恢复默认。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-81 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;弹幕&lt;br/&gt;过滤器&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;pakku&lt;/span&gt;，哔哩哔哩弹幕过滤器，屏蔽相似弹幕。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-82 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;哔哩哔哩&lt;br/&gt;助手&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;哔哩哔哩助手&lt;/span&gt;，可以下载视频，查询弹幕发送人以及一些十分实用的直播区功能。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-83 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;U2B增强&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Enhancer for YouTube&lt;/span&gt;，为Youtube增加各种实用功能。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-84 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;U2B&lt;br/&gt;地区解锁&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;YouTube Unblocker&lt;/span&gt;，解锁 Youtube 国家地区限制的。&lt;/span&gt;&lt;span&gt;测试视频&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-85 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;U2B&lt;br/&gt;双语字幕&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Dualsub&lt;/span&gt;，让 YouTube 显示双语字幕，英语学习者必备。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-86 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;U2B&lt;br/&gt;频道屏蔽&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;BlockTube&lt;/span&gt;，屏蔽不想看的视频频道，包括首页推荐和搜索页面。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-88 even&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Firefox 特有拓展&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-89 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;笔记本&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Sidebar Note&lt;/span&gt;，自动保存，支持快捷键，支持选中文字一键发送至笔记本。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-90 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;侧边栏&lt;br/&gt;浏览&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Side View&lt;/span&gt;，Firefox 官方出品的侧边栏拓展，并支持以手机端查看。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-91 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;添加&lt;br/&gt;搜索引擎&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Add custom search engine&lt;/span&gt;，增加一个类似于Chrome的搜索引擎添加模式。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-92 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;书签图标&lt;br/&gt;刷新&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Checkmarks&lt;/span&gt;，在侧边栏中打开，设置进程后依次打开刷新图标。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-93 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;搜索引擎&lt;br/&gt;编辑&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;mozlz4-edit&lt;/span&gt;，可手动修改火狐的加密配置文件，比如搜索引擎的 search.json.mozlz4。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-94 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;书签&lt;br/&gt;快速添加&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Bookmark Tab Here&lt;/span&gt;，添加一个”添加到此“的选项，用于快速添加书签到指定书签文件夹。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table class=&quot;tablepress tablepress-id-62&quot;&gt;&lt;tbody class=&quot;row-hover&quot;&gt;&lt;tr class=&quot;row-96 even&quot;&gt;&lt;td colspan=&quot;2&quot; class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Chrome 特有拓展&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-97 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;拓展管理&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;SimpleExtManager&lt;/span&gt;，简洁实用，一键管理所有扩展。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-98 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;字体渲染&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;Font Rendering Enhancer&lt;/span&gt;，解决Chrome字体发虚的问题，让字体渲染和Firefox一样。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-99 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;下载管理&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;下载管理&lt;/span&gt;，简洁实用，没有冗余的功能，专注于下载管理。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-100 even&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;strong&gt;&lt;span&gt;书签管理&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;书签侧边栏&lt;/span&gt;，在浏览器视图区左侧添加固定式的, 管理所有书签的侧边栏。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;row-101 odd&quot;&gt;&lt;td class=&quot;column-1&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;拓展下载&lt;br/&gt;助手&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class=&quot;column-2&quot;&gt;&lt;span&gt;&lt;span&gt;谷歌访问助手&lt;/span&gt;，用于访问 Chrome Web Store 等网站，但使用需要修改主页。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section class=&quot;&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;结尾&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;h2 class=&quot;&quot;&gt;&lt;br/&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h2 class=&quot;&quot;&gt;&lt;span&gt;打造最值得收藏的浏览器拓展列表，&lt;/span&gt;&lt;/h2&gt;&lt;h2 class=&quot;&quot;&gt;&lt;span&gt;以上拓展的下载链接、后续更新，以及其他领域的拓展推荐，&lt;/span&gt;&lt;/h2&gt;&lt;h2 class=&quot;&quot;&gt;&lt;span&gt;都会在奶酪的 Github 上集中更新，&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;欢迎点 ★Star，帮助更多的朋友发现这个项目。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;链接1：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://github.com/runningcheese/RunningCheese-Firefox/tree/master/Extensions&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;链接2：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;h2 class=&quot;&quot;&gt;&lt;span&gt;https://www.runningcheese.com/extensions&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;回复关键字&lt;br/&gt;“&lt;span&gt;&lt;strong&gt;1227&lt;/strong&gt;&lt;/span&gt;”或者“&lt;span&gt;&lt;strong&gt;i03&lt;/strong&gt;&lt;/span&gt;”&lt;br/&gt;获取文中提到的所有资源。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;相关文章：&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwMjUyNzYxMw==&amp;amp;mid=2247485116&amp;amp;idx=1&amp;amp;sn=854cf96f6e893471604a85e8ea646949&amp;amp;chksm=9ac85eaeadbfd7b84643db862b431c7796cae3e6ea504192f5de11695ff2cc61cd21407e9083&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;1&quot;&gt;&lt;span&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;&quot; data-ratio=&quot;0.175&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/5VykXMQgTjYoaqbnicX38mXD85iauibcIBy60F9bIhDMyAt16IiapSBHsUQxv2ePvecibBKtKOcd19RmI9htW9WSgwA/640?wx_fmt=jpeg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwMjUyNzYxMw==&amp;amp;mid=2247485097&amp;amp;idx=1&amp;amp;sn=fe31a703f6c72341cd263a3e7387985f&amp;amp;chksm=9ac85ebbadbfd7ad44a291046901932a4750d42ba1ea92c4f04292fe41093dc4f25f9d2ecbd6&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;1&quot;&gt;&lt;span&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;&quot; data-ratio=&quot;0.175&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/5VykXMQgTjYoaqbnicX38mXD85iauibcIByfgCM7Hst8Uibh1tJdFUHP9IddBOp34FAqWjztibNw8alPoJGY3Ix6hIQ/640?wx_fmt=jpeg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwMjUyNzYxMw==&amp;amp;mid=2247485131&amp;amp;idx=1&amp;amp;sn=defc76293e52ed52694c70421eefa32b&amp;amp;chksm=9ac85ed9adbfd7cfb9b5666646fdde77071710ea362bc1031a57a03b462a5403ce2efd323324&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;你已选中了添加链接的内容&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;1&quot;&gt;&lt;span&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;542&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;95&quot; data-ratio=&quot;0.175&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/5VykXMQgTjaJlxg3FU30XsKZSrhDFWbhLjLyej5BWSfYlic7GcvOtGicyxzic2l0ZomgB6s6ZvpVHeUmPHCUn6uVQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;看完文章：&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;喜欢本文，或者这篇文章对你有帮助的话，那么：&lt;br/&gt;&lt;br/&gt;1、&lt;/span&gt;&lt;span&gt;&lt;strong&gt;点再看&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;，帮助更多的人看到这篇文章。&lt;br/&gt;2、&lt;/span&gt;&lt;span&gt;&lt;strong&gt;写留言&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;，对文章进行评论，我会尽可能回复。&lt;br/&gt;3、&lt;/span&gt;&lt;span&gt;&lt;strong&gt;点关注&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;，关注我并星标，第一时间获取更新。&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages &quot; data-ratio=&quot;0.4697986577181208&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;596&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/5VykXMQgTjYu09QNUT7TH5050lvafFFjTAk6bRibHt2OHyTZsg2cVuqpHRXOmFekZ7WW6NbibAH7Xib3lX3mK55uA/640?wx_fmt=png&quot;/&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;div class=&quot;reward_qrcode_area reward_area tc&quot; id=&quot;js_reward_qrcode&quot;&gt;
                                &lt;p class=&quot;tips_global&quot;&gt;Long-press QR code to transfer me a reward&lt;/p&gt;
                                                                &lt;p class=&quot;reward_tips&quot;&gt;赞赏／在看二选一&lt;/p&gt;
                                &lt;span class=&quot;reward_qrcode_img_wrp&quot;&gt;&lt;img class=&quot;reward_qrcode_img&quot; id=&quot;js_reward_qrcode_img&quot;/&gt;&lt;/span&gt;
                                &lt;p class=&quot;tips_global&quot;&gt;As required by Apple&#x27;s new policy, the Reward feature has been disabled on WeChat for iOS. You can still reward an Official Account by transferring money via QR code.&lt;/p&gt;
                            &lt;/div&gt;
                                                                            
                              
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>