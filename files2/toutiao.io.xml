<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>1e22e4414b07b7f0d29b33c0799106a1</guid>
<title>2022 年别再焦虑啦！加入我们！</title>
<link>https://toutiao.io/k/obimloc</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;profile_inner&quot;&gt;
                              &lt;strong class=&quot;profile_nickname&quot;&gt;开发者头条&lt;/strong&gt;
                              &lt;img class=&quot;profile_avatar&quot; id=&quot;js_profile_qrcode_img&quot; src=&quot;&quot; alt=&quot;&quot;/&gt;

                              &lt;p class=&quot;profile_meta&quot;&gt;
                              &lt;label class=&quot;profile_meta_label&quot;&gt;Weixin ID&lt;/label&gt;
                              &lt;span class=&quot;profile_meta_value&quot;&gt;kaifazhetoutiao&lt;/span&gt;
                              &lt;/p&gt;

                              &lt;p class=&quot;profile_meta&quot;&gt;
                              &lt;label class=&quot;profile_meta_label&quot;&gt;About Feature&lt;/label&gt;
                              &lt;span class=&quot;profile_meta_value&quot;&gt;程序员分享平台 | 官方应用下载地址：http://toutiao.io/download&lt;/span&gt;
                              &lt;/p&gt;
                              
                          &lt;/div&gt;
                          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>e02057a2a3be14103e0a4c397f51565b</guid>
<title>基于Skywalking全链路行业解决方案</title>
<link>https://toutiao.io/k/qsiqiua</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;h1 data-source-line=&quot;1&quot;&gt;1. 全链路监控行业介绍&lt;/h1&gt;&lt;h2 data-source-line=&quot;2&quot;&gt;1.1 全链路监控行业背景&lt;/h2&gt;&lt;pre data-source-line=&quot;3&quot;&gt;&lt;code class=&quot;hljs&quot;&gt;微服务架构盛行，服务拆分边界更加细粒度，完成一次完整的业务逻辑，需要调用不同的微服务，
微服务有可能是由不同的团队开发、可能使用不同的编程语言来实现、有可能布在了几千台服务器，
横跨多个不同的数据中心，因此，就需要一些可以帮助理解系统行为、用于分析性能问题的工具，
以便发生故障的时候，能够快速定位和解决问题。&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-source-line=&quot;7&quot;&gt;1.1.1 业务负责人快速check的关键点&lt;/h3&gt;&lt;ul data-source-line=&quot;8&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;如何快速发现问题？&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;如何判断故障影响范围？&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;如何梳理服务依赖以及依赖的合理性？&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;如何分析链路性能问题以及实时容量规划？&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-source-line=&quot;12&quot;&gt;1.1.2 业务负责人目标可达性&lt;/h3&gt;&lt;ul data-source-line=&quot;13&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;请求链路追踪，故障快速定位，可以通过调用链结合业务日志快速定位错误信息&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;可视化，各个阶段耗时，进行性能分析&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;依赖优化，各个调用环节的可用性、梳理服务依赖关系以及优化&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;数据分析，优化链路，可以得到用户的行为路径，汇总分析应用在很多业务场景&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-source-line=&quot;17&quot;&gt;1.2 全链路监控目标&lt;/h2&gt;&lt;h2 data-source-line=&quot;22&quot;&gt;1.3 链路监控基本功能&lt;/h2&gt;&lt;ul data-source-line=&quot;23&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;埋点和生成日志&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;收集和存储日志&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;分析和统计调用链路数据，以及时效性&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;UI展现及决策支持&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h1 data-source-line=&quot;27&quot;&gt;2. 全链路监控行业应用&lt;/h1&gt;&lt;pre data-source-line=&quot;28&quot;&gt;&lt;code class=&quot;hljs&quot;&gt;全链路监控理论模型基本都是依赖于Google Dapper论文&lt;/code&gt;&lt;/pre&gt;&lt;ul data-source-line=&quot;29&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;Zipkin：由Twitter公司开源，开放源代码分布式的跟踪系统，用于收集服务的定时数据，以解决微服务架构中的延迟问题，包括：数据的收集、存储、查找和展现。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;Pinpoint：一款对Java编写的大规模分布式系统的APM工具，由韩国人开源的分布式跟踪组件。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;Skywalking：国产的优秀APM组件，是一个对JAVA分布式应用程序集群的业务运行情况进行追踪、告警和分析的系统。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;Appdash：Appdash是Go的应用程序跟踪系统，基于Google的Dapper和Twitter的Zipkin&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;Lightstep：Lightstep全链路解决方案非常完整，整体解决方案和微服务架构生态完美的匹配，如果技术栈匹配，可以开箱即用，维护一个稳定的基线版本，Lightstep学习成本较高，可以复用Lightstep的架构思想，自研全链路框架。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;Jaeger支持语言：Java、Go、Node、Python和C++，Jaeger支持OpenTracing API及规范, Jaeger是Uber开源的全链路监控框架，解决方案的完整性的程度和Lightstep差不多，整体学习成本要低，提供了丰富的探针客户端。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h1 data-source-line=&quot;35&quot;&gt;3. SkyWalking实践产出和规划&lt;/h1&gt;&lt;h2 data-source-line=&quot;36&quot;&gt;3.1 实践体验&lt;/h2&gt;&lt;h2 data-source-line=&quot;41&quot;&gt;3.2 实践产出&lt;/h2&gt;&lt;h2 data-source-line=&quot;48&quot;&gt;3.3 功能规划&lt;/h2&gt;&lt;ul data-source-line=&quot;49&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; 持续业务迭代&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;SLA全局应用排名&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;UI优化&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;智能大数据清洗平台（整合6.0版本新功能）&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;业务全链路监控（基于业务定制）&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h1 data-source-line=&quot;54&quot;&gt;4. 问题答疑&lt;/h1&gt;&lt;h2 data-source-line=&quot;55&quot;&gt;4.1 如何解决链路异步问题&lt;/h2&gt;&lt;h2 data-source-line=&quot;57&quot;&gt;4.2 链路数据和拓扑不一致（官方技术解释）&lt;/h2&gt;&lt;h1 data-source-line=&quot;61&quot;&gt;5.SkyWalking架构细节&lt;/h1&gt;&lt;h2 data-source-line=&quot;62&quot;&gt;5.1 版本5.0.X&lt;/h2&gt;&lt;h3 data-source-line=&quot;63&quot;&gt;5.1.1 基本原则&lt;/h3&gt;&lt;p data-source-line=&quot;64&quot;&gt;SkyWalking架构的基本设计原则包括易于维护、可控和流式处理。 为了实现这些目标，SkyWalking后端采用以下设计。&lt;/p&gt;&lt;ul data-source-line=&quot;66&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;模块化设计。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;多种客户端连接方式。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;后端集群服务发现机制。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;流模式。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;可切换的存储模块。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-source-line=&quot;71&quot;&gt;5.1.2 模块化&lt;/h3&gt;&lt;p data-source-line=&quot;72&quot;&gt;SkyWalking后端基于纯模块化设计。用户可以根据自己的需求切换或组装后端功能。&lt;/p&gt;&lt;p data-source-line=&quot;74&quot;&gt;模块定义了一组特性，这些特性q可以包括技术库(如:gRPC/Jetty服务器管理)、跟踪分析(如:跟踪段或zipkin span解析器)或聚合特性。 这些完全由模块定义及其模块实现来决定。&lt;/p&gt;&lt;p data-source-line=&quot;76&quot;&gt;每个模块都可以在Java接口中定义它们的服务，每个模块的提供者都必须为这些服务提供实现者。 提供者应该基于自己的实现定义依赖模块。这意味着，即使两个不同的模块实现者，也可以依赖不同的模块。&lt;/p&gt;&lt;p data-source-line=&quot;78&quot;&gt;此外，后端模块化core还检查启动序列，如果没有发现周期依赖或依赖，后端应该被core终止。&lt;/p&gt;&lt;p data-source-line=&quot;80&quot;&gt;后端启动所有模块，这些模块的配置在application.yml中是分离的。在这个yaml文件中：根级别是模块名称，例如cluster、naming等。 第二级别是模块的实现者的名称，例如zookeeper是cluster等模块。第三级是实现者的具体属性。例如hostPort和sessionTimeout是zookepper的必需属性。&lt;/p&gt;&lt;h3 data-source-line=&quot;82&quot;&gt;5.1.2 多种连接方式&lt;/h3&gt;&lt;p data-source-line=&quot;83&quot;&gt;首先，后端提供两种类型的连接，也即提供两种协议（HTTP和gRPC）: HTTP中的命名服务，它返回后端群集中的所有可用collector地址。 在gRPC(SkyWalking原生探针的主要部分)和HTTP中使用上行链路服务，它将跟踪和度量数据上传到后端。 每个客户端将只向单个collector发送监视数据(跟踪和度量)。如果与连接的后端在某个时刻断开连接将会尝试连接其它的后端。比如在SkyWalking Java探针中collector.servers表示命名服务，将naming/jetty/ip:port映射为HTTP请求地址。collector.direct_servers表示直接设置上行服务，并使用gRPC发送监控数据。&lt;/p&gt;&lt;h3 data-source-line=&quot;86&quot;&gt;5.1.3 Collector 集群发现&lt;/h3&gt;&lt;p data-source-line=&quot;87&quot;&gt;当Collector以群集模式运行时，后端必须以某种方式相互发现。默认情况下，SkyWalking使用Zookeeper进行协调，并作为实例发现的注册中心。&lt;/p&gt;&lt;p data-source-line=&quot;89&quot;&gt;通过以上部分(多个连接方式)，客户端库将不会使用Zookeeper来查找集群。我们建议客户不要这么做。因为集群发现机制是可切换的，由模块化核心提供。依赖它会破坏可切换能力。 我们希望社区提供更多的实现者来进行集群发现，例如Eureka，Consul，Kubernate等。&lt;/p&gt;&lt;h3 data-source-line=&quot;90&quot;&gt;5.1.4 流模式&lt;/h3&gt;&lt;p data-source-line=&quot;91&quot;&gt;流模式类似轻量级storm/spark的实现，它允许使用API构建流处理图（DAG）以及每个节点的输入/输出数据协定。&lt;/p&gt;&lt;p data-source-line=&quot;93&quot;&gt;新模块可以查找和扩展现有的流程图。&lt;/p&gt;&lt;p data-source-line=&quot;95&quot;&gt;处理中有三种情况&lt;/p&gt;&lt;p data-source-line=&quot;97&quot;&gt;同步过程，传统方法调用。 异步过程，又叫做基于队列缓冲区的批处理。 远程过程，汇总后端的汇总。以这种方式，在节点中定义选择器以决定如何在集群中找到collector。（HashCode，Rolling，ForeverFirst是支持的三种方式） 通过具备的这些功能，collector集群像流式网络一样运行着去聚合、度量标准监控信息，并且不依赖于存储模块的实现来支持并发地编写相同的度量id。&lt;/p&gt;&lt;h3 data-source-line=&quot;101&quot;&gt;5.1.5 可切换存储实现器&lt;/h3&gt;&lt;p data-source-line=&quot;102&quot;&gt;由于流模式负责并发，因此存储模块的实现的职责是提供高速写入和组合查询。&lt;/p&gt;&lt;p data-source-line=&quot;104&quot;&gt;目前，我们支持ElasticSearch作为主要实现模块，H2用于预览版本，以及由Sharding Shpere项目管理的MySQL关系数据库集群。&lt;/p&gt;&lt;h3 data-source-line=&quot;105&quot;&gt;5.1.6 Web 界面&lt;/h3&gt;&lt;p data-source-line=&quot;106&quot;&gt;除了后端设计的原则，UI是SkyWalking的另一个核心组件。它基于React，Antd和Zuul代理实现，提供后端集群发现、查询调度和可视化的功能。&lt;/p&gt;&lt;p data-source-line=&quot;108&quot;&gt;Web UI以多连接方式中的相似的流程机制作为客户端的1.naming、2.uplink。唯一的区别是，在ui/jetty/yaml定义下的主机和端口上(默认值:localhost:12800)用HTTP绑定中的GraphQL查询协议替换上行。&lt;/p&gt;&lt;h2 data-source-line=&quot;109&quot;&gt;5.2 版本6.0.X&lt;/h2&gt;&lt;h3 data-source-line=&quot;110&quot;&gt;5.2.1 可观测性分析平台&lt;/h3&gt;&lt;p data-source-line=&quot;111&quot;&gt;OAP（可观察性分析平台）是一个新概念，从SkyWalking 6.x开始。 OAP取代旧的SkyWalking整个后端。该平台的功能如下。&lt;/p&gt;&lt;p data-source-line=&quot;113&quot;&gt;OAP功能 OAP接受来自更多来源的数据，这些来源属于两个组：跟踪和指标。&lt;/p&gt;&lt;ul data-source-line=&quot;116&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;跟踪 包括SkyWalking原生数据格式。 Zipkin v1，v2数据格式和Jaeger数据格式。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;指标 SkyWalking集成了Service Mesh平台，如Istio，Envoy，Linkerd，可通过数据面板或控制面板提供可观察性。此外，SkyWalking本机代理可以在公制模式下运行，从而大大提高了性能。 同时，通过使用提供的任何集成解决方案，例如SkyWalking日志插件或工具包，SkyWalking通过使用跟踪ID和跨度id为绑定跟踪和日志记录提供可视化集成。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-source-line=&quot;121&quot;&gt;像往常一样，gRPC和HTTP协议提供的所有服务使得不受支持的生态系统更容易集成。&lt;/p&gt;&lt;p data-source-line=&quot;125&quot;&gt;SkyWalking 5系列的传统方式。使用SkyWalking跟踪段和跨度格式格式化跟踪数据，甚至是Zipkin数据格式。 AOP分析段以获取度量，并将度量数据推送到流聚合中。 考虑仅跟踪某些类型的日志记录。只需为跟踪提供保存和可视化功能。 此外，SkyWalking接受来自其他项目的跟踪格式，例如Zipkin，Jeager，OpenCensus。这些格式也可以用两种方式处理。&lt;/p&gt;&lt;p data-source-line=&quot;132&quot;&gt;度量数据在流模式下在AOP集群内聚合。请参阅Observability Analysis Language，它提供了以脚本样式进行聚合和分析的简便方法。&lt;/p&gt;&lt;h3 data-source-line=&quot;133&quot;&gt;5.2.2 可观察性分析语言&lt;/h3&gt;&lt;p data-source-line=&quot;134&quot;&gt;提供OAL（可观察性分析语言）以分析流模式下的传入数据。OAL侧重于服务，服务实例和端点中的度量。因此，语言易于学习和使用。考虑到性能，读取和调试，OAL被定义为编译语言。 OAL scrips将在包阶段编译为普通Java代码。&lt;/p&gt;&lt;h3 data-source-line=&quot;135&quot;&gt;5.2.3 服务探针&lt;/h3&gt;&lt;p data-source-line=&quot;136&quot;&gt;在SkyWalking中，探测意味着集成到目标系统中的代理或SDK库，负责收集包括跟踪和度量的遥测数据。基于目标系统技术堆栈，探针可以使用非常不同的方法来实现。但最终它们是相同的，只需收集并重新格式化数据，然后发送到后端。&lt;/p&gt;&lt;p data-source-line=&quot;138&quot;&gt;在高级别中，所有SkyWalking探测器中都有三个典型组。&lt;/p&gt;&lt;p data-source-line=&quot;140&quot;&gt;基于语言的本地代理。这种代理在目标服务用户空间中运行，就像用户代码的一部分一样。如SkyWalking Java代理，使用-javaagent命令行参数在运行时操作代码，操作意味着更改并注入用户代码。另一种代理使用目标库提供的一些钩子或拦截机制。所以你可以看到，这些基于语言和库的代理。&lt;/p&gt;&lt;p data-source-line=&quot;142&quot;&gt;服务网格探测器。 ServiceMesh探针从服务网格或代理中的边车，控制面板收集数据。在过去，代理仅用作整个集群的入口，但是使用ServiceMesh和sidecar，现在我们可以基于此进行观察。&lt;/p&gt;&lt;p data-source-line=&quot;144&quot;&gt;第三方探针库。 SkyWalking接受其他链路数据格式。它分析数据，将其转换为跟踪，度量或两者的SkyWalking格式。此功能从接受Zipkin跨度数据开始。有关其他示踪剂的信息，请参阅Receiver以了解更多信&lt;/p&gt;&lt;p data-source-line=&quot;146&quot;&gt;您不需要同时使用基于语言的本机代理和ServiceMesh探针，因为它们都收集度量标准数据。因此，您的系统会遭受两倍的有效负载，并且分析数量会翻倍。&lt;/p&gt;&lt;p data-source-line=&quot;148&quot;&gt;使用这些探针有几种推荐方法： 仅使用基于语言的本机代理。 仅使用第三方探针库，如Zipkin探针生态系统。 仅使用Service Mesh探针。 在跟踪状态中使用Service Mesh探针与基于语言的本机代理或第三方仪器库。 （高级用法） 另外，举个例子，跟踪状态是什么意思？&lt;/p&gt;&lt;p data-source-line=&quot;155&quot;&gt;默认情况下，基于语言的本机代理和第三方探针库都会将分布式跟踪发送到后端，后端会对这些跟踪进行分析和聚合。在跟踪状态意味着，后端将这些跟踪视为日志，只保存它们，并构建跟踪和指标之间的链接，例如跟踪所属的端点和服务？&lt;/p&gt;&lt;p data-source-line=&quot;157&quot;&gt;接下来是什么？ 在Service auto instrument agent，Manual instrument SDK，Service Mesh probe和Zipkin receiver中学习SkyWalking支持的探针。 在了解了探针之后，请阅读后端概述以了解分析和持久性。&lt;/p&gt;&lt;h3 data-source-line=&quot;160&quot;&gt;5.2.4 服务自动探针代理&lt;/h3&gt;&lt;p data-source-line=&quot;161&quot;&gt;服务自动工具代理是基于语言的本机代理的子集。在这种代理中，它基于某些语言特定的功能，通常是基于VM的语言。&lt;/p&gt;&lt;p data-source-line=&quot;163&quot;&gt;Auto Instrument是什么意思？ 很多用户都知道这些代理人听到他们说不需要改变任何一行代码，SkyWalking过去常常把这些话放在我们的自述文件中。但实际上，这是对与错。对于最终用户，YES，他们不需要更改代码，至少在大多数情况下。但也是NO，代码仍然由代理更改，通常在运行时称为操作代码。基础上，它只是自动探针代理，包括有关如何通过VM接口更改代码的代码，例如通过javaagent premain在Java中更改类。&lt;/p&gt;&lt;p data-source-line=&quot;166&quot;&gt;此外，我们说大多数自动探针代理都是基于VM的，但实际上，您可以在编译时构建工具，而不是运行时。&lt;/p&gt;&lt;p data-source-line=&quot;168&quot;&gt;有什么限制？自动探针非常酷，您也可以在编译时创建它们，不依赖于VM功能，那么有没有限制？&lt;/p&gt;&lt;p data-source-line=&quot;170&quot;&gt;答案肯定是肯定的。它们是： 在大多数情况下可以进行过程传播。在许多高级语言中，它们用于构建业务系统，例如Java和.NET。大多数业务逻辑代码在每个请求的同一个线程中运行，这使得传播可以基于线程Id和堆栈模块以确保上下文是安全的。&lt;/p&gt;&lt;p data-source-line=&quot;173&quot;&gt;只是影响框架或库。由于代理更改代码，这也意味着代理插件开发人员已经知道代码。因此，这种探测器中始终存在受支持的列表。像SkyWalking Java代理支持的列表。&lt;/p&gt;&lt;p data-source-line=&quot;175&quot;&gt;跨线程不能一直支持。就像我们在流程传播中所说的那样，大多数代码在每个请求的单个线程中运行，尤其是业务代码。但在其他一些场景中，他们在不同的线程中执行操作，例如作业分配，任务池或批处理。或者某些语言提供协同程序或类似的东西，如Goroutine，然后开发人员可以运行低负载的异步过程，甚至鼓励。在这些情况下，仪表大盘将面临问题。&lt;/p&gt;&lt;p data-source-line=&quot;177&quot;&gt;因此，对于汽车仪表来说，没有什么神秘之处，简而言之，代理开发人员会编写激活程序来使仪器代码工作。就这些。&lt;/p&gt;&lt;p data-source-line=&quot;179&quot;&gt;接下来是什么？ 如果您想了解SkyWalking中的手动仪器库，请参阅手动仪器SDK部分&lt;/p&gt;&lt;h1 data-source-line=&quot;181&quot;&gt;6.全链路基础&lt;/h1&gt;&lt;p data-source-line=&quot;182&quot;&gt;理论基础&lt;/p&gt;&lt;h2 data-source-line=&quot;183&quot;&gt;6.1 OpenTracing规范&lt;/h2&gt;&lt;p data-source-line=&quot;184&quot;&gt;核心概念 trace和traceId：trace是全局监控系统的一次跟踪（用traceId标示一次跟踪，贯穿整个跨进程请求），多个span信息，及其关系信息。&lt;/p&gt;&lt;p data-source-line=&quot;187&quot;&gt;span：一个span代表系统中具有开始时间和执行时长的逻辑运行单元。span之间通过嵌套或者顺序排列建立逻辑因果关系，包含logs和tags。&lt;/p&gt;&lt;p data-source-line=&quot;189&quot;&gt;Logs：每个span可以进行多次Logs操作，每一次Logs操作，都需要一个带时间戳的时间名称，以及可选的任意大小的存储结构。&lt;/p&gt;&lt;p data-source-line=&quot;191&quot;&gt;tags: 每个span可以有多个键值对（key:value）形式的Tags，Tags是没有时间戳的，支持简单的对span进行注解和补充，在一个span的生命周期有效不能跨越span传递。&lt;/p&gt;&lt;p data-source-line=&quot;193&quot;&gt;SpanContext: SpanContext跨越进程边界，传递到下级span的状态。(例如，包含trace_id, span_id, sampled、baggage等数据)，并用于封装Baggage.&lt;/p&gt;&lt;p data-source-line=&quot;195&quot;&gt;Baggage: 存储在SpanContext中的一个键值对集合，在整个trace链路生命周期有效，可以跨越span、跨越进程进行传递.&lt;/p&gt;&lt;p data-source-line=&quot;197&quot;&gt;ActiveSpan: 当前线程的活跃Span，对Span做了封装，也可以理解为一个Span的指针.&lt;/p&gt;&lt;p data-source-line=&quot;199&quot;&gt;inject: SpanContext要做跨进程（如RPC）传输的时候,把SpanContext中的数据序列化到传输协议中。&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;extract: 与inject对应，从传输协议里，抽取数据反序列化成SpanContext。&lt;/p&gt;&lt;hr/&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;span&gt;往期文章链接&lt;/span&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483719&amp;amp;idx=1&amp;amp;sn=34fdd8760a95d2e89dca5cbdc3aa4ad6&amp;amp;chksm=fc333b81cb44b29722e9730b46ea0e5892f67f64e617b0d8822a420b1b5f128bfded73a4fbd7&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;基础能力框架演进&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483706&amp;amp;idx=1&amp;amp;sn=4cd0e51fc5f5d62f83f68fc412860520&amp;amp;chksm=fc333bfccb44b2ea9be7cd109fa4fb8e619d43cd99fbfd3ef5e541796fdb22caa897f9676094&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;冗余和故障转移&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483702&amp;amp;idx=1&amp;amp;sn=058a34ce9b7b2c898cfca74cefbbe48b&amp;amp;chksm=fc333bf0cb44b2e69b9d4ad3667062a112190fdae908a31ee04eb7ba7f0bbb59131f397c37d3&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;全链路监控系统整合业务系统如何高可用&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483699&amp;amp;idx=1&amp;amp;sn=46894d86d0793f97d6a23d1239de01b7&amp;amp;chksm=fc333bf5cb44b2e3d5dd2bcf3c922c974b997d5c0735944ced4383469c9bf414e9ab7b115a33&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;分布式架构-SpringCloud如何实现CAP&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483696&amp;amp;idx=1&amp;amp;sn=02c47beeb969be674ad87da5c898a7c5&amp;amp;chksm=fc333bf6cb44b2e056ec76489d55a0e92af09ff0675c0ff4d1b8a602772cd821c338fdf3804f&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;高并发系统设计-redis技术梳理&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483689&amp;amp;idx=1&amp;amp;sn=3e23913ba557e2933fa1bc2976954c20&amp;amp;chksm=fc333befcb44b2f96e885cd89e0d63022c0ce96f054f8e51cbf5c10dd8af883e93bff1113f59&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;基于RocketMq的事务消息设计&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483672&amp;amp;idx=1&amp;amp;sn=b69bb42d7a879006b18f3282d9fd3aa2&amp;amp;chksm=fc333bdecb44b2c82a312d2799df56f03e696e0f86d8c2aa8715ae5abec68ce0c123031c912d&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;Dubbo核心架构&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483682&amp;amp;idx=1&amp;amp;sn=ad23b82cf590e6c09e45a7009c0df371&amp;amp;chksm=fc333be4cb44b2f201e8226d5d711ef10a03d815a4e7baf4075fb4fd5a7462fd686dad6b5201&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;RocketMq消息中间件及分布式事务消息实现原理&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483665&amp;amp;idx=1&amp;amp;sn=4dd158bd82ce1627f62d5433ddd1f053&amp;amp;chksm=fc333bd7cb44b2c18e48b4be6d42387b8cc71f59495291c09caf05f1b518eaa11d7df198de6a&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;微服务架构-SpringBoot2.0.3源码之web容器篇(二)&lt;/a&gt;&lt;/p&gt;&lt;p data-source-line=&quot;201&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1ODAyNQ==&amp;amp;mid=2247483657&amp;amp;idx=1&amp;amp;sn=dd7df195b64fc9d9af98614883750451&amp;amp;chksm=fc333bcfcb44b2d9cd1d99a36c38ea3bf1a7aa5287fe44a11ceefc6579dd458b888226f15ff0&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;微服务架构-SpringBoot2.0.3源码之web容器篇(一)&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;&quot; data-copyright=&quot;0&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/nuXs4mvp08DaUkh7YpMDmTQVyTqffia8K8L2Q1HVjM33YVAeXhqLibshjhRZ6WPmpQksfSe55Zc7WBkZJQzmqT1g/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;258&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>cbe319a0f9a2d8d5559d03d770ee8758</guid>
<title>贝壳 Go 实现的 IM 群聊优化之路</title>
<link>https://toutiao.io/k/pgjxjvc</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;介绍&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;贝壳IM为贝壳找房提供了70%以上的线上商机。为上百万的经纪人提供了快捷的线上获客渠道。日新增会话300万+。其既有互联网TO C产品的属性，又具有浓厚的房地产行业特色，是贝壳找房所属的产业互联网中重要的一环。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;IM系统相比其他服务有其特殊的特点，主要包括实时性、有序性、可靠性（不重复不丢失）、一致性（多端漫游同步）、安全性。为保证这些特性的实现，良好的性能是必不可少的。本文主要阐述了针对贝壳IM单聊群聊消息的优化思路，通过压测、寻找瓶颈点、提出优化方案、验证优化方案、代码实现的多轮次迭代，最终实现了20倍以上的性能提升。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;背景&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;2020年底的时候有业务方提出使用群聊消息进行推广活动，该场景预估300人大群需要满足100QPS的性能要求。接到需求，我们首先对群聊场景进行了摸底压测，效果为300人大群QPS为15的时候系统内消息处理就会出现积压,投递能力到达瓶颈。因此拉开了优化的序幕。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;IM系统整体概览&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们首先简要介绍下贝壳IM的整体架构，一是便于理解IM消息服务难在哪，二是便于看出IM消息服务的瓶颈点在哪。&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3953704&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Rcon9f6LyEuCPTpS9RQldrA0CXJge104OFrfqcTEd7zt1c58vzsAvJZ0qZtCjaH0SWLLEUHfwLTmw5HKiaY7kBQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;上图是IM消息发送的整体流程：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;发送者通过http接口发送消息，接口处理完成写入发送队列后返回给用户成功信息。此时后台的投递服务实时从队列获取待投递消息，然后进行如下四步操作：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;写入用户的收件箱&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;写入持久化的历史消息库&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;通过长连接服务通知接收者拉取消息&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;通过PUSH服务通知接收者有消息到达&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;通过贝壳IM架构，可以看到消息发送到消息送达整体是一个异步服务，分为两个部分，一是接口层，二是投递服务，两者之间通过队列通信。接口层只需要写入队列即返回成功，无状态可以横向扩展，不会成为群聊的瓶颈。投递服务功能复杂并且会直接影响消息处理的及时性、可靠性。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;了解过IM的同学可能会问，是否可以将写扩散模式更改为读扩散，即300人大群中发送一条消息之后，不再写入每个人的收件箱，而是只记录到一个发件箱中，读取的时候每个人去发件箱中读取。读扩散方式下，假设一个人加入了100个群，那么读取时需要将100个群的发件箱都读取一遍，而之前的写扩散模式，只需要在收件箱中按序列号读取一次即可。两者各有优劣势，通过调研发现云厂商以及微信服务群聊均是在写扩散模式下实现，证明写扩散可行，并且对贝壳IM来说，继续使用写扩散成本可控。因此在整体架构不变的情形下我们进行了一系列优化，最终也达到了预期效果。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;优化措施一: 业务隔离&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;IM的消息按照业务属性主要分为三种:&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;单聊消息，即双人聊天会话，包括C2B和B2B，涉及商机获取，最核心的功能&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;群聊消息，即多人聊天会话， 特点是参与人数多，涉及活动推广及消息通知&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;公众号消息，即各种业务公众号群发消息，推送量大，已经做了隔离，并且历史消息库使用TiDB&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;消息投递服务负责从redis队列消费用户发送的消息，进行处理。举个例子, A/B/C三人在同一会话中, A向会话中发送一条消息, 投递服务需要保证这条消息被写入A/B/C三人各自的收件箱和历史消息库, 并通过(push/长连接)通知A/B/C。第一次摸底压测出现redis队列积压，会导致用户不能及时收到消息，这个是不可接受的。在业务侧，针对我们公司的业务场景特点，最重要的是客户和经纪人的单聊消息。从业务隔离角度考量，进行的第一个优化措施，是对单聊和群聊进行垂直拆分，分级隔离后的效果图如下:&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9790698&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Rcon9f6LyEuCPTpS9RQldrA0CXJge104Dyhr0fjmhF1BupZ542cfaiagfob9ibqqBczIB8n2KBibmdJWq9xaNCosw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;430&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;优化措施二: 提高并发&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;我们继续深入投递服务的细节，看看投递服务的代码实现逻辑。总体来看，投递服务消费一条消息后，会经历两个阶段，每个阶段分别由对应的goroutine来完成, 阶段一有256个goroutine, 阶段二 有1000个goroutine，两个处理流程之间通过channel进行通信。两阶段的流程图如下：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4311377&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Rcon9f6LyEuCPTpS9RQldrA0CXJge104LY1M9xc2PO2fsrDBnUD9tqn81fBuNJAE72iaVaXDAYFLJGXd25N5Zcw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;835&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;还是以一个300人的群GroupA为例，假设发送者 SenderA发送了一个消息，阶段一获取到的消息是会话维度，即GroupA（会话ID标识）的SenderA（UCID标识）发送了一条内容为xxx的消息，阶段一的主要工作是根据会话ID获取到群内的所有成员UCID，然后将UCID哈希之后打散放到1000个channel中，此时channel中的消息是用户维度，即用户ReceiveB收到了一条内容为xxx的消息。注意阶段一此时还进行了一个扩散操作，即将每个收件人的未读数计数进行了更新操作。阶段二从channel中获取消息之后将其放入群内300个成员各自的收件箱，然后给每个人发送push以及长连接信息，通知收件人拉取消息。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;可以看到阶段一是会话消息维度的处理，IO操作较少，写扩散主要有两步，一是进行一个内存channel的写入，二是以收件人维度进行了未读数的更新。阶段二是收件人维度的消息处理，并发度更大（1000个goroutine)，IO操作也较多，例如写入收件人收件箱，更新会话顺序，向每个收件人都发送push通知和长连接通知。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;优化措施&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;压测时观察到只有发送Redis队列有积压，channel队列没有积压，并且阶段二并发能力更强，考虑将阶段一中比较耗时的更新用户未读数操作放在在阶段二进行。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;效果&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过将更新用户未读数放到阶段二，其实相当于增大了处理未读数的并发能力，上线后进行压测，数据为300人群，群聊消息发送可以达到75QPS，有5倍的性能提升。当300人大群发送QPS达到70时，Redis侧QPS为21000，此时IM中使用的一组缓存redis cpu被打满，单核使用率达到92%（注意redis6.0版本之前只能使用单核，因此单核cpu使用率是redis一个很重要的观察维度）。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;优化措施三: 减少计算&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;进行第二项优化后，300人的群聊可以达到75QPS，此时一组缓存的redis实例cpu基本被打满。该组redis主要负责存储用户关系, 在投递服务阶段二发送push的业务逻辑中会大量使用。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;问题&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;以投递一条消息到300人的大群为例，假设群为GroupA，发送者 SenderA发送了一个消息，阶段二中给每个收件人发送push的业务逻辑中存在重复获取数据的情况，例如：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;SenderA的用户信息：会针对群内每个成员获取一次，即获取了300次SenderA的用户信息。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;GroupA的会话信息：会针对群内每个成员获取一次，即获取了300次会话信息。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;用户是否设置了免打扰：会针对群内每个成员获取一次，即获取了300次免打扰设置。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;p&gt;&lt;/p&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;由于群聊是从单聊代码改造而来，可以看到简单重复单聊的逻辑，会造成写扩散的放大。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;优化措施&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;针对重复获取数据，进行相应的优化措施，SenderA的用户信息和GroupA的会话信息可以提前获取一次，发送push时直接使用。用户是否设置了免打扰，原来是从用户到群组的映射关系，通过增加一个群组到用户的反向映射关系，可以通过一个群组直接获取到全部设置了免打扰的用户，减少计算量。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;效果&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过合并业务数据，相当于减少了业务处理的计算量，该改进上线后进行压测，300人群, 发消息150QPS，对比优化二有了2倍的性能提升，对比初始值有10倍的性能提升。此时写入信箱QPS可以达到45k。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;此时，IM使用的另一组Redis出现了告警，单核CPU使用率超出90%，并且有大量redis慢查和超时报警。通过监控发现，CPU被打满时，redis每秒建连数达到8k/s, 总连接数增长至20k，QPS为45k，通过和DBA同学沟通，这种情况下redis有一大部分cpu都被消耗在连接的建立与销毁。奇怪的是IM中使用了Redis连接池，为什么还会有大量的新建连接呢？Redis的极限QPS能够达到多少？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;优化措施四: Redis连接池优化&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;排查过程&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;贝壳IM中redis库是使用连接池，目的就是为了避免新建销毁连接带来的消耗。目前使用的redis库比较老，结合之前线上存在偶发的redis慢查报错，首先怀疑是连接池的实现问题。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;验证&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;为了方便在测试环境模拟复现redis大量建连问题，开发了一个模拟投递程序可以指定发消息qps和参与会话人数。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如下是im使用的redis库（简写为imredis）与业界比较成熟的goredis库数据对比&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.812963&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Rcon9f6LyEuCPTpS9RQldrA0CXJge104L0f3fXULPeUicYicnB3DH5DFQFMKwJZHHzicz4ztQ61llQT82ggCEu7Ng/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过测试数据发现如下三点：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;在发送端qps相同的情况下，如果没有大量的新建连接，则redis CPU使用率会大幅下降&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;发送端qps到达120时，使用goredis，此时CPU使用率93%，接近打满，redis qps 144k。（注意此处的模拟程序只使用了一个redis实例。IM线上服务首先按功能分组，每组Redis一般是4个实例起步。分组和分实例的逻辑都在imredis代码中实现）&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;通过模拟测试，可以证明imredis库连接池实现确实有问题，并且验证出redis在我们的场景下极限QPS可以达到140k。因此通过改造连接池，可以达到优化效果。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;连接池缺陷&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// Get retrieves an available redis client. If there are none available it will  &lt;/span&gt;&lt;br/&gt;&lt;span&gt;// create a new one on the fly  &lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;(p *Pool)&lt;/span&gt; &lt;span&gt;Get&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;span&gt;(*redis.Client, error)&lt;/span&gt;&lt;/span&gt; {    &lt;br/&gt;  &lt;span&gt;select&lt;/span&gt; {    &lt;br/&gt;    &lt;span&gt;case&lt;/span&gt; conn := &amp;lt;-p.pool:      &lt;br/&gt;      &lt;span&gt;return&lt;/span&gt; conn, &lt;span&gt;nil&lt;/span&gt;    &lt;br/&gt;    &lt;span&gt;default&lt;/span&gt;:      &lt;br/&gt;      &lt;span&gt;return&lt;/span&gt; p.df(p.Network, p.Addr, p.Auth, p.Db, p.Timeout)    &lt;br/&gt;  }  &lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过查看imredis连接池代码，发现虽然初始化时会指定最大连接数量，但当QPS升高并且接池中获取不到连接时，会新建连接进行处理。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;优化措施&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;参考goredis和其他连接池实现, 采取以下优化措施:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;备用连接池。大小是默认连接池的10倍，如果默认连接池满了， 连接会暂时存放在备用连接池，每过固定时间对备用连接池内的连接进行释放。避免在大量并发时频繁新建和关闭连接。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;对新建连接通过令牌桶进行限制，避免短时间内无限制大量建立连接，导致拖垮服务。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;最终效果&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;压测验证300人大群可以达到320qps左右。投递能力较优化三有两倍的性能提升，较去年年底有20倍的性能提升&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;总结&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;群聊300人大群达到320qps，已经能够满足未来两年内的业务需求。并且随着群聊的优化，尤其是Redis连接池的优化，单聊的性能也有了显著提升，从年初的2000达到了12000。未来如果有继续提高性能的需求，只需要对redis进行双倍扩容，并且将投递服务也进行扩容即可。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;通过本次优化，可以看到，大部分的性能优化只需要进行代码层面的改造，通过压测找到瓶颈点，摸清整个链路的短板并改造这个短板。此时QPS就只是一个数值。需要更高的QPS时只需要扩容、扩容、再扩容即可。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;推荐阅读&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-darkmode-bgcolor-15906318746582=&quot;rgb(36, 36, 36)&quot; data-darkmode-original-bgcolor-15906318746582=&quot;rgb(255, 255, 255)&quot; data-style=&quot;width: 30px; height: 30px; background-color: rgb(255, 255, 255); box-shadow: rgb(87, 187, 255) -7px -7px 0px; margin-left: 7px;&quot;&gt;&lt;span&gt;&lt;strong&gt;福利&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-15906318746582=&quot;rgb(36, 36, 36)&quot; data-darkmode-original-bgcolor-15906318746582=&quot;rgb(255, 255, 255)&quot; data-style=&quot;width: 30px; height: 30px; background-color: rgb(255, 255, 255); box-shadow: rgb(87, 187, 255) -7px -7px 0px; margin-left: 7px;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-darkmode-bgcolor-15906318746582=&quot;rgb(36, 36, 36)&quot; data-darkmode-original-bgcolor-15906318746582=&quot;rgb(255, 255, 255)&quot; data-style=&quot;width: 30px; height: 30px; background-color: rgb(255, 255, 255); box-shadow: rgb(87, 187, 255) -7px -7px 0px; margin-left: 7px;&quot;&gt;&lt;span/&gt;&lt;span&gt;我为大家整理了一份&lt;/span&gt;&lt;span&gt;从入门到进阶的Go学习资料礼包&lt;/span&gt;&lt;span&gt;，包含学习建议：入门看什么，进阶看什么。&lt;/span&gt;&lt;span&gt;关注公众号 「polarisxu」，回复 &lt;/span&gt;&lt;strong&gt;&lt;span&gt;ebook&lt;/span&gt;&lt;/strong&gt;&lt;span&gt; 获取；还可以回复「&lt;strong&gt;进群&lt;/strong&gt;」，和数万 Gopher 交流学习。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/UWba2ryLMqm8cgtrMXjG1BLGg46vQNmUompBL02uYYwic9RicPbCnlKdZiacBF5Wv6RLgmGIqnBnwuWyP82ibYusiag/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;258&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>33371ba103bc387c139e44cd7486d8b6</guid>
<title>一种比线段树还高效的区间算法</title>
<link>https://toutiao.io/k/g1apymz</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;weui-dialog&quot;&gt;
      &lt;p class=&quot;weui-dialog__hd&quot;&gt;&lt;strong class=&quot;weui-dialog__title&quot;&gt;&quot;Top Stories&quot; is disabled&lt;/strong&gt;&lt;/p&gt;
      &lt;p class=&quot;weui-dialog__bd&quot;&gt;
        Enable &quot;Top Stories&quot; in &quot;Settings&quot; &amp;gt; &quot;General&quot; &amp;gt; &quot;Manage Discover&quot;      &lt;/p&gt;
      
    &lt;/div&gt;
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>022c4b4411f63480f78287d62c5e17fb</guid>
<title>134  python|第七部分：数据库（一）</title>
<link>https://toutiao.io/k/9ksxizq</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;点击关注&lt;/span&gt;&lt;strong&gt;「缓缓而行」，&lt;/strong&gt;&lt;span&gt;让我们一起探索&lt;/span&gt;&lt;strong&gt;python&lt;/strong&gt;&lt;span&gt;学习之路~&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;26&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;前言：&lt;/strong&gt;&lt;span&gt;python数据库将用两篇文章进行梳理：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;本篇文章目录如下：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;01 数据库概述&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;02 MySQL&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;03 SQL语言&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;04 数据库管理&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;05 数据表管理&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    5.1 基础数据类型&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    5.2 表的基本操作&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;06 表数据基本操作&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    6.1 插入&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    6.2 查询&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    6.3 where子句&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    6.4 更新表记录&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    6.5 删除表记录&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    6.6 表字段操作&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    6.7 时间类型数据&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;07 高级查询语句&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;08 聚合操作&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    8.1 聚合函数&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    8.2 聚合分组&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    8.3 聚合筛选&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    8.4 去重语句&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;09 索引操作&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    9.1 概述&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    9.2 索引分类&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    9.3 索引创建&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;10 外键约束和表关联关系&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    10.1 外键约束&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    10.2 表关联关系&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    10.3 E-R模型图&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;    10.4 表关联查询&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6785714285714286&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qyCxOUeIP6qsdzRia282A2X0DhiadMlhAq1xHcxb5gBf3tTGjJjswJM4trpQIYUjSrS8INicJXBIDBniafQEoXd2Sg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;56&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;引 言&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;在经历了人工管理和文件管理阶段后，随着人们对大量数据的操作需求日益增多，对数据的管理逐渐过渡到数据库管理阶段，使用数据库（Database）进行管理的&lt;strong&gt;优&lt;/strong&gt;&lt;strong&gt;点&lt;/strong&gt;有很多，比如&lt;span&gt;数据组织结构化降低了冗余度，提高了增删改查的效率，容易扩展，方便程序调用处理&lt;/span&gt;。&lt;strong&gt;缺点&lt;/strong&gt;是相较于前两种文件管理方式，&lt;span&gt;需要使用sql或者其他特定语句，比较专业。&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;数据库在实际生活中的应用可谓是方方面面，如游戏、购物、论坛等网站，都需要对数据进行数据存储管理。接下来首先让我们认识一下数据库。&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;01 数据库概述&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;        &lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;01.数据库&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;按照数据一定结构，存储管理数据的仓库。&lt;/strong&gt;数据库是在数据库管理系统的控制和管理下，在一定介质上的集合。&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;02.数据库管理系统&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;RDBMS (Relational Database Management System)指的是管理数据库的软件，用于&lt;strong&gt;建立和维护数据库&lt;/strong&gt;。&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;03.分类&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;关系型数据库&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;采用关系模型（二维表）来组织数据结构的数据库，可以理解为表格，一个关系型数据库由1个或者多个表格组成。关系型数据库有Oracle、SQL_Server、MySQL等。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;非关系型数据库&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;      不采用关系模型组织数据结构的数据库。如MongoDB、Redis等。&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.39166666666666666&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVkf3XsQfk0SWw0a9m7IZIiab3NP6pxbLzhxEplfHHJYApDImcHY7o5WA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;数据库厂商（&lt;strong&gt;图源网络&lt;/strong&gt;）&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;02 MySQL&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;2.1 简介&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;01.MySQL历史&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.75&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVXAUUbI7w2vmJolBFgLfhR2mnwOVkoicHLlC7OTB6ZwEY7PayDceQLNQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;800&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;MySQL图标&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;MySQL在1996年的1.0版本发布，当时只是在作者Monty Widenius打工的公司内部发布，真正的MySQL关系型数据库第一个版本发布于1998年1月，后来由瑞典 MySQL AB 公司开发，目前属于 Oracle 公司。&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;官网地址：https://www.mysql.com/](https://www.mysql.com/&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.35488041370394313&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVznQMpJnf277yueooUMaISjsUBzwaU0jYibSmT4OKGEMZkUXaRBoBPBg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1547&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;数据库排行榜&lt;/strong&gt;&lt;/span&gt;，来源：https://db-engines.com/en/ranking&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;02.&lt;span&gt;MySQL特点&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;是&lt;strong&gt;开源&lt;/strong&gt;数据库，用C和C++编写；&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;MySQL 可以运行于多个系统上，并且&lt;strong&gt;支持多种语言&lt;/strong&gt;。这些编程语言包括 C、C++、Python、Java、Perl、PHP、Eiffel、Ruby 和 Tcl 等；&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;使用标准的 &lt;strong&gt;SQL 数据语言形式&lt;/strong&gt;；&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;支持大型数据库&lt;/strong&gt;，支持 5000 万条记录的数据仓库；&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;存储结构优良，运行速度快。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;03.如何安装&lt;span&gt;MySQL&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;1.Ubuntu安装MySQL服务&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;终端执行: sudo apt  install mysql-server&lt;/section&gt;&lt;section&gt;配置文件：/etc/mysql&lt;/section&gt;&lt;section&gt;数据库存储目录 ：/var/lib/mysql&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;2.Windows/MacOS安装MySQL&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;下载MySQL安装包 &lt;/section&gt;&lt;section&gt;https://dev.mysql.com/downloads/windows/installer/8.0.html&lt;/section&gt;&lt;section&gt;直接运行安装文件安装&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;04.启动和连接MySQL服务&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;在&lt;strong&gt;服务端启动&lt;/strong&gt;：&lt;br/&gt;&lt;/section&gt;&lt;section&gt;查看MySQL状态 : sudo  service  mysql  status&lt;/section&gt;&lt;section&gt;启动/停止/重启服务：sudo  service  mysql    start/stop/restart&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;连接数据库&lt;/strong&gt;：mysql    -h  主机地址   -u  用户名    -p&lt;/section&gt;&lt;section&gt;注：连接自己的主机可以省略-h选项&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;关闭连接：ctrl -d 或者 exit&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;启动mysql并查看状态&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3884297520661157&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgV1S2HCAnVYtKNibTJRbVzpwshicv17ffwK0K2iczeicU7YEgLf6icmJAedOQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1452&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;关闭mysql并查看状态&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.33126293995859213&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVPBbmSFajWPAOoqiaGMehicgJG1xps7vk5Wy0dvwDZ4vUaicd1hx6Mxeqg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1449&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;连接并退出数据库&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.42375263527758256&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVjKmz9knicGoPibOQsVUic2XUUvBpzeVVGrUFVGLWG7QEoP5JWQhzbicfibQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1423&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;以上是通过终端向数据库管理系统发送请求，除了这种方式，也可以通过程序或第三方软件发送请求，本质是一样的，都是通过应用层发布指令，最终由数据库管理系统操作数据。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;2.2 MySQL数据库结构&lt;/strong&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;关键词：&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;  &lt;strong&gt;  数据库&lt;/strong&gt;（Database）：按照数据一定结构，存储管理数据的仓库。&lt;/p&gt;&lt;p&gt;  &lt;strong&gt;  数据表&lt;/strong&gt;（table）：存放数据的表格。&lt;/p&gt;&lt;p&gt;    &lt;strong&gt;字段&lt;/strong&gt;(column)：每列，表示该数据的含义。&lt;/p&gt;&lt;p&gt;    &lt;strong&gt;记录&lt;/strong&gt;(row)：每行，表示一组完整的数据。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7952069716775599&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVsDp51AG2dSjLo3HVB3BlqdqJvm0VYNSSLicSJaiaxCEr2zydObMYiaBWw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;459&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5760456273764258&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgV1ORUcNkdXJoFl07jyffOEINgu4HZMEu7bvv4iaYzSnCd0MDhYSDD0IA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;526&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;03 SQL语言&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;什么是SQL&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;结构化查询语言(Structured Query Language)，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;SQL语言特点&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;    SQL语言基本上独立于数据库本身；&lt;/section&gt;&lt;section&gt;    各种不同的数据库对SQL语言的支持与标准存在细微的不同；&lt;/section&gt;&lt;section&gt;    每条命令&lt;strong&gt;以;结尾&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;    SQL命令（除了数据库和表名）&lt;strong&gt;关键字和字符串可以不区分字母大小写。（下面涉及到的命令大小写都可以）&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;04 数据库管理&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot;&gt;&lt;p&gt;&lt;span&gt;数据库管理基本命令&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;strong&gt;功能&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;查看已有库&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;show&lt;/strong&gt;&lt;/span&gt; databases;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;创建库&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;create&lt;/strong&gt;&lt;/span&gt; database 库名 [character set utf8];&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;切换库&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;use&lt;/strong&gt;&lt;/span&gt; 库名;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;查看当前所在库&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;select&lt;/strong&gt;&lt;/span&gt; database();&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;删除库&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;drop &lt;/strong&gt;&lt;/span&gt;database 库名;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;2&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：关于库名&lt;/p&gt;&lt;p&gt;1.可以由数字、字母、下划线组成，不能用纯数字；&lt;/p&gt;&lt;p&gt;2.库名&lt;strong&gt;区分字母大小写&lt;/strong&gt;；&lt;/p&gt;&lt;p&gt;3.不要使用特殊字符和mysql关键字&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;查看已有库&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.75&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVibar8MpAWHRY1uSQj6dQUs184156KK2VicXNJibRBhrgSqxb2pjKHlASA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;652&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;创建stu库并查看&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7256027554535017&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVbP3MXnvQ6vgbDxmbnRHwLBYiapicQ3ksPOM2R2y9ZiaKouZLbWMl1GDicw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;871&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;注：mysql8.0版本默认编码格式为utf8编码，创建&lt;/span&gt;库的时候不设置编码格式也支持中文&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;报错及处理&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.33516861665519615&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVtqtfwPneYXB2wNMbDbXVTZiaLiamibugk8NOCicHiaeeDNP4fE2Npv6ezng/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1453&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;使用并查看当前数据库&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7213352685050798&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgV2RYicteGMLwP1CHKS5wLDEBUDKxzB8p1HEicBzTVpm8ksc51S3iaRr68w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;689&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;05 数据表管理&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;5.1 基础数据类型&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;MySQL 支持多种类型&lt;/span&gt;&lt;span&gt;，大致可以分为三类：&lt;/span&gt;&lt;strong&gt;&lt;span&gt;数值类型、&lt;/span&gt;&lt;span&gt;字符串(字符)类型和&lt;strong&gt;&lt;span&gt;日期/时间类型&lt;/span&gt;&lt;/strong&gt;。&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;3&quot; align=&quot;center&quot; valign=&quot;middle&quot;&gt;&lt;span&gt;基础数据类型&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;1&quot; colspan=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;类型&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;具体罗列&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;3&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;数值类型&lt;/strong&gt;&lt;span&gt;‍&lt;/span&gt;&lt;span&gt;‍&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;整数类型&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;      INT 、SMALLINT 、TINYINT 、         MEDIUMINT、BIGINT&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;浮点类型&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;FLOAT、DOUBLE、DECIMAL&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;比特值类型&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;BIT&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;3&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：&lt;/p&gt;&lt;p&gt;1.对于准确性要求较高的东西，比如价格，可以用DECIMAL类型，语法为&lt;span&gt;DECIMAL（M,D）,M表示数字总位数，D表示小数部分位数。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2.比特值类型指1，&lt;span&gt;0&lt;/span&gt;值，表示真，假。boo类型本质上就是比特类型。&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;4&quot; colspan=&quot;1&quot;&gt;&lt;strong&gt;字符串&lt;span&gt;‍&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;strong&gt;普通字符串&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;CHAR 、VARCHAR&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;strong&gt;存储文本&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;TEXT&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;strong&gt;存储二进制数据&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;BLOB&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;strong&gt;存储选项型数据&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;ENUM 、SET&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;3&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：&lt;/p&gt;&lt;p&gt;1.char(n) 和 varchar(n) 中括号中&lt;strong&gt; n 代表字符的个数&lt;/strong&gt;，而非字节个数&lt;/p&gt;&lt;p&gt;2.&lt;strong&gt;char&lt;/strong&gt;表示&lt;strong&gt;定长字符串&lt;/strong&gt;，&lt;strong&gt;默认存储1个字节，&lt;span&gt;也可以自己设定字符个数&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，&lt;/span&gt;如果输入的字符个数超过指定字符个数，会截取超出的字符；如果输入的字符个数小于指定字符个数，会在后面补空值。&lt;/p&gt;&lt;p&gt;3.&lt;strong&gt;varchar&lt;/strong&gt;表示&lt;strong&gt;不定长字符串&lt;/strong&gt;，&lt;strong&gt;必须指定存储大&lt;/strong&gt;&lt;strong&gt;小&lt;/strong&gt;，实际占用空间根据实际存储数据大小而定。&lt;/p&gt;&lt;p&gt;4.相比之下，&lt;strong&gt;char存储的效率更高；varchar更节省空间，效率更低。&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;5.&lt;strong&gt;enum&lt;/strong&gt;存储给出的多个值中的一个，即&lt;strong&gt;单选&lt;/strong&gt;，如enum(&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;)&lt;/p&gt;&lt;p&gt;6.&lt;strong&gt;set&lt;/strong&gt;&lt;span&gt;存储给出的多个值中的一个或者多个值，即&lt;strong&gt;多选&lt;/strong&gt;，如set(&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;2&quot;&gt;&lt;strong&gt;&lt;strong&gt;日期/时间&lt;span&gt;‍&lt;/span&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;2&quot; rowspan=&quot;1&quot;&gt;DATETIME、DATE、TIMESTAMP、TIME和YEAR&lt;span&gt;‍&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;2&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;时间格式:&lt;/p&gt;&lt;p&gt;    date（日期）:&quot;YYYY-MM-DD&quot;&lt;/p&gt;&lt;p&gt;    time（时间）:&quot;HH:MM:SS&quot;&lt;/p&gt;&lt;p&gt;    datetime（日期时间）:&quot;YYYY-MM-DD HH:MM:SS&quot;&lt;/p&gt;&lt;p&gt;    timestamp（时间戳）:&quot;YYYY-MM-DD HH:MM:SS&quot;&lt;/p&gt;&lt;p&gt;注：时间类型数据&lt;strong&gt;可以进行比较和排序等操作&lt;/strong&gt;,写时间字符串时尽量按标准格式来写。&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;数值类型一览&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Mysql对数据类型进行了更为细致的划分，如下图，整形int根据大小和范围的不同被细分为了5个部分，由此可以让使用者选择最为合适的类型以节约内存空间。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;观察&lt;span&gt;TINYINT和INT，这里的1字节和3字节表示的是每个元素所占空间的大小，所以这种细分方式是有必要的&lt;/span&gt;。除了节省内存，选择合适的类型还可以提高查询速度。另外，观察第3和第4列，设置无符号时，正数范围会随之扩大。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6901688182720953&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVg7bdGesMyoAAOibbAWWMvbl3ZkaxwIk4NAmEdhP4qdSItD7Mg4X49aw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1007&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;字符串类型一览&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5105105105105106&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVBqliarDcnevRQtknPIVcibgFuGp72WmymdibQeZ965lDp9U0pACaPjkUQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;999&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;日期时间类型一览&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.35&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVvKQgb7Jf8tv6PSH8bR08xwQw5Nx6SYTkklWZSVzwXjPtPCJIwfPgMA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1000&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;5.2 表的基本操作&lt;/strong&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot;&gt;&lt;p&gt;&lt;span&gt;数据表操作基本命令&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;strong&gt;功能&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;创建表&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;create&lt;/strong&gt;&lt;/span&gt; table 表名（字段名 数据类型 约束，...，&lt;span&gt;字段名 数据类型 约束&lt;/span&gt;）&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;查看数据表&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;show &lt;/strong&gt;&lt;/span&gt;tables;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;查看表结构&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;desc&lt;/strong&gt;&lt;/span&gt; 表名;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;查看表创建信息&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;show&lt;/strong&gt;&lt;/span&gt; create table 表名;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;删除表&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;drop&lt;/strong&gt;&lt;/span&gt; table 表名;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;2&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：表的字段约束&lt;/p&gt;&lt;p&gt;&lt;strong&gt;UNSIGNED&lt;/strong&gt;: 设置数字为无符号&lt;/p&gt;&lt;p&gt;&lt;strong&gt;NOT NULL&lt;/strong&gt;:  设置字段不为空。操作数据库时，如果该字段为空，会报错&lt;/p&gt;&lt;p&gt;&lt;strong&gt;DEFAULT&lt;/strong&gt;: 设置一个字段的默认值&lt;/p&gt;&lt;p&gt;&lt;strong&gt;COMMENT&lt;/strong&gt;: 增加字段说明&lt;/p&gt;&lt;p&gt;&lt;strong&gt;AUTO_INCREMENT&lt;/strong&gt;: 定义列为自增的属性，一般用于主键，数值会自动加1&lt;/p&gt;&lt;p&gt;&lt;strong&gt;PRIMARY KEY&lt;/strong&gt;: 定义列为主键，主键的值不能重复，且不能为空&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;创建表并查看表&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3961290322580645&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEFIxQ9P1xqFmAPFRR4HZVxby4mq8jfC8cAhHqtXZSLCTgiasR3iap43BQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;775&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;查看表结构&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3228285933897002&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEMSRbSo8qqkwDM2q9U5InqqCBJjaSaVFOG8qNySC7UWpBiba0ibBlw6Pw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1301&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;查看创建表信息&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8436781609195402&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEIEZ2XWh3tJ9Q68NibV3BwNsnHSlebwbF6Ljv3oGBibia1kjQkCpAIDoiaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;870&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;最后一行是因为我们创建库的时候设置了utf8编码，那么在创建每一个表的时候都会默认这种编码格式。如果最初没有设置，该库下的表为默认编码格式，mysql5.0版本可能不支持中文。&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;06  表数据基本操作&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot;&gt;&lt;p&gt;&lt;span&gt;表数据操作基本命令&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;strong&gt;功能&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;插入&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;insert&lt;/strong&gt;&lt;/span&gt; into 表名 values(值1，值2...),(&lt;span&gt;值1，值2...&lt;/span&gt;),...&lt;span&gt;;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;insert into 表名 （字段1，字段2...）&lt;span&gt;values(值1，值2...),(&lt;/span&gt;&lt;span&gt;值1，值2...&lt;/span&gt;&lt;span&gt;),...&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;查询&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;select&lt;/strong&gt;&lt;/span&gt; * from 表名 [where 条件]&lt;span&gt;；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;select 字段1,字段2... &lt;span&gt;from 表名 [where 条件]&lt;/span&gt;&lt;span&gt;；&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;where 子句&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;主要通过一定的条件进行数据筛选，在查询、删除、修改中都有使用。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;运算优先级:&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;算数运算符&lt;/span&gt;&lt;/strong&gt;  + - * / %&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;比较运算符&lt;/span&gt;&lt;/strong&gt; = != &amp;gt; &amp;lt; &amp;gt;= &amp;lt;= ;between ;not between ; in ;&lt;span&gt;not in ;is null ;is not null&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;逻辑运算符&lt;/span&gt;&lt;/strong&gt; not and or&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;括号可以改变运算顺序&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;更新表记录&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;update &lt;/strong&gt;&lt;/span&gt;表名 set 字段1=值1,字段2=值2,... where 条件&lt;span&gt;;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;(不写where全部更新)&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;删除&lt;strong&gt;表记录&lt;span&gt;‍&lt;/span&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;delete&lt;/strong&gt;&lt;/span&gt; from 表名 where 条件&lt;span&gt;;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;(不加where全部清空)&lt;span&gt;‍&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;2&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;表字段操作&lt;/strong&gt;：&lt;span&gt;&lt;strong&gt;alter table&lt;/strong&gt;&lt;/span&gt; 表名 执行动作;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;添加字段&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;alter table 表名 &lt;span&gt;&lt;strong&gt;add &lt;/strong&gt;&lt;/span&gt;字段名 数据类型&lt;span&gt;;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;alter table 表名 add 字段名 数据类型 first;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;alter table 表名 add 字段名 数据类型 after 字段名;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;删除字段&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;alter table 表名&lt;span&gt;&lt;strong&gt; drop&lt;/strong&gt;&lt;/span&gt; 字段名;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;修改数据类型&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;alter table 表名 &lt;span&gt;&lt;strong&gt;modify&lt;/strong&gt;&lt;/span&gt; 字段名 新数据类型;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;修改字段名&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;alter table 表名&lt;span&gt;&lt;strong&gt; change&lt;/strong&gt;&lt;/span&gt; 旧字段名 新字段名 新数据类型;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;日期时间函数&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;now&lt;/strong&gt;&lt;/span&gt;() 返回服务器当前时间 格式为datetime类型&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;1.向表插入数据并查看&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;方法1：给所有字段插入数据&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;插入并查看所有表数据&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8535564853556485&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEpsk5uZcOA4iaqzAzft5O4SZABt4YD1Xat54XZSYXqHudlDQZRq2yTjA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;717&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;查询指定字段的表数据&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7680945347119645&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEKY58p0HRZlwrxCUPibu7MshRXoww9VYfpzdgjCUWDuiaibWDPODbIxptw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;677&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;方&lt;/span&gt;&lt;span&gt;法2：给指定字段插入&lt;/span&gt;&lt;span&gt;数据&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8096304591265397&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEMDO5so3TkkMY7Sl8XMoA0lBWhzqANgRUiaE3nBgjs4SNibgm4R3laWhQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;893&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;错误示范&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.19154030327214686&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEzKPAbVogDt4h4DQz8kwhYPDN7zyszsonJXL0icRuwE6A4Y2yAcUWQicQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1253&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2.where子句&lt;/strong&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;实例1：算术运算符 /&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8115124153498872&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGED3I51J1B08lwcLv1tsN7Wv8tiaCdLYwakptrV0kB0PtpXotjYrh1aHA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;886&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;注：&lt;/strong&gt;1.sql语句不支持==,+=,-=复合运算符；&lt;/section&gt;&lt;section&gt;2.&lt;span&gt;sql语句&lt;/span&gt;不支持 &amp;lt; 值&amp;lt;; &amp;gt;值 &amp;gt;  不会报错，但会找出全部表数据&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;实例2：比较运算符&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.86&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGExdSwlNxeVHXArl4AhicdNwTBIQwe8vFMjBGKOazrknbGIUXYNxBOibtQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;800&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;实例3：逻辑运算符&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.27938931297709924&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEJjwXMfTHSx9zHaKtZafxJW9iaLutVHUdPbZkpFyicSyvyE6WmTunicmUA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;655&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;注：sql语句中关键字和字符串可以不区分字母大小写&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.33810375670840787&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEoZnNfLbCJw7O84xwJ7I7sCYrpGAg719T7dz4CiaLNwgicTsVK0gDtP2Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;559&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;注：英文字符支持比较大小&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3888888888888889&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEAr1110TjDn6RBZcyL0micHTbwE5UbHaTKib4xrbHwqwWtZoUPy3plrsA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;576&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;3&lt;strong&gt;.&lt;/strong&gt;&lt;/strong&gt;&lt;strong&gt;更新表记录&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6791862284820032&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEUickzcKXfISCbpzfpb9Y4ety0EL6e4iavDLbNj8Zm13wne1oAb9Iedsw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;639&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;同时更新多个字段&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5871687587168759&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEiavPs12nib4GKM40xVVS8vcfUibHxg6NxibmB8B7TtJ4QgPDBGRbwfwnKw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;717&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;没有where子句，对全表数据进行操作&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8454011741682974&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEjmRtx6Sf7BPdA5icEbjauYX54EibWzMyhVj7Udw5JI5cBlCZw4T8icHIA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;511&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;strong&gt;&lt;strong&gt;.删除&lt;/strong&gt;&lt;/strong&gt;&lt;strong&gt;表记录&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7975206611570248&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEgd8ShThg1F6cEKzKUNpUd6cT8bs5EVA7RyCxx4yqTnQs0eicHoAqFaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;484&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;5&lt;/strong&gt;&lt;strong&gt;&lt;strong&gt;.添加表字段&lt;/strong&gt;&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.46923076923076923&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEr5aYibV47kibpNEBKfTKicIEGnMT9dzicb9EWD529pRuAiaiavyEINDezh8w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;910&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;6&lt;/strong&gt;&lt;strong&gt;&lt;strong&gt;.修改数据类型&lt;/strong&gt;&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5195473251028807&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE0mekvrZPwHiaTpzJZDyhicicIHPD74KqJldlQXJjROZYT76icQkcHebZcQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;972&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;注：&lt;/strong&gt;&lt;span&gt;修改数据类型时，必须满足现有&lt;/span&gt;&lt;span&gt;数据能够&lt;/span&gt;&lt;span&gt;填充到新数据类型中。比如int转换成float,char转换成varchar.&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;7&lt;/strong&gt;&lt;strong&gt;&lt;strong&gt;.修改字段名&lt;/strong&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5129411764705882&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEa7EW4LlmJ9Nry5g8niajIKZhuKXVM0Y6KDl8PVVaOnA5yErh0ahO6pg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;850&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;8&lt;/strong&gt;&lt;strong&gt;&lt;strong&gt;.时间日期类型&lt;/strong&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;strong&gt;&lt;span&gt;格式要求没有那么严格，系统会补全为标准格式&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8154981549815498&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE57Cq9dq5Mj198KmttIlnTPxD0J6UiakhbMrw50dA9KLfvHnOTOQyweg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;813&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;时间类型可以比较大小&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5606796116504854&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGErjiataCfb2y2o1owB6g29G2AcH5LDhyaMuhBWguCzEnh6nzDFhu4hAg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;824&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;strong&gt;时间函数可以作为默认值出现&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.14091470951792337&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEFwrs7TskPtD2CYpjUxQj3duHoLBJgdCkjGLIicqibuz6cfQAqlqD9TcA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;809&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5180442374854481&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEia6ia0fibnA0gCJWO6avZgyicvPpVz7qMd4yGeB8Y0pkoJzfOQQ3W9u4UQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;859&quot;/&gt;&lt;/p&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;07 高级查询语句&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot;&gt;&lt;p&gt;&lt;span&gt;表数据操作基本命令&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;strong&gt;功能&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;2&quot;&gt;&lt;strong&gt;模糊查询&lt;/strong&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;SELECT field1, field2,...fieldN &lt;/p&gt;&lt;p&gt;FROM table_name&lt;/p&gt;&lt;p&gt;WHERE field1 &lt;span&gt;&lt;strong&gt;LIKE &lt;/strong&gt;&lt;/span&gt;condition1;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;说明：like用在where子句中进行模糊查询，&lt;span&gt;&lt;strong&gt;%&lt;/strong&gt;&lt;/span&gt;表示任意0个或多个字符；&lt;span&gt;&lt;strong&gt;下划线&lt;/strong&gt;&lt;/span&gt;表示任意一个字符&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;重命名&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;select field1 &lt;strong&gt;as&lt;/strong&gt; XX,field2 &lt;span&gt;&lt;strong&gt;as&lt;/strong&gt;&lt;/span&gt; XX from 表名 &lt;strong&gt;as&lt;/strong&gt;&lt;span&gt; XX &lt;/span&gt;;&lt;span/&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;说明：as用于给字段或表重命名&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;排序&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;SELECT field1, field2,...fieldN &lt;/p&gt;&lt;p&gt;from table_name where field1&lt;/p&gt;&lt;p&gt;ORDER BY field1 [ASC [DESC]];&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;说明：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1.使用&lt;/span&gt;&lt;strong&gt;&lt;span&gt;ORDER BY&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;按某个字段、某种方式进行排序，然后&lt;/span&gt;&lt;span&gt;返回结果。&lt;/span&gt;&lt;span&gt;默认情况&lt;/span&gt;&lt;span&gt;&lt;strong&gt;ASC&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;表示升序，&lt;/span&gt;&lt;span&gt;&lt;strong&gt;DESC&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;表示降序&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2.&lt;strong&gt;复合排序&lt;/strong&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;表示对多个字段排序，第一排序项相同时，按照第二排序项排序&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;SELECT field1, field2,...fieldN    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;from table_name &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ORDER BY field1 [ASC [DESC]], &lt;span&gt;field2 &lt;span&gt;[ASC [DESC]];&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;限制&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;SELECT column1, column2, columnN &lt;/p&gt;&lt;p&gt;FROM table_name&lt;/p&gt;&lt;p&gt;WHERE field&lt;/p&gt;&lt;p&gt;LIMIT [num] [OFFSET num];&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;说明：限制select语句返回的数据数量,或update、 delete语句的操作数量。&lt;/span&gt;&lt;strong&gt;&lt;span&gt;limit&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;表示返回几条记录；&lt;/span&gt;&lt;span&gt;&lt;strong&gt;offset&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;表示跳过前几条记录。&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;联合查询&lt;span&gt;‍&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;SELECT expression1, expression2, ... expression_n&lt;/p&gt;&lt;p&gt;FROM tables&lt;/p&gt;&lt;p&gt;[WHERE conditions]&lt;/p&gt;&lt;p&gt;UNION [ALL | DISTINCT]&lt;/p&gt;&lt;p&gt;SELECT expression1, expression2, ... expression_n&lt;/p&gt;&lt;p&gt;FROM tables&lt;/p&gt;&lt;p&gt;[WHERE conditions];&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;说明：&lt;/span&gt;&lt;p&gt;1.&lt;strong&gt;&lt;span&gt;UNION&lt;/span&gt;&lt;/strong&gt;&lt;span&gt; 表示&lt;/span&gt;连接两个以上select 语句的结果组合到一个结果集合中,多个select语句会删除重复数据&lt;/p&gt;&lt;p&gt;2.默认union后为&lt;span&gt;&lt;strong&gt;distinct&lt;/strong&gt;&lt;/span&gt;,返回去重后数据；&lt;span&gt;&lt;strong&gt;all&lt;/strong&gt;&lt;/span&gt;则返回所有数据&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;2&quot;&gt;&lt;strong&gt;子查询&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;1.&lt;strong&gt;作为表的提供者&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;其中一个select语句&lt;span&gt;出现在from之后，必须写as&lt;/span&gt;&lt;/p&gt;&lt;p&gt;SELECT column1, column2, columnN &lt;/p&gt;&lt;p&gt;FROM （SELECT语句）as 表名&lt;/p&gt;&lt;p&gt;WHERE conditions；&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;2.&lt;strong&gt;作为值的提供者&lt;/strong&gt;，&lt;span&gt;不用写as&lt;/span&gt;，&lt;span&gt;子句结果&lt;em&gt;作为一个&lt;strong&gt;值&lt;/strong&gt;使用&lt;/em&gt;时，返回的结果需要一个明确值，不能是多行或者多列。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果子句结果&lt;em&gt;作为一个&lt;strong&gt;集合&lt;/strong&gt;使用&lt;/em&gt;，即where子句中是in操作，则结果可以是一个字段的多个记录。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;SELECT column1, column2, columnN &lt;/p&gt;&lt;p&gt;FROM  表名&lt;/p&gt;&lt;p&gt;WHERE column1比较运算符(select子句)；&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;说明：&lt;/p&gt;&lt;p&gt;当一个语句中&lt;strong&gt;包含另一个select 查询语&lt;/strong&gt;&lt;strong&gt;句&lt;/strong&gt;，则称之为有子查询的语句&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;1.模糊查询&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7718040621266428&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE8Cl4UtsObVXkaAoiaAN6zRb4x583SgZV3Hr0NdRbO3v5FFgxQGoicAqQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;837&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;strong&gt;.重命名&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4080536912751678&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEDN3kEwSePvb4gTicc3VicTdhAumQyjsajbADicYF2ciaMf7soswAbcFgeQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;745&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;strong&gt;.排序&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.1011804384485666&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE0y1clBkAozDrtEiaI9e6r90hn2vhuiah1tibCKgFgSnE8nEoOiclxibT0iaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;593&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.36578171091445427&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGESolQdOJ36ZM2cuetR98LKiaIBQroQfnnYe4Bt4rfiaYH8MsZf0AkW16g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;678&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;复合排序&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGECzQjofL9XNbNEMkmAf7S0PkR3PkR5SrMPHDQcuFtic0udiaNwneibZicBA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;760&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;4.限制&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.9378612716763006&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGESpLQ9px8DAg71zoLHL2LP3VtQGWh34A8mD5jv7Ro603FPFvnsA0N3Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;692&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.48148148148148145&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEGhnfRbanM1unrTuBnmpykn073sLPQWp19bsicu66KdzSABeAUgGV7Rw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;945&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;5.联合查询&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.198019801980198&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGELpmtXibUgCWhKKqHTVicV7AricaZibwH2y7Ry0GH5jzCGx9bp08HrpzNTQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;606&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;6.子查询&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.19850586979722518&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE7l1ibmxFRnaSrhvBXSwU5je9t9UkEOFnkJ7dL5jFLdia0m4QLWzRUg4A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;937&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8247311827956989&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEic3XbtLyLmO1Z5KCGZgGHeXMsLVCqb3sRibbSThCgNpkUO52yKH9Aia4w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;930&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2522255192878338&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEAw6sfBibo8Jukniavt6HqXF98oPOJGSXawWCwSibLwaxNA0z2AlZW2eNg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1011&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;08 聚合操作&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;table align=&quot;center&quot; interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;3&quot; align=&quot;center&quot; valign=&quot;top&quot;&gt;&lt;span&gt;&lt;strong&gt;聚合操作&lt;/strong&gt;&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;类型&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;方法&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;功能&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;4&quot;&gt;&lt;span&gt;&lt;strong&gt;聚合函数&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;avg(字段名)&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;该字段的平均值&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;p&gt;max(字段名) &lt;/p&gt;&lt;p&gt;min(字段名)&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;该字段的最大（小）值&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;sum&lt;span&gt;(字段名) &lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;该字段所有记录的和&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;count&lt;span&gt;(字段名) &lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;统计&lt;span&gt;该字段记录的个数&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;聚合分组&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot;&gt;&lt;pre&gt;SELECT column_name, function(column_name)&lt;br/&gt;FROM table_name&lt;br/&gt;WHERE column_name operator value&lt;br/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;&lt;/span&gt; column_name；&lt;/p&gt;&lt;span&gt;‍&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;GROUP BY 语句表示根据一个或多个列对结果集进行分组。&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;2&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：&lt;/p&gt;&lt;p&gt;1.使用分组时select 后的字段为group by&lt;strong&gt;分组的字段&lt;/strong&gt;&lt;strong&gt;和&lt;/strong&gt;&lt;strong&gt;聚合函数&lt;/strong&gt;，不能包含其他内容。&lt;/p&gt;&lt;p&gt;2.group by也&lt;strong&gt;可以同时依照多个字段分组&lt;/strong&gt;，如group by A，B 此时必须A,B两个字段值均相同才算一组。&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;聚合筛选&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;pre&gt;SELECT column1, column2&lt;br/&gt;FROM table1, table2&lt;br/&gt;WHERE [ conditions ]&lt;br/&gt;GROUP BY column1, column2&lt;br/&gt;&lt;span&gt;&lt;strong&gt;HAVING&lt;/strong&gt;&lt;/span&gt; [ conditions ]&lt;br/&gt;ORDER BY column1, column2&lt;/pre&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;对分组聚合后的结果，进行进一步筛选&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;2&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：&lt;/p&gt;&lt;p&gt;1. having语句&lt;strong&gt;必须与group by联合使用&lt;/strong&gt;。&lt;/p&gt;&lt;p&gt;2. having语句存在&lt;strong&gt;弥补了where&lt;/strong&gt;关键字不能与聚合函数联合使用&lt;strong&gt;的不足&lt;/strong&gt;,where只能操作表中实际存在的字段。&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;2&quot;&gt;&lt;strong&gt;去重&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;pre&gt;SELECT &lt;span&gt;&lt;strong&gt;DISTINCT&lt;/strong&gt;&lt;/span&gt; column1, column2,.....columnN &lt;br/&gt;FROM table_name&lt;br/&gt;WHERE [condition]&lt;/pre&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;不显示字段重复值&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot; colspan=&quot;2&quot; rowspan=&quot;1&quot;&gt;注：&lt;span&gt;distinct和from&lt;/span&gt;&lt;span&gt;之间所有字段都相同才会去重&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;select语句的执行过程&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.9855595667870036&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXTEsrN8yafFjAFFfxrMHgVVibEqqpiar299wm1WAQonreZGgWVOzKJulAfH3icaTiah6f3fubJhDtacQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1.聚合函数&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5526960784313726&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEzCG8J5fWFhwicWuLEmIbT3YvZhPn7Xn0KLUzC3C9PqY346ssiaDwib0Uw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;816&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;2.聚合分组&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3974960876369327&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEnL3kcHWaCx5m7N5icHxGzuATDCFtJYbMMI5Wk9GMySOIrEe2ol4ntxA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;639&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;group by后未出现的普通字段，也不能在select语句中的字段中出现&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.59375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEv9e8fqiciaRia9cZo455fIDepe3o2TFM8rMUe4FQ0qlOh45QUKNiaFyOYQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1216&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7859495060373216&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGETJ7JBATIgDuAiczt1dGrYeCs9qBneDEZ2xicNx7X6glV2iaclqF9UrOCg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;911&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2712623097582811&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEicQZVqTz3ugTUoJGd60CNuGovSHmMBiauCic2yibSqABxt7JHicSqFKFGYg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1117&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;3.聚合筛选&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4053377814845705&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEfG2j9bYkYnBzdBSSmSFRWTzb9wfmwIm6ageibGWTcb2RgFLOic2gVG7Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1199&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5929961089494163&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE5JwiaWfPBJe6QmNRJyyJUQoMF1Fias9IF4Tk4kRibIyH2zMcSKZvu0PRA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1285&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;4.去重&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8162939297124601&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEUQYQdib39DVPmWz6anfP1IqIP9QjJLNpmdv8LmsKMyylaaePpXHFzLg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;626&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;09 索引操作&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;9.1 概述&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;01.定义&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;索引是&lt;strong&gt;对数据库表中&lt;/strong&gt;&lt;strong&gt;一列或多列的值进行排序&lt;/strong&gt;的一种结构，使用索引可快速访问数据库表中的特定信息。&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;02.优缺点&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;优点&lt;/strong&gt; ：加快数据检索速度,提高查找效率&lt;/p&gt;&lt;p&gt;&lt;strong&gt;缺点 &lt;/strong&gt;：占用数据库物理存储空间，当对表中数据更新时,索引需要动态维护,降低数据写入效率&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;注：&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;1. 通常我们只在&lt;span&gt;经常进行查询操作的字段上创建索引&lt;/span&gt;&lt;/p&gt;&lt;p&gt;2. 对于数据量很少的表或者经常进行写操作，而不是查询操作的表，不适合创建索引&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;9.2 索引分类&lt;/strong&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot;&gt;&lt;span&gt;索引分类&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;类型&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;说明&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;普通索引&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;字段值无约束&lt;/span&gt;，key标志为&lt;span&gt;&lt;strong&gt;MUL&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;唯一索引&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;unique&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;字段值&lt;span&gt;不允许重复&lt;/span&gt;，但&lt;span&gt;可以为NULL&lt;/span&gt;，&lt;span&gt;key标志为&lt;/span&gt;&lt;span&gt;&lt;strong&gt;UNI&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;主键索引&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; align=&quot;left&quot;&gt;&lt;p&gt;1.主键&lt;span&gt;字段&lt;/span&gt;&lt;span&gt;不允许重复&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;不允许为NULL&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;key标志为&lt;/span&gt;&lt;strong&gt;&lt;span&gt;PRI&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，一个表中只能有一个主键字段。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2.通常设置记录编号字段&lt;/span&gt;&lt;span&gt;id为主键，能唯一锁定一条记录。&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;br/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;9.3 索引创建&lt;/strong&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;               &lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot;&gt;&lt;span&gt;索引创建&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;功能&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;语法&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;3&quot;&gt;&lt;span&gt;&lt;strong&gt;创建索引&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;create table 表名&lt;span&gt;(&lt;/span&gt;&lt;/p&gt;&lt;p&gt;字段名 数据类型，&lt;/p&gt;&lt;p&gt;字段名 数据类型，&lt;/p&gt;&lt;p&gt;index 索引名(字段名),&lt;/p&gt;&lt;p&gt;index 索引名(字段名),&lt;/p&gt;&lt;p&gt;unique 索引名(字段名)&lt;/p&gt;&lt;p&gt;);&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span/&gt;&lt;span&gt;create [unique] index 索引名 on 表名(字段名);&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：第一种语法为创建表时&lt;strong&gt;直接创建&lt;/strong&gt;索引；&lt;/p&gt;&lt;p&gt;第二种语法为创建表&lt;strong&gt;后添加&lt;/strong&gt;索引&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;添加主键索引&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;alter table 表名 add primary key(id);&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;查看索引&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot;&gt;&lt;p&gt;1. desc 表名;  --&amp;gt; KEY标志为：MUL 、UNI。&lt;/p&gt;&lt;p&gt;2. show index from 表名;&lt;/p&gt;&lt;p&gt;3. show create table 表名；&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;删除索引&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot;&gt;&lt;p&gt;drop index 索引名 on 表名;&lt;/p&gt;&lt;p&gt;alter table 表名 drop primary key;  # 删除主键&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;查看索引性能&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;set  profiling = 1；打开功能 （项目上线一般不打开）&lt;/p&gt;&lt;p&gt;show profiles  查看语句执行信息&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1.创建索引&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;创建表时直接创建索引（两种方式）&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6163194444444444&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE7qscBRAGbpiaCuIcATDFKtsDDHNz4MEjhTbYfgFP8z3w7eLanmB5Zkw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;576&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;创建表后，添加索引&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.12788906009244994&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE92nP951C32H3WiascxS8E7TsI5CPo95lYUNLLw6A5Zzer7ibosHFMXtA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;649&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2.添加主键索引&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;一般会在创建表时设置主键索引，后添加可以用&lt;span&gt;alter table 表名 add primary key(id);&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;3.查看索引&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;方法1：desc 表名；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.28697850821744625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEfibv9W32ibxWp8QYXDWoU9E9TyTOtCFTRZXDY2dT7w4WIeqruAOW7loA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;791&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;方法2：&lt;/span&gt;&lt;span&gt;show index from 表名；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.1989159891598916&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGElt6y6qIfYCPpc8dQ3LK2taSzhemUoCXSU74HETMMSclvBOTmamWnxA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1845&quot;/&gt;&lt;/p&gt;&lt;p&gt;注：mysql下的索引默认为BTREE结构，有的数据库索引是哈希结构&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;方法3&lt;/span&gt;&lt;span&gt;：show create table 表名；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6597222222222222&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEU5SODy8BTia1WpLrWJlxYicuYFhNH1GkibcmXcVHiamBmwV4jwgZzv5cdw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;720&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;4.删除索引&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.29774127310061604&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEH019ZVhW8qE78ZMYRm1yFHdianal5iaGkicAWDNuLnziaT5ApFOEFiaggLQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;487&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;5.查看索引性能&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4617760617760618&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEHic78313JsicVeQjWVFchgqCtwHggPrsK657Vsk128WMjjttlvrxcByg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1295&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.8653846153846154&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEjQ4Kic0gnAEM8yf7DCSibgaic6cicIm6bXJN5P191CzFJ5o1MRFx3RNZSw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;416&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;使用 profiling 命令可以了解 SQL 语句消耗资源的详细信息&lt;/span&gt;，会把用户的操作信息写到日志里，通过show profiles查看日志，可以得到具体信息。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.796976241900648&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEEnubDfjCVrfu8zRkVaPmKIgicE0iazotCOOyW8OwfQZod7NHk2KhUVhQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;926&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.30913091309130913&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGERpX3F1hIxlCeSb6UtQibsq42NSKDKbZywsPwOfKGh0oy9Vromv6nokA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;909&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;&lt;strong&gt;10 外键约束和表关联关系&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;18&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;10.1 外键约束&lt;/strong&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;01.概念&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;1.约束&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;约束是一种限制，它通过&lt;strong&gt;对表的行或列的数据做出限制&lt;/strong&gt;，来&lt;span&gt;确保表的数据的完整性、关联性。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;2.外键约束&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;foreign key功能 : 建立&lt;strong&gt;表与表之间&lt;/strong&gt;的某种约束的关系，由于这种关系的存在，能够让表与表之间的数据更加完整，关连性更强。&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;3.主表和从表&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;若同一个数据库中，B表的外键与A表的主键相对应，则A表为主表，B表为从表。&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;02.语法&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;table align=&quot;center&quot; interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;top&quot;&gt;&lt;span&gt;外键约束&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;类型&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;语法&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;外键的定义语法&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;[CONSTRAINT symbol] FOREIGN KEY（外键字段） &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;REFERENCES&lt;/strong&gt;&lt;/span&gt;&lt;span&gt; tbl_name (主表主键)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[ON DELETE {RESTRICT | CASCADE | SET NULL | NO ACTION}]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[ON UPDATE {RESTRICT | CASCADE | SET NULL | NO ACTION}]&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot;&gt;&lt;p&gt;注：&lt;/p&gt;&lt;p&gt;1.在 CREATE TABLE 和 ALTER TABLE 时使用&lt;/p&gt;&lt;p&gt;2.并非所有情况都需要建立外键来约束，表之间没有约束关系可以不创建  &lt;/p&gt;&lt;p&gt;3.&lt;span&gt;从表的外键字段数据类型与指定的主表主键应相同&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4.&lt;span&gt;CONSTRAINT symbol外键名，可以不写，系统会自动设置&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;增加外键约束&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;alter table 表名 add  &lt;p&gt;&lt;span&gt;[CONSTRAINT symbol] FOREIGN KEY（外键字段） &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;REFERENCES&lt;/strong&gt;&lt;/span&gt;&lt;span&gt; tbl_name (主表主键)&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;解除外键约束&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot;&gt;&lt;p&gt;alter table 从表名 drop foreign key 主表名&lt;span&gt;;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;-- 查看外键名称&lt;/p&gt;&lt;p&gt;show create table 从表名;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot;&gt;注：删除外键后发现desc查看索引标志还在，其实外键也是一种索引，需要将外键名称的&lt;span&gt;索引&lt;/span&gt;删除之后才可以&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;6&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;级联动作&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot;&gt;&lt;span&gt;&lt;strong&gt;restrict&lt;/strong&gt;&lt;/span&gt;(默认)  :  on delete restrict  on update restrict&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：&lt;/p&gt;&lt;p&gt;1.当主表删除记录时，若从表中有相关联记录，则不允许主表删除&lt;/p&gt;&lt;p&gt;2.当主表更改主键字段值时，若从表有相关联记录，则不允许更改&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;cascade&lt;/strong&gt;&lt;/span&gt; ：数据级联更新  &lt;/p&gt;&lt;p&gt;on delete cascade   on update cascade&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;当主表删除记录或更改被参照字段值时，从表会级联更新&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;set null&lt;/strong&gt;&lt;/span&gt;  :   on delete set null    on update set null&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;left&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;注：&lt;/p&gt;&lt;p&gt;1.当主表删除记录时，从表外键字段值变为null&lt;/p&gt;&lt;p&gt;2.当主表更改主键字段值时，&lt;span&gt;从表外键字段值变为null&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot; class=&quot;rich_pages wxw-img&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;03.实例&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;以部门表和员工表为例，两张表之间存在一对多关系，一个部门可以有多名员工。&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3266509433962264&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEKgllibe27mdVh873SofyloJBlxJ3qgWhCUD4eKCLoczV593GtXgTl7A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;848&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; dept(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; primary &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt; auto_increment,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;dname &lt;span class=&quot;code-snippet__built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;50&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; person(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; primary &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt; auto_increment,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;32&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;age &lt;span class=&quot;code-snippet__built_in&quot;&gt;tinyint&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;unsigned&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;salary &lt;span class=&quot;code-snippet__built_in&quot;&gt;decimal&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;dept_id &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;在两张表没有建立外键约束的情况下，如果在员工表中插入一条记录，部门编号设置为8，并不会报错，但显然不合常理，所以建立外键约束是必要的。&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.34675615212527966&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEE87tcWSAeNeFOd5r4FKicx53icN9nliaLHS5sibN6ibIjcvWZevcXG58hicw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;447&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;1.创建外键约束&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;方法1：&lt;/span&gt;所以在&lt;span&gt;创建表时，&lt;/span&gt;可以&lt;span&gt;直接给从表（员工表）加上外键约束&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;注：外键和关系字段都是在从表中创建的&lt;/span&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;TABLE&lt;/span&gt; person (&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; PRIMARY &lt;span class=&quot;code-snippet__keyword&quot;&gt;KEY&lt;/span&gt; AUTO_INCREMENT,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;32&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;NULL&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;age &lt;span class=&quot;code-snippet__built_in&quot;&gt;tinyint&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;unsigned&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;salary &lt;span class=&quot;code-snippet__built_in&quot;&gt;decimal&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;,&lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;dept_id &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; , &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;constraint&lt;/span&gt; dept_fk &lt;span class=&quot;code-snippet__keyword&quot;&gt;foreign&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt;(dept_id) &lt;span class=&quot;code-snippet__keyword&quot;&gt;references&lt;/span&gt; dept(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;方法2：&lt;/span&gt;如果想在&lt;span&gt;创建表后添加外键约束&lt;/span&gt;，可以按下面的命令操作：&lt;br/&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; person &lt;span class=&quot;code-snippet__keyword&quot;&gt;add&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;constraint&lt;/span&gt; dept_fk&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;foreign&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt;(dept_id)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;references&lt;/span&gt; dept(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;添加外键约束后，系统随之会创建外键的普通索引，目的是进行多表查询时会用到关系字段。&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6764091858037579&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEKkQcwK5MmibXo7q3euBt19p5Y6DiaqQSFRdnML5ODEgiaFQvfuuaC4nYg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;958&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2.解除外键约束&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;删除外键后，外键的索引还在，如果不需要，可以手动删除&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.9672131147540983&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEyicRvxTTwe3QcCmoVxHGCRW3T8QMTOPA4OqvEufEDpnRIXMbnJKAiaTA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;793&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;3.级联动作&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;外键约束的不仅是从表，&lt;strong&gt;主表的被关联字段也会被约束&lt;/strong&gt;，这就是所谓的级联动作。&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;级联动作主要有3种&lt;/span&gt;，分别是&lt;span&gt;restrict（默认），cascade （数据级联更新），set null（设置为空）。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;第一种：&lt;/strong&gt;在restrict情况下，不允许删除和从表相关联的记录&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.07517577068685775&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEiaqeZe07WftRkbBjpXViaib2P0kDQPDEEX2QXXjBKB0tKicVdwuJEPdqVA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1849&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;第二种&lt;/strong&gt;：在cascade 情况下，随着主表记录和字段的改变，从表会随之更新。（注意先删外键，然后再添加外键）&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.665086887835703&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEfvmeJUSMicbNl5X0gsFic7AGJRdSicgzicgjAPNzqB74Yb2SNJRfuQbU9g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;633&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.236886632825719&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEJgxFthzo7JmQiblmBM1JOA6tyfwJu7EAzuLJOAVURj6zyebQL0GZE2w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;591&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;第三种&lt;/strong&gt;：在set null情况下，主表删除记录或更改主键字段值时，从表外键字段值会变为Null。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5395136778115501&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEjynZARXNaJhaIQW81vchiazTCcvobcvypB4E6ctC1ibESWlANFibeIggQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;658&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.3394495412844036&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEdY2d4KbiaFqwAPZH2FoUZeT0zAkicrbvkibujazPG3rxNAuZJAf4j9nmw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;545&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;10.2 表关联关系&lt;/strong&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;01.分类&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;一对多和多对多是常见的表关联关系。&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1. 一对多&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;一张表中有一条记录可以对应另外一张表中的多条记录；但是反过来，另外一张表的一条记录只能对应第一张表的一条记录，这种关系就是一对多或多对一。上面的员工和部门两张表之间的关系就是一对多的例子。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2.多对多&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;一张表中（A）的一条记录能够对应另外一张表（B）中的多条记录；同时B表中的一条记录也能对应A表中的多条记录。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;在表达多对多关系时，需要借助第3张表，也就是关系表。&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;比如运动员和运动项目两张表之间的关系是多对多关系，一个运动员可以参加多个项目，一个项目也是由多个运动员参加。这两张都可以作为主表，需要借助一张新的关系表来连接两张表格。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6170212765957447&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE4ico3nIqIicfYUUDT0wRBqLxHP0TYMF8dvVfjtxmGHiblvQ678AVliaaKA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;752&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; athlete(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; primary &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt; auto_increment,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;30&lt;/span&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;age &lt;span class=&quot;code-snippet__built_in&quot;&gt;tinyint&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;country &lt;span class=&quot;code-snippet__built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;30&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; item(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; primary &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt; auto_increment,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;rname &lt;span class=&quot;code-snippet__built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;30&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; athlete_item(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; primary &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt; auto_increment,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;athlete_id &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;item_id &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;foreign&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt;(athlete_id) &lt;span class=&quot;code-snippet__keyword&quot;&gt;references&lt;/span&gt; athlete(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;foreign&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt;(item_id) &lt;span class=&quot;code-snippet__keyword&quot;&gt;references&lt;/span&gt; item(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;需求：想要增加排名字段，放在关系表中更合适，比如下图中的第一个记录表示马龙在乒乓球项目中排名第一。&lt;br/&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; athlete_item &lt;span class=&quot;code-snippet__keyword&quot;&gt;add&lt;/span&gt; ranking &lt;span class=&quot;code-snippet__built_in&quot;&gt;tinyint&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5010940919037199&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE2JjnJhwU50fd6I4B3UPuGbNR3gqGHibIWky0ArtWcrZmQQEEyWO1fEA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;457&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;                   &lt;/strong&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;10.3 E-R模型图&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6YvdEMX0kT31okKDRaWh9A8St97VpkXnibEaFLNMcvcr1LKjEeCtjTfxbf8W5QGaILDbWrQiaG6PKU0IC8yTQ37g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;01.概念&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.6666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jTVLNicGIe9FqpJ9W89PibqicaJAjFZyODAibGjnF9BLeRDGTtywClYg7Kxo9eDYB5zXq0x35J97NYZMkdZk958niaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;18&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;E-R模型&lt;/strong&gt;(Entry-Relationship)即 &lt;strong&gt;实体-关系数据模型&lt;/strong&gt;,用于数据库设计。&lt;/p&gt;&lt;p&gt;用简单的图(E-R图)反映了现实世界中存在的事物或数据以及他们之间的关系。&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;实体&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;描述客观事物的&lt;em&gt;概念&lt;/em&gt;；表示方法 ：矩形框&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;属性&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;实体具有的某种&lt;em&gt;特性&lt;/em&gt;；表示方法 ：椭圆形&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;关系&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;实体之间的&lt;em&gt;联系&lt;/em&gt;；分为一对多关联(1:n)  和多对多关联(m:n) &lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;实例：图书、作家和出版社之间的E-R模型图&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4039829302987198&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEPvxenEmU4LnaDZohJwC2pY1bG3Jx0nzrWdy9aKNPHqcibJib8ZjB0XQQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1406&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;根据E-R模型图可以创建图书表、作家表、出版社表，另外还可以创建一张出版社和作家之间的关系表。&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;31&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;31&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;strong&gt;10.4  表关联查询&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;table align=&quot;center&quot; interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;th rowspan=&quot;1&quot; colspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;top&quot;&gt;&lt;span&gt;&lt;strong&gt;表关联查询&lt;/strong&gt;&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;类型&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;语法&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;简单多表查询&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;select  字段1,字段2... from 表1,表2... [where 条件]&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;多表数据联合查询&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;内连接&lt;/strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;p&gt;SELECT 字段列表&lt;/p&gt;&lt;p&gt;    FROM 表1  INNER JOIN  表2&lt;/p&gt;&lt;p&gt;ON 表1.字段 = 表2.字段;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;只会查到符合条件的记录，结果和表关联查询一样，官方&lt;strong&gt;更推荐内连接查询&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; rowspan=&quot;2&quot; colspan=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;左（右）连接&lt;br/&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot;&gt;&lt;p&gt;SELECT 字段列表&lt;/p&gt;&lt;p&gt;    FROM 表1  LEFT（RIGHT） JOIN  表2&lt;/p&gt;&lt;p&gt;ON 表1.字段 = 表2.字段;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;middle&quot; align=&quot;center&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;左连接：左表全部显示，显示右表中与左表匹配的项。右连接相反&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;注：&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;1.尽量把数据量大的表放在前面，作为基准表&lt;/p&gt;&lt;p&gt;2.外连接又分成左连接和右连接&lt;/p&gt;&lt;p&gt;3.A left join B 和 B right  join A 两种情况返回的结果是一样的，程序员更习惯用左连接。&lt;/p&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;1.简单多表查询&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;进行多表查询时，两张表如果&lt;strong&gt;没有什么关联性，会把字段全部返回&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;多表一起查询，&lt;strong&gt;没有表达关联条件，会出现笛卡尔积。&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;笛卡尔积现象&lt;/strong&gt;就是将A表的每一条记录与B表的每一条记录强行拼在一起。所以，如果A表有n条记录，B表有m条记录，笛卡尔积产生的结果就会产生n*m条记录。&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5851063829787234&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEELGjibpesKDy6Eiau0sHKx0BnpQ28Jqemw3DAHn2EdKiaKkCl4w4hqffQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1222&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;也可以同时&lt;strong&gt;查询两张表的多个字段&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.1636029411764706&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE2Yjq2WSeBwHWY6k2p6IJYH5wxDBQhDVZGkxkoCw6gZ3KcWa4RGFvhA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;544&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;查询两张表都有的字段时，如果不注明属于那张表，&lt;strong&gt;会报错&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.13451086956521738&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEF4gicianupicmsRRfe8SwdPkwnDP2Xcu9oodMnAJzb1LnyAWCXSxhFfzQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;736&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;可以通过&lt;strong&gt;重命名的方&lt;/strong&gt;&lt;strong&gt;式&lt;/strong&gt;来区分表的归属，就不会报错了&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.2434325744308232&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE7t69hj3w2sKowa90nTaGcoKnxYZXWy1icqM1d10EFRB3bLx6gXY55lA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;571&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;通过where 表达关联关系，让表格呈现的信息更有意义。&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6409691629955947&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEXEM839ewic4CCX2Yiawvlvfkn6AOLB4zIjz42XVCDbcPzdumaNl0WAcw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;454&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;注：&lt;/strong&gt;两张表如果已经建立了外键约束关系，where后表示关联的字段基本上就是外键。没有建立外键约束关系的两张表同样也可以进行多表查询，找到关联字段即可。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;多表查询工资大于2w的，查询到的结果和真实情况并不相符&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.45956232159847765&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEsRsFd1tmzxWkmdLzDuXJhy4AIrgGvuoYbHMicIvLTEPMs33IKTcfALQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1051&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;原因&lt;/strong&gt;在于：&lt;/p&gt;&lt;p&gt;1.表关系和条件筛选都在where中 混乱&lt;/p&gt;&lt;p&gt;2.部分数据信息可能筛选不到（部门设置为NULL的员工工资）&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4651539708265802&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEg1ZHlib6bzIllJjp1oHnr971vLzv8KXRMjFT7alsiaBQ6BGFym1265gg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1234&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2.内连接&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.635593220338983&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEzzicMLvGwtpibXDKQrLfXJcwxmnguIa3ectj0uSSKt73dotGq1qXwOOg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;354&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;内连接&lt;/strong&gt;的写法有效解决了简单多表查询存在的第一个问题&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.513874614594039&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEwVoVrjcoFAN3dULtLXdS4lbQFxaLHwmqHEsYvuH40ePK31JfuvyictA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;973&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;3.左连接&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4846846846846847&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEJadUC4rsAtTxIiaibDCsm46DSoupd0VNWxEJsKBm4qWndNvEkoPfK3RA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;555&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;在本题中，左连接（要根据实际问题分析，也可能是右连接能够解决，不管是左还是右，都属于外连接）的写法解决了简单多表查询的两个问题，显示了左表的全部和右表中与左表匹配的项。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5553213909378293&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEUMRNrscBXIlfCqnhoxQWshl7gpORyswRPjVeCNfw3u9zqCicYiccibrzw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;949&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;4.右连接&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.400352733686067&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEnuoTUFE1vLvBvZcOAq4NJoYFrP1DCGB1ZZiaPn9eIbCOcbIKUjeMyRQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;567&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;需求：获取每个部门的人数&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;通过内连接的方式来做会发现如果某个部门人数为0 ，这个部门是不会显示的&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5746421267893661&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGELE3yyjcsSTRmWSKKSWiat2L3LYW0PibD5rK8ZdLOIT1YhcDxCD6O7Exw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;978&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;3和6并没有显示出来&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.743046357615894&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEwmymCEBNYRl5le1Ogqk2d6cwvBRzpcKjz2crKlXmgbbeRSzct9kvCw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;755&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;试试右连接能不能把所有部门显示出来，发现虽然显示了，但是计数出现了问题，这两个部门人数实际为0，显示却是1&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5969849246231156&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEoXziaGy1V3yPRrtib4b1BLzAFBI3xCrsksWEdtFmj2BZia8ciazuicdJnRg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;995&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;问题出来count(*)上，&lt;strong&gt;括号内填*表示的是统计所有记录的数量&lt;/strong&gt;，这题&lt;strong&gt;可以把*改成其他字段&lt;/strong&gt;，比如name等其他字段&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.358974358974359&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGEFCrvyBarQaKUXxtyBurNsiaPszIjSOelwvp8x0N5Dac4GP14DUd4uyA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1326&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;现在的显示是没问题的&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6445783132530121&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE0p1dFRLyhZkm5vxpdibFsdSNfG8Sxg7dPS7dOVMI76wkyN93NMCCfiag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;996&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;下期预告&lt;/strong&gt;：数据库（下）&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.12&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/U9kKudHzsK3W5c0NRAdWnuRVSW6XQyGvg6OGgAx0tyceatfwtlSTTwQN8GvP155mZttbHucmWyonfEPlOiamy9g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;350&quot;/&gt;&lt;/strong&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.0859375&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JrRY60XUiczCB0aAKusfQXhclcbPLWbWc64icUBDfxMM47JVqSw3IOFHpry1wBXo1ryBDcXMIAWicGppjb6JJ3RCA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;256&quot;/&gt;&lt;/strong&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;                                                                                                                                                               &lt;/strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;29&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;25&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uyZsSl2gvXUQ2ORiaDHIlr4Xw64zhj0RpicIt7q38C2p7EVuCvOoOutGuaPFXd4HBUnftjrfh8R3TtuKwZdWrkaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;参考资料&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;[1] MySQL 教程&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;https://www.runoob.com/mysql/mysql-tutorial.html&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;花样早餐展位&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.8503937007874016&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uyZsSl2gvXXAhZZTKcdicyvR9W9bAIcGE9wsk7AJYZKEcGtSXUQVBnQ3QhVkmndRPvwgP2s0bKhAMiaCSbKLv57g/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1270&quot;/&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>