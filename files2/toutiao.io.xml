<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>d3636029dcc3829ca71005bc7999a82e</guid>
<title>分布式一致性协议 Raft</title>
<link>https://toutiao.io/k/xydtpak</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;post-content&quot;&gt;&lt;p&gt;学习raft之前，给大家推荐一个网站，这个网站动画描述raft运行过程。在看文章时对照该网站，可以帮助更好的理解raft。&lt;br/&gt;&lt;a href=&quot;http://thesecretlivesofdata.com/raft/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://thesecretlivesofdata.com/raft/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;相比于paxos，我们更应掌握raft。raft作为现在分布式系统首选的共识算法。zookeeper、cubby、oceanbase等系统都是在raft诞生之前开发的，所以都是使用了paxos或者对其进行改进。而后来的大多系统都选择了raft，比如consul、etcd等。&lt;/p&gt;
&lt;p&gt;raft相比paxos的优点是:容易理解，容易实现。之所以说容易，是因为raft流程清晰、关键处给出了伪代码描述。相反，可真正用于工程实现的multi-paxos，lamport宗师只提出了个大概。&lt;/p&gt;
&lt;h3 id=&quot;Raft术语科普以及总结&quot;&gt;&lt;a href=&quot;#Raft术语科普以及总结&quot; class=&quot;headerlink&quot; title=&quot;Raft术语科普以及总结&quot;/&gt;Raft术语科普以及总结&lt;/h3&gt;&lt;p&gt;基于前两个篇对paxos和zab的介绍，我们对分布式协议有一定的基础，所以本文先给出总结。&lt;/p&gt;
&lt;h4 id=&quot;三种成员身份&quot;&gt;&lt;a href=&quot;#三种成员身份&quot; class=&quot;headerlink&quot; title=&quot;三种成员身份&quot;/&gt;三种成员身份&lt;/h4&gt;&lt;p&gt;raft提供三种成员身份，&lt;strong&gt;领导者（leader）、跟随者（follower）、候选人（candidate）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;跟随者：相当于paxos中的acceptor，接收和处理leader的消息，当leader故障时，主动推荐自己为候选人&lt;/li&gt;
&lt;li&gt;候选人：向其他节点发送请求投票消息（Request Vote），如果获得大多数选票，则晋升为leader&lt;/li&gt;
&lt;li&gt;领导者：处理写请求，管理日志复制、发送心跳消息。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;两种运行阶段&quot;&gt;&lt;a href=&quot;#两种运行阶段&quot; class=&quot;headerlink&quot; title=&quot;两种运行阶段&quot;/&gt;两种运行阶段&lt;/h4&gt;&lt;p&gt;raft强化了leader的地位，把整个协议可以清楚的分割成两个部分，并利用日志的连续性做了一些简化：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;leader在时，由leader向follower同步日志。&lt;/li&gt;
&lt;li&gt;leader挂掉了，选一个新leader，leader选举算法。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;两类rpc消息&quot;&gt;&lt;a href=&quot;#两类rpc消息&quot; class=&quot;headerlink&quot; title=&quot;两类rpc消息&quot;/&gt;两类rpc消息&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;请求投票消息（request vote），用于选举leader。&lt;/li&gt;
&lt;li&gt;追加条目消息（append entry），用于心跳消息或日志复制消息。该包含当前最大的日志项。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;raft与multi-paxos的区别&quot;&gt;&lt;a href=&quot;#raft与multi-paxos的区别&quot; class=&quot;headerlink&quot; title=&quot;raft与multi-paxos的区别&quot;/&gt;raft与multi-paxos的区别&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;不是所有节点都能当选leader&lt;br/&gt;只有日志最完整的才能当选leader，而multi-paxos则不需要保证这一点，也意味multi-paxos需要额外的流程从其它节点获取已经被提交的日志。&lt;/li&gt;
&lt;li&gt;日志是连续的&lt;br/&gt;日志的连续性蕴含了这样一条性质：如果两个不同节点上相同序号的日志，那么这和这之前的日志必然也相同的&lt;/li&gt;
&lt;li&gt;简化的二阶段&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Leader选举&quot;&gt;&lt;a href=&quot;#Leader选举&quot; class=&quot;headerlink&quot; title=&quot;Leader选举&quot;/&gt;Leader选举&lt;/h3&gt;&lt;p&gt;在节点刚启动状态下，都处于follower状态。同时每个节点会为自己设置一个等待leader心跳消息的随机超时时间。当在超时时间之内没有收到来自leader的心跳信息时，则会推荐自己为candidate。随后增加自己的任期编号，并以candidate的身份发起请求投票消息，推荐自己为leader，当获得大多数选票后，晋升leader，发送心跳消息。&lt;/p&gt;
&lt;h4 id=&quot;选举过程&quot;&gt;&lt;a href=&quot;#选举过程&quot; class=&quot;headerlink&quot; title=&quot;选举过程&quot;/&gt;选举过程&lt;/h4&gt;&lt;p&gt;例如，存在A、B、C三个节点的raft集群刚启动时，都处于follower状态，其中A超时时间为100ms，B超时时间为200ms，C超时时间为300ms。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_1.png&quot; alt=&quot;节点信息&quot;/&gt;&lt;/p&gt;
&lt;p&gt;由于集群中不存在leader，A、B、C三个节点都不会收到来自leader心跳信息。其中，A节点的超时时间最小，则最先修改自己状态为candidate，并增加自己的任期编号为1，发起请求投票消息。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_2.png&quot; alt=&quot;节点信息&quot;/&gt;&lt;/p&gt;
&lt;p&gt;节点A的选票会投给自己，而节点B、C收到candidate的请求投票消息。根据投票规则：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;任期编号大的节点拒绝投票给任期编号的小的请求投票消息&lt;/li&gt;
&lt;li&gt;最后一条日志编号大的拒绝投票给最后一条日志编号小的节点&lt;/li&gt;
&lt;li&gt;一个任期编号只投出一张选票&lt;/li&gt;
&lt;li&gt;先来先获得投票&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;明显，B、C的任期编号小于A的任期，也不存在最大的日志编号，并且任期编号为1的选票还没有投给任何人，则将任期为1的选票投给节点A，并更新自己的任期编号。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_3.png&quot; alt=&quot;节点信息&quot;/&gt;&lt;br/&gt;节点A获得包括自己在内的3个选票，赢得大多数选票。其中赢得过半选票也是存在随机超时时间的。如果在超时时间内，则晋升为leader，否则发起新的一轮选举。晋升leader后，则向其他节点发送心跳信息，维护自己的leader角色。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_4.png&quot; alt=&quot;节点信息&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;选举规则&quot;&gt;&lt;a href=&quot;#选举规则&quot; class=&quot;headerlink&quot; title=&quot;选举规则&quot;/&gt;选举规则&lt;/h4&gt;&lt;p&gt;整个选举过程相对来说，比较简单。具体细节还得挑几个点，单独来说：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;随机超时时间&lt;br/&gt;在basic-paxos中，通常会描述“活性”一词，是指两个提案同时提出，互相争取选票，导致另一个提案在第二阶段获取不到大多数选票。在muilt-paxos中，leader的选举，而会存在瓜分选票的情况。而raft巧妙的通过随机超时时间，避免了两个candidate同时竞选leader。需要注意，随机超时时间包含两个方面：&lt;ul&gt;
&lt;li&gt;follower等待leader心跳信息超时的时间间隔。&lt;/li&gt;
&lt;li&gt;candidate在一个随机时间间隔内，没有赢得过半票数，那么选举无效了，需要发起新一轮的选举。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;一届任期只投出一张选票，先来先获得投票&lt;br/&gt;比如：B节点先后收到A、C任期编号为1的请求投票消息，B节点则将选票投给A节点。至于C节点的请求投票消息，B节点在任期编号为1的已经没有选票可投了。&lt;/li&gt;
&lt;li&gt;任期编号大的节点拒绝投票给任期编号的小的请求投票消息&lt;br/&gt;实际上，raft协议在leader选举阶段，由于老leader可能也还存活，也会存在不只一个leader的情形，只是不存在任期编号一样的两个leader。因为选举算法要求leader得到同一个任期编号的多数派的同意，同时赞同的成员会承诺不接受任期编号更小的任何消息。这样可以根据任期编号大小来区分谁是合法的leader。&lt;/li&gt;
&lt;li&gt;最后一条日志编号（uncommited）大的拒绝投票给最后一条日志编号（uncommited）小的节点&lt;br/&gt;这一条则是为了保证，只有日志完整度高的节点才能当选leader。这样则可以节省在当选leader后，与各节点比对日志的时间。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;日志同步&quot;&gt;&lt;a href=&quot;#日志同步&quot; class=&quot;headerlink&quot; title=&quot;日志同步&quot;/&gt;日志同步&lt;/h3&gt;&lt;p&gt;在raft中，数据都是以日志的形式存在的，客户端每一次的写请求，都会封装成一个日志项（log entry）记录在日志中。所以处理客户端的写请求，就是把日志项（log entry）同步给其他节点并应用到各自状态机的过程。日志同步则可以认为就是处理写请求。&lt;/p&gt;
&lt;p&gt;一条日志项（log entry）又包含：用户数据、索引值、任期编号。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户数据，指客户端写请求中的数据，一般是对某个值的修改。&lt;/li&gt;
&lt;li&gt;索引值，日志项的id，一个连续的单调递增的数字&lt;/li&gt;
&lt;li&gt;任期编号，指创建该日志项的leader的任期编号&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在上面总结中，有提到简化的二阶段协议，则是指日志同步阶段。其实在raft之前lamport宗师也有提到如何优化multi-paxos，其中就有优化为一阶段提交。而raft则在日志同步中做出了实践。&lt;/p&gt;
&lt;p&gt;具体实现，在raft中，leader接收到写请求，进入第一阶段。leader将写请求封装为log entry追加到自己的日志中，并发送日志复制消息，将需要同步的log entry复制到集群中其他节点上。如果leader收到大多数节点都成功写入该log entry。那么就将该log entry提交到自己的状态机，同时返回成功给客户端。否则返回错误给客户端。&lt;/p&gt;
&lt;p&gt;而follower则是在接收到leader的心跳信息或者新的日志复制消息后，如果follower发现leader已经提交了某条log entry，而自己还没提交，那么follower就将这条log entry提交到自己的状态机中。&lt;/p&gt;
&lt;h4 id=&quot;算法模拟&quot;&gt;&lt;a href=&quot;#算法模拟&quot; class=&quot;headerlink&quot; title=&quot;算法模拟&quot;/&gt;算法模拟&lt;/h4&gt;&lt;p&gt;存在3节点的集群，A为leader，B、C为follower。当客户端向leader发送set 5的请求，leader收到后，会将其封装成log entry追加到自己的日志中。然后通过日志复制消息时将更改发送给follower。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_5.png&quot; alt=&quot;算法模拟&quot;/&gt;&lt;/p&gt;
&lt;p&gt;follower收到消息后，将该log entry追加到自己的日志中，并向leader返回成功响应。当leader收到大多数节点的成功响应后，则在自己的状态机中提交该log entry，并向客户端返回成功。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_6.png&quot; alt=&quot;算法模拟&quot;/&gt;&lt;/p&gt;
&lt;p&gt;在下一次追加条目消息（心跳消息、日志复制消息）中，会携带leader最新修改的log entry。follower收到后，则会提交之前尚未提交的log entry。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_7.png&quot; alt=&quot;算法模拟&quot;/&gt;&lt;/p&gt;
&lt;p&gt;follower完成提交后，即达成本次共识。&lt;/p&gt;
&lt;h3 id=&quot;网络分区、宕机恢复&quot;&gt;&lt;a href=&quot;#网络分区、宕机恢复&quot; class=&quot;headerlink&quot; title=&quot;网络分区、宕机恢复&quot;/&gt;网络分区、宕机恢复&lt;/h3&gt;&lt;p&gt;当集群中出现网络分区，导致产生了两个小集群时，每个集群都存在自己的leader。或者上一任leader宕机恢复后加入集群时，存在两个leader的情况。raft为此也制定了一些特殊的规定：&lt;strong&gt;根据任期编号大小来区分谁是合法的leader&lt;/strong&gt;。例如：当一个candidate或者leader发现自己的任期编号比其他节点小，那么它会立即恢复成follower状态。&lt;/p&gt;
&lt;p&gt;存在一个5节点集群，正常运行时，B节点为leader，其余A、C、D、E为follower&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_8.png&quot; alt=&quot;网络分区&quot;/&gt;&lt;/p&gt;
&lt;p&gt;当出现网络分区，出现两个由B, A和C, D, E组成的小集群。并且B继续保持leader状态，C为新晋升的leader。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_9.png&quot; alt=&quot;网络分区&quot;/&gt;&lt;/p&gt;
&lt;p&gt;当此时，有写请求到B时，由于B不能获得多数票的支持，最终该写请求不会被提交，也不会返回给客户端成功的响应，将一直保持未提交的状态存在日志中。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_10.png&quot; alt=&quot;网络分区&quot;/&gt;&lt;/p&gt;
&lt;p&gt;而当网络分区恢复后，B, A节点重新加入集群。当它们收到来自C节点的心跳消息时，发现C的任期编号比自己大，则会切换状态，抛弃掉自己有但C节点没有的log entry，并且同步C节点上的log entry。&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/raft_11.png&quot; alt=&quot;网络分区&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;思考几个题目吧&quot;&gt;&lt;a href=&quot;#思考几个题目吧&quot; class=&quot;headerlink&quot; title=&quot;思考几个题目吧&quot;/&gt;思考几个题目吧&lt;/h3&gt;&lt;figure class=&quot;highlight asciidoc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;leader选举中，B节点的任期编号为1，日志编号为2。A节点任期编号为2，日志编号为1。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;B节点收到A节点的请求投票消息，B会投票给A节点吗？&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;不会，B节点的编号大于A节点，说明B节点的日志完整度更高，更适合当选leader。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;当一个节点出现网络分区，它即获取不到大多数节点的选票，当不了leader，也接收不到其他leader的心跳，那么任期则会一直增加。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;那它网络恢复加入集群后，因为它存在很大编号，其他节点会不会认它为leader。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;不会，它加入集群后，会拒绝新leader的消息（因为它的任期大），则会修改状态为candidate，并发起请求投票。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;其他节点收到它的投票信息后，会将自己的任期编号改成它的，然后判断其他投票条件（最大日志编号），将会拒绝投票给它。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;它加入集群的唯一的影响就是一下子增加了任期编号的大小。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;假如客户端发送请求set 1，当leader在第一阶段时将该日志项只复制到了一个节点，没有获得大多数选票，则返回给客户端失败。这时leader宕机。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;根据选举规则，那台复制成功的节点会当选leader，那么怎么处理set 1的日志项？&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;新当选的leader，会确认set 1这条日志项有没有被大多数节点复制成功。如果被大多数节点复制成功，则提交该日志，否则丢弃该日志。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;题中情况，会丢弃set 1的日志项。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;假如客户端发送请求set 1，当leader在第一阶段时将该日志项只复制到了大多数节点，获得了大多数选票，则返回给客户端成功。这时leader宕机。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;新选举的leader，将会如何将set 1日志项进行提交呢？&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;新当选的leader，会确认set 1这条日志项有没有被大多数节点复制成功。如果被大多数节点复制成功，则提交该日志，否则丢弃该日志。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;raft一切依赖leader，所以性能瓶颈集中在leader，写性能仅为单机。如何提升？&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;可以裂变分区，将原本一个raft集群裂变成多个互不影响的raft集群。&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;例如：设计一个数据库，可以将元数据同步和用户数据同步使用两个raft集群。&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>38834a44dcca024e374951803d70d757</guid>
<title>听说这是未来最流行的编程形式</title>
<link>https://toutiao.io/k/mmp3sl8</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;section&gt;&lt;span&gt;&lt;span&gt;‍&lt;/span&gt;&lt;span/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;‍&lt;/span&gt;&lt;span/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;img data-backh=&quot;241&quot; data-backw=&quot;562&quot; data-ratio=&quot;0.428125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBib4kOUcrprTLVCHAAP4kINZ24ksJHHqKO3onvD71osXhnBIicjn8cszA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;近几年，互联网、大数据、AI......数字经济正在如火如荼蔓延，各行各业纷纷拥抱数据基建、转向企业上云，极大地提升了企业开发效率。但广大的开发者却不知道，不仅企业可以上云，个人也可以，同样能极大提升自身的开发效率。所以，今天我们给程序员们带（an）来（li）一份礼物——做点你们想要的——Titan IDE。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.1073345259391771&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiavOaaRORXpLFN6NoUT8ZqRiabialicrZ42nr0aT62lJsDHuavyGvSCVNf7olt6Wh37DHJyfuR0vNHU0Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;559&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;Titan IDE 是什么？&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;Titan IDE&lt;/span&gt;&lt;/strong&gt;&lt;span&gt; 是基于 &lt;/span&gt;&lt;span&gt;Code-Server&lt;/span&gt;&lt;span&gt; 开发并根据开发者开发习惯进行优化的云端集成开发环境（IDE）。开发者无需安装，只要打开浏览器，连接上网络就可以在任何地方，任何机器上即刻享有一个&lt;strong&gt;永不间断、永不丢失的云端开发环境&lt;/strong&gt;。无论你的设备是 Mac、Windows、Linux，还是 Pad、手机等，都能获得近乎一致的体验。简单来说，只要你能连接上网络，能打开浏览器，你就能拥有属于自己独立的开发空间。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.5254342431761787&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBA3bEWuiaO2geqIdbcERxk9CUywGevux1urZeOQK60v8iaCbugGAKQibeg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1612&quot; data-backw=&quot;562&quot; data-backh=&quot;295&quot;/&gt;&lt;/span&gt;&lt;span&gt;图片来源于 Titan IDE官网&lt;/span&gt;&lt;/p&gt;&lt;h3/&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.1073345259391771&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiavOaaRORXpLFN6NoUT8ZqRiabialicrZ42nr0aT62lJsDHuavyGvSCVNf7olt6Wh37DHJyfuR0vNHU0Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;559&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Titan IDE 能做什么？&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Titan IDE 适用于多种研发工作场景，&lt;strong&gt;免部署、低成本、开箱即用&lt;/strong&gt;，涵盖了软件开发从设计到交付的一切需求，全面提升研发效能。主要功能集中在：&lt;/span&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;多编码环境，开箱即用&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;分屏磁贴&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;效能看板&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;兼容VS Code插件，支持定制多种扩展能力&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;通过Git进行版本控制&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;1.支持多编码环境，开箱即用&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;根据&lt;/span&gt;&lt;span&gt;PYPL&lt;/span&gt;&lt;span&gt;最新数据，开发语言流行榜上 Python 牢牢占据榜首，同时流行度前 10 名的开发语言占据了 85%以上的份额。而目前市面上这些流行度很高的语言， Titan IDE 基本都能支持，用起来非常方便。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;img data-ratio=&quot;1.3895781637717122&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBrevCkxWxCzZPKlfUNIooicZtRZlia4SsNI8D9rGmfhWrekQd80PxVzhw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1612&quot; data-backw=&quot;562&quot; data-backh=&quot;781&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;排行榜引用自 PYPL&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;由于Titan IDE 是基于 Code-Sever 开发的一款云端 IDE 产品，因此保留了Visual Studio 与 Vs Code 原始的交互逻辑和交互页面，开发者无需改变个人习惯，可自如切换到 Titan IDE上。同时 Titan IDE 还内置了主流的十余种编码环境，开发者无需手动配置环境，真正做到开箱即用。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.5595533498759305&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBAhFFyuEzw0ClaLBVBxtvGtknPybFJPuIqIniaWBedtSibN4EtysBt8Rw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1612&quot; data-backw=&quot;562&quot; data-backh=&quot;315&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;图片来源于 Titan IDE官网&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;2.分屏磁贴&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;分屏磁贴功能支持用户在所有页面，打开Titan IDE的开发工作台。用户可以对照需求文档、原型设计、帮助文档、API接口等页面同时进行开发。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.5702179176755447&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBEY3icgn1g5C4VXYJ22F8DpumSJJkBzsUR1IceIbs1twNSMyRiby4nHibQ/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;2478&quot; data-backw=&quot;562&quot; data-backh=&quot;321&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;图片来源于 Titan IDE官网&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;3.效能看板&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Titan IDE 提供的效率看板功能，可以使得在概览中清晰的看到自己的开发效能。目前官方提供了使用总时长、有效使用时长、代码行数、注释行数、Commit 数等五个维度的效率统计，未来会有更多的统计维度上线。Titan IDE 还支持查看历史数据和导出的功能，以后CTO再也不能说开发人员偷懒摸鱼了。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.6029776674937966&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBjj7njUoRvH4pTyxpkZbriaTazyTlLoNJyd9lMHg20nKdWxWoqYbZmQw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1612&quot; data-backw=&quot;562&quot; data-backh=&quot;339&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;图片来源于 Titan IDE官网&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;4.兼容VS Code插件，支持定制多种扩展能力&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Titan TDE 在插件方面兼容VS Code插件，因此支持定制多种扩展能力，真正做到契合每个开发的开发习惯。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.5333333333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBACUQghoYG5rFXiaTQevn9EpxR7oqq8cbNVEyljia4kjCia3a1nsv4mmOA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot; data-backw=&quot;562&quot; data-backh=&quot;300&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;图片来源于 Titan IDE官网&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;5.通过Git进行版本控制&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Titan IDE 目前还可通过 Git 的方式直接拉取第三方的代码工程文件，使得开发者们的迁移难度大大降低。同时还贴心的提供了教程，即使是小白也能快速上手。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.1259305210918114&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmByppcBfkj4MY7YIoSQgqYRiahdbtKO1RX12WGjqy9AiavvYNbegX3Yefg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1612&quot; data-backw=&quot;562&quot; data-backh=&quot;71&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.1073345259391771&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiavOaaRORXpLFN6NoUT8ZqRiabialicrZ42nr0aT62lJsDHuavyGvSCVNf7olt6Wh37DHJyfuR0vNHU0Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;559&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Ti&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;tan IDE 个人开发体验&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;section&gt;&lt;span&gt;一位资深程序员体验后....&lt;/span&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;section&gt;&lt;span&gt;我使用了 Titan IDE 大约有一周的时间，总体来说体验比较不错，整个开发过程比较流畅。以下是使用之后个人觉得Titan IDE存在的一些优势：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;1.适用云原生应用的云上开发&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;市面上有众多琳琅满目的IDE，各有优缺，所以平时大多开发者都会在本地装至少两三个IDE插件，需要耗费大量的时间进行学习和配置，但是 Titan IDE 完美适用于云原生应用开发，节省了大量不必要的损耗时间。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;2.切换成本低&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;在IDE的榜单中，Visual Studio则牢牢占据榜首，同时 VS Code 也排在第四位。二者份额合计占到了 34%以上，同时二者的上升趋势在整个榜单中名列前茅。由此可见，目前使用 VS Code 和 Visio Studio  作为开发工具的人很多，且依旧呈现上升趋势，Titan IDE 是基于 Code-Server 开发的，使用和操作习惯和这两个浏览器一致 ，没有切换成本，切换流畅自然。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;img data-ratio=&quot;1.4795285359801489&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBEiaaiajWg5QpdzNG0usZNnO9lEANkBgwXcicCS86Sy61VDxKNXrgVlZkA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1612&quot; data-backw=&quot;562&quot; data-backh=&quot;831&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;排行榜引用自 PYPL&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;3.一些温馨小功能&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;另外值得一提的是， Titan IDE 别出心裁的在 IDE 页面的提供了两个温馨的小功能。&lt;/span&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;全屏缩放功能。可以使得 IDE 处于全屏模式，极大减少其他干扰，拥有很好的沉浸式体验。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;img data-backh=&quot;324&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.5618153364632238&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBVOmapg6OC1QdFFIK3rrkt33GhqsV7ZGx1C2UyDY3wu1ib9BWEjvFp4Q/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;5112&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;快速提交功能。免去了Code-Server 原本繁琐的提交步骤，只要两步就能将代码快速提交到代码仓库。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span/&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.5724358974358974&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyUBExfODswm5YCQ2ibOsmBY8H8QEdVNmvMZHFCXCywlslBPTK8hJYJgco2zDnSNfmgcu3QSIdskg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1560&quot; data-backw=&quot;578&quot; data-backh=&quot;331&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;这两个小功能提升了开发工作效率，使得开发幸福感大大增强。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;Titan IDE 是一款面向云，面向未来的编程。关于 Titan IDE 今天就先介绍到这里，等作者再体验一段时间后再来给大家分享新的内容。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;接下来是福利派送时间：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;目前 Titan IDE 上线了&lt;strong&gt;注册有礼&lt;/strong&gt;活动，只要在 &lt;strong&gt;2020/12/12 &lt;/strong&gt;之前注册并登录体验 Titan IDE，就能领取福利大礼包：1、创建项目数量上限翻倍，可免费创建20个项目；2、支持同时开启两个 IDE项目，操作方便自如。还在等什么，快去试试看吧，&lt;strong&gt;点击阅读原文&lt;/strong&gt;，即刻到达：&lt;strong&gt;Titan IDE 官网！&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;↙↙↙时不待人，快点阅读原文呀！&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;img data-ratio=&quot;0.0671875&quot; data-type=&quot;jpeg&quot; data-w=&quot;640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/MUAXarcSGiasByiaziaOFXuliaicQwlj5gEBECZYZWW9anFBPprXXqsdTia89TOItLPmm3Ptl9scqvNfumw7mTczsiaDg/640?wx_fmt=jpeg&quot;/&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;行云创新（CloudToGo)&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;是国内一站式开发云的首创者，为开发者提供一站式的全云端开发环境，涵盖应用从架构设计、开发、交付、运维和运营全生命周期。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;对开发、测试、运维提供统一支持；零门槛，用户不需要懂容器、K8S也能熟练使用；可定义灵活的应用交付策略，一键式交付到多云环境；以应用为中心、感知应用全方位状态，变被动响应为主动运维，实现应用状态的快速反馈。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;目前为金融、保险、制造、教育、物流、电商等多个行业提供各种整体解决方案。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;img data-backh=&quot;221&quot; data-backw=&quot;556&quot; data-before-oversubscription-url=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyq89yoja5T5VqbwgT99GjAvsPKhAszYXfeicFRib0mmbwohiceZRcNgkB5XCHBshAQibte28O14ia1eA/640?wx_fmt=png&quot; data-copyright=&quot;0&quot; data-ratio=&quot;0.3965014577259475&quot; data-s=&quot;300,640&quot; data-type=&quot;jpeg&quot; data-w=&quot;1029&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MUAXarcSGiauyq89yoja5T5VqbwgT99GjAvsPKhAszYXfeicFRib0mmbwohiceZRcNgkB5XCHBshAQibte28O14ia1eA/640?wx_fmt=jpeg&quot;/&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>46cab00436ad2a81c74c5aa6df79bc84</guid>
<title>现代化 Web 开发实践之 PWA</title>
<link>https://toutiao.io/k/ysewa46</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;RichText ztext Post-RichText&quot;&gt;&lt;h2&gt;&lt;b&gt;背景&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;PWA 即 Progressive Web App，是谷歌于 2016 年在 Google I/O 大会上提出的下一代 Web App 概念，于2017年落地的 web 技术，旨在增强 Web 体验，缩小 Web App 与 Native App 的差距并创建类似的用户体验。目前 Chrome，Safari，Firefox，Edge 浏览器都在不同程度上支持了 PWA ，国内外一些网站也已进行 PWA 实践，如Twitter，Starbucks，饿了么，新浪，其中不乏成功案例，在应用 PWA 后得到了一些可量化的收益：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;West Elm 应用 PWA 后数据显示用户使用时间增加了 15 %，收入增加了9 %。&lt;/li&gt;&lt;li&gt;印度最大的电子商务网站 Flipkart 的用户使用时间增加了三倍，互动率增加了 40 %。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;理论上来说，对于所有 Web App，只要参考 PWA 的标准对其进行改造，就可实现 PWA ，而对 App 来说，用户的体验是判断一个应用好坏的重要标准，PWA 的改造并不复杂，却可以很大程度上提升用户体验，是投入/产出比很高的一项技术，且 PWA 的相关功能和浏览器对 PWA 的支持程度也在不断地增加，未来还有很大的潜力。&lt;/p&gt;&lt;p&gt;但目前由于兼容性等问题尚未大面积地应用到实际中，且网上有关 PWA 实践的文章较为零散，我们在 Sharee 项目的移动端改造 PWA ，在本文中介绍了 PWA 的主要功能及实现，并记录了实现过程中遇到的一些问题。希望通过这篇文章能对大家了解这门技术和实践过程中遇到的问题有一定的帮助。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;选型&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们都知道，Web App 在用户体验上远不如 Native App，因为 Web App 强烈依赖网络，存在弱网环境下加载速度慢，离线情况下无法访问的问题，而且 Web App 无法脱离浏览器 UI ，用户可视区域被压缩，也无法安装在手机桌面。Native App 虽然有诸多优点，也存在很多问题：开发成本高，需要维护多个版本的更新升级，且内容封闭，无法进行 SEO 检索，不利于 App 推广，用户使用前需要下载安装包。&lt;/p&gt;&lt;p&gt;作为 Web App 的开发者，我们更加关心如何将 Native App 的特性添加到 Web App 上，PWA 应运而生。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;App类型&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;市面上现存的 App 类型可以分为以下四种，我们比较了它们在不同指标上的表现，可以看到 PWA 本质上还是一个 Web App ，但在表现上比 Web App 更加接近 Native App 。虽然我们在此与 Native App 进行了比较，但是 PWA 的目的并不是为了取代 Native App ，也不是为了与 Native App 一较高下，而是对 Web App 的升级，是为了带给用户更好的用户体验。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-e97d81091f3884b9e303414115c48d45_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1560&quot; data-rawheight=&quot;1140&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-e97d81091f3884b9e303414115c48d45_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1560&quot; data-rawheight=&quot;1140&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-e97d81091f3884b9e303414115c48d45_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-e97d81091f3884b9e303414115c48d45_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;PWA(Progressive Web App)&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;目前我们已经知道 PWA 用于提升用户体验，下面给出 PWA 的官方定义 。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;定义&lt;/b&gt;&lt;/h3&gt;&lt;blockquote&gt;Progressive Web Apps use modern web capabilities to deliver an app-like user experience. They evolve from pages in browser tabs to immersive, top-level apps, maintaining the web&#x27;s low friction at every moment.&lt;/blockquote&gt;&lt;p&gt;从定义中我们可以得知，PWA 不是特指某一项技术，而是&lt;b&gt;应用了多项技术的 Web App&lt;/b&gt; ，本质上还是 Web App 。PWA 借助一些新技术将 Web App 和 Native App 各自的优势融合在一起，让用户在使用 Web App 时感觉在使用 Native App 。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;特点&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;PWA 具有快速、可靠、粘性的特点。快速即快速响应，通过独立的线程进行资源缓存，提高页面的加载时间；可靠指在不稳当的网络环境下， App 也能瞬间加载并展现内容，在离线环境下也提供用户有效反馈；粘性则是通过沉浸式的用户界面、桌面图标、消息推送等手段来增强用户的粘度。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;标准支持度&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;根据 &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//caniuse.com/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Can I use&lt;/a&gt;&lt;/b&gt; 的统计（包括 PC 和 Mobile），实现 PWA 所涉及到的各项技术的兼容性如下，最重要的 APP Manifest 和 Service Worker 支持情况良好，且在主流浏览器和操作系统中都得到了支持：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;App Manifest 的支持度达到 57.43%&lt;/li&gt;&lt;li&gt;Service Worker 的支持度达到 72.82%&lt;/li&gt;&lt;li&gt;Notifications API 的支持度达到 43.3%&lt;/li&gt;&lt;li&gt;Push API 的支持度达到 72.39%&lt;/li&gt;&lt;li&gt;Background Sync 暂未统计到，Chrome 49 以上均支持&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;b&gt;目的&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在 Sharee 移动端实现 PWA ，预期目标为优化用户体验和增加用户的留存率和访问量。&lt;/p&gt;&lt;p&gt;对于用户体验的优化主要包含以下两个方面：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;离线环境下增加兜底页面：捕捉到用户请求失败时，返回兜底页面来避免浏览器的网络崩溃页面。&lt;/li&gt;&lt;li&gt;提高冷启动时的资源加载速度：预缓存静态资源并保存在 Local Storage 中，在冷启动时通过 Service Worker 响应，避免 304 。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;用户的留存率和访问量的增加通过以下两个方面实现：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;对于网页端用户增加常驻入口，减小网站入口的深度。&lt;/li&gt;&lt;li&gt;推送消息：推送消息也是吸引用户访问的一种方式，但推送消息需要运营维护，同时 Sharee 目前消息推送主体还是 Native App ，该功能并未落地。&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;b&gt;指标&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;技术落地都需要数据指标量化效果，我们统计以下数据用于长期观测：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;PWA install （安装弹窗）的点击、安装、取消的渗透率&lt;/li&gt;&lt;li&gt;PWA 入口（桌面图标）的访问量占比&lt;/li&gt;&lt;li&gt;静态资源加载时间&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;b&gt;方案&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;本节是对 PWA 实现细节的详细介绍。首先介绍了 PWA 依托的主要技术 App Manifest 、Service Worker 和 Push API 所产生的收益及其具体实现，然后介绍了 Google 推荐的 PWA 最佳实践 Workbox ，最后简要介绍了如何测试 PWA 。整体结构如图所示。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a5b441802074d731a644fa1d558b02f7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1212&quot; data-rawheight=&quot;530&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic4.zhimg.com/v2-a5b441802074d731a644fa1d558b02f7_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1212&quot; data-rawheight=&quot;530&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic4.zhimg.com/v2-a5b441802074d731a644fa1d558b02f7_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-a5b441802074d731a644fa1d558b02f7_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;App Manifest&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;App Manifest 是一个 JSON 格式的文件，用于配置网站应用的相关信息。通过该文件，我们可以配置桌面留存图标、安装弹窗和启动动画的相关信息。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;屏幕留存图标&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;我们可以在配置文件中配置桌面留存图标的 icon 和名称，当用户将网站保存在桌面后，会自动应用配置信息。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;收益&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;添加到主屏幕的好处有很多，主要体现在用户粘性和用户体验上。桌面图标减少了网站的入口深度，用户可以从主屏幕直达站点，而无需从浏览器首页一层一层进入。添加到主屏幕的图标具有接近 Native App 的体验，如下图所示，左二为 Native App ，左三为 PWA 其他均为 Native App ：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-0f637d1776ce9d66396c2a0a78e50f96_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1242&quot; data-rawheight=&quot;352&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-0f637d1776ce9d66396c2a0a78e50f96_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1242&quot; data-rawheight=&quot;352&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-0f637d1776ce9d66396c2a0a78e50f96_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-0f637d1776ce9d66396c2a0a78e50f96_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;从桌面图标进入网站时具有启动页面和脱离浏览器 UI 的全屏体验，添加到主屏幕的网站会被纳入应用抽屉中。添加屏幕图标无需下载，类似桌面快捷键，减少了用户安装 App 的成本。&lt;/p&gt;&lt;p&gt;但 PWA 的屏幕留存图标与快捷方式不同。&lt;/p&gt;&lt;p&gt;&lt;b&gt;与快捷方式的区别：&lt;/b&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;屏幕留存图标拥有独立的图标和名称。&lt;/li&gt;&lt;li&gt;点击图标打开网站，资源加载的过程并不会像普通网页那样出现白屏，取而代之的是一个展示应用图标和名称的启动页面，资源加载结束时加载页消失。&lt;/li&gt;&lt;li&gt;当网页最终展现时，地址栏、工具栏等浏览器元素将不会展现出来，网页内容占满屏幕，看起来与 Native App 一样。&lt;/li&gt;&lt;/ol&gt;&lt;h3&gt;&lt;b&gt;实现&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;编写配置文件后在head中引入， &lt;code&gt;&amp;lt;link rel=&quot;manifest&quot; href=&quot;/manifest.json&quot;&amp;gt;&lt;/code&gt;。Mainfest 文件通过一些文本描述，具体定义显示到桌面上的内容，并询问用户是否添加，添加之后可在 Chrome 浏览器的 Application - Manifest 来查看你的 Mainfest 文件&lt;b&gt;是否生效&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;配置项介绍：&lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//web.dev/add-manifest/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;web.dev/add-manifest/&lt;/span&gt;&lt;span class=&quot;invisible&quot;/&gt;&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;配置文件示例：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;// manifest.json
{
  &quot;name&quot;: &quot;Sharee PWA&quot;,  // 用于安装横幅、启动画面显示
  &quot;short_name&quot;: &quot;Sharee PWA&quot;,  // 用于主屏幕显示
  // 浏览器会根据有效图标的 sizes 字段进行选择。首先寻找与显示密度相匹配并且尺寸调整到 48dp 屏幕密度的图标
  &quot;icons&quot;: [
    {
      &quot;src&quot;: &quot;../logo/180.png&quot;,
      &quot;sizes&quot;: &quot;180x180&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;../logo/192.png&quot;,
      &quot;sizes&quot;: &quot;192x192&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;../logo/512.png&quot;,
      &quot;sizes&quot;: &quot;512x512&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    }
  ],
  &quot;start_url&quot;: &quot;/?from=homescreen&quot;,  // 启动网址，相对于manifest.json所在路径
  &quot;scrope&quot;: &quot;/&quot;, // sw的作用范围只能在此路径或子路径
  &quot;display&quot;: &quot;standalone&quot;,
  &quot;theme_color&quot;: &quot;#FFF&quot;,
  &quot;background_color&quot;: &quot;#FFF&quot;  // 启动时的背景色
}

// iOS不支持manifest配置，通过meta标签添加到head中
&amp;lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&amp;gt;
&amp;lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;#fff&quot;&amp;gt;
&amp;lt;meta name=&quot;apple-mobile-web-app-title&quot; content=&quot;Sharee PWA&quot;&amp;gt;
&amp;lt;link rel=&quot;apple-touch-icon&quot; sizes=&quot;180x180&quot; href=&quot;../logo/180.jpg&quot;&amp;gt;
&amp;lt;meta name=&quot;msapplication-TileColor&quot; content=&quot;#fff&quot;&amp;gt;
&amp;lt;meta name=&quot;theme-color&quot; content=&quot;#fff&quot; /&amp;gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;安装弹窗&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;网站添加 Manifest 配置文件并满足一定要求后，浏览器会根据用户的访问频率在合适的时间弹出弹窗询问用户是否需要添加屏幕图标，弹窗如下图所示。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-9fddbe9f6cdd79b2fcd71dcbe30f2b75_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;2340&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-9fddbe9f6cdd79b2fcd71dcbe30f2b75_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;2340&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-9fddbe9f6cdd79b2fcd71dcbe30f2b75_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-9fddbe9f6cdd79b2fcd71dcbe30f2b75_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h3&gt;&lt;b&gt;收益&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;安装弹窗主要用于引导用户留存屏幕图标，提高屏幕图标的添加率。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;实现&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;浏览器展现应用安装提示需满足以下条件「&lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//web.dev/install-criteria/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;web.dev/install-criteri&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;a/&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;/&gt;&lt;/a&gt;&lt;/b&gt;」：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;尚未安装&lt;/li&gt;&lt;li&gt;通过 HTTPS 访问（调试模式下允许 &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//127.0.0.1/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;http://127.0.0.1&lt;/a&gt;&lt;/b&gt; 或 &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//localhost/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;http://localhost&lt;/a&gt;&lt;/b&gt; 访问）&lt;/li&gt;&lt;li&gt;manifest.json 文件包含以下配置：&lt;br/&gt;&lt;/li&gt;&lt;ol&gt;&lt;li&gt;name / short_name，优先采用 short_name&lt;/li&gt;&lt;li&gt;start_url&lt;/li&gt;&lt;li&gt;icons&lt;/li&gt;&lt;li&gt;display 为 &lt;code&gt;standalone&lt;/code&gt; 或 &lt;code&gt;fullscreen&lt;/code&gt; 或 &lt;code&gt;minimal-ui&lt;/code&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;站点必须注册 Service Worker&lt;br/&gt;&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Chrome 要求 Service Worker 且必须监听 &lt;code&gt;fetch&lt;/code&gt; 事件&lt;/li&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;用户访问频率足够高（浏览器未明确说明频率）&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;开发者无法主动触发安装提示的弹出，但可监听 &lt;code&gt;beforeinstallprompt&lt;/code&gt; 事件拦截弹窗事件并保存，然后提供按钮触发：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;let appPromptEvent = null;
const installBtn = document.getElementById(&#x27;install-btn&#x27;);
self.addEventListener(&#x27;beforeinstallprompt&#x27;, function(e) {
  e.preventDefault();
  // 保存弹窗事件
  appPromptEvent = event;
  installBtn.classList.add(&#x27;visible&#x27;);
  return false;
});
window.addEventListener(&#x27;appinstalled&#x27;, function () {
  console.log(&#x27;应用已安装&#x27;);
  installBtn.classList.remove(&#x27;visible&#x27;);
});
installBtn.addEventListener(&#x27;click&#x27;, function () {
    if (appPromptEvent !== null) {
      console.log(appPromptEvent)
      // 触发弹窗
      appPromptEvent.prompt();
      appPromptEvent.userChoice.then(function (result) {
        if (result.outcome === &#x27;accepted&#x27;) {
          console.log(&#x27;同意安装应用&#x27;);
        } else {
          console.log(&#x27;不同意安装应用&#x27;);
        }
        appPromptEvent = null;
      });
    }
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;beforeinstallprompt&lt;/code&gt;的兼容性如下，大多数浏览器不支持弹窗。其实在支持弹窗的浏览器中，它的触发策略也是很低频的，需要用户在短时间内与网站进行高频互动才会触发，且在用户选择取消安装后很长一段时间内都不会再次触发，浏览器需要保证用户的使用体验，没有人会喜欢频繁弹出的广告影响自己浏览：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-132c31080cd43dc46ebbc2ab9dda7853_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2510&quot; data-rawheight=&quot;560&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic4.zhimg.com/v2-132c31080cd43dc46ebbc2ab9dda7853_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2510&quot; data-rawheight=&quot;560&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic4.zhimg.com/v2-132c31080cd43dc46ebbc2ab9dda7853_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-132c31080cd43dc46ebbc2ab9dda7853_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b9def2870b8073062f683727cfab6026_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2032&quot; data-rawheight=&quot;612&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-b9def2870b8073062f683727cfab6026_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2032&quot; data-rawheight=&quot;612&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-b9def2870b8073062f683727cfab6026_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-b9def2870b8073062f683727cfab6026_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h3&gt;&lt;b&gt;启动动画&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;从屏幕图标进入时，根据 Manifest 文件中的配置项会自动生成启动动画，用来过渡资源拉取前的白屏时间，改善用户体验。启动界面如下图所示：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-075e03091b23ccf30715655ff1c60777_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1242&quot; data-rawheight=&quot;2208&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic4.zhimg.com/v2-075e03091b23ccf30715655ff1c60777_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1242&quot; data-rawheight=&quot;2208&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic4.zhimg.com/v2-075e03091b23ccf30715655ff1c60777_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-075e03091b23ccf30715655ff1c60777_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h3&gt;&lt;b&gt;收益&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;启动动画可以优化交互，利用首屏时间展示有效内容，加深用户对网站的记忆，还可以缓和等待的时间，在体验上类 Native App 。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;实现&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;启动动画根据 manifest.json 中的配置项自动生成，配置项与动画界面的对应关系如下图所示：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-2c3108590b2e72a8874fd8798097a414_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;840&quot; data-rawheight=&quot;620&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-2c3108590b2e72a8874fd8798097a414_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;840&quot; data-rawheight=&quot;620&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-2c3108590b2e72a8874fd8798097a414_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-2c3108590b2e72a8874fd8798097a414_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;Service Worker&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;Service Worker 是一种独立于浏览器主线程且可以在离线环境下运行的工作线程，与当前的浏览器主线程是完全隔离的，并有自己独立的执行上下文。 HTML5 提供的一个 Service Worker API，能够进行 Service Worker 线程的注册、注销等工作。且 Service Worker 一旦被安装成功就永远存在，除非线程被程序主动解除，而且 Service Worker 在访问页面的时候可以直接被激活，如果关闭浏览器或者浏览器标签的时候会自动睡眠，以减少资源损耗。利用 Service Worker 的这些特性我们可以预缓存 offline 页面和静态资源。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;离线 offline 页面&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;在用户断网情况下，通常会出现浏览器自带的网络崩溃页面，给人一种 App 可访问性差的印象。通过 Service Worker 我们可以在用户第一次访问网站时就预缓存一个 offline 的静态页面，在监听到请求失败时返回该页面，来改善用户的体验。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-9205fb423fd7dc79fe8c6335c89dbf55_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1242&quot; data-rawheight=&quot;2208&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-9205fb423fd7dc79fe8c6335c89dbf55_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1242&quot; data-rawheight=&quot;2208&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-9205fb423fd7dc79fe8c6335c89dbf55_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-9205fb423fd7dc79fe8c6335c89dbf55_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h3&gt;&lt;b&gt;收益&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;离线页面可以在无网络时改善用户的体验，对于 app shell 结构的网站还可以缓存 app shell 。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;实现&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;Service Worker 是浏览器在后台独立于网页运行的脚本，浏览器和服务器之间的代理服务器。浏览器的支持情况如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-77aa85f20fd536ea431219f19c498dc9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2496&quot; data-rawheight=&quot;936&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-77aa85f20fd536ea431219f19c498dc9_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2496&quot; data-rawheight=&quot;936&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-77aa85f20fd536ea431219f19c498dc9_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-77aa85f20fd536ea431219f19c498dc9_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Service Worker的生命周期如图所示，我们可以在对应生命周期编写不同的代码，自动触发执行：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-626b16475d628cc39c8b23bb256b9e14_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;777&quot; data-rawheight=&quot;286&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-626b16475d628cc39c8b23bb256b9e14_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;777&quot; data-rawheight=&quot;286&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-626b16475d628cc39c8b23bb256b9e14_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-626b16475d628cc39c8b23bb256b9e14_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h3&gt;&lt;b&gt;install&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;在安装时通常添加预缓存文件，我们在此时预缓存 offline 页面。&lt;code&gt;caches&lt;/code&gt; 是一个特殊的 CacheStorage 对象，它能在 Service Worker 指定的范围内提供数据存储的能力，这里，我们使用给定的名字开启了一个缓存，并且将我们的应用所需要缓存的文件全部添加进去。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;const CACHE_NAME = &#x27;sharee-v1&#x27;;
const FILES_TO_CACHE = [&#x27;offline.html&#x27;];

// Install SW
self.addEventListener(&#x27;install&#x27;, e =&amp;gt; {
  console.log(&#x27;[Service Worker] Install&#x27;);
  // 添加预缓存文件
  e.waitUntil(
    caches.open(CACHE_NAME).then(function(cache) {
      self.skipWaiting();  // 如果检测到新的service worker文件，就会立即替换掉旧的
      return cache.addAll(FILES_TO_CACHE);
    }),
  );
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;fetch&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;注册成功后监听网站的所有请求，拦截特定请求由 Service Worker 相应。&lt;code&gt;respondWith&lt;/code&gt; 方法将会接管响应控制，它会作为服务器和应用之间的代理服务。它允许我们对每一个请求作出我们想要的任何响应。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;// 1.缓存所有访问过的文件
self.addEventListener(&#x27;fetch&#x27;, function(e) {
    e.respondWith(
        // 先从缓存中查找
        caches.match(e.request).then(function(r) {
          console.log(`[Service Worker] Fetching resource: ${e.request.url}`);
          return (
            r ||
            // 缓存中没有则从网络请求数据并缓存
            fetch(e.request).then(function(response) {
              return caches.open(CACHE_NAME).then(function(cache) {
                console.log(
                  `[Service Worker] Caching new resource: ${e.request.url}`,
                );
                cache.put(e.request, response.clone());
                return response;
              });
            })
          );
        }),
    );
}

// 2.不缓存，离线直接返回offline
self.addEventListener(&#x27;fetch&#x27;, e =&amp;gt; {
    e.respondWith(
      caches.match(e.request, { mode: &#x27;cors&#x27; }).then(
        () =&amp;gt; {
          return fetch(e.request).catch(() =&amp;gt; caches.match(&#x27;offline.html&#x27;));
        },
      ),
    );
});

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;activate&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;activate 时通常用来删除那些我们已经不需要的文件或者做一些清理工作。当我们把版本号更新到 v2，Service Worker 会将我们所有的文件（包括那些新的文件）添加到一个新的缓存中。这个时候一个新的 Service Worker 会在后台被安装，而旧的 Service Worker 仍然会正确的运行，直到没有任何页面使用到它为止，这时候新的 Service Worker 将会被激活，然后接管所有的页面。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;self.addEventListener(&#x27;activate&#x27;, function(e) {
  e.waitUntil(
    // 清除旧缓存
    caches.keys().then(function(keyList) {
      return Promise.all(
        keyList.map(function(key) {
          if (CACHE_NAME.indexOf(key) === -1) {
            return caches.delete(key);
          }
        }),
      );
    }),
  );
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;资源缓存&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;资源缓存也是利用 Service Worker ，在 fetch 阶段将特定响应缓存下来，然后在下次监听到相同请求时，直接返回缓存，提高响应时间并减少服务器压力。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;收益&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;我们通过请求路径的正则匹配缓存了更新较少的所有静态资源，在用户第一次访问网站时进行缓存，之后都从缓存中更新，来提高冷启动的响应时间。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;实现&lt;/b&gt;&lt;/h3&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;const cacheList = [
  &#x27;/static/css/&#x27;,
  &#x27;/static/js&#x27;
];

self.addEventListener(&#x27;fetch&#x27;, e =&amp;gt; {
  const cached = cacheList.find(c =&amp;gt; {
    return e.request.url.indexOf(c) !== -1;
  });
  if (cached) {
    e.respondWith(
      caches.match(e.request).then(
        function(r) {
          return (
            r ||
            fetch(e.request).then(function(response) {
              return caches.open(CACHE_NAME).then(function(cache) {
                if (cached) {
                  cache.put(e.request.url, response.clone());
                }
                return response;
              });
            })
          );
        },
      ),
    );
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;Push API &amp;amp; Notification API&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;PWA 还提供了 API 在网站上向用户推送消息，通常有 Push API 和 Notification API 。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;推送通知&lt;/b&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b&gt;收益&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;PWA 提供的消息推送有很多优点，首先可以吸引用户访问；而且消息的推送只要浏览器在运行即可，无需用户打开网页；消息推送需要获取用户授权，但对于同一个域名下的网页，只需要获取一次授权。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-aae0617778a9af83fcf8c6fa8c7149b5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;842&quot; data-rawheight=&quot;296&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-aae0617778a9af83fcf8c6fa8c7149b5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;842&quot; data-rawheight=&quot;296&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-aae0617778a9af83fcf8c6fa8c7149b5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-aae0617778a9af83fcf8c6fa8c7149b5_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h3&gt;&lt;b&gt;实现&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;推送通知使用两个API进行组装： &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/API/Notifications_API&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Notifications API&lt;/a&gt;&lt;/b&gt; 和 &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/API/Push_API&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Push API&lt;/a&gt;&lt;/b&gt; 。Notifications API 使应用程序可以向用户显示系统通知。Notification 和 Push API 构建在 &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Service Worker API&lt;/a&gt;&lt;/b&gt; 之上，该 API 在后台响应推送消息事件并将它们中继到应用程序。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;Notification API&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;Notification API 是 HTML5 新增的桌面通知 API，用于向用户显示通知信息。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;self.registration.showNotification(&#x27;PWA-Book-Demo 测试 actions&#x27;, {
  body: &#x27;点赞按钮可点击&#x27;,
  actions: [
    {
      action: &#x27;like&#x27;,
      title: &#x27;点赞&#x27;,
      icon: &#x27;/assets/images/like-icon.png&#x27;,
    },
  ],
});
// 监听通知点击事件
self.addEventListener(&#x27;notificationclick&#x27;, function(e) {
  // 关闭通知
  e.notification.close();

  if (e.action === &#x27;like&#x27;) {
    // 点击了“点赞”按钮
    console.log(&#x27;点击了点赞按钮&#x27;);
  } else {
    // 点击了对话框的其他部分
    console.log(&#x27;点击了对话框&#x27;);
  }
});

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;Push API&lt;/b&gt;&lt;/h3&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;// 监听 push 事件
self.addEventListener(&#x27;push&#x27;, function (e) {
  if (!e.data) {
    return
  }
  // 解析获取推送消息
  let payload = e.data.text()
  // 根据推送消息生成桌面通知并展现出来
  let promise = self.registration.showNotification(payload.title, {
    body: payload.body,
    icon: payload.icon,
    data: {
      url: payload.url
    }
  })
  e.waitUntil(promise)
})
// 监听通知点击事件
self.addEventListener(&#x27;notificationclick&#x27;, function (e) {
  // 关闭窗口
  e.notification.close()
  // 打开网页
  e.waitUntil(self.clients.openWindow(e.data.url))
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这两个 API 的浏览器兼容性如下：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-bf10e3f645c93c480ac3ed5f4a412c8f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2520&quot; data-rawheight=&quot;700&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic4.zhimg.com/v2-bf10e3f645c93c480ac3ed5f4a412c8f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2520&quot; data-rawheight=&quot;700&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic4.zhimg.com/v2-bf10e3f645c93c480ac3ed5f4a412c8f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-bf10e3f645c93c480ac3ed5f4a412c8f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-787a7fefee5c795a38ca79ac853563bc_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2522&quot; data-rawheight=&quot;1092&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-787a7fefee5c795a38ca79ac853563bc_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2522&quot; data-rawheight=&quot;1092&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-787a7fefee5c795a38ca79ac853563bc_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-787a7fefee5c795a38ca79ac853563bc_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;Workbox 最佳实践&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;Workbox 是 Google Chrome 团队推出的一套 &lt;b&gt;PWA 的解决方案&lt;/b&gt;，这套解决方案当中包含了核心库和构建工具，我们可以利用 Workbox 实现 Service Worker 的快速开发。定义如下：&lt;/p&gt;&lt;blockquote&gt;Workbox is a library that bakes in a set of best practices and removes the boilerplate every developer writes when working with service workers.&lt;/blockquote&gt;&lt;p&gt;Workbox 的功能非常完善，插件机制也能够很好的满足各种业务场景需求，如果自己手动维护一个应用的原生的 Service Worker 文件工作量非常巨大，而且有很多潜在的问题不容易被发现，&lt;b&gt;Workbox 很好的规避了很多 Service Worker 潜在的问题，也大大减小了 Service Worker 的维护成本&lt;/b&gt;，所以建议大家在开始考虑使用 Service Worker 的时候优先考虑 Workbox。下面介绍一下 Workbox 的使用。&lt;/p&gt;&lt;h3&gt;&lt;b&gt;引入Workbox&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;在 Service Worker 中引入 Workbox，引入后获得全局对象 &lt;code&gt;workbox&lt;/code&gt;，一旦 Workbox 加载完成，我们便可以使用挂载到 &lt;code&gt;workbox&lt;/code&gt; 对象上的各种功能了：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;importScripts(&#x27;https://storage.googleapis.com/workbox-cdn/releases/4.2.0/workbox-sw.js&#x27;)

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;预缓存&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;PWA 中预缓存的文件只要按照如下所示的接口给出文件路径即可，在第一次访问网站时便会预缓存相应文件：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;// 预缓存，同ws中的cacheName
workbox.core.setCacheNameDetails({
  prefix: &#x27;sharee&#x27;,
  suffix: &#x27;v1&#x27;,
  precache: &#x27;precache&#x27;,
  runtime: &#x27;runtime&#x27;
})

// 动态缓存
workbox.routing.precacheAndRoute([
  {
    url: &#x27;/index.html&#x27;,
    revision: &#x27;asdf&#x27;
  },
  &#x27;/index.abc.js&#x27;,
  &#x27;/index.bcd.css&#x27;
])

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;路由匹配 &amp;amp; 请求响应&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;Workbox 对资源请求匹配和对应的缓存策略执行进行了统一管理，采用路由注册的组织形式，以此来规范化动态缓存，使用下面这个函数：&lt;/p&gt;&lt;p&gt;&lt;code&gt;workbox.routing.registerRoute(match, handlerCb)&lt;/code&gt;&lt;/p&gt;&lt;h3&gt;&lt;b&gt;match：路由匹配规则&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;上述函数中的&lt;code&gt;match&lt;/code&gt;指路由匹配规则，有三种匹配方式。&lt;/p&gt;&lt;ol&gt;&lt;li&gt;对 URL 进行字符串匹配，绝对路径/相对路径&lt;/li&gt;&lt;/ol&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;workbox.routing.registerRoute(&#x27;http://127.0.0.1:8080/index.css&#x27;, handlerCb)
workbox.routing.registerRoute(&#x27;/index.css&#x27;, handlerCb)  // 以当前url为基准
workbox.routing.registerRoute(&#x27;./index.css&#x27;, handlerCb)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;&lt;li&gt;正则匹配&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;code&gt;workbox.routing.registerRoute(``/\/index\.css$/``, handlerCb)&lt;/code&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;自定义匹配方法&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;该自定义方法是一个同步执行函数，在表示资源请求匹配成功时返回一个真值。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;const match = ({url, event}) =&amp;gt; {
  return url.pathname === &#x27;/index.html&#x27;;
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;handlerCb：资源请求处理方法&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;对匹配到的资源请求进行处理的方法，开发者可以在这里决定如何响应请求，无论是从网络、从本地缓存还是在 Service Worker 中直接生成都是可以的。该方法是异步方法并返回一个 Promise，要求Promise 解析的结果必须是一个 Response 对象。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;// url：event.request.url 经 URL 类实例化的对象；
// event：fetch 事件回调参数；
// params：自定义路由匹配方法所返回的值。
const handlerCb = ({url, event, params}) =&amp;gt; {
  return Promise.resolve(new Response(&#x27;Hello World!&#x27;));
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;缓存策略&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;拦截请求后我们可能会缓存响应，通常我们需要自己来编写相应的策略， Workbox 提供了常用的几种策略可以直接使用。 &lt;code&gt;workbox.strategies&lt;/code&gt; 对象提供了一系列常用的动态缓存策略来实现对资源请求的处理，有以下五种：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;NetworkFirst：网络优先&lt;/li&gt;&lt;li&gt;CacheFirst：缓存优先&lt;/li&gt;&lt;li&gt;NetworkOnly：仅使用正常的网络请求&lt;/li&gt;&lt;li&gt;CacheOnly：仅使用缓存中的资源&lt;/li&gt;&lt;li&gt;StaleWhileRevalidate：从缓存中读取资源的同时发送网络请求更新本地缓存&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;以 &lt;code&gt;CacheFirst&lt;/code&gt; 为例，使用方法如下：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;workbox.routing.registerRoute(
  /\.(jpe?g|png)/,
  new workbox.strategies.CacheFirst({
    cacheName: &#x27;image-runtime-cache&#x27;,
    plugins: [  // 通过插件来强化缓存策略
      new workbox.expiration.Plugin({
        maxAgeSeconds: 7 * 24 * 60 * 60,  // 对图片资源缓存1星期
        maxEntries: 10  // 匹配该策略的图片最多缓存10张
      })
    ],
    fetchOptions: {  // 跨域请求的资源
      mode: &#x27;cors&#x27;
    }
  })
)

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;插件&lt;/b&gt;&lt;/h3&gt;&lt;p&gt;Workbox 还提供了一些插件在 Workbox API 中使用，比如缓存过期时间「&lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-expiration.ExpirationPlugin&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;developers.google.com/w&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;eb/tools/workbox/reference-docs/latest/module-workbox-expiration.ExpirationPlugin&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;/&gt;&lt;/a&gt;&lt;/b&gt;」：&lt;/p&gt;&lt;p&gt;每当&lt;b&gt;使用或更新缓存的请求时&lt;/b&gt;，此插件都会查看使用的缓存并删除所有旧的或多余的请求。&lt;/p&gt;&lt;p&gt;使用时&lt;code&gt;maxAgeSeconds&lt;/code&gt;，请求可以在到期后使用一次，因为直到使用了缓存的请求后才进行到期清理。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;workbox.routing.registerRoute(
  new RegExp(&#x27;.*/static/.*&#x27;),
  new workbox.strategies.StaleWhileRevalidate({
    cacheName: CACHE_NAME,
    plugins: [
      new workbox.expiration.ExpirationPlugin({
        maxAgeSeconds: 7 * 24 * 60 * 60,
      }),
    ],
  }),
);

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;测试 PWA&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;通常我们使用 Chrome Lighthouse 来测试网站的 PWA 实现情况，在 Chrome 浏览器的 Audits 中选择 Progressive Web App ，运行测试，可生成测试报告。下图中我们提供了 Sharee 的 PWA 测试报告，它会从多个方面来进行评估。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-ebb81fd1e3fac56804cb70b622f35116_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1582&quot; data-rawheight=&quot;600&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-ebb81fd1e3fac56804cb70b622f35116_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1582&quot; data-rawheight=&quot;600&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-ebb81fd1e3fac56804cb70b622f35116_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-ebb81fd1e3fac56804cb70b622f35116_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-fac88af49c4a89922fdbd55b152a5cb1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2876&quot; data-rawheight=&quot;1520&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-fac88af49c4a89922fdbd55b152a5cb1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2876&quot; data-rawheight=&quot;1520&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-fac88af49c4a89922fdbd55b152a5cb1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-fac88af49c4a89922fdbd55b152a5cb1_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;线上环境遇到的问题&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们在上线后，遇到了一些测试环境中没有的问题，我们对这些问题及其解决方案进行了记录，以供大家在开发过程中进行参考。&lt;/p&gt;&lt;ol&gt;&lt;li&gt;缓存资源失败&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;先考虑请求拦截阶段，是否是由于跨域请求导致。&lt;/p&gt;&lt;p&gt;Workbox 要求与同一服务器的 regex 相匹配，如果是同源的请求，只要请求的 URL 与正则表达式匹配，该正则表达式就会匹配。如果是跨域请求，正则表达式 &lt;b&gt;必须与 URL 的开头匹配&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;eg. 如果想匹配 &lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//abc.def.com/aaa/bbb/static/css/xxxxx.chunk.css&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;abc.def.com/aaa/bbb/sta&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;tic/css/xxxxx.chunk.css&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;/&gt;&lt;/a&gt;&lt;/i&gt; 使用正则表达式&lt;code&gt;new RegExp(&#x27;https://abc\\.def\\.com.*/static/(css|js)/.*&#x27;)&lt;/code&gt;。&lt;/p&gt;&lt;p&gt;再考虑请求拦截成功后的缓存阶段，是否是由于缓存策略导致。CacheFirst 无法缓存不透明的响应。不透明响应类型为&lt;code&gt;Response-Type: opaque&lt;/code&gt;，为了避免跨域信息泄漏，在计算储存空间时，不透明响应的大小会被添加大量填充，填充的大小因浏览器而异，对于 Chrome 来说，&lt;b&gt;缓存单个不透明响应将至少占用约 7MB 空间&lt;/b&gt;。&lt;/p&gt;&lt;ol&gt;&lt;li&gt;SecurityError ，详细报错信息如下&lt;/li&gt;&lt;/ol&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;SecurityError: Failed to execute &#x27;toDataURL&#x27; on &#x27;HTMLCanvasElement&#x27;: Tainted canvases may not be exported：b.setAttribute(&#x27;href&#x27;, e.canvas.toDataURL());
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;函数&lt;code&gt;HTMLCanvasElement.toDataURL()&lt;/code&gt;会将画布转为 png 图像，返回 base64 格式数据 URL。如果你的&lt;b&gt;图片 URL 和页面不在同一域下&lt;/b&gt;，在调用 &lt;code&gt;toDataURL()&lt;/code&gt;函数的时候就会报安全性错误。没有 CORS 授权虽然可以在 canvas 中使用图像, 但这样做就会&lt;b&gt;污染画布&lt;/b&gt;。只要 canvas 被污染, 就不能再从画布中提取数据, 也就不能再调用 &lt;code&gt;toDataURL()&lt;/code&gt; 方法, 否则会&lt;b&gt;抛出 security error&lt;/b&gt; 。这实际上是为了保护用户的个人信息,避免未经许可就从远程 Web 站点加载用户的图像信息,造成隐私泄漏。&lt;/p&gt;&lt;p&gt;对于这个问题，首先确认服务器返回的图片属性&lt;code&gt;access-control-allow-headers: *&lt;/code&gt;，然后在配置文件中设置图片属性&lt;code&gt;image.setAttribute(&#x27;crossOrigin&#x27;, &#x27;anonymous&#x27;);&lt;/code&gt;，最后更新线上 pwacompat.min.js 文件，由于 pwacompat.min.js 文件预缓存且存在过期时间，为保证所有用户更新文件，需更新文件名称和缓存版本。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;加入我们&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们是字节跳动国际化团队，主要负责字节跳动海外产品的研发。团队有丰富的海外产品的研发经验，拥有支撑大规模用户量的技术架构。我们的技术栈覆盖面极广，从端内H5，到端外Web、Wap站，相对于常规前端业务而言有更丰富的业务落地场景：社区、游戏、直播、活动、创作等等。技术上有自己独立维护的基础架构，玩转前端基础工程，落地现代化前端开发最佳实践，更有视频、图像、富文本等底层内核应用，更有PWA、SSR、前端微服务、serverless、边缘计算等前瞻性技术落地。技术成长的选择范围非常广泛，并且有很大成长空间。&lt;/p&gt;&lt;p&gt;同时，团队在全球多地建有研发团队，包容多元文化，尽享跨国研发团队合作体验。如果你加入我们，你将有机会与来自不同国家的工程师交流技术经验，更有机会到不同的地方体验不同的文化与生活。&lt;/p&gt;&lt;p&gt;投递简历联系： &lt;b&gt;tech@bytedance.com&lt;/b&gt; ；邮件标题： &lt;b&gt;姓名 - 工作年限 - 前端国际化&lt;/b&gt; 。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;相关链接&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;标准支持度查询&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//caniuse.com/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot;LinkCard LinkCard--noImage&quot;&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;Can I use... Support tables for HTML5, CSS3, etc&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;caniuse.com&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;App Manifest 配置项&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//web.dev/add-manifest/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-b102fd0611d45dc1b2430c9b2cd07bfa_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;Add a web app manifest&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;web.dev&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--square&quot; alt=&quot;图标&quot; src=&quot;https://pic3.zhimg.com/v2-b102fd0611d45dc1b2430c9b2cd07bfa_ipico.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;浏览器安装弹窗弹出条件&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//web.dev/install-criteria/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-b102fd0611d45dc1b2430c9b2cd07bfa_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;What does it take to be installable?&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;web.dev&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--square&quot; alt=&quot;图标&quot; src=&quot;https://pic3.zhimg.com/v2-b102fd0611d45dc1b2430c9b2cd07bfa_ipico.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;消息推送API&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/API/Notifications_API&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic4.zhimg.com/v2-72382e605ce3eba8154aa310a712c403_ipico.jpg&quot; data-image-width=&quot;600&quot; data-image-height=&quot;600&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;Notifications API&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;developer.mozilla.org&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--square&quot; alt=&quot;图标&quot; src=&quot;https://pic4.zhimg.com/v2-72382e605ce3eba8154aa310a712c403_ipico.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/API/Push_API&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic4.zhimg.com/v2-72382e605ce3eba8154aa310a712c403_ipico.jpg&quot; data-image-width=&quot;600&quot; data-image-height=&quot;600&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;Push API&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;developer.mozilla.org&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--square&quot; alt=&quot;图标&quot; src=&quot;https://pic4.zhimg.com/v2-72382e605ce3eba8154aa310a712c403_ipico.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;Service Worker API&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic4.zhimg.com/v2-72382e605ce3eba8154aa310a712c403_ipico.jpg&quot; data-image-width=&quot;600&quot; data-image-height=&quot;600&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;Service Worker API&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;developer.mozilla.org&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--square&quot; alt=&quot;图标&quot; src=&quot;https://pic4.zhimg.com/v2-72382e605ce3eba8154aa310a712c403_ipico.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;Workbox 插件：缓存过期时间&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-expiration.ExpirationPlugin&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot;LinkCard LinkCard--noImage&quot;&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-expiration.ExpirationPlugin&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;developers.google.com&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;Google 提供的 PWA demo&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//airhorner.com/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-b887145cef3c59cf1aca0e0faad51241_ipico.jpg&quot; data-image-width=&quot;192&quot; data-image-height=&quot;192&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;Air Horn&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;airhorner.com&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--square&quot; alt=&quot;图标&quot; src=&quot;https://pic2.zhimg.com/v2-b887145cef3c59cf1aca0e0faad51241_ipico.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//github.com/GoogleChromeLabs/airhorn&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-978869dfb3deb675f582afbc69015b65_ipico.jpg&quot; data-image-width=&quot;400&quot; data-image-height=&quot;400&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;GoogleChromeLabs/airhorn&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;github.com&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--square&quot; alt=&quot;图标&quot; src=&quot;https://pic2.zhimg.com/v2-978869dfb3deb675f582afbc69015b65_ipico.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;iOS 配置文件兼容性解决方案&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//github.com/GoogleChromeLabs/pwacompat/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-978869dfb3deb675f582afbc69015b65_ipico.jpg&quot; data-image-width=&quot;400&quot; data-image-height=&quot;400&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;GoogleChromeLabs/pwacompat&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;github.com&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--square&quot; alt=&quot;图标&quot; src=&quot;https://pic2.zhimg.com/v2-978869dfb3deb675f582afbc69015b65_ipico.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;Workbox 最佳实践&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//github.com/GoogleChrome/workbox/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-bb30ab187e97bae6135add0101bcc62e_180x120.jpg&quot; data-image-width=&quot;3370&quot; data-image-height=&quot;1685&quot; class=&quot;LinkCard LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;GoogleChrome/workbox&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;github.com&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--horizontal&quot; alt=&quot;图标&quot; src=&quot;https://pic3.zhimg.com/v2-bb30ab187e97bae6135add0101bcc62e_180x120.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>39fbbde165b65a1ed2980740cfc62bfd</guid>
<title>毕业两年，如何在帝都购房上车：石头买房经验谈（上）</title>
<link>https://toutiao.io/k/dfei7ms</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-role=&quot;paragraph&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-width=&quot;100%&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;0.8767123287671232&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/EeJSurrFuXN8k74xtBpeicuXWMy9AjmTs6CzLGRfp5KFzJ49EVSXDTYj2ntuToBNtenTjCEEZBueuthDIgO9yLA/640?wx_fmt=gif&quot; data-w=&quot;219&quot; data-width=&quot;100%&quot; data-type=&quot;gif&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-brushtype=&quot;text&quot;&gt;&lt;span&gt;&lt;span&gt;点击上方&lt;/span&gt;&lt;span&gt;蓝色字体&lt;/span&gt;&lt;span&gt;，关注我 ——&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-brushtype=&quot;text&quot;&gt;&lt;span&gt;一个在&lt;strong&gt;阿里云&lt;/strong&gt;打工的&lt;strong mpa-from-tpl=&quot;t&quot;&gt;清华&lt;/strong&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;学渣&lt;/strong&gt;!&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;433&quot; data-ratio=&quot;0.7515625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/ZMXDhhGnYibvL222ibibOUpTibaOB9icz8A7WHV9FiaynjvwUgzHeMdD7N1OcYwsJDTasbqZX0d2ZqKdBlzibky12QaAw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;图 by：我是严肃的于海童@清华&lt;/span&gt;&lt;/p&gt;&lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;65&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;section&gt;&lt;span&gt;关于作者：程序猿石头(ID: tangleithu)，现任阿里巴巴技术专家，清华学渣，前大疆后端 Leader。欢迎关注，交流和指导！回复 “&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;” 送&lt;/span&gt;&lt;span&gt;阿里技术大礼包&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;背景&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;之前看到大白等分享了帝都购房记录，石头哥也来跟风分享一下我是如何在帝都购房上车的。&lt;/p&gt;&lt;p&gt;当然，我也非常希望我买房的剧情如下：&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;石头是个普通程序猿，大学毕业后来到帝都北京，开始北漂生活，他月薪八千，不过他用了一年的时间就在帝都买房了，看看他是怎么做到的：&lt;/p&gt;&lt;p&gt;在这一年之间，他每天早出晚归，上下班都坐地铁，因为外面吃饭贵，因此他学着自己做饭，他不泡吧也从来不去夜店，一直都省吃俭用，过着艰苦朴素的生活。&lt;/p&gt;&lt;p&gt;一年后，他用辛苦攒下来的两万块，再加上父母给的 666 万，在帝都还算不错的地段有了自己的房子……&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;哈哈哈，这毕竟是段子，羡慕归羡慕，但毕竟多数人都没有这么好的运气。如果家庭有一定经济基础，再加上自己的努力，能够上车自然是好的；没有好运气，咱也不能气馁，只要自己功夫足够深，作为程序猿，在这个“高薪”行当里，还是有机会的，实在一线不行，咱们可以二线嘛。&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRAQRKRCic4ibz1iaczChsN66WG02vXfV6cGsMQcJZcm95AK6lb0w6oibSzdA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;300&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;梦想还是要有的&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;说实话，其实，石头刚开始也都没想过自己能在帝都买房，尤其在这么短时间之类（自认为短，当然不能给有钱的大佬比），因为我深知自己家庭背景，自己和对象都是出生农村，家里也都没啥积蓄，即便掏光自己和对象父母的 4 个钱包，离在帝都购房的目标也是相差甚远的。&lt;/p&gt;&lt;p&gt;当然，如果家里有实力支撑，你就没必要说非得说，“恩，不行，我必须得靠自己&lt;span&gt;”&lt;/span&gt;。要知道，这个时间差就是金钱呀。举个例子，刚毕业，实验室同学双方父母家里支撑各家出 75W，一共 150W首付+150 贷款购得一套两居室；等我 2 年后准备看房时，同学房子价值已经增至近 600W 了。&lt;/p&gt;&lt;p&gt;记得还没毕业时，有一次跟一个清华的师兄讨论过此事，他谈到，“你放心，你到时候一定可以在北京买房的，时间长短的问题”，当时我心想 “我有那么牛 X 吗？”，心里确实没底儿呀！没想到毕业两年半，我还就真实现了，只能说&lt;strong&gt;当初那个师兄看得真准&lt;/strong&gt;！&lt;/p&gt;&lt;figure&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9583333333333334&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRATR7lcgB6huLnwRExqIiblfRRtDSlEF0ZlZfen1yiaKJUHS6icsDn20D7w/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;240&quot;/&gt;&lt;/p&gt;&lt;/figure&gt;&lt;p&gt;不过，谈起买房，石头毕业至今，有过实操 3 套购房经历，有帝都一线，也有二线城市 CQ，去年还在十八线城市老家县城有二手房交易流程，因此在购房这方面，还是稍微有点经验。这当然不能跟那些炒房、房产大 V 比。大家就随便看看得了，如果能有点儿帮助，那就最好不过了。&lt;/p&gt;&lt;p&gt;这么想来，我这一路走来，确实感觉自己“很牛逼“啊。其实，牛 X 谈不上，自我感觉良好。特别是认识和接触的人越多后，才发现真的是 “山外有山，人外有人”，不过我也常常进行自我激励：（学会知足常乐也挺好的）&lt;/p&gt;&lt;p&gt;因为来自农村，“穷人家孩纸早当家”，从高中起上学到大学，再到研究生，基本没怎么花家里的钱，并且研究生毕业时也积攒了一小笔钱（还完&lt;span&gt;生源地贷款&lt;/span&gt;后，还剩 xx 来万，在当时看来确实还是个不小的数目），再然后通过自己努力，最终能在一线城市有个小窝，解决 “住” 的问题，实属不容易了。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRAdmUMFv7heBiatu05yQEz6Sa7h7ZHiaUz6ppTfWxljdnwiagrUKC20jf6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;255&quot;/&gt;&lt;/p&gt;&lt;p&gt;不吹牛了，聊聊正事吧，分享下购房经验。&lt;/p&gt;&lt;h2&gt;&lt;span&gt;前期准备&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;购房前的前期准备，当然就是赚钱。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRAnIKYzd76Gdkd8oqCufncpibHqsxbmQUIdkpdSAwM71jrSImX2ROB5eQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;440&quot;/&gt;&lt;/p&gt;&lt;p&gt;在准备想购房这个话题的时候，肯定手里有一定积累，这个时候就该好好整理整理计算一下，你目前自己手里有多少现金，亲戚朋友能凑多少（当然如果父母有实力支持更好，没有的话，其他亲戚朋友这块建议不要放太大的比例），这样基本上能计算出购房的大致预算是多少了。&lt;/p&gt;&lt;p&gt;以石头为例，经过 2 年半的准备，我确实也积累了一定的积蓄，再加上我对象也有部分资金。为了方便说明问题，我就简单假设我恰好积累了 100W 现金吧。（大家不用纠结具体数字，这个 100W 我就是为了方便举例说明，实际比这个少或者比这个多，真的不重要）然后我对象手里有 60W 左右的现金，那么我们俩现金部分就有 160W；双方的公积金账户其实也有部分现金，虽然不能直接取出来当做首付&lt;strong&gt;直接使用&lt;/strong&gt;，但是这部分资金是可以通过短期周转获取的，因此也可以计算在首付资金里面。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;特此感谢我的老婆，没有她的支持，我们也没那么快，至少不会这么“简单“就在帝都上车的。要知道，当初她可是担着“风险”的，毕竟婚前购买，因为购房前未婚，且当初她名下外地有房贷（上面提到的二线城市购的房），所以不能先领证，且房产证也不能加她的名字（这都是“首套首贷”资格给逼的）。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9215686274509803&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRAmd7IcmlHLAJBNTP52LoZaPMnxriajFGCwibOJZZCtPhUZ93G9lR6s6Vg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;510&quot;/&gt;&lt;/p&gt;&lt;p&gt;再加上比如能从亲戚手里借 10~20W，玩得好的同学手里借10~20W。这部分资金可以提前调研清楚，因为首付资金的确定是前提，决定了后面你看房范围。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;说到借钱这个事情，需要谨慎，如果作为借钱方借的时候就预估好还钱时间，提前跟人家说明等等，做到守信用。作为被借的债主，一定要评估对方是否靠谱，如果有闲散的资金，信得过的朋友咱们能帮还是帮一下，前提是一定得对方人品到位，信得过。如果对对方人品没底儿，如果 “这钱借出去，可能短期要不回来” 不会影响到你，就借，否则就别借。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;另外，针对资金这块还有一个渠道，其实就是信用贷款（消费贷），当然这个就是稍微高端一点的玩家了。一般一家银行可能能申请 30-50W 的消费贷，找好时间窗口，运作一下还是能操作的；&lt;/p&gt;&lt;p&gt;有一点说明就是，申请房贷的时候，借款人名下**最好**没有贷款，所以就需要这个消费贷在别人的名义下，可以是你对象等等（这种情况下，你对象就不能作为共同借贷人）。&lt;/p&gt;&lt;p&gt;当然本文主要说的是&lt;span&gt;贷款买房&lt;/span&gt;哈，土豪全款等不在讨论范围。注意珍惜首次贷款机会（也叫处女贷），记住这句话：“处女贷可能是你这辈子最&lt;span&gt;容易&lt;/span&gt;能借到的，最&lt;span&gt;便宜&lt;/span&gt;的钱”。&lt;/p&gt;&lt;h2&gt;&lt;span&gt;了解当地购房政策&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;首先要看看你有没有资格购买。—— 你说气人不，有钱还不一定能买，还得先有资格。不过没关系，一般而言，差的是钱，扎心了。&lt;/p&gt;&lt;p&gt;这个各地政策不一样，以北京为例：&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;有北京户口&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;有《北京市工作居住证》&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;在京无房且已连续五年在京缴纳社保或个税&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;满足以上条件任何一个就可以有购房资格了。再比如重庆，三无（无户籍、无企业、无工作）人员也可以购买，只不过会有额外的房产税。具体不再列举了，大家可以到当地住建委网站或者电话咨询。&lt;/p&gt;&lt;p&gt;另外，建议大家准备购房前可以先了解一下&lt;span&gt;政府政策性房产&lt;/span&gt;，看看你所在城市有没有类似的福利。&lt;/p&gt;&lt;p&gt;这种房产是政府“福利性”房产，对购买人有一定资格要求，比如所谓的经济适用房等、限价商品房、回迁房等。&lt;/p&gt;&lt;p&gt;比如刚毕业那会，石头还想着北京的“自住型商品房”，最开始的几期还真合适，低端合适且价格基本是周围的 5 折，且 100%产权属于你自己，摇号摇了几次都摇不中。就跟石头前面提到的 &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3OTUzMzcwNw==&amp;amp;mid=2247489185&amp;amp;idx=1&amp;amp;sn=4abfc07dfca59dec6680d39f395020ba&amp;amp;chksm=eb471745dc309e5392ad57d867ef687526e785a9fe5d190ebb7efe8f60ae1dd112c3366e255a&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;摇车牌&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;摇车牌&lt;/a&gt; 一样，看人品的。不过后来演变成了“共有产权房”，产权可能只有一半属于你自己，且慢慢性价比也不高了。&lt;/p&gt;&lt;p&gt;这种政策性住房相对于普通商品房来说，在贷款、出售等方面有所不同，首付要求往往比较低，二次转卖（出售）可能有一定要求，比如要求必满 5 年等等。这个具体就不做讨论了。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;石头 tip：&lt;/span&gt;&lt;span&gt;首套刚需&lt;/span&gt;，大家也可以先了解下当地有没有类似的政策性房产，如果资金有限，房子合适且有资格的话，推荐购买。&lt;/p&gt;&lt;/blockquote&gt;&lt;h2&gt;&lt;span&gt;首付的计算&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;举个🌰，上面得到首付资金 160-200 W，最高能买总价多少的房子呢？&lt;/p&gt;&lt;p&gt;按照北京&lt;span&gt;首套&lt;/span&gt;首付比例 35% 计算的话，对应范围 457(=160/0.35) ~ 571(=200/0.35) W 吗？&lt;/p&gt;&lt;p&gt;石头开始也是这样认为的，但真不是这么计算的，比这个复杂得多得多。。。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.8233333333333334&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRAxiaFO3s5uLyRaGH955ySWKGL4IyqrHD9icgr6BTo2mGibHInjcyp4lFSA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;300&quot;/&gt;&lt;/p&gt;&lt;p&gt;先来看看关于贷款这部分。&lt;/p&gt;&lt;p&gt;银行会通过你的工资流水来评估你的还款能力。一般而言，&lt;span&gt;贷款的月供&lt;/span&gt;不得超过你工资流水（税后）的一半，首套利率一般较低，之前是基准利率还有折扣，现在基本是 LPR 的计算方式了，关于利率计算方式，石头哥的这篇文章 —— &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3OTUzMzcwNw==&amp;amp;mid=2247486345&amp;amp;idx=1&amp;amp;sn=56373982f8e8393a5a11b0e401523937&amp;amp;chksm=eb470a6ddc30837b1cdefb2812ef8ee2b7f52f56002481480974ccc42c44a146935c1548592c&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;你有被银行套路过吗？| 一文教你计算真实的年化利率&lt;/a&gt; 可以参考。&lt;/p&gt;&lt;p&gt;举例，税后工资 2W，那么，你月供不能超过 1W，贷款周期不超过 25 年（北京最高的政策，其他可能有 30 年），这样一来，你贷款额度也能计算出来了。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;当然，贷款可以由 2 个人一起承担，不过需要注意的是要提前了解当地的购房政策，比如恰好你对象（已婚）有过房贷记录？那对不起，你还不符合首套政策，只能按照二套处理。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;关于贷款年限的规定也是需要看具体房子的房龄的，以北京为例：&lt;/p&gt;&lt;p&gt;最长贷款年限不超过 &lt;code&gt;50 - 房龄&lt;/code&gt;，假设这房子年纪比较大了（北京这种房子太多太多了），90 年代的房子，至今已经 30 年了，那么贷款最多只能贷款 20 年。这样，你月还款额度又上去了，期望你的工资不能成为瓶颈。&lt;/p&gt;&lt;p&gt;其实还跟借款人的年龄有关，贷款年限不超过 &lt;code&gt;65-年龄&lt;/code&gt;，假设你 55 岁的老爸帮你贷款买，一般最多只能贷 10 年。&lt;/p&gt;&lt;p&gt;对了，本文说的贷款说的主要是商业贷款，公积金贷款的话，能用肯定得用，不过：&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;北京最新政策，每缴社保 1 年最多贷款 10W；这个有点坑，不过幸好石头赶上了老政策的末班车。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;贷款总额度不能超过 120W（夫妻双方）；&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;如果在异地购房的话，一般公积金是支持异地贷款政策的，具体要和当地的政策有关，石头去年也正好跑了一遍 CQ 的公积金异地贷款流程（北京缴纳公积金，CQ 贷款购房）。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;石头 tip：如果公积金能用，尽量都给安排上，毕竟&lt;span&gt;贷款利率这么低&lt;/span&gt;的其他地儿找不到。公积金相关问题，建议直接打电话 12329 询问。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;是不是发现好复杂，没办法……接着看。&lt;/p&gt;&lt;p&gt;假设按照工资计算出最高能贷 200W，这样，房价总价范围就直接加上首付 160-200W，得到总价 360-400W 吗？&lt;/p&gt;&lt;p&gt;答案当然可能也不太对。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRAcBFbGnoOWtxsYC5RaafKpOibuPgofjqVs6vsN7Vrcrb9UwGYR62ngyA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;300&quot;/&gt;&lt;/p&gt;&lt;p&gt;首先，银行贷款额度都是 &lt;code&gt;评估价*贷款比例&lt;/code&gt; ，评估价 ≠ 成交价，总价市场价 500W，银行评估会有个折扣 9 折，那么银行只认为你这个房子值 500*0.9=450 W，假设你工资不影响你贷款额度计算的情况下，理论上贷款额度为：&lt;code&gt;450W * 0.65 = 292W&lt;/code&gt;，那么首付资金是 &lt;code&gt;500 - 292 = 208 W&lt;/code&gt;，对不起，还不是。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;石头 Tip：评估价这里有一定“寻租”空间，如果你希望更可能多地贷款，或许可以让评估公司对房子进行高评。高评估意味着可以多贷款，相应的税费可能也会适当高一些。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;还得看你看中的这个房子是普通住宅，还是 VIP 住宅（非普通），啥是普通住宅？以北京为例，须同时满足：&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;小区容积率在1.0(含)以上&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;房屋建筑面积在140平方米(含)以下&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;还有政府指导价：&lt;/section&gt;&lt;/li&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;五环内：单价不超过39600/㎡ 或 总价不超过 468W。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;五环到六环：单价不超过31680/㎡ 或 总价不超过374W；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;六环外：单价不超过23760/㎡ 或 总价不超过280W；&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;p&gt;普通住宅和非普通住宅，对首付比例要求不一样，贷款利率也不一样，税收比例也不一样。一般而言，可能我们都期望按照普通住宅去成交（假设前两项满足普通住宅的标准），那么：&lt;/p&gt;&lt;p&gt;这个 500W 的房子：&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;在 5 环内，总价不超过 468W，网签价就得按照 468W 计算，贷款比例又缩水了。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;5-6 环，网签价374W，贷款比例：&lt;code&gt;374*0.65=243W&lt;/code&gt;，首付变成了 257W。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;首付还得包括下面的这部分：&lt;/p&gt;&lt;p&gt;个税、增值税、契税，如果所购房是经济适用房的话，还有另外的&lt;strong&gt;高额&lt;/strong&gt;的综合地价款或土地出让金。这个就相对很复杂了，借用网上的这个图：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9986338797814208&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRAOgzyfLrhiaXoBzExPuCFTXJg8pOFWCibn9ia3VZrUj9YvCY0g0fj9Xmzw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;732&quot;/&gt;&lt;/p&gt;&lt;p&gt;别看上面的个税等理论上由卖方承担，实际交易过程中，都会直接转交给买方的。以理想情况下 “满五唯一” 的房子，只需要缴纳契税 &lt;code&gt;500*1%=5W&lt;/code&gt;。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;石头 Tip：不同中介费率可能不一样，业主（卖方）可能会同时在多个中介上挂出房屋信息，这个时候就会有谈判空间，但也不太多。如果有渠道或有条件，其实也可以自行成交。&lt;/p&gt;&lt;p&gt;自行成交对于买方的风险会更大一些，这个需要自己评估。这个对具体感兴趣可以私聊我(wechat: codershitou)，我有过 2 套房子自行成交交易的经验。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;中介费，这个相对比较固定，一般 &lt;code&gt;2.?&lt;/code&gt;，不同中介不一样，甚至可以自己成交免中介费，我们就以 2% 计算，&lt;code&gt;500*2%=10W&lt;/code&gt;。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;石头 Tip：首套刚需，房源就先尽量锁定“满五唯一”的吧。然后&lt;span&gt;处女贷（首贷）资格&lt;/span&gt;要谨慎，好好把握。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;大头其实就是上面的了，其他可能还会有：贷款服务费、评估费、抵押登记费、印花税等等。&lt;/p&gt;&lt;p&gt;我们再回过头来看看首付，总价 500W 的房子，五环外的话，最多贷款 243W，首付为：257 + 5W(契税) + 10W(中介）+ 1W（其他）= 272W。说好的首付比例 35%（175W）呢？结果从 175 直接变成 272W，&lt;span&gt;硬生生多出来 100W&lt;/span&gt;。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.99609375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRA1JMYrTBsFcHQqOmO9XG0rGA28Iiano9Lx9kWpfdbbp2Gj9NtiaAoAH1A/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;256&quot;/&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;小结&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;卧槽，发现写了这么多，才基本把首付预算这块写了个七七八八，我们还是分两次写吧。&lt;/p&gt;&lt;p&gt;咱们小结一下，购房前，先看看是否有合适的政策性福利住房，然后最主要就是清点首付资金，然后了解当地的贷款政策（特别强调&lt;span&gt;不要浪费处女贷&lt;/span&gt;资格），方便确定房子总价范围，这样才能为后面看房等打下基础。&lt;/p&gt;&lt;p&gt;咱们下一期接着聊聊，当💰准备好之后，如何看房、选房、过户交易、以及交房验收等流程和&lt;span&gt;注意事项&lt;/span&gt;。有的还挺重要的，身边就有前同事没注意其中的条条框框，还惹上了官司，赔了钱不说，还浪费时间和精力，影响心情。&lt;/p&gt;&lt;p&gt;最后，祝大家早日上车。&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/ZMXDhhGnYibtwArG7NfRmW8o6jI2oAxRA3xURCrx5emnd7ibibZRP3bP489esjUBZGTy3s8MQ3dfxttKicgtLlbDvg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;255&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;后记&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;最后，&lt;/span&gt;&lt;span&gt;求关注，求关注，求关注&lt;/span&gt;&lt;span&gt;，本号会定期分享一些技术干货、职场经验等，如果大家对阿里或者其他大厂感兴趣，也可以找我&lt;/span&gt;&lt;span&gt;内推&lt;/span&gt;&lt;span&gt;，我可以帮忙提供简历 review 等，希望能和大家积极交流讨论，&lt;/span&gt;&lt;span&gt;一起学习、共同进步&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;觉得本号分享的文章有价值，记得&lt;/span&gt;&lt;span&gt;添加星标&lt;/span&gt;&lt;span&gt;哦。周更很累，不要白 piao，需要来点正反馈，安排个 “&lt;/span&gt;&lt;span&gt;一键三连&lt;/span&gt;&lt;span&gt;”（点赞、在看、分享）如何？😝 这将是我持续输出优质文章的最强动力。&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.5763888888888888&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/ZMXDhhGnYibus0M9Ca9kxyicUG4QMG51vSh2LCtOpicfJwrribu5Zc8d9OKFIP2E5UhcJ9ctTEeG9Xv0ElRFJqv65A/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;288&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;推 荐 阅 读&lt;/strong&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;span/&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages __bg_gif&quot; data-before-oversubscription-url=&quot;https://mmbiz.qlogo.cn/mmbiz_gif/uwFfSFSf91seQScIvEVNUmicz8EaY909ichXz5pHkVN8AwtsHOVg6mYnOlib8icUjfWZJkX6IibVlx9vJhtQrYaIUjg/0?wx_fmt=gif&quot; data-ratio=&quot;0.8428571428571429&quot; data-s=&quot;300,640&quot; data-type=&quot;gif&quot; data-w=&quot;140&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/uwFfSFSf91seQScIvEVNUmicz8EaY909ichXz5pHkVN8AwtsHOVg6mYnOlib8icUjfWZJkX6IibVlx9vJhtQrYaIUjg/640?wx_fmt=gif&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-tools-id=&quot;74666&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;程序猿石头 &lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;程序猿石头(ID: tangleithu)，现任阿里巴巴技术专家，清华学渣，前大疆后端 Leader。用不同的视角分享高质量技术文章，以每篇文章都让人有收获为目的，欢迎关注，交流和指导！扫码回复关键字 “&lt;/span&gt;&lt;span&gt;1024&lt;/span&gt;&lt;span&gt;” 获取&lt;/span&gt;&lt;span&gt;程序员大厂面试指南&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-backh=&quot;53&quot; data-backw=&quot;53&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;269&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;269&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/ZMXDhhGnYibsGrjJaF5hvicrswVeQicFujwTxcfbYhd7y5cjEkf2nwDCFdiauYuqmHY3VDWyCbImg92mvoicoQ6Uk3g/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;258&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>776f02b68c0bed136a3198eefa8e458d</guid>
<title>为什么十年寒窗，比不上几代人的努力</title>
<link>https://toutiao.io/k/uxwalux</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;p data-lake-id=&quot;aacf307544675a541af16628d483ebbe&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;网上有句很火的话“靠几代人积累的背景和财富，凭什么不如你寒窗苦读几十年”。其实多年前，一位银行从业者也写过一篇很火的文章《寒门再难出贵子》。在英国也有一部堪称伟大的纪录片《UP》系列，也反映了社会阶层固化。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;65029366b5a0e17efbe8b52cdd4648fa&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;e6aff0374fde0d154e9d2502551eb771&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;为什么10年寒窗，比不上几代人的努力？可能大多数时候都把原因归结于金钱和权力。可现实是残酷的，当年被打倒的地主老财们，很多又再一次富起来了。人与人的差距，不仅仅是资源的差距，还有认知的差距。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;3a7dc49f9edc79202e1aaabb12aa2ed4&quot;&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;认知的差距&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p data-lake-id=&quot;ba091ac1c156f7790f1b659ba1b19364&quot; data-wording=&quot;true&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;ba091ac1c156f7790f1b659ba1b19364&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;无论是《寒门再难出贵子》，还是《UP》系列，都是一个个鲜活的案例。当富家三公子每天读着泰晤士报，畅谈着未来的人生理想，想好了要上牛津、要做律师的时候，穷苦的小伙子们还不知道大学是何物、未来是何物，还在开心地玩着童年游戏。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;886cd6fd913fcd36e61647c2849f325c&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;8d303fa2b0ff2488b388a0371579a170&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;当穷人家的孩子，还在翻山越岭走着艰难的上学路，富家子弟已经可以去弹琴、画画、骑马，综合素质日益提高。当穷人家的孩子还在辛苦读书兼职赚钱的时候，富家子弟已经可以周游世界，看遍世界繁华。即便大家毕业于同一所大学、同一个专业，素质、能力不同，以后的发展机会也是不一样的。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;544c65b5804db4b491464e5151780eb1&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;decf4825ec7e8ab18379c07fd7c6f059&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;穷爸爸给年轻的罗伯特规划的是上大学、进大公司，安安稳稳过一生，而富爸爸给罗伯特规划的是买入资产、卖出负债，开开心心赚大钱。从人生规划的角度看，差距其实早就产生了。富人们对人生的规划远远超越了我们，关键是，大部分时候还比我们更努力。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;54564780543127280038131f692a4fbd&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;906d3dbcde83e491c8c2105984aadcf6&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;时至今日，生活在农村的人们，对孩子们的规划，还是没有清晰的认知，或者想让孩子上大学却不知道如何才能实现。很遗憾地看到，同龄人们已经走上了父辈的老路，下一代的现状又像极了熟悉的童年。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;af5b0b0f4d6d42b26cd7d7e1c4d9c522&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;023d5004107f4d37cae3190ec0ed959e&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;认知会影响人的行为和选择，认知的不同最终一定导致人与人之间巨大的差距。有些人很努力，但是始终无法取得突破，与其说是能力的限制，不如说是认知水平的限制。抛开家庭和智力，即便是上学时看起来相似的同学，工作后取得的成就也有很大的差距。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;3dcdec4be83a305fd646fc7ab3b67636&quot;&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;可怕的稀缺&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p data-lake-id=&quot;78b73262b4fea438a3db003dfc11b585&quot; data-wording=&quot;true&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;78b73262b4fea438a3db003dfc11b585&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;去年看了一本很牛逼的书，名字叫《稀缺：我们是如何陷入贫穷和忙碌的》。这本书讲了什么呢？它从贫穷和忙碌具有的共同点出发，在经济学和心理学两个领域进行交叉分析，得出了稀缺这个重要的概念。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;7d938e001feafcf4f7777b269d52eef0&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;888956f1e2f2ec0e5558e643013e679c&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;稀缺是什么呢？当我们拥有太少的东西，无法满足我们的需要，就很容易陷入恶性循环导致处境进一步变糟。当拥有太少的东西，注意力就会大量集中在眼前的事物上，视野就会变的狭窄，长期下去就会变得只关注短期利益，而忽略长期利益。书中用“管窥效应”来形容这种情况，“管窥效应”损害的是认知能力，使我们长期处于低层级认知中。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;55e7a79527abb4b0b59c10d51454332a&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;5a9583cee575a219a46ce8f2fd2de19a&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;每个人的时间和精力是有限的，所以大脑能够关注的、思考的、深入的东西是有限的，手里的钱财同样也是极其有限的，所以花钱能够买到的东西、能办成的事都是有限的。在《稀缺》中提出了“带宽”概念来描述这种限制。“带宽”不够用是产生“管窥效应”的根本原因。长期处于低层级认知中，“带宽”也很难发展，甚至变得更“窄”。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;5f1db6b091fd9dadd317d7cb757e1283&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;4e7ce64340ced7ccbd0f30e6ec3e7606&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;《贫穷的本质》一书中描绘了 10 亿底层人民的生活状态。吃不饱饭还要去买电视机，孩子即使上了学也不爱学习，拒绝体检却花更多钱看病买药，需要钱却不愿意小额贷款，诸如此类的常见现象，其实都和稀缺有很大的关系。稀缺导致大家“挪用”预算，目光短浅，丧失了长期发展的可能性。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;8e6e29f0dab1c65609a55e2321ed0d11&quot;&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;突破的希望&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p data-lake-id=&quot;297bf06071ba1e4ca66bc1f901cc56eb&quot; data-wording=&quot;true&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;297bf06071ba1e4ca66bc1f901cc56eb&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;今年发生了新冠疫情，传统行业出现了倒闭潮。而互联网+相关的行业们，反而出现了新突破，互联网新贵们争相上市套取财富。今年还有一篇 SCI 论文，分析了美国经济现状，得出一个结论：学习科学的人在现在的社会更容易赚到钱，尤其是计算机和医学。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;9d96e63536f7e69f84d0e48685e378f0&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;165050f33faad340ecfad8836b3d1ce4&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;网上不乏读书无用论，然而学习科学知识可能是我们唯一的选择。互联网行业在近些年发展非常快，涌现出非常多的机会，从业者的收入也是水涨船高。腾讯人均 7 万，阿里 P7 年薪百万，拼多多更猛挖阿里的人有的给到了翻倍。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;3d3e2c4d16b57cff3761b018b6fd2425&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;d0ee820647b02c454de4a9cff58c9309&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;富贵险中求，要脱颖而出还是需要注意博弈和冒险。在社会相对稳定的情况下，去做高风险的事情。无论选择什么行业，一定要去大城市。留在大城市是冒险，选择互联网行业是冒险，选择创业也是冒险，但这些冒险背后，才是我们的机会。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;cce069b23d8e59bd4c8ca938bac72769&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;20e56733cee70744b111b7ee78c62f4d&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;很多人不敢舍弃已有的安稳，害怕新事物，害怕面对风险，做起事来总是受到各种思维的约束，不敢越雷池半步。越是不敢冒险，越没有机会。一定要在能承受的范围内，做成功概率最大的事情，不要墨守成规，但是也不要太激进，最好一步一个脚印做渐进式的上升。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;dfa9ababd1a84c458622c85fa28a0eff&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;6bafe786881ac14cbf92a87f9dc8e4ac&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;所以说，普通人逆袭的最大希望，就是学好科学知识，把握住时代的机遇，敢于冒险，在能承受的范围内做成功概率最大的事情。现在是最好的年代，付出就会有回报，坚持下去就还有希望。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;a72870da1e5de887bc4f20360907ae1b&quot;&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;未来的选择&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p data-lake-id=&quot;961bf841103eff3d64a5d20980b131f5&quot; data-wording=&quot;true&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;961bf841103eff3d64a5d20980b131f5&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;10 年前我因为兴趣选择了计算机，10 年后我认识到选择计算机进入互联网是我唯一的机会。互联网行业是一个新兴的，充满了机遇的行业。这个行业还在快速发展期，历史已经证明砸钱砸不出成功的产品，真正重要的是从业者的思维和想象力。这，便是机会。&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;d7925bb4b6e48c5e1e570fb797868a2f&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;0ce0cc608a90c64b7cf6fd3510bd4ca5&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;互联网越来越成为像水电煤气一样重要的基础设施，也给了很多人积累原始财富的机会。互联网产品边际成本很低，使得从业者有机会分享到丰厚的利润回报。有很多小众软件，可能你都没有听说过，但是开发者已经赚得盆满钵满了。。&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;b38b69299e890aa633e5c26a8b642675&quot;&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;f8ff548ea0b99461271e30aac641d24c&quot; data-wording=&quot;true&quot;&gt;&lt;span data-mce-style=&quot;font-size: 12px&quot;&gt;也许，互联网从业者是最有希望跃升为中产的群体之一。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;推荐阅读：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwNDE2NTgzNQ==&amp;amp;mid=2247486248&amp;amp;idx=1&amp;amp;sn=ba8ba06d006136e20ec7c14aefe893c5&amp;amp;chksm=9b31528cac46db9a42e8cb410216fdbe05d79f0a4feb719c94ecd86c545bb78d9e471edf5639&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;被黑客攻击了，登录流程要怎么做才安全&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwNDE2NTgzNQ==&amp;amp;mid=2247486242&amp;amp;idx=1&amp;amp;sn=51936b434b7cfe88fd073b9f22f77d7d&amp;amp;chksm=9b315286ac46db90c4919d179663d495fd40380d343ea418d085f788ea3d8190d0746cf14b22&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;天天写业务代码的程序员，怎么成为技术大牛&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwNDE2NTgzNQ==&amp;amp;mid=2247486236&amp;amp;idx=1&amp;amp;sn=dd9060690257c6f5fd4f6eb22327497b&amp;amp;chksm=9b3152b8ac46dbae00892d68e6c8d8a21ebcbd2e3eb626153929ae42187d3526341fb43d1822&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;走向卓越，领域驱动设计的思维方式&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=&quot;2d3df6ebe009895b22060e5a29478d84&quot; data-wording=&quot;true&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6811352253756261&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3cfNeMrD2uzUXLTGibiabV4icAibOoeZKOIPBoIJoE8Mng1xZMGOpv0U4zdEI8nb5nKftA9TBLNiaez19lTLORB7hfg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;599&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>