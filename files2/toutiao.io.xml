<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>96fbe25d32bca208be385a3fa9f5274c</guid>
<title>一文带你了解推荐系统之标签体系</title>
<link>https://toutiao.io/k/nyb3xq7</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;weui-dialog&quot;&gt;
      &lt;p class=&quot;weui-dialog__hd&quot;&gt;&lt;strong class=&quot;weui-dialog__title&quot;&gt;&quot;Top Stories&quot; is disabled&lt;/strong&gt;&lt;/p&gt;
      &lt;p class=&quot;weui-dialog__bd&quot;&gt;
        Enable &quot;Top Stories&quot; in &quot;Settings&quot; &amp;gt; &quot;General&quot; &amp;gt; &quot;Manage Discover&quot;      &lt;/p&gt;
      
    &lt;/div&gt;
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8e928ab8df37c1f72a3a48c9d08688c1</guid>
<title>如何构建业务数据分析体系</title>
<link>https://toutiao.io/k/2zcuj5x</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;关注微信公众号：一个数据人的自留地&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;作者介绍&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;@小宇&lt;/p&gt;&lt;p&gt;专注流量数据分析，就职过360和58。&lt;/p&gt;&lt;p&gt;主要负责流量分析和商业变现等相关数据分析工作。&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;span/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;00&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;BEGIN&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;提及 “体系” 二字，我的脑海里浮现出老板说的 “对于工作的规划要从全局出发，内容要全面、要成体系！” 那么对于一个数据分析师而言我们的体系是什么？&lt;span&gt;是&lt;/span&gt; “目标监控体系？”，是 “运营分析体系？” ，还是 “APP 指标体系？” 到底该如何构建数据分析体系赋能业务呢？今天就来跟大家聊聊体系构建的话题。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;构建业务数据分析体系，对于分析师同学有两个方面的要求：&lt;strong&gt;&lt;span&gt;第一，&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;strong&gt;要了解业务模式&lt;/strong&gt;&lt;/span&gt;，能够解释数据背后的业务含义，找到业务的问题点、提升点，驱动业务向前发展；&lt;strong&gt;&lt;span&gt;第二，不&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;strong&gt;能只做数据、图表的堆砌&lt;/strong&gt;&lt;/span&gt;，需要根据业务的流程链路有目标、有逻辑、有顺序的分模块分专题展现数据。满足这两个方面的要求才是真正意义上的数据分析体系。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;下面结合我的工作场景，给大家讲讲业务数据分析体系搭建的基本思路。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;01&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;明确业务逻辑&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;分析师同学要明确自己服务的业务是什么？业务逻辑是什么？业务核心是什么？在业务的基础上构建分析体系，才能让分析结果更接地气，更好的应用到业务中。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;以流量外采业务为例，梳理业务逻辑（如下图）：各业务线发起流量需求 → 多渠道进行流量采买 → 流量引入落地页 → 落地页产生流量转化 → 流量变现、效果转化，这一系列步骤决定采买目标是否达成。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5143229166666666&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99HMiaRAAMb2HRjYkyV0woQK8dVicwN4CX6Y3PGVWdgqzKyYufW1vhu54NxOJcpAmxlxyicoDabpc2sg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;768&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;02&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;拆解分析模块&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;明确了业务逻辑后，根据目标和事件顺序进行分析模块拆解，明确各个目标分析的专题及关注核心。流量外采业务拆解分析模块如下：&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.4734982332155477&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99HMiaRAAMb2HRjYkyV0woQK86cqUgRnvJ5CkqHVRhAC3mG4VoG9icq6XicEW2JFEqicaougnZIuGBmIw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;849&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;采买效率&lt;/strong&gt;&lt;/span&gt;关注核心：有多少预算？现在以什么样的价格买了多少流量？当前出价能否实现目标最大化？预算、价格、采买流量无论调节哪一项，只有三者维持平衡，才能实现流量供给相对稳定。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;广告填充&lt;/strong&gt;&lt;/span&gt;直接影响流量变现。因此，在保证广告主预算合理消耗、效果满足预期的前提下，不断提升页面广告填充率，从而提升流量变现效率。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;用户行为&lt;/strong&gt;&lt;/span&gt;既能够决定收入转化又能够决定效果转化。细致研究收入、效果转化用户在单页面中有哪些行为、访问了几层页面、点—面—点—转化/跳出的访问路径是什么。根据转化用户特征优化产品策略从而帮助业务提升流量转化。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;以上各个模块的优化目的是为了达成共同的业务目标，&lt;strong&gt;&lt;span&gt;目标达成&lt;/span&gt;&lt;/strong&gt;的数据监控基础且重要。收入、效果、投入产出的数据表现直观的描述了业务现状和目标达成情况，及时的&lt;span&gt;监控&lt;/span&gt;目标达成有助于业务稳定健康发展。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;03&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;确定分析指标&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;确定了分析模块后，开始选定各个模块的分析指标，指标基本分为：结果量、转化率两类。结果量描述规模和目标达成，转化率描述效果。根据业务路径选取关键节点的转化和重要结果达成作为分析指标。按照路径的先后顺序列出指标，形成了核心数据看板，完成了数据体系的搭建。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;基于流量外采业务分析模块，可拆解出如下数据看板：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5452609158679447&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99HMiaRAAMb2HRjYkyV0woQKV0Vnk2GmIAjlSVLgTNO6r54IoOBIjxdWdvcNIbevOZYBrTv26QnVcQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;939&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;04&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;洞察走势与业务同步发展&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;有了清晰业务结构、模块拆解，数据看板就可以跟踪业务走势。在跟踪的时候，首先关注的是：目标达成情况。目标达成决定了后续一系列行动判断，根据业务走势的波动情况定位异常问题、发现业务提升点。产品、运营同学根据数据结论制定每个阶段的行动计划，同时分析师也要不断变换分析视角与业务联动实现同步发展。&lt;/p&gt;&lt;p&gt;如下示例：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5183673469387755&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99HMiaRAAMb2HRjYkyV0woQKX1gNZCN9h0N6ZUgTCnCmoUicS9wlCtTRZicicNzc16MWwWTveoXZcQB5w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;735&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;根据业务阶段性动作，明确阶段核心，定制专题分析方向：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;05&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;驱动业务增长&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;驱动业务增长是高阶数据分析要实现的目标之一。想要改善业务，就必须了解业务细节，发现问题，找出关键点，给出科学合理的优化方案，推动方案落地，才能实现业务增长。其中发现问题&lt;span&gt;、找关键点&lt;/span&gt;、优化方案、推动落地都属于数据驱动的范畴。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;如流量采买业务中需求与供给匹配的问题：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.47050359712230216&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99HMiaRAAMb2HRjYkyV0woQKicmNXnr0zDKicicCN0OPCia8Tqx0lBm7HCr0uAF2jvScoAWM80xRqKE3kA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;695&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.4943502824858757&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99HMiaRAAMb2HRjYkyV0woQKhylJwcTTBeibfmv4qJSl7bQLJticau9ocwAbxQ2IZaiay9rQicsIz9wb3Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;708&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;具体应该如何分配流量？这就找到了数据分析在项目中可以为项目实践提供价值的地方。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;根据规划求解的原理解决业务中流量分配的问题，具体方法参见《&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzIxMzAxNzEwNQ==&amp;amp;mid=2648095269&amp;amp;idx=1&amp;amp;sn=f934858a0e4091ee92e52527d9ebad31&amp;amp;chksm=8f9f2d5bb8e8a44d79af3c47c8db438e2bcb32f6bf72148a8bb08188289e289c33508cb0d0ae&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;规划求解应用—预算分配&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;规划求解应用—预算分配&lt;/a&gt;》。&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.37729357798165136&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99HMiaRAAMb2HRjYkyV0woQKWcNMcp95HzH9nuvibc9hewicZf4iapTZfOLJbMDeEicSgaBxkdMeP34ClQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;872&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;项目实践测试的过程中，分析师需要不断跟进评估实验效果、推全后复盘项目的目标达成和可迭代升级的内容。实现全流程的参与、评估、决策才能称之为数据分析驱动业务增长。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;06&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;形成数据体系&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;构建数据分析体系的本质是：满足业务需求，解决业务问题，驱动业务增长。在满足需求、发现问题、解决问题、&lt;span&gt;跟进&lt;/span&gt;项目、落地复盘的过程中分析师同学要不断的提炼总结，进而形成自己的数据分析体系。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;它可以是个思维导图，可以是个表格，也可以是个文档。无论哪种形式只要实现了数据分析体系本质，发挥了它应有的作用&lt;span&gt;，落&lt;/span&gt;&lt;span&gt;在了&lt;/span&gt;&lt;span&gt;具体业务&lt;/span&gt;&lt;span&gt;中&lt;/span&gt;，就是一个优秀的业务数据分析体系。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;回到流量采买业务的示例，总结提炼形成的数据体系如下：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6572199730094467&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99HMiaRAAMb2HRjYkyV0woQKian7iciaILAw2twccPZZNkiaaGOtwRibILTtZ8Euz23bEcqicz32dtnFhSNQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;741&quot;/&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;现实中，很多分析师同学掌握了专业的统计分析方法、分析工具、算法模型，但在与业务配合的过程中，总是很关注自己的理论深度、难度、专业度，却忽略了与业务的贴合度，因此&lt;span&gt;分析结构&lt;/span&gt;就没有办法形成体系化的分析结构，分析技能也只能停留在初级水平。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;用专业的方法服务个性化需求，将分析结果推广至业务中，只要这样才能真正的实现分析师价值，同时你也从初级成长为高级。&lt;/p&gt;&lt;p&gt;&lt;span&gt;希望对你有所启发！&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img data-ratio=&quot;1&quot; data-w=&quot;258&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/jWg3EibnYW9ibAUWI7stk9Kiaq14L7AJ6C1xJZWuVcLxtgibUBppKquBclraqDj9W3gTKeibZE18BpQXCJE2TianfycA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;数据人交流和学习的社区，关注我们，掌握专业数据知识、结识更多的数据小伙伴。&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;带你探索数据的神奇奥秘&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>15fa99d986622da92597511ab7e6abbf</guid>
<title>[译] 编程高手是如何练成的？</title>
<link>https://toutiao.io/k/7c85i29</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;markdown-body detail-content&quot;&gt;&amp;#13;
                &amp;#13;
                &lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;http://download.broadview.com.cn/Original/2102c71e14027d3e8c3a&quot;/&gt;&amp;#13;
&lt;/p&gt;&lt;p&gt;每个人都有成长的渴望，也都会遇到成长的瓶颈。下面这个问题是一个读者问我的：&lt;br/&gt;如何才能训练成为一个编程高手？&amp;#13;
&lt;/p&gt;&lt;p&gt;先简单说下这个读者的背景：工作 3 年多，目前在大厂做后台开发，身边有不少编程高手，是他想要追赶的目标。&lt;br/&gt;最近半年时间，他花了一些精力在研究源码和底层原理上，但总觉得这些知识和实际工作衔接不好，提升很慢，学习动力也越来越差，希望我能给点建议。&lt;br/&gt;我和他语音聊了半个小时，讲了一些我个人以及身边同事的案例。交流下来后，双方都有所启发。所以再次整理下，分享给大家。&amp;#13;
&lt;/p&gt;&lt;p&gt;— 1 —&lt;/p&gt;&amp;#13;
&lt;p&gt;&lt;strong&gt;何谓 “编程高手” ？&lt;/strong&gt;&lt;/p&gt;&amp;#13;
&lt;p&gt;我觉得能分成这样 3 类：&lt;/p&gt;&amp;#13;
&lt;p&gt;第 1 类：天赋和成就都很高的人中龙凤，比如能一个人写出 WPS 的求伯君、一个人开发出电子邮件 Foxmail 的张小龙，对开源领域影响很大的章亦春等人。&lt;/p&gt;&amp;#13;
&lt;p&gt;第 2 类：有不错的口碑同时广为人知的技术大牛，他们一般在知名公司的重要岗位任职过，对技术纯真热爱，同时热衷分享，比如耗子哥、阮一峰、尤雨溪等人。&lt;/p&gt;&amp;#13;
&lt;p&gt;第 3 类：工作中被我们视为崇拜对象、未来有希望企及的高 P 或者架构师。&lt;/p&gt;&amp;#13;
&lt;p&gt;前面两类不在我的圈层射程内（除了跟耗子哥在亚马逊有过一面之缘以外），因此本文主要聊下第 3 类人。这个也是绝大部分读者最关心的、同时可以设定为超越对象的群体。&lt;br/&gt;这样就有了一个新问题：既然想成为第 3 类人，那如何给第 3 类人下一个相对准确且具象的定义呢？（如果目标都是模糊的，就难言超越了）&lt;br/&gt;这其实是一个很有意思的问题，每个人的答案可能都不一样，因为「编程水平的高与低」本身就是一个相对的概念。&lt;br/&gt;我先说一下我的看法。&lt;br/&gt;刚毕业那会，我眼中的编程高手是我的同事 - 超哥，他是亚马逊的架构师，团队里面技术级别最高的人（后来他做到了亚马逊中国首架的位置，现在也算圈内比较知名的大牛了）。&lt;br/&gt;超哥是那种能搞定一个复杂项目（跨多个系统），从架构设计、到编码、到自动化测试、再到运维工具、甚至写文档都非常全面的人。显然是我这个刚毕业的菜鸟极其崇拜的大佬。&lt;br/&gt;再后来，我工作了四五年，走向了技术管理路线，因为带团队的原因，我又多了一个新视角来审视编程厉害的人。&lt;br/&gt;对比所谓的 PPT 架构师、以及讲到技术原理就满嘴跑火车而编码能力却稀松平常的人，我倾向给「编程高手」下一个更务实的定义：那就是实际工作中，能做到高效率、高质量、且稳定输出的人。看似容易，实则很难。我对这个定义的详细解读如下：&amp;#13;
&lt;/p&gt;&lt;p&gt;高效率：编程效率能做到团队中的 Top，对于复杂需求或者复杂问题能够快速理解，具备将复杂工作拆解成一系列简单子问题并搞定这些问题的人。他们能从实际场景出发，有造轮子的能力，也有不造轮子的觉悟。&lt;/p&gt;&amp;#13;
&lt;p&gt;高质量：编程质量能做到团队中的 Top，设计方案的合理性、编码的严谨性、测试方法、监控运维方案等，都能思考全面的人。&lt;/p&gt;&amp;#13;
&lt;p&gt;稳定输出：给高效率和高质量增加的限定。我觉得只有量变引起质变，真正形成了自己的方法论，能持续搞定一类问题，而不是单个问题的人才算是高手。&lt;/p&gt;&amp;#13;
&lt;p&gt;也许你会说要同时做到这 3 点太难了，但是实际工作中，一定有人能做到某个点或者某几点，那么以他们作为这一点的标杆即可。&lt;br/&gt;因为所谓的「编程高手」不过是我们设定的一个目标而已，你清楚这个目标是什么就足够了，不一定非得安在同一个人身上。&amp;#13;
&lt;/p&gt;&lt;p&gt;— 2 —&lt;/p&gt;&amp;#13;
&lt;p&gt;&lt;strong&gt;如何理解 “底层知识” 的价值？&lt;/strong&gt;&lt;/p&gt;&amp;#13;
&lt;p&gt;要成为一个编程高手，底层知识是必不可少的。这是一句正确的废话，就不展开解释了。&lt;br/&gt;读者真正的问题在于：如何将底层知识和实际工作衔接起来，做到相辅相成？&lt;br/&gt;先看一个具体的例子。对于简历中写自己做过性能优化的候选人，我面试时比较喜欢问：你是如何定位性能瓶颈并完成调优的？如果再次碰到此类问题，你的详细思路是什么？&lt;br/&gt;很显然，这是一个系统性的工程问题，能同时对技术深度和宽度进行考察。&lt;br/&gt;不仅仅是应用层的代码，还包括所使用的框架、中间件、虚拟机、网络甚至操作系统等等。有性能指标等基础性的知识，有监控和压测工具的运用，还有成体系的排查思路和优化方法等等。&lt;br/&gt;如果是编程低手，他们的答案通常有这几类：&amp;#13;
&lt;/p&gt;&lt;p&gt;1、性能指标都不清楚，遇到问题也不知道该用什么工具，这一类人应用层都不达标。&lt;/p&gt;&amp;#13;
&lt;p&gt;2、初步定位到一个疑似瓶颈点后，就着手优化，最终解决的只是一个浅层次的性能瓶颈问题，根本原因并未触达到。&lt;/p&gt;&amp;#13;
&lt;p&gt;3、能定位到根本原因，但是对于解决方案的合理性缺少深入思考，不追求极致，最终只是用了曲线的方案再次隐藏了性能问题。&lt;/p&gt;&amp;#13;
&lt;p&gt;通过这个例子，我其实想说明两点：&lt;/p&gt;&amp;#13;
&lt;p&gt;1、不具备底层知识，你的视野根本就触达不到底层的东西，思维以及能力永远只能停留在应用层面，能解决的问题有限。&lt;/p&gt;&amp;#13;
&lt;p&gt;2、读源码、学习各种原理，所有这些都只是学习和巩固知识的过程，真正体现编程水平的是实际解决问题的能力，因此如何将知识变成有效的经验？这个才是关键，做不到要么是实践不够，要么是压根没研究明白。&lt;/p&gt;&amp;#13;
&lt;p&gt;然后，我们再回到问题身上：究竟如何才能做到底层知识和实际工作的衔接呢？如果衔接不好，那问题出在哪个环节？&lt;br/&gt;大家可以先思考下：过往工作中那些对你编程能力帮助很大的经历，你认为你能获得提升最关键的因素是什么？是底层知识的储备吗？&lt;br/&gt;细想一下一定不是，而是发现问题的能力。（注意：我说的是最关键的因素，并不是否认底层知识的储备不重要）&lt;br/&gt;大家可以去观察一个工作中很常见的现象：同一个问题你能看到哪一层？而编程高手又能看到哪一层？谁能更快地贴近问题的本质？谁又能衍生出一系列的问题？这其实就是「发现问题」的能力体现。&lt;br/&gt;只有当你意识到它是一个值得深挖的问题时，才会有一层一层的思考，一层一层的分析。&lt;br/&gt;那应该如何提高这方面的能力呢？其实就是思考力的提升过程，除了观察和刻意练习，我想不出更好的建议。多看高手是怎么做的？遇到问题时自己多问几个为什么？多反思自己的思路是否正确？日积月累水平自然会提高。&lt;br/&gt;当你具备了发现问题的能力，就相当于给知识和经验之间架起了一座桥梁，真正做到相辅相成以及互相驱动。&amp;#13;
&lt;/p&gt;&lt;p&gt;— 3 —&lt;/p&gt;&amp;#13;
&lt;p&gt;&lt;strong&gt;成为 “编程高手” 的几点建议&lt;/strong&gt;&lt;/p&gt;&amp;#13;
&lt;p&gt;编程作为一门实践性的学科，多动手解决问题是最基本的要求了，解决问题越多、越难，能力提升越快。&lt;br/&gt;而在这个过程中，如果有知识输入（底层知识的储备），还有思考的加成（发现问题的能力），编程水平的提升会更加迅速。&lt;br/&gt;我带过的团队里面，还有一类人总说自己技术进步很慢，工作没有挑战。但是当团队遇到一个技术难题时，他根本没有意愿去做深入了解，嘴上说热爱技术、渴望成长，但是却看不到行动，这种人是永远成为不了编程高手的。&lt;br/&gt;真正的热爱来源于行动上的投入，不是找借口，不是追求舒服，这是很重要的一个区别。&amp;#13;
&lt;/p&gt;&lt;p&gt;编程高手是如何练成的？这样看来，它其实是一个体力、脑力、心力的修仙之路。&lt;/p&gt;&amp;#13;
&lt;h1 id=&quot;h1-u56FEu4E66u63A8u8350&quot;&gt;&lt;a name=&quot;图书推荐&quot; class=&quot;reference-link&quot;/&gt;&lt;span class=&quot;header-link octicon octicon-link&quot;/&gt;图书推荐&lt;/h1&gt;&lt;p&gt;▊&lt;a title=&quot;《程序员修炼之道：通向务实的最高境界（第2版）》&quot; href=&quot;http://www.broadview.com.cn/book/6274&quot;&gt;《程序员修炼之道：通向务实的最高境界（第2版）》&lt;/a&gt;&lt;br/&gt;[美] David，Thomas，Andrew，Hunt 著&amp;#13;
&lt;/p&gt;&lt;p&gt;云风 译&lt;/p&gt;&amp;#13;
&lt;p&gt;本书之所以在全球范围内广泛传播，被一代代开发者奉为圭臬，盖因它可以创造出真正的价值：或编写出更好的软件，或探究出编程的本质，而所有收获均不依赖于特定语言、框架和方法。&lt;/p&gt;&amp;#13;
&lt;p&gt;时隔20年的新版，经过全面的重新选材、组织和编写，覆盖哲学、方法、工具、设计、解耦、并发、重构、需求、团队等务实话题的最佳实践及重大陷阱，以及易于改造、复用的架构技术。本书极具洞察力与趣味性，适合从初学者到架构师的各阶层读者潜心研读或增广见闻。&lt;/p&gt;&amp;#13;
&amp;#13;
            &lt;/div&gt;&amp;#13;
&amp;#13;
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>b8098f7a4e62d5eaf5f99730867ae331</guid>
<title>用 Pandas 计算日志中事件的时间间隔</title>
<link>https://toutiao.io/k/o73tkeh</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;preview&quot;&gt;&lt;p&gt;&lt;img src=&quot;https://img.toutiao.io/attachment/18c599fbfd924453b429eaabacf6dc21/w600&quot; alt=&quot;file&quot;/&gt;&lt;/p&gt;

&lt;p&gt;通常我们需要对日志数据清洗出一些事件间隔的特征，给数据分析或者机器学习建模提供数据支持。&lt;/p&gt;

&lt;p&gt;假设我们有一些事件日志，这些日志记录了用户在App中事件类型、时间戳、用户ID等其他一些数据，像下面这样:&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;data = &quot;&quot;&quot;user_id,event_time,event_type
100003,2021-01-18 01:06:00,onLaunch
100001,2021-01-19 08:30:00,onLaunch
100003,2021-01-20 02:39:00,onLaunch
100003,2021-01-20 08:15:00,onLaunch
100002,2021-01-20 10:05:00,onLaunch
100001,2021-01-20 14:40:00,onLaunch
100001,2021-01-20 18:05:00,onLaunch
100002,2021-01-21 21:11:00,onLaunch
100003,2021-01-22 10:05:00,onLaunch
100001,2021-01-23 09:18:00,onLaunch
100003,2021-01-23 17:35:00,onLaunch
100001,2021-01-25 16:49:00,onLaunch
100003,2021-01-26 12:13:00,onLaunch
100001,2021-01-27 19:56:00,onLaunch&quot;&quot;&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;我们把日志读取到 Pandas 的内存表 DataFrame 中．真实环境可以通过 &lt;code&gt;read_sql&lt;/code&gt; 或者 &lt;code&gt;read_csv&lt;/code&gt; 等方法读取数据源&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;import pandas as pd
ldata = [x.split(&#x27;,&#x27;) for x in data.split(&#x27;\n&#x27;)]
df = pd.DataFrame(ldata[1:], columns=ldata[0])
df[&#x27;event_time&#x27;] =  pd.to_datetime(df[&#x27;event_time&#x27;])
df.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th/&gt;
      &lt;th&gt;user_id&lt;/th&gt;
      &lt;th&gt;event_time&lt;/th&gt;
      &lt;th&gt;event_type&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;100003&lt;/td&gt;
      &lt;td&gt;2021-01-18 01:06:00&lt;/td&gt;
      &lt;td&gt;onLaunch&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;100001&lt;/td&gt;
      &lt;td&gt;2021-01-19 08:30:00&lt;/td&gt;
      &lt;td&gt;onLaunch&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;100003&lt;/td&gt;
      &lt;td&gt;2021-01-20 02:39:00&lt;/td&gt;
      &lt;td&gt;onLaunch&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;100003&lt;/td&gt;
      &lt;td&gt;2021-01-20 08:15:00&lt;/td&gt;
      &lt;td&gt;onLaunch&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;100002&lt;/td&gt;
      &lt;td&gt;2021-01-20 10:05:00&lt;/td&gt;
      &lt;td&gt;onLaunch&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;我们希望提取出每个用户的启动次数（&lt;code&gt;lifetime_launchs&lt;/code&gt;）、昨日启动次数(&lt;code&gt;yesterday_launchs&lt;/code&gt;) 以及距离上次登录的天数 (&lt;code&gt;days_since_last_launch&lt;/code&gt;)。&lt;/p&gt;

&lt;p&gt;使用 pandas，我们按照用户和日期进行汇总，得到每个用户每天的启动次数。&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;user_launchs = (df.set_index(&#x27;event_time&#x27;)
               .groupby([&#x27;user_id&#x27;, pd.Grouper(freq=&#x27;D&#x27;)])
               .size()
               .rename(&#x27;launchs&#x27;))
user_launchs
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;user_id  event_time
100001   2021-01-19    1
         2021-01-20    2
         2021-01-23    1
         2021-01-25    1
         2021-01-27    1
100002   2021-01-20    1
         2021-01-21    1
100003   2021-01-18    1
         2021-01-20    2
         2021-01-22    1
         2021-01-23    1
         2021-01-26    1
Name: launchs, dtype: int64
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;可以看出，这里只有有启动的日志，日期不连续，为了提取出上面的特征，我们需要填充没有启动的日期.
把用户放到一个连续的时间轴上.&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;# 创建一个日期范围作为 DataFrame 的索引
dates = pd.date_range(df.event_time.min().date(),
                      df.event_time.max().date(),
                      freq=&#x27;1D&#x27;)

# 取出去重的用户ID
users = df[&#x27;user_id&#x27;].unique()


# 通过用户和日期交叉创建出一个 MultiIndex
idx = pd.MultiIndex.from_product([users, dates], names=[&#x27;user_id&#x27;, &#x27;event_time&#x27;])

# 索引建索引
user_launchs = user_launchs.reindex(idx)

user_launchs.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;user_id  event_time
100003   2021-01-18    1.0
         2021-01-19    NaN
         2021-01-20    2.0
         2021-01-21    NaN
         2021-01-22    1.0
Name: launchs, dtype: float64
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这样我们构建了一个连续的时间序列．现在可以提取我们需要的特征了.&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;# 为空的数据行把空填充0,并转成 DataFrame
user_launchs = user_launchs.fillna(0).to_frame()
user_launchs.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th&gt;launchs&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;user_id&lt;/th&gt;
      &lt;th&gt;event_time&lt;/th&gt;
      &lt;th/&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th rowspan=&quot;5&quot; valign=&quot;top&quot;&gt;100003&lt;/th&gt;
      &lt;th&gt;2021-01-18&lt;/th&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-19&lt;/th&gt;
      &lt;td&gt;0.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-20&lt;/th&gt;
      &lt;td&gt;2.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-21&lt;/th&gt;
      &lt;td&gt;0.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-22&lt;/th&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;通过&lt;code&gt;shift&lt;/code&gt;方法向下移动一行作为下一行的前一天，给 user_launchs 增加 &lt;code&gt;launchs_yesterday&lt;/code&gt; 字段&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;user_launchs[&#x27;launchs_yesterday&#x27;] = user_launchs.groupby(level=&#x27;user_id&#x27;)[&#x27;launchs&#x27;].shift(1)
user_launchs.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th&gt;launchs&lt;/th&gt;
      &lt;th&gt;launchs_yesterday&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;user_id&lt;/th&gt;
      &lt;th&gt;event_time&lt;/th&gt;
      &lt;th/&gt;
      &lt;th/&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th rowspan=&quot;5&quot; valign=&quot;top&quot;&gt;100003&lt;/th&gt;
      &lt;th&gt;2021-01-18&lt;/th&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-19&lt;/th&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-20&lt;/th&gt;
      &lt;td&gt;2.0&lt;/td&gt;
      &lt;td&gt;0.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-21&lt;/th&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;2.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-22&lt;/th&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;0.0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;滚动的累计出当前日期下每个用户的总启动次数，给 user_launchs 增加 &lt;code&gt;lifetime_launchs&lt;/code&gt; 字段．&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;user_launchs[&#x27;lifetime_launchs&#x27;] = (user_launchs
                                  .groupby(level=&#x27;user_id&#x27;)
                                  .launchs.cumsum()
                                  .groupby(level=&#x27;user_id&#x27;).shift(1))
user_launchs.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th&gt;launchs&lt;/th&gt;
      &lt;th&gt;launchs_yesterday&lt;/th&gt;
      &lt;th&gt;lifetime_launchs&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;user_id&lt;/th&gt;
      &lt;th&gt;event_time&lt;/th&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th/&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th rowspan=&quot;5&quot; valign=&quot;top&quot;&gt;100003&lt;/th&gt;
      &lt;th&gt;2021-01-18&lt;/th&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-19&lt;/th&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-20&lt;/th&gt;
      &lt;td&gt;2.0&lt;/td&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-21&lt;/th&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;2.0&lt;/td&gt;
      &lt;td&gt;3.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-22&lt;/th&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;3.0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;user_launchs.groupby(level=&#x27;user_id&#x27;).cumsum().groupby([&#x27;user_id&#x27;, &#x27;launchs&#x27;]).cumcount()
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;user_id  event_time
100003   2021-01-18    0
         2021-01-19    1
         2021-01-20    0
         2021-01-21    1
         2021-01-22    0
         2021-01-23    0
         2021-01-24    1
         2021-01-25    2
         2021-01-26    0
         2021-01-27    1
100001   2021-01-18    0
         2021-01-19    0
         2021-01-20    0
         2021-01-21    1
         2021-01-22    2
         2021-01-23    0
         2021-01-24    1
         2021-01-25    0
         2021-01-26    1
         2021-01-27    0
100002   2021-01-18    0
         2021-01-19    1
         2021-01-20    0
         2021-01-21    0
         2021-01-22    1
         2021-01-23    2
         2021-01-24    3
         2021-01-25    4
         2021-01-26    5
         2021-01-27    6
dtype: int64
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;距离上次登录的天数 (&lt;code&gt;days_since_last_launch&lt;/code&gt;)&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;user_launchs[&#x27;days_since_last_launch&#x27;] = (user_launchs
                                        .groupby(level=&#x27;user_id&#x27;)
                                        .cumsum()
                                        .groupby([&#x27;user_id&#x27;, &#x27;launchs&#x27;])
                                        .cumcount()
                                        .groupby(level=&#x27;user_id&#x27;).shift(1))
user_launchs.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th&gt;launchs&lt;/th&gt;
      &lt;th&gt;launchs_yesterday&lt;/th&gt;
      &lt;th&gt;lifetime_launchs&lt;/th&gt;
      &lt;th&gt;days_since_last_launch&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;user_id&lt;/th&gt;
      &lt;th&gt;event_time&lt;/th&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th/&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th rowspan=&quot;5&quot; valign=&quot;top&quot;&gt;100003&lt;/th&gt;
      &lt;th&gt;2021-01-18&lt;/th&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-19&lt;/th&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;0.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-20&lt;/th&gt;
      &lt;td&gt;2.0&lt;/td&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-21&lt;/th&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;2.0&lt;/td&gt;
      &lt;td&gt;3.0&lt;/td&gt;
      &lt;td&gt;0.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-22&lt;/th&gt;
      &lt;td&gt;1.0&lt;/td&gt;
      &lt;td&gt;0.0&lt;/td&gt;
      &lt;td&gt;3.0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;类似的，我们还可以滚动的创建 &lt;code&gt;launchs_last_n_days&lt;/code&gt;&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;for n in [7, 14]: 
    col = &#x27;launchs_last_{}_days&#x27;.format(n)
    user_launchs[col] = (user_launchs
                        .groupby(level=&#x27;user_id&#x27;)
                        .launchs
                        .apply(lambda d: d.rolling(n).sum().shift(1)))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;给空值填充 &lt;code&gt;0&lt;/code&gt;, 并格式化为 integer 类型&lt;/p&gt;

&lt;pre lang=&quot;python&quot;&gt;&lt;code&gt;user_launchs.fillna(0).applymap(int)
&lt;/code&gt;&lt;/pre&gt;

&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th&gt;launchs&lt;/th&gt;
      &lt;th&gt;launchs_yesterday&lt;/th&gt;
      &lt;th&gt;lifetime_launchs&lt;/th&gt;
      &lt;th&gt;days_since_last_launch&lt;/th&gt;
      &lt;th&gt;launchs_last_7_days&lt;/th&gt;
      &lt;th&gt;launchs_last_14_days&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;user_id&lt;/th&gt;
      &lt;th&gt;event_time&lt;/th&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th/&gt;
      &lt;th/&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th rowspan=&quot;10&quot; valign=&quot;top&quot;&gt;100003&lt;/th&gt;
      &lt;th&gt;2021-01-18&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-19&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-20&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-21&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-22&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-23&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-24&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-25&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-26&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-27&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th rowspan=&quot;10&quot; valign=&quot;top&quot;&gt;100001&lt;/th&gt;
      &lt;th&gt;2021-01-18&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-19&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-20&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-21&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-22&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-23&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-24&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-25&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-26&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-27&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th rowspan=&quot;10&quot; valign=&quot;top&quot;&gt;100002&lt;/th&gt;
      &lt;th&gt;2021-01-18&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-19&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-20&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-21&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-22&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-23&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-24&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-25&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-26&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2021-01-27&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;是不是很神奇&lt;/p&gt;
&lt;/div&gt;
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>2126bb4debd9716a49f48f6e9350d6de</guid>
<title>用了很多年 Dubbo，连 Dubbo 线程池监控都不知道，觉得自己很厉害？</title>
<link>https://toutiao.io/k/ph03air</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;前言&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;micrometer 中自带了很多其他框架的指标信息，可以很方便的通过 prometheus 进行采集和监控，常用的有 JVM 的信息，Http 请求的信息，Tomcat 线程的信息等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;对于一些比较活跃的框架，有些还是不支持的，比如 Dubbo。如果想监控 Dubbo 的一些指标，比如线程池的状况，我们需要手动去扩展，输出对应的线程池指标才行。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在这种情况下，肯定是没什么思路的，因为你不知道怎么去扩展，下面给大家介绍去做一件事情之前的思考，方式方法很重要。&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Dubbo 有没有现成的实现?&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;参考 micrometer 中指标的实现，依葫芦画瓢？&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;Dubbo 有没有现成的实现?&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;完整的实现应该没有，至少我还没用过，也没有那种去搜索引擎一搜就大把结果的现状，于是我在 Dubbo 的 Github 上找到了一个相关的项目 dubbo-spring-boot-actuator。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;https://github.com/apache/dubbo-spring-boot-project/tree/master/dubbo-spring-boot-actuator&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;dubbo-spring-boot-actuator 看名称就知道，提供了 Dubbo 相关的各种信息端点和健康检查。从这里面也许能发现点有用的代码。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;果不其然，在介绍页面中看到了想要的内容，线程池的指标数据，只不过是拼接成了字符串显示而已。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&quot;threadpool&quot;: {&lt;br/&gt;      &quot;source&quot;: &quot;management.health.dubbo.status.extras&quot;,&lt;br/&gt;      &quot;status&quot;: {&lt;br/&gt;        &quot;level&quot;: &quot;OK&quot;,&lt;br/&gt;        &quot;message&quot;: &quot;Pool status:OK, max:200, core:200, largest:0, active:0, task:0, service port: 12345&quot;,&lt;br/&gt;        &quot;description&quot;: null&lt;br/&gt;      }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;然后就去翻 dubbo-spring-boot-actuator 的代码了，没找到线程池这块的代码。后面在 dubbo.jar 中找到了 ThreadPoolStatusChecker 这个类，核心逻辑在这里面。&lt;strong&gt;现在已经解决了第一个问题，就是获取到 Dubbo 的线程池对象。&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.6704805491990846&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WRLYshvT39xYZdZSRAspAObFYXiczydc0UMX38ANJjic5RHPzOicsZpxFiccCfkdavxVZ4wCh790MjyOaqPbHdxVkw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1748&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;参考 micrometer 中指标的实现，依葫芦画瓢？&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;线程池对象能拿到了，各种数据也就能获取了。接下来的问题就是如何暴露出去给 prometheus 采集。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;两种方式，一种是自定义一个新的端点暴露，一种是直接在已有的 prometheus 端点中增加指标数据的输出，也就是依葫芦画瓢。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;看源码中已经有很多 Metrics 的实现了，我们也实现一个 Dubbo 线程池的 Metrics 即可。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.3828715365239295&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WRLYshvT39xYZdZSRAspAObFYXiczydc0L6fSMibzibgdnVGq9zQ0bF29Z3ALf7ekZSiagHsbziaIEOGJJw0tBSicNsw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;794&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;上图框起来的就是一个已经存在的线程池 Metrics，可以直接复用代码。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;实现的主要逻辑就是实现一个 MeterBinder 接口，然后将你需要的指标进行输出即可。于是打算在 bindTo 方法中获取 Dubbo 的线程池对象，然后输出指标。经过测试，在 MeterBinder 实例化的时候 Dubbo 还没初始化好，拿不到线程池对象，绑定后无法成功输出指标。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;后面还是打算采用定时采样的方式来输出，自定义一个后台线程，定时去输出数据。可以用 Timer，我这图简单就直接 while 循环了。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;/**&lt;br/&gt; * Dubbo线程池指标&lt;br/&gt; *&lt;br/&gt; * @author yinjihuan&lt;br/&gt; */&lt;br/&gt;@Configuration&lt;br/&gt;public class DubboThreadMetrics {&lt;br/&gt;    @Autowired&lt;br/&gt;    private MeterRegistry meterRegistry;&lt;br/&gt;    private final Iterable&amp;lt;Tag&amp;gt; TAG = Collections.singletonList(Tag.of(&quot;thread.pool.name&quot;, &quot;dubboThreadPool&quot;));&lt;br/&gt;    @PostConstruct&lt;br/&gt;    public void init() {&lt;br/&gt;        new Thread(() -&amp;gt; {&lt;br/&gt;            while (true) {&lt;br/&gt;                try {&lt;br/&gt;                    Thread.sleep(1000);&lt;br/&gt;                } catch (InterruptedException e) {&lt;br/&gt;                    e.printStackTrace();&lt;br/&gt;                }&lt;br/&gt;                DataStore dataStore = ExtensionLoader.getExtensionLoader(DataStore.class).getDefaultExtension();&lt;br/&gt;                Map&amp;lt;String, Object&amp;gt; executors = dataStore.get(Constants.EXECUTOR_SERVICE_COMPONENT_KEY);&lt;br/&gt;                for (Map.Entry&amp;lt;String, Object&amp;gt; entry : executors.entrySet()) {&lt;br/&gt;                    ExecutorService executor = (ExecutorService) entry.getValue();&lt;br/&gt;                    if (executor instanceof ThreadPoolExecutor) {&lt;br/&gt;                        ThreadPoolExecutor tp = (ThreadPoolExecutor) executor;&lt;br/&gt;                        Gauge.builder(&quot;dubbo.thread.pool.core.size&quot;, tp, ThreadPoolExecutor::getCorePoolSize)&lt;br/&gt;                                .description(&quot;核心线程数&quot;)&lt;br/&gt;                                .baseUnit(&quot;threads&quot;)&lt;br/&gt;                                .register(meterRegistry);&lt;br/&gt;                        Gauge.builder(&quot;dubbo.thread.pool.largest.size&quot;, tp, ThreadPoolExecutor::getLargestPoolSize)&lt;br/&gt;                                .description(&quot;历史最高线程数&quot;)&lt;br/&gt;                                .baseUnit(&quot;threads&quot;)&lt;br/&gt;                                .register(meterRegistry);&lt;br/&gt;                        Gauge.builder(&quot;dubbo.thread.pool.max.size&quot;, tp, ThreadPoolExecutor::getMaximumPoolSize)&lt;br/&gt;                                .description(&quot;最大线程数&quot;)&lt;br/&gt;                                .baseUnit(&quot;threads&quot;)&lt;br/&gt;                                .register(meterRegistry);&lt;br/&gt;                        Gauge.builder(&quot;dubbo.thread.pool.active.size&quot;, tp, ThreadPoolExecutor::getActiveCount)&lt;br/&gt;                                .description(&quot;活跃线程数&quot;)&lt;br/&gt;                                .baseUnit(&quot;threads&quot;)&lt;br/&gt;                                .register(meterRegistry);&lt;br/&gt;                        Gauge.builder(&quot;dubbo.thread.pool.thread.count&quot;, tp, ThreadPoolExecutor::getPoolSize)&lt;br/&gt;                                .description(&quot;当前线程数&quot;)&lt;br/&gt;                                .baseUnit(&quot;threads&quot;)&lt;br/&gt;                                .register(meterRegistry);&lt;br/&gt;                        Gauge.builder(&quot;dubbo.thread.pool.queue.size&quot;, tp, e -&amp;gt; e.getQueue().size())&lt;br/&gt;                                .description(&quot;队列大小&quot;)&lt;br/&gt;                                .baseUnit(&quot;threads&quot;)&lt;br/&gt;                                .register(meterRegistry);&lt;br/&gt;                        Gauge.builder(&quot;dubbo.thread.pool.taskCount&quot;, tp, ThreadPoolExecutor::getTaskCount)&lt;br/&gt;                                .description(&quot;任务总量&quot;)&lt;br/&gt;                                .baseUnit(&quot;threads&quot;)&lt;br/&gt;                                .register(meterRegistry);&lt;br/&gt;                        Gauge.builder(&quot;dubbo.thread.pool.completedTaskCount&quot;, tp, ThreadPoolExecutor::getCompletedTaskCount)&lt;br/&gt;                                .description(&quot;已完成的任务量&quot;)&lt;br/&gt;                                .baseUnit(&quot;threads&quot;)&lt;br/&gt;                                .register(meterRegistry);&lt;br/&gt;                    }&lt;br/&gt;                }&lt;br/&gt;            }&lt;br/&gt;        }).start();&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;指标信息：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.46458333333333335&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WRLYshvT39xYZdZSRAspAObFYXiczydc04icBeAedUQEuGiaAOGsLwjictGnjPBYvSIYzxwZvWxaTHzfW1icboIribRg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;配置线程池图表&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;创建一个新的 dashboard 配置图表，然后新建 panel 配置指标信息&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.19635416666666666&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WRLYshvT39xYZdZSRAspAObFYXiczydc0ib7WR7xhOs7eCYkia4fvicUCEAkmVGPZErFHju6EbgB5ibO1uwj5tS31pQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;figcaption&gt;图片&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;左侧配指标信息，右侧选择对应的图表格式。需要注意的是，如果有多个服务实例，Metrics 这边最好是根据服务实例来显示，需要在指标后面增加条件，如下：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;dubbo_thread_pool_max_size_theads{application=&quot;$application&quot;, instance=~&quot;$instance&quot;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.5223958333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WRLYshvT39xYZdZSRAspAObFYXiczydc0ibAnCLuF2qnhicUP6OMBlibokib6oGBdDO8X1GNHwUeOELYyoLOXO36tWw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;figcaption&gt;图片&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;关于作者&lt;/strong&gt;：尹吉欢，简单的技术爱好者，《Spring Cloud 微服务-全栈技术与案例解析》, 《Spring Cloud 微服务 入门 实战与进阶》作者, 公众号&lt;strong&gt;猿天地&lt;/strong&gt;发起人。&lt;/p&gt;&lt;span&gt;- END -&lt;/span&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>