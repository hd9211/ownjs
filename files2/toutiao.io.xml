<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>ed4592f4cdc16b56c5aa5f2f6085d8d0</guid>
<title>企业微信万亿级日志检索系统</title>
<link>https://toutiao.io/k/t1o49fm</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.1575&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/j3gficicyOvasIjZpiaTNIPReJVWEJf7UGpmokI3LL4NbQDb8fO48fYROmYPXUhXFN8IdDqPcI1gA6OfSLsQHxB4w/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;400&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;作者：datonli，腾讯 WXG 后台开发工程师&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;背景&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;开发在定位问题时需要查找日志，但企业微信业务模块日志存储在本机磁盘，这会造成以下问题：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;日志查找效率低下&lt;/strong&gt;：一次用户请求涉及近十个模块，几十台机器，查找日志需要登录机器 grep 日志文件。这一过程通常需要耗费 10 分钟以上，非常低效；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;日志保存时间短&lt;/strong&gt;：单机磁盘存储容量有限，为保存最新日志，清理脚本周期清理旧日志文件腾出磁盘空间，比如：现网一核心存储 7 天日志占用了 90%的磁盘空间，7 天前日志都会被清理，用户投诉因日志被清理而得不到解决；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;日志缺失&lt;/strong&gt;：虽然现网保留 7 天最新日志，但是由于某些模块请求量大或日志打印不合理，我们也会限制一个小时日志打印量，超过阈值后不再保存，比如：现网一核心存储前 10 分钟打了 10G 日志达到阈值，后 50 分钟日志不再保存了，用户投诉因日志缺失无法得到解决。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们希望有这样一个日志系统：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;存储全量日志&lt;/strong&gt;：由于 To B 业务的特殊性，至少需要保存 30 天的全量日志（&lt;strong&gt;数 PB 日志量，日志达数万亿条&lt;/strong&gt;），方便回查日志定位问题；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;日志快速定位&lt;/strong&gt;：根据模块+时间段+关键字或用户请求信息快速定位日志；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;实时性&lt;/strong&gt;：日志峰值达数亿条每秒，需要做到秒级入库、秒级可查；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;支持日志模糊匹配和统计&lt;/strong&gt;：单机日志查询常用到模糊匹配以及 awk/uniq/sort 等复杂统计，在新日志系统同样希望能够支持；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;支持模块级全量日志查询&lt;/strong&gt;：日常运营中有些用户投诉的问题并不确定具体发生时间，需要对模块进行全量日志（日志量达 TB 级别）查询。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;业界方案对比&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;公司内外有很多日志系统方案，根据是否对日志做全文检索可以分为两类：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;全文检索的日志系统&lt;/strong&gt;：对日志内容切分词和建倒排，通过查询关键词的倒排取交集支持模糊匹配，这类系统一般入库资源消耗较多，也不支持日志统计，典型实现有：ELK、Hermes 以及腾讯云日志服务(Cloud Log Service, CLS)等系统；&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;部分字段检索的日志系统&lt;/strong&gt;：只对部分字段建索引，支持特定字段的快速检索，入库资源消耗较低，但是这类系统对模糊匹配未能很好支持，也不支持日志统计，不支持模块级全量日志查询，如 wxlog、LogTrace 等系统。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们新设计的检索系统在资源消耗较小的前提下，很好满足背景所提的所有检索需求。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;方案设计的考虑&lt;/span&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;保存时间短和日志缺失的问题&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;单机存储空间的限制导致日志丢失，日志也没法长时间保存，如何突破单机存储空间限制呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;嗯，是的，使用分布式文件系统替换单机文件系统就可以了！在可水平扩展的分布式文件系统支撑下，存储空间无限大，日志不再因存储空间而丢失了。&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;日志查找效率低下问题&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;日志查找效率低下，其根源是日志散落到多台机器，需要登录到机器做日志 grep。引入了分布式文件系统存储全网日志后，我们看到的仍然是一个一个不相关的日志文件，快速定位日志仍然困难。如何提高日志定位的效率呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;索引！就像是利用索引提升数据库表查询效率一样，我们对日志数据建立索引，快速定位到所需日志。那么，需要构建怎样的索引呢？先看看面临的两种问题定位场景：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;开发收到模块告警，通过告警信息结合代码找到关键字，使用关键字查找模块告警时间段内的日志；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;根据用户投诉找到用户请求信息，使用用户请求信息查找所有关联模块的日志。从以上场景看出，我们通常根据模块+时间段+关键字或者用户请求信息查找日志。所以，对模块、时间、用户请求信息建索引提升日志查找效率。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;入库资源消耗问题&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;为了支持模糊查询，业界方案一般都会对日志内容分词建索引，这会消耗大量资源。日志查询系统有两个特点：每天只有数百次查询请求，日志存储模块（分布式文件系统）IO 密集、CPU 利用率低。为了支持用户模糊查询请求，入库时不对日志内容分词建索引。用户查询时，日志存储模块使用关键字对日志内容正则匹配过滤（利用本机空闲 CPU）。这样既解决了入库资源消耗高的问题，又解决了存储机 CPU 低利用率的问题。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;面临的挑战&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们通过分布式文件系统和索引解决了目前的问题，同时也带来了新的挑战：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;高性能&lt;/strong&gt;：目前企业微信日志量月级数 PB，日志数万亿条，天级数百 TB，面对如此海量日志，如何做到入库和查询的高性能？&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;可靠性&lt;/strong&gt;：引入了分布式文件系统以及索引带来更大的复杂性，如何保证整个日志系统可靠性？&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;支持灵活多变的用户查询需求&lt;/strong&gt;：通过调研发现，用户主要有以下 4 种日志查询使用场景：a) 一次用户请求关联的所有模块日志查询；b) 模块一段时间内日志模糊查询；c) 模块全量日志模糊查询；d) 查询日志统计（如：awk/uniq/sort 指令等）。如何支持如此灵活多变的用户查询需求？&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;名词解释&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在介绍系统前，先对使用的名词进行解释：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;callid：唯一标识一次用户请求，每条日志中都会携带 callid 信息；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;模糊查询：根据用户输入模块、时间段和关键字查询日志；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;全链路查询：根据 callid 查询一次用户请求所有关联的模块日志。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;系统架构&lt;/span&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.717607973421927&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAib1BibN5Jvwf4vGHpOvtDxDRNUiamFl2XUaCquToibq6qjXNuBhuoVIcWxQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1505&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;企业微信日志检索系统主要分为 6 个模块：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;LogAgent：和业务模块同机部署，对模块内日志进行聚集，数据批量写分布式文件系统，callid 索引批量发送到 LogMergeSvr 聚集；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;LogMergeSvr：对一段时间内的 callid 索引进行模块间聚集，批量写分布式文件系统；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;存储模块(分布式文件系统)：存储原始日志数据、时间索引和 callid 索引数据；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;LogIdxSvr：对 callid 索引进行全网聚合，底层存储用的是 Rocksdb；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;WebSvr：接收用户网页请求，并发查询 QuerySvr。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;QuerySvr：查询执行模块，支持全链路查询、模糊查询、awk 统计等。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;接下来分别阐述系统设计和实现中面临的挑战点以及解决办法。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;如何实现系统高性能&lt;/span&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;日志入库高性能&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;目前，企业微信全网日志入库峰值 qps 数亿条每秒，而分布式文件系统数据节点仅仅 20 台（单台 12 块 SATA 盘，单盘 IOPS 约 100 左右），我们如何使用少量数据节点支撑如此高峰值的日志秒级入库呢？&lt;/p&gt;&lt;h5 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;数据入库高性能&lt;/span&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在模糊查询场景下，用户使用模块/机器+时间段+关键字进行查询。为提升数据入库性能，我们以每台机器的 IP 作为分布式文件系统的目录，机器上模块打印的日志写入小时粒度的日志文件，这样不同机器写入自己独占的日志数据文件，相互间数据写入无竞争，入库性能最佳。与此同时，目录结构就相当于一个快速区分不同模块/机器的索引，这也能提升日志查询效率。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;为了进一步提升数据入库性能，LogAgent 使用缓冲队列缓存日志数据，累积 8MB 数据后批量顺序写入日志文件中，写 qps 降低为原本的 4 万分之一。同时为了快速查找日志数据，对 8MB 日志数据的时间戳采样，批量写入同目录下的时间索引文件中。&lt;/p&gt;&lt;h5 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;callid 索引入库高性能&lt;/span&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;同一 callid 索引散落在不同模块不同机器，为了全链路查询，需要对数亿条/秒的 callid 索引做秒级聚合，以支持秒级入库、秒级可查，这无疑是一个技术难题。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;为了解决这一难题，我们通过三重聚合减少 callid 索引写入压力，最终达到 qps 减少到千万分之一、一次 IO 读取 callid 所有日志位置的效果：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;模块内聚合：LogAgent 聚合模块内 callid 索引，批量写入 LogMergeSvr，qps 约减少到万分之一；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;模块间聚合：LogMergeSvr 聚合模块间一段时间内的 callid 索引，批量写分布式文件系统，qps 约减少到千分之一；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;全网聚合：callid 索引文件不利于高效读取，LogIdxSvr 利用 Rocksdb 的 Merge 聚合全网的 callid 索引，一次 IO 可读取 callid 所有日志位置。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.46911764705882353&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAibUKITIptJiayn2NUuT4eQo5PoiahZdhhCEfvpOHIibB0ZGC5pNaQAzgBDQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1360&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;日志查询高性能&lt;/span&gt;&lt;/h4&gt;&lt;h5 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;增加索引提升查询性能&lt;/span&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;开发通常依据模块、时间段、callid 这 3 个维度查询日志，为了加快查询性能也对这 3 个维度分别增加索引：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;模块：一个模块包含若干机器，每台机器在分布式文件系统中拥有独占的日志目录（用 IP 区分），用于保存机器小时粒度日志文件。通过模块找到所有机器 IP 后，可快速找到该模块的日志在分布式文件系统中的日志目录。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;时间段：日志数据保存在机器目录的小时粒度文件中，通过对日志时间采样保存为相应时间索引文件。当按照时间段查找日志时，可根据时间索引文件快速找到该时间段的日志位置范围。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;callid：解析日志建立 callid 到日志位置的索引，散落在多个模块的 callid 索引通过 LogAgent、LogMergeSvr 以及 LogIdxSvr 三重聚合后，最终存储在 LogIdxSvr 的 Rocksdb 中。全链路日志查询可通过读取一次 Rocksdb 获取所有相关日志位置，快速读取到所需日志。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h5 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;模糊查询高性能&lt;/span&gt;&lt;/h5&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;原始版本：并发检索
WebSvr 接收用户模糊查询请求（模块+时间段+关键字），依据模块获取机器列表后，按机器列表并发请求到多台 QuerySvr 执行机器粒度日志查询：通过机器 IP 找到机器日志目录，根据时间段拉取时间索引文件，确定日志数据范围，并发拉取日志到本机用关键字做模糊匹配。最终将匹配后的日志返回给 WebSvr 聚合展示给用户。&lt;/p&gt;&lt;p&gt;通过并发检索的优化手段，模糊查询一个模块一小时日志（12 台机器，7.95GB 日志量）耗时从 1 分钟降到 5.6 秒。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.6813880126182965&quot; data-type=&quot;jpeg&quot; data-w=&quot;1585&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAibm1icuIDoNPLpy40Mwq8FMXlX06rgfvtJlcgUhZzeyxBAvP90qVxUmibg/640?wx_fmt=jpeg&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;ol start=&quot;2&quot; data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;优化版本：模糊匹配下沉分布式文件系统
在系统压测时我们发现 QuerySvr 带宽和 cpu 存在性能瓶颈，原因是 QuerySvr 读取大量未模糊匹配的日志数据，打满了网络带宽，并且在 QuerySvr 做模糊匹配也会消耗大量 cpu 资源。我们需要进行性能优化。考虑到分布式文件系统是重 IO 操作，cpu 利用率很低，将模糊匹配逻辑下沉到分布式文件系统，这样既解决了 QuerySvr 带宽和 cpu 性能瓶颈问题，又充分利用了文件系统的 cpu，避免资源浪费。通过模糊匹配下沉的优化手段，模糊查询一个模块一小时日志（12 台机器，7.95GB 日志量）耗时从 5.6 秒降到 2.5 秒。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.5546995377503852&quot; data-type=&quot;jpeg&quot; data-w=&quot;1947&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAibBfdUeU7klsFjq2yY51fm3CIumX0blBOKzx4MTEG6bUIUpWZEzxfjWQ/640?wx_fmt=jpeg&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h5 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;全链路查询高性能&lt;/span&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;全链路查询和模糊查询类似，同样利用了并发提升查询性能，稍有不同的是全链路查询根据 callid 读取 LogIdxSvr 确定日志位置列表，按照位置列表并发读取日志数据，聚合后将日志返回给用户。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;如何保证系统可靠性&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们通过引入了分布式文件系统和索引服务解决了日志丢失、保存时间短和快速定位问题，但系统复杂性导致的可靠性问题，是我们面临的第二大挑战。&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;数据可靠性保证&lt;/span&gt;&lt;/h4&gt;&lt;h5 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;日志数据缓冲队列（共享内存+本机磁盘文件）&lt;/span&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;LogAgent 负责将日志数据和时间索引写入分布式文件系统，当分布式文件系统抖动时，为了不丢弃待写日志数据，LogAgent 使用缓冲队列（共享内存+本机磁盘文件）缓存日志数据，待抖动恢复后读出缓存数据写入文件系统。&lt;/p&gt;&lt;h5 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;索引可靠性保证&lt;/span&gt;&lt;/h5&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;服务抖动
LogIdxSvr 使用 Rocksdb 作为底层存储聚合全网 callid 索引，但是 Rocksdb 在高并发写入时容易出现写入抖动进而导致索引丢失，为了保证 callid 索引可靠性，LogMergeSvr 先将 callid 索引写入分布式文件系统保存，LogIdxSvr 从分布式文件系统拉，分布式文件系统当做 queue 使用起到削峰填谷作用，保证 callid 索引可靠性。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;机器坏盘
LogIdxSvr 出现坏盘会导致已聚合到本机的 callid 索引数据丢失，新起的 LogIdxSvr 重新拉取分布式文件系统的 callid 索引文件，可以重建 Rocksdb 的 callid 索引，保证系统可靠性。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;如何支持灵活多变的用户查询请求&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过前面的设计，目前可以根据模块+时间段+关键字或者 callid 查找到日志了，但是还不够，用户往往还需要对日志做任意维度模糊匹配、日志统计（如：uniq/sort/awk 等）以及模块级全量日志查询。&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;支持任意维度模糊匹配&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如前所述，通过在分布式文件系统实现模糊匹配逻辑，系统支持对日志做任意维度模糊匹配的需求。通过对比，选择性能最优的 RE2 正则匹配库实现模糊匹配逻辑。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.5393700787401575&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAibjeDCYVekpqmZscSgFdpdk9I3Q1N4YQ4He1zEyRUHNUSyw4Glmktz9w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;508&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;支持 awk/uniq/sort 等统计指令&lt;/span&gt;&lt;/h4&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;支持统计指令
用户不仅需要对日志做模糊匹配，还需要对匹配后的日志执行 awk/uniq/sort 等统计指令，其中涉及到指令相互嵌套执行，非常复杂，难以调用相关库实现。我们通过子进程调用系统 shell 支持这一需求。QuerySvr 从分布式文件系统拉取日志数据到本机后，子进程 shell 调用用户传入统计指令处理日志数据，最终结果返回给 WebSvr。子进程处理超时父进程将 kill 掉子进程，防止用户统计任务耗光 QuerySvr 资源。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.9254185692541856&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAibib8xqlOgibTSibJibKrXvO98qQPZ3GraoTPHgblM1St0KO2F8JysaDvPEA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;657&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;ol start=&quot;2&quot; data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;安全考虑
由于用户指令可由用户自定义输入，指令执行的安全问题需要重点考虑。通过两个方法确保执行指令的安全：&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;changeroot：使用 Linux 的 changeroot 避免用户指令操作系统重要目录；&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.5696594427244582&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAibw6MwzktJiaSvousUBALyAs58QScQibmUtozL7vd3tNqlUUlGLgjgtJRA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;646&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;沙盒限制：使用 Linux 支持的沙盒隔离技术，只允许执行特定指令。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.6555555555555556&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAibpOrVbj0Sib3kGkcJGibwibCuUJDMBYLOicwBIzRP44VcJsJP8dsyRmgQHw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;450&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;支持模块级全量日志查询——异步任务&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;模块级全量日志查询通常涉及 TB 级别日志量，因为涉及的数据量过大，查询耗时一般较长，无法给用户提供实时返回，我们通过提供异步任务功能支持这一需求。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;用户异步任务请求通过 WebSvr 转发到 QuerySvr，为避免 QuerySvr 宕机导致异步任务丢失，QuerySvr 会将异步任务写入一致性锁服务中存储，空闲的 QuerySvr 会从一致性锁服务抢锁，抢锁成功后执行该异步任务。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;QuerySvr 根据异步任务的模块信息读取机器列表，按照机器列表并发读取匹配的日志数据，按顺序写入本机磁盘中，在查询结束后更新一致性锁服务状态（存储机 ip 和路径），用户页面刷新会拉取到异步任务最新状态。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.5333333333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvasBoHV69oNfvHptKWUoULAibVh88zfMa5xOBUXR8Myb0cOI6r2IYYBehtFuQHoF5BWTdsNRTwg4iayg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1980&quot;/&gt;&lt;/figure&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>a0c060826b130cea042b911e91d0c8c0</guid>
<title>如何井井有条的管理开发任务（附任务管理模板）</title>
<link>https://toutiao.io/k/2gko5th</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在我们做一个开发任务的时候，有很多信息要管理。比如：任务的具体进度情况：哪些功能做完，哪些没做完，哪些阻塞了(等其他任务的完成)。任务关联的文档：需求文档，原型图，设计稿，接口文档等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大家可能会在项目管理软件的任务里放所有相关的信息。这样做的问题是：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;部分信息，在任务里没有合适的地方放。都放在备注里，信息又很杂乱。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;有些信息是给自己看，不适合公开的放在任务里。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如何井井有条的管理开发任务的这些信息呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我觉得，将任务管理的井井有条，关键是 2 点:&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;选择合适的信息展示方式。&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;将信息进行合理的分类。&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;信息展示方式&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我用思维导图来展示信息。思维导图适合用来组织信息和展示信息。以下是我虚构的 &lt;strong&gt;待办事宜&lt;/strong&gt; 任务的脑图:&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6457260556127703&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mEakJnD74m94r760FmzjsRrMRvcWexmxIibw1ibvM2TggIY4gvsjhNdyx4AQq8HZw8ibic5kqrMdsVZh6RZSoN4jmQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;971&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;任务信息分类&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;任务信息可以按照不同的维度分类。没有最好的分类方式，只要最适合自己的分类方式。我将任务信息分成以下几类：进度，关键时间节点，文档，对接人，测试要点，代码梳理。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;进度&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里放对任务分解后，子任务的进度的明细。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.68828125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/mEakJnD74m94r760FmzjsRrMRvcWexmxWf8dQuXGOxmRT6ziaNCPvN82taf24ZJDxnJ8d1eic1RKWgP6QPKX0Gtg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;可以给紧急的子任务加个标记。我这边是加了个红点。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;任务间的依赖关系的，也可以用导图很好的搞定。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.9907120743034056&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mEakJnD74m94r760FmzjsRrMRvcWexmxZBRibyP8Dn8ZTMicLgoUnyhBj1TyTW1Yr5K2qtomlWF1sEEUGrJqZ1DA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;323&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;管理进度，也可以用 checkbox 的方式。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.9907120743034056&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/mEakJnD74m94r760FmzjsRrMRvcWexmxZBRibyP8Dn8ZTMicLgoUnyhBj1TyTW1Yr5K2qtomlWF1sEEUGrJqZ1DA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;323&quot;/&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;关键时间节点&lt;/span&gt;&lt;span/&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里放任务的关键时间节点。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.39746835443037976&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/mEakJnD74m94r760FmzjsRrMRvcWexmxBOzSPk2YHT7lQicnWx7c4FYMW3nIFcI9qnzyUeH6hvI25guHwenvQYw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;790&quot;/&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;文档&lt;/span&gt;&lt;span/&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里放从需求到上线用到的所有的文档和账号。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;1.0149532710280373&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/mEakJnD74m94r760FmzjsRrMRvcWexmxSMDS22evZZx4Sv9VxYzIu1ODSuVSaNmT8phICafqJdM4ibtibVaUdGIg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;535&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在文字上绑网址，可以让内容简洁。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;对接人&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里放任务需要对接的人。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;1.055921052631579&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/mEakJnD74m94r760FmzjsRrMRvcWexmxvYYkkTYeicGPXMiaToT2RlLOTRY0ayYGAXickY7UB2qO8TMtcWM5meKhQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;608&quot;/&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;测试要点&lt;/span&gt;&lt;span/&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里放重要流程的说明和会影响的模块。自己跑一遍，没问题后，再交给测试。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.649546827794562&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/mEakJnD74m94r760FmzjsRrMRvcWexmxYljDzobaCYchX0HTFloof2PtDE5M5sbnoUOyeYSXeKcj5KjEvRCP7w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;662&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;功能的要点的描述会比较长，可以放备注里。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;代码梳理&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里放一些关键代码的地址和说明，方便以后改bug时，能更快的回忆起来。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5932504440497336&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/mEakJnD74m94r760FmzjsRrMRvcWexmxBX8kX3ETFH8DepW6Dn3Jb5hHc6nbm1SQ1fdduMuqLyxJJKL7O2AgYQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1126&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;领取任务管理模板&lt;/strong&gt;方式：关注下面公众号：&lt;strong&gt;前端GoGoGo&lt;/strong&gt;，发信息: &lt;strong&gt;项目模板&lt;/strong&gt;。&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzkwNzIyMTYzNA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/mEakJnD74m965xnGDuRc9yHa3d69a3nXZZO0qiaXjklno7xJqiaZ1tqotAEKOEBLNnbN3XB7zBpjNK5SzoqHyZibQ/0?wx_fmt=png&quot; data-nickname=&quot;前端GoGoGo&quot; data-alias=&quot;fegogogo&quot; data-signature=&quot;致力于提升前端收入。提供有深度的面试，晋级提升的前端内容。&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>b14384fedaf1a11f0454ed7ac0cec524</guid>
<title>如闪电划破雨夜，这些开源项目瞬间点亮了命令行</title>
<link>https://toutiao.io/k/q62fiq2</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.66640625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/xBgIbW1vdNMgkmSdShhiaW4OsKic6L4vETJD87pN2Lq2vYtyILJVJYDqEKdu48hbj4qdiaiaRgWV1LQLDmXVhgXQ6w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;作者：HelloGitHub-卤蛋&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我第一次使用 Linux 服务器是漆黑的界面上只有一行白色字母，末尾还有一个孤独闪烁的光标。我小心翼翼地输入第一个命令 &lt;code&gt;ls&lt;/code&gt;，&lt;span&gt;然后重复输入了好几遍界面依旧是漆黑一片。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.2713310580204778&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVwCWFY5BajTibTIicQfh7uWshu29rpjClFlJafCXIhYyho6dMmBSWibexg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;586&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;这种感觉就像在漆黑的夜空，天上连一颗星星都没有。&lt;/span&gt;&lt;span&gt;伸手不见五指，感觉孤独和无力...后来在漫长学习命令行操作的过程中，遇到了一些让我相见恨晚的命令行工具。&lt;/span&gt;&lt;span&gt;第一次相遇，它们就像雨夜的一道闪电，瞬间照亮了整个夜空（命令行），最后这些命令行开源项目变成了漆黑夜空中一颗颗闪耀的星星，一闪一闪亮晶晶...我差点唱出来✨&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下面我就逐一分享这些照亮漆黑命令行的开源项目，它们包含但不限于：&lt;strong&gt;增加色彩&lt;/strong&gt;、&lt;strong&gt;代替系统自带命令&lt;/strong&gt;、&lt;strong&gt;提高工作效率&lt;/strong&gt;。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;一、忘记那些 Linux 命令吧&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;那些年我们一起用过的 Linux 命令：cat、curl、top...忘记它们吧！&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;1、neofetch（代替 uname、hostname 等）&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：11.6k｜&lt;strong&gt;语言&lt;/strong&gt;：Shell&lt;/p&gt;&lt;p&gt;支持将近 150 种操作系统，展示操作系统信息的命令行工具。首先一条命令安装，然后一条命令启动。展示的信息包含：发行版本、内核、CPU、GPU 等。&lt;span/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIV3G5wNgctxXdN7zLoFeVmfIgWdQpvu40qAv8XAwyfiaNJp3z4XqWOibIg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5033112582781457&quot; data-w=&quot;755&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/dylanaraps/neofetch/wiki/Installation&lt;/p&gt;&lt;p&gt;命令：neofetch&lt;/p&gt;&lt;p&gt;地址：https://github.com/dylanaraps/neofetch&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;2、httpie（代替 cURL）&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：50.8k｜&lt;strong&gt;语言&lt;/strong&gt;：Python&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;cURL 的替代者，一款非常人性化的 HTTP 命令行客户端。安装简单使用方便，返回的结果还是高亮提高了可读性。适用于调试接口、查看服务器返回的信息。下面的是 cURL 和 httpie 的请求命令和结果对比图：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVOuDJWp6humh98ZXsZh3r2Qk9GPhjOcKXp1XGYx6gAiaBfW8ptibBkE1w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;1.3083333333333333&quot; data-w=&quot;1080&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/httpie/httpie#installation&lt;/p&gt;&lt;p&gt;命令：http [flags] [METHOD] URL [ITEM [ITEM]]&lt;/p&gt;&lt;p&gt;地址：https://github.com/httpie/httpie&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;3、htop（代替 top）&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：2.4k｜&lt;strong&gt;语言&lt;/strong&gt;：C&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;可代替 top 的交互式管理进程的命令行工具。就像这个项目名字一样，h 代表 for human，有了它就可以忘记 top 命令的各种参数了！&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVZWhuFvRgnEPEG65hJyZc43yjx804W3r050YVyRElkiawJkEgzCLrj8w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5282051282051282&quot; data-w=&quot;975&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://htop.dev/downloads.html&lt;/p&gt;&lt;p&gt;命令：htop&lt;/p&gt;&lt;p&gt;地址：https://github.com/htop-dev/htop&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;4、bat（代替 cat）&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：27k｜&lt;strong&gt;语言&lt;/strong&gt;：Rust&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;替代 cat 的命令行工具。你还在命令行用 cat 查看文件吗？那你就 out 啦！今天推荐的 bat 它不仅支持语法高亮，还能展示 Git 的改动。相信你用过 bat 后就不会再想用回 cat 了。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVlrGwnmlBwOw3Kz5HhmbZ85wpEsKZlFQRN5v4msrECcuZh46OVHpC1Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.49847560975609756&quot; data-w=&quot;656&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/sharkdp/bat#installation&lt;/p&gt;&lt;p&gt;命令：bat README.md&lt;/p&gt;&lt;p&gt;项目地址：https://github.com/sharkdp/bat&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;5、fsql（代替 find）&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：3.8k｜&lt;strong&gt;语言&lt;/strong&gt;：Go&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;用 SQL 的语法找文件。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.42270861833105333&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVHAiaPoGeibAibtLg25mNicQibBzGtNKjqUib7dfycS5ib8EMsGWicOqndoEYFg/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;1462&quot;/&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/kashav/fsql#installation&lt;/p&gt;&lt;p&gt;命令：fsql [options] [query]&lt;/p&gt;&lt;p&gt;地址：https://github.com/kashav/fsql&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;二、利刃出鞘+探囊取物&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;优秀的工具可以让你事半功倍，一个命令犹如利剑出鞘：斩杀 BUG、查数据如探囊取物。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;6、ctop&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：11.6k｜&lt;strong&gt;语言&lt;/strong&gt;：Go&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;实现了类 top 命令展示效果的 docker 容器监控工具。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVLdCuOYwJ1NKXFiaAmiaibRKtRK8Q4D401C6T6BGa1TUygtjslKcwg5mDg/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-ratio=&quot;0.34629629629629627&quot; data-w=&quot;1080&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/bcicen/ctop#install&lt;/p&gt;&lt;p&gt;命令：ctop&lt;/p&gt;&lt;p&gt;地址：https://github.com/bcicen/ctop&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;7、mycli&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：9.6k｜&lt;strong&gt;语言&lt;/strong&gt;：Python&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一个带语法高亮、自动补全的 MySQL 命令行客户端工具。用熟悉的命令，享受不一样的快感。另外还有：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVIHTz6jmFCQibcX8icB3z2ZYMslBicO7TkLGnicLONiaA6OhCGZbNEjSwNsQ/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-ratio=&quot;0.7241379310344828&quot; data-w=&quot;725&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/dbcli/mycli#detailed-install-instructions&lt;/p&gt;&lt;p&gt;命令：mycli [OPTIONS] [DATABASE]&lt;/p&gt;&lt;p&gt;地址：https://github.com/dbcli/mycli&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;8、gpustat&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：2.4k｜&lt;strong&gt;语言&lt;/strong&gt;：Python&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一个方便查询 GPU 状态的命令行工具。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIV1GqU1gU09T9iacBXFq7dSOicku0cMFaiczzw6T01Rw0iaHeWmQE8co3iaPw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.11296296296296296&quot; data-w=&quot;1080&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：pip install gpustat&lt;/p&gt;&lt;p&gt;命令：gpustat [OPTIONS]&lt;/p&gt;&lt;p&gt;地址：https://github.com/wookayin/gpustat&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;9、lazydocker&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：17.7k｜&lt;strong&gt;语言&lt;/strong&gt;：Go&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;带命令行 UI 的 docker 命令行管理工具，可以通过点点点来管理 docker。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5627198124267292&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVhic6E49PibH13KgSOg5qqRuHle5mDjCk4Doiaibs0s93tQ4ibnpecoXe0ibw/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;1706&quot;/&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/jesseduffield/lazydocker#installation&lt;/p&gt;&lt;p&gt;使用：https://github.com/jesseduffield/lazydocker#usage&lt;/p&gt;&lt;p&gt;地址：https://github.com/jesseduffield/lazydocker&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;10、ali&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：2.5k｜&lt;strong&gt;语言&lt;/strong&gt;：Go&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;能够实时展示分析的压力测试工具。这款命令行的压测工具可以在终端实时展示压测耗时曲线，很动感很酷。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5843793584379359&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVYrvtTsVK4J8GQrpFjsbSsqkxEpWBmjAwlJRHcH3hoTibo4fDrygvQGA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;1434&quot;/&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/nakabonne/ali#installation&lt;/p&gt;&lt;p&gt;命令：ali 地址&lt;/p&gt;&lt;p&gt;地址：https://github.com/nakabonne/ali&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;11、lazygit&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：19.9k｜&lt;strong&gt;语言&lt;/strong&gt;：Go&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Git 命令行客户端。它充分的体现出了命令行工具的高效，在拥有相同功能的前提下启动速度比各种 GUI 客户端快 N 倍，再配&lt;span&gt;‍&lt;/span&gt;上快捷键速度加倍。Ready？Go！&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.66484375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVhJstNeKUmoqNAewVuzVJHlzL1hq9kcKTH9K8Mkxfw5DBMAwhZblvVw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/jesseduffield/lazygit#installation&lt;/p&gt;&lt;p&gt;命令：lazygit&lt;/p&gt;&lt;p&gt;地址：https://github.com/jesseduffield/lazygit&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;三、平地起惊雷&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;有了它...世界貌似变得有一点点的不一样。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;不对...是很不一样。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;错...这明明是王炸！&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;12、ohmyzsh&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Star 数&lt;/strong&gt;：128k｜&lt;strong&gt;语言&lt;/strong&gt;：Shell&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;史称“终极 Shell”——ZSH 的工具，让你发现命令行前所未有的好用。开箱即用、海量主题，一声真香永远不会迟到。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xBgIbW1vdNNsoJQwOQ0oaIwTShsKGWIVGmZV1Jibh14rMBibCnEablFS3LMaaLqxZq2cI3aoDQvBeuxSQwAXoVrA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-ratio=&quot;0.5466034755134281&quot; data-w=&quot;633&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;安装：https://github.com/ohmyzsh/ohmyzsh#basic-installation&lt;/p&gt;&lt;p&gt;使用：https://github.com/ohmyzsh/ohmyzsh#using-oh-my-zsh&lt;/p&gt;&lt;p&gt;地址：https://github.com/ohmyzsh/ohmyzsh&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;最后&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;本期推荐了 &lt;strong&gt;12 个命令行开源项目&lt;/strong&gt;，加起来共有 &lt;strong&gt;287300 星🌟&lt;/strong&gt; 铺满夜空，照亮命令行与变强之路！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;原创不易求点赞、求分享，最后我在留言区等你~🤩&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7a9dd39b307409084b16e633ede57aa7</guid>
<title>状态管理本应如此简单</title>
<link>https://toutiao.io/k/458js9n</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;RichText ztext Post-RichText&quot;&gt;&lt;p/&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-c4173ebece5ae93f9d5a0208754e0f41_b.gif&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;760&quot; data-rawheight=&quot;176&quot; data-thumbnail=&quot;https://pic2.zhimg.com/v2-c4173ebece5ae93f9d5a0208754e0f41_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-c4173ebece5ae93f9d5a0208754e0f41_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;760&quot; data-rawheight=&quot;176&quot; data-thumbnail=&quot;https://pic2.zhimg.com/v2-c4173ebece5ae93f9d5a0208754e0f41_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-c4173ebece5ae93f9d5a0208754e0f41_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-c4173ebece5ae93f9d5a0208754e0f41_b.gif&quot;/&gt;&lt;/figure&gt;&lt;p&gt;2021年520前夕。近一年来主要都在做业务，不过对不断提升Coding质量与速度的追求和思考一直没停过。机缘巧合之下，有幸着重花时间完善了一套稳定、易用的状态管理方案。&lt;/p&gt;&lt;blockquote&gt;欢迎Star和订阅&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/Terry-Su/blogs-cn&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;我的博客&lt;/a&gt;。&lt;/blockquote&gt;&lt;p&gt;作者在工作历程中，由最初用redux，然后到用vuex，再到实验mobx、dva、react hooks甚至是自研工具，最后回归redux。&lt;/p&gt;&lt;p&gt;在此期间，一直在探寻简单易用，并且有完整类型提示的方案。就是当我们输入一两个关键字，IDE自动弹出模型对应dispatch方法，再输入空字符串&#x27;&#x27;，自动提示可能要调用的方法等。日常要写太多状态管理代码，完全没必要敲很多重复内容。&lt;/p&gt;&lt;p&gt;那么重新写一个状态管理库？&lt;/p&gt;&lt;p&gt;redux已经很好用，只是代码略微繁琐，为何要重新写？基于redux封装是否可行？&lt;/p&gt;&lt;p&gt;那是否要集成其他路由、模块化加载和网络请求等模块，让用户通过这个工具做大多数事？&lt;/p&gt;&lt;p&gt;这其实是很多集成式框架做的事。但状态管理本身就是单独一个模块，没必要和其他模块耦合在一起。模块化对于项目未来局部升级和改造要远方便于集成式。&lt;/p&gt;&lt;p&gt;既然讲到了类型推导提示，那么是否只有TypeScript项目才能完美支持？&lt;/p&gt;&lt;p&gt;当然很多类型都是借助TypeScript定义，但如今利用&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;JSDoc注释类型写法&lt;/a&gt;也能让JS项目支持类型提示和推导。&lt;/p&gt;&lt;p&gt;是否能兼容已有项目？&lt;/p&gt;&lt;p&gt;只要遵循相应规则，正常情况下都能兼容。&lt;/p&gt;&lt;p&gt;卖了那么久关子，接下来放出项目地址：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//github.com/tredux-org/tredux&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic4.zhimg.com/v2-f23f87fb59c0d5d8bd9966b4bc9acf9f_180x120.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;600&quot; class=&quot;LinkCard old LinkCard--hasImage&quot;&gt;&lt;span class=&quot;LinkCard-backdrop&quot;/&gt;&lt;span class=&quot;LinkCard-content&quot;&gt;&lt;span class=&quot;LinkCard-text&quot;&gt;&lt;span class=&quot;LinkCard-title&quot; data-text=&quot;true&quot;&gt;tredux-org/tredux&lt;/span&gt;&lt;span class=&quot;LinkCard-meta&quot;&gt;&lt;span&gt;​&lt;svg class=&quot;Zi Zi--InsertLink&quot; fill=&quot;currentColor&quot; viewbox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M13.414 4.222a4.5 4.5 0 1 1 6.364 6.364l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005a2.5 2.5 0 1 0-3.536-3.536l-3.005 3.005a.5.5 0 0 1-.707 0l-.707-.707a.5.5 0 0 1 0-.707l3.005-3.005zm-6.187 6.187a.5.5 0 0 1 .638-.058l.07.058.706.707a.5.5 0 0 1 .058.638l-.058.07-3.005 3.004a2.5 2.5 0 0 0 3.405 3.658l.13-.122 3.006-3.005a.5.5 0 0 1 .638-.058l.069.058.707.707a.5.5 0 0 1 .058.638l-.058.069-3.005 3.005a4.5 4.5 0 0 1-6.524-6.196l.16-.168 3.005-3.005zm8.132-3.182a.25.25 0 0 1 .353 0l1.061 1.06a.25.25 0 0 1 0 .354l-8.132 8.132a.25.25 0 0 1-.353 0l-1.061-1.06a.25.25 0 0 1 0-.354l8.132-8.132z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;github.com&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-imageCell&quot;&gt;&lt;img class=&quot;LinkCard-image LinkCard-image--horizontal&quot; alt=&quot;图标&quot; src=&quot;https://pic4.zhimg.com/v2-f23f87fb59c0d5d8bd9966b4bc9acf9f_180x120.jpg&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;其实封装难度并不大，最难的是如何让它在最简单的用法下，能够覆盖日常业务开发场景。&lt;/p&gt;&lt;p&gt;如果各位大佬觉得这套方案还可以，想用到自己项目甚至是公司项目中，但又不太放心依赖外部库，大可以将源码（一个TS文件）放到项目中单独引用。&lt;/p&gt;&lt;p&gt;现有方案已在业务项目中稳定运行，欢迎各位试用。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;b&gt;感谢你花时间阅读这篇文章。如果你喜欢这篇文章，欢迎点赞、收藏和分享，让更多的人看到这篇文章，这也是对我最大的鼓励和支持！&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;&lt;b&gt;欢迎通过微信（搜索“苏溪云的博客”或者扫描下方二维码）或&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/Terry-Su/blogs-cn&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Github&lt;/a&gt;订阅我的博客。&lt;/b&gt;&lt;/blockquote&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-d9df3d8fcb04cb686b665c175920c4ba_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;258&quot; data-rawheight=&quot;258&quot; class=&quot;content_image&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;258&quot; data-rawheight=&quot;258&quot; class=&quot;content_image lazy&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-d9df3d8fcb04cb686b665c175920c4ba_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>b59aec91c7c10fdb6d2cf61bec58e256</guid>
<title>聊聊部署在 Docker 容器里面的 Spring Boot 项目如何启用 Arthas</title>
<link>https://toutiao.io/k/p2gl29o</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;0.45161290322580644&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/YxPB778rLH3BjM2FGG69s6V6JGbyen3CXgDuz3oXicVSfJiaycY55N9PqgsYJEDbptbgypyoZD1z4hib40C28kafQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;124&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;【点击上方&lt;span data-mid=&quot;&quot;&gt;蓝字&lt;/span&gt;关注我们】&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;01&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;前言&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;arthas是啥可能大家都知道了，为了凑字数，我把官方的介绍再抄一下&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Arthas 是Alibaba开源的Java诊断工具，深受开发者喜爱。当你遇到以下类似问题而束手无策时，Arthas可以帮助你解决：&lt;/span&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;线上遇到某个用户的数据处理有问题，但线上同样无法 debug，线下无法重现！&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;是否有一个全局视角来查看系统的运行状况？&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;有什么办法可以监控到JVM的实时运行状态？&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;怎么快速定位应用的热点，生成火焰图？&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;span&gt;今天不详细讲如何使用arthas，因为之前有专门写了一篇博文介绍过，感兴趣的朋友可以查看如下链接&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI1MTY1Njk4NQ==&amp;amp;mid=2247492795&amp;amp;idx=1&amp;amp;sn=4d2d6fc8c692cf9babc2a8e55f4cd331&amp;amp;chksm=e9ed0acdde9a83db5730b765b1e38db03f837c3df7b9b5f51f5fff173f003194ea8e9acffd05&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;java应用线上诊断神器--Arthas&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;随着容器化的火热，可能有相当一部分的项目都是基于docker部署，今天主要就聊下运行在docker环境中的springboot项目，如何启用arthas&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;02&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;docker环境中的springboot项目，如何启用arthas&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;16.833333333333332&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Q6e43UC3v1HiaBRGY9kMxh3tLO1aBBkGyOkLibppRwafQGLWpwuJO8ejicFmygc0xEug5gKuge6miasNIBiaIaiak0iaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;方案一、进入容器内部执行相应命令&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;16.833333333333332&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/TLAfQEhpjHSPbp8RvqloqZfhr9oq4s6WqbTll9md0ZdsSxQCd5OvTakCISlraZ8vylH1cV3xQ3X6wE358HPuFQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;docker exec -it d2ce06ad8855 /bin/bash&lt;br mpa-from-tpl=&quot;t&quot;/&gt; 进入容器后，再运行&lt;br mpa-from-tpl=&quot;t&quot;/&gt; curl -O http&lt;span&gt;s:&lt;/span&gt;//arthas.aliyun.&lt;span&gt;com&lt;/span&gt;/arthas-boot.jar&lt;br mpa-from-tpl=&quot;t&quot;/&gt; java -jar arthas-boot.jar&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;这种方案的弊端在于容器销毁后，下次运行容器后，要再次下载arthas-boot.jar&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;16.833333333333332&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Q6e43UC3v1HiaBRGY9kMxh3tLO1aBBkGyOkLibppRwafQGLWpwuJO8ejicFmygc0xEug5gKuge6miasNIBiaIaiak0iaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;方案二、把arthas安装到基础镜像&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;16.833333333333332&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/TLAfQEhpjHSPbp8RvqloqZfhr9oq4s6WqbTll9md0ZdsSxQCd5OvTakCISlraZ8vylH1cV3xQ3X6wE358HPuFQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;FROM openjdk:8-jdk-alpine&lt;br mpa-from-tpl=&quot;t&quot;/&gt;VOLUME /tmp&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;#ENV JAVA_OPTS=&quot;-Dcom.sun.management.jmxremote.port=39083 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false&quot;&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;ENV JAVA_OPTS=&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;COPY localtime /etc/localtime&lt;br mpa-from-tpl=&quot;t&quot;/&gt;RUN &lt;span&gt;echo&lt;/span&gt; &lt;span&gt;&quot;Asia/Shanghai&quot;&lt;/span&gt; &amp;gt; /etc/timezone&lt;br mpa-from-tpl=&quot;t&quot;/&gt;ONBUILD COPY app.jar app.jar&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;ARG ARTHAS_VERSION=&lt;span&gt;&quot;3.5.0&quot;&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;ARG MIRROR=&lt;span&gt;false&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;ENV MAVEN_HOST=https://repo1.maven.org/maven2 \&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    ALPINE_HOST=dl-cdn.alpinelinux.org \&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    MIRROR_MAVEN_HOST=https://maven.aliyun.com/repository/public \&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    MIRROR_ALPINE_HOST=mirrors.aliyun.com &lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;# if use mirror change to aliyun mirror site&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;RUN &lt;span&gt;if&lt;/span&gt; &lt;span&gt;$MIRROR&lt;/span&gt;; &lt;span&gt;then&lt;/span&gt; MAVEN_HOST=&lt;span&gt;${MIRROR_MAVEN_HOST}&lt;/span&gt; ;ALPINE_HOST=&lt;span&gt;${MIRROR_ALPINE_HOST}&lt;/span&gt; ; sed -i &lt;span&gt;&quot;s/dl-cdn.alpinelinux.org/&lt;span&gt;${ALPINE_HOST}&lt;/span&gt;/g&quot;&lt;/span&gt; /etc/apk/repositories ; &lt;span&gt;fi&lt;/span&gt; &amp;amp;&amp;amp; \&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    &lt;span&gt;# https://github.com/docker-library/openjdk/issues/76&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    apk add --no-cache tini &amp;amp;&amp;amp; \ &lt;br mpa-from-tpl=&quot;t&quot;/&gt;    &lt;span&gt;# download &amp;amp; install arthas&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    wget -qO /tmp/arthas.zip &lt;span&gt;&quot;&lt;span&gt;${MAVEN_HOST}&lt;/span&gt;/com/taobao/arthas/arthas-packaging/&lt;span&gt;${ARTHAS_VERSION}&lt;/span&gt;/arthas-packaging-&lt;span&gt;${ARTHAS_VERSION}&lt;/span&gt;-bin.zip&quot;&lt;/span&gt; &amp;amp;&amp;amp; \&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    mkdir -p /opt/arthas &amp;amp;&amp;amp; \&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    unzip /tmp/arthas.zip -d /opt/arthas &amp;amp;&amp;amp; \&lt;br mpa-from-tpl=&quot;t&quot;/&gt;    rm /tmp/arthas.zip&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;ENTRYPOINT [&lt;span&gt;&quot;/sbin/tini&quot;&lt;/span&gt;, &lt;span&gt;&quot;--&quot;&lt;/span&gt;, &lt;span&gt;&quot;sh&quot;&lt;/span&gt;, &lt;span&gt;&quot;-c&quot;&lt;/span&gt;, &lt;span&gt;&quot;java &lt;span&gt;$JAVA_OPTS&lt;/span&gt; -Djava.security.egd=file:/dev/./urandom -jar /app.jar&quot;&lt;/span&gt; ]&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;16.833333333333332&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Q6e43UC3v1HiaBRGY9kMxh3tLO1aBBkGyOkLibppRwafQGLWpwuJO8ejicFmygc0xEug5gKuge6miasNIBiaIaiak0iaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;方案三、使用arthas-spring-boot-starter&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;16.833333333333332&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/TLAfQEhpjHSPbp8RvqloqZfhr9oq4s6WqbTll9md0ZdsSxQCd5OvTakCISlraZ8vylH1cV3xQ3X6wE358HPuFQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;h1 data-mid=&quot;&quot;&gt;01&lt;/h1&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;在项目的pom.xml引入&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;            &lt;span&gt;&amp;lt;&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;com.taobao.arthas&lt;span&gt;&amp;lt;/&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;            &lt;span&gt;&amp;lt;&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;arthas-spring-boot-starter&lt;span&gt;&amp;lt;/&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;            &lt;span&gt;&amp;lt;&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;${arthas.version}&lt;span&gt;&amp;lt;/&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;        &lt;span&gt;&amp;lt;/&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;h1 data-mid=&quot;&quot;&gt;02&lt;/h1&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;在yml进行配置&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这边配置又有两种方式&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;注：&lt;/strong&gt; 通过Arthas Tunnel Server/Client 来远程管理/连接多个Agent&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;因此我们首先要先安装Arthas Tunnel Server/Client&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;a、&lt;/strong&gt; 下载部署arthas tunnel server&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;https://github.com/alibaba/arthas/releases&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;b&lt;/strong&gt;、启动arthas-tunnel-server&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;示例&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;java&lt;/span&gt; &lt;span&gt;-jar&lt;/span&gt;  &lt;span&gt;arthas-tunnel-server-3&lt;/span&gt;&lt;span&gt;.5&lt;/span&gt;&lt;span&gt;.0-fatjar&lt;/span&gt;&lt;span&gt;.jar&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;注：&lt;/strong&gt; 默认情况下，arthas tunnel server的web端口是8080，arthas agent连接的端口是7777&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;c、&lt;/strong&gt; 在项目的yml做如下配置&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;artha&lt;span&gt;s:&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;  agent-id: ${ARTHAS_AGENT_ID:hsehdfsfghhwertyfad}&lt;br mpa-from-tpl=&quot;t&quot;/&gt;  app-name: ${spring.application.name}&lt;br mpa-from-tpl=&quot;t&quot;/&gt;  tunnel-server: ${ARTHAS_TUNNEL_SERVER:&lt;span&gt;w&lt;/span&gt;&lt;span&gt;s:&lt;/span&gt;//localhos&lt;span&gt;t:7777&lt;/span&gt;/&lt;span&gt;ws&lt;/span&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;注：&lt;/strong&gt; agentId要保持唯一，否则会在tunnel server上冲突，不能正常工作&lt;/p&gt;&lt;p&gt;&lt;strong&gt;d、&lt;/strong&gt; 效果演示&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.34981192907039227&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxKGnUcib5qIhE29YFGGuxWIMO6G51mB9Y4AcMuhKbk8cDtPuWJnCc3KzsdpXxOMb5gRB8v0y5FzOgw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1861&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;arthas:&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt; #&lt;/span&gt; 通过http访问的端口&lt;br mpa-from-tpl=&quot;t&quot;/&gt;  http-port: 8563&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;  #&lt;/span&gt; 通过telnet访问的端口&lt;br mpa-from-tpl=&quot;t&quot;/&gt;  telnet-port: 3658&lt;br mpa-from-tpl=&quot;t&quot;/&gt;  session-timeout: 1800&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;  #&lt;/span&gt; 绑定的ip&lt;br mpa-from-tpl=&quot;t&quot;/&gt;  ip: 0.0.0.0&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;注：&lt;/strong&gt; 如果配置 arthas.telnetPort为 -1 ，则不监听 telnet端口。如果配置 arthas.telnetPort为 0 ，则随机telnet端口。arthas.httpPort类似&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;效果演示&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.3675531914893617&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxKGnUcib5qIhE29YFGGuxWIMb6ECxPiaNPOzZz0Jo3cruHuV1TZh6ibG36d5iaYeKT37h8o5a0tRNpEXA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1880&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.6052303860523038&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxKGnUcib5qIhE29YFGGuxWIMWTzShxds3cmyViaZ0Rvg7pf4lfO4UibmiawibuPnlqHOUsceMdxVDJia4FQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;803&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;03&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;arthas入门使用&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;核心思想通过help命令，先通过help了解一下arthas有啥命令&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5364536453645364&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxKGnUcib5qIhE29YFGGuxWIMbMVnJicnpSgjA4pqgy86th4aic16lUFpyvUH1xMKzoourBuF8BzGCYicg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1111&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;然后过help 你感兴趣的命令，比如你对thread这个命令很感兴趣，则在命令行输入&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;help&lt;/span&gt; &lt;span&gt;thread&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5607287449392713&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxKGnUcib5qIhE29YFGGuxWIM3DTPJ2gxAgFdgbic7l2GC7ZoXl9eTcqvOer5NS8wLp5RInpcSqYhOfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1482&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;示例演示，比如排查项目中是否存在死锁&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;thread&lt;/span&gt; -b&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.1339031339031339&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxKGnUcib5qIhE29YFGGuxWIMmnJe6CXswYBNPribAYpOuibmD7xE1ibUL1EicOQzAsQbw6TZK7aNT6ynpQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1404&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们也比较常用dashboard命令来查看cpu、gc等信息&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;dashboard&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.3585038814396613&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxKGnUcib5qIhE29YFGGuxWIM4kmtgbq7E6LQxzndTyl2EjzpHzCMzkCicKoh5ichLm9YRV6KVnjGAiaUw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1417&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;04&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;总结&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;arthas确实降低我们排查java问题的难度，但arthas的命令那么多，很多时候我们都记不住，就算能记，我也不会去记，我正常使用的套路是先help 命令，然后找到相应的示例，最后照猫画虎。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果使用http或者telnet的话，基于安全考量，那个ip最好是使用&lt;strong&gt;内网ip&lt;/strong&gt;，不要像我示例直接0.0.0.0，我是为了演示方便。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;04&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span&gt;demo链接&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;4.857142857142857&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/0eStkRlFeLpRNN1wgDtolVObh8qGRlETQMIDXGNKvKYjEKuuWO4hzPiafrslXhVGBwcTMG3Jg1s024bHuwVI6yA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;28&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;https://github.com/lyb-geek/springboot-learning/tree/master/springboot-arthas&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>