<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>51beb20245df83c3fa5387f11dfceaa1</guid>
<title>[推荐] ElasticSearch 存储成本省 60%，稿定科技干货分享</title>
<link>https://toutiao.io/k/oy304tv</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;post_content markdown&quot;&gt;&lt;h1 id=&quot;背景&quot;&gt;背景&lt;/h1&gt;&lt;p&gt;稿定科技旗下稿定设计产品是一个聚焦商业设计的多场景在线设计平台，打破了软硬件间的技术限制，汇集创意内容与设计工具于一体，为不同场景下的设计需求提供优质的解决方案，满足图片、视频等全类型媒介的设计需求，让设计更简单。&lt;/p&gt;&lt;p&gt;我们使用 Elasticsearch（下文中简称为 ES） 作为日志检索组件，随着业务量的增长，每天有 2T 左右的新增数据，需要保存 15~30 天，给磁盘和系统带来了不小的压力。在 ES 中为了保证日志的写入和查询的性能，大多使用单位存储成本更高的高性能云盘。但是，在实际的业务场景中，超过 7 天的数据仅作低频使用，全部存储在高性能云盘必然会导致过高的成本和空间的浪费。&lt;/p&gt;&lt;h1 id=&quot;方案&quot;&gt;方案&lt;/h1&gt;&lt;p&gt;ElasticSearch 7.10 版本推出了索引生命周期概念，开始支持数据分层存储，可以指定不同节点使用不同的磁盘介质来区分冷热数据，比如使用 HDD 磁盘来存储温冷数据，能获得更大的使用空间和更低的成本。这个特性非常适合日志索引场景。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;在温冷数据的存储介质上，使用 JuiceFS 替代 HDD 磁盘，相当于获得了无限容量的存储空间。通过 ES 的索引生命周期管理，可以自动完成索引的创建 - 迁移 - 销毁整个生命周期管理，无需手工干预。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;在实践中，首先将 ES 集群升级到目前最新的 7.13 版本。然后拆分冷热节点，热节点优先考虑性能，冷节点优先考虑存储的容量和成本。同时，调整索引和模板方式，配置数据生命周期、索引模板和数据流，完成索引数据写入。&lt;/p&gt;&lt;p&gt;调整后整个索引的流转如下图所示：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;在索引创建时，配置 &lt;code&gt;index.routing.allocation.require.box_type:hot&lt;/code&gt; 进行节点筛选；&lt;/li&gt;&lt;li&gt;等待索引进入 warm 周期时，调整 &lt;code&gt;index.routing.allocation.require.box_type:warm&lt;/code&gt;，并迁移到 warm 节点后，数据进入冷节点存储，实际存储于 JuiceFS 中；&lt;/li&gt;&lt;li&gt;等待索引进入 delete 周期时，ES 会自动把索引数据删除。&lt;/li&gt;&lt;/ol&gt;&lt;h1 id=&quot;客户收益&quot;&gt;客户收益&lt;/h1&gt;&lt;p&gt;方案中使用的 JuiceFS 是什么呢？&lt;/p&gt;&lt;p&gt;JuiceFS 是一款面向云环境设计的企业级分布式文件系统。提供完备的 POSIX 兼容性，为应用提供一个低成本、空间无限的共享文件系统。使用 JuiceFS 存储数据，数据本身会被持久化在对象存储（例如，Amazon S3、阿里云 OSS 等)，结合 JuiceFS 的元数据服务来提供高性能文件存储。JuiceFS 在全球公有云服务中都提供有全托管服务，只需点点鼠标，十分钟配置好。同时 JuiceFS 在 2021年初在 GitHub 开源，受到全球开发者的关注和参与，目前已经获得 3700+ stars。&lt;/p&gt;&lt;p&gt;在本方案中 ES 集群 warm 节点使用 JuiceFS 做存储之后，我们不用再对这些节点做容量规划和扩容工作，也省去了节点故障时的数据迁移，降成本的同时还为运维带来很大的便利。&lt;/p&gt;&lt;p&gt;JuiceFS 的持久层使用对象存储，弹性计费，TCO 比使用普通云盘还要低。在本方案的 ES 集群中，Hot 节点使用的云盘价格为 1000元/TB/月，使用全托管的 JuiceFS 服务加上对象存储的开销，价格约为 250元/TB/月。ES 集群总容量 60TB+，通过冷热分层处理，&lt;strong&gt;75% 的数据存在 JuiceFS 中，仅存储成本已经节省近 60%。如果再加上运维团队介绍的时间精力，这个方案为客户的数据存储带来的 TCO 下降至少有 70%。&lt;/strong&gt;&lt;/p&gt;&lt;h1 id=&quot;实践&quot;&gt;实践&lt;/h1&gt;&lt;h2 id=&quot;集群配置&quot;&gt;集群配置&lt;/h2&gt;&lt;p&gt;集群共 9 个节点，⼀个独⽴的 master 节点（elastic_001），另外 8 个数据节点，其中有 5 个热数据节点（elastic_002 ~ elastic_006），3 个冷数据节点（elastic_007 ~ elastic_009）。&lt;/p&gt;&lt;h2 id=&quot;目录挂载与配置&quot;&gt;目录挂载与配置&lt;/h2&gt;&lt;p&gt;JuiceFS 挂载在 ES 冷数据节点，提供 ES 的数据⽬录。&lt;/p&gt;&lt;p&gt;节点配置有⼀块 2T 的数据盘，挂载在 /data ⽬录，ES 进程以容器的⽅式启动，数据盘挂载的是系统的 &lt;code&gt;/data/elastic&lt;/code&gt; ⽬录，由于使⽤的容器挂载系统⽬录的⽅式，不能通过 &lt;strong&gt;&lt;em&gt;*软链*&lt;/em&gt;&lt;/strong&gt; 的⽅式将 ES 数据⽬录 ( &lt;code&gt;/data/elastic&lt;/code&gt; ) 指向 JuiceFS 挂载的某个⼦⽬录，使⽤了 Linux 系统的 bind mount 将 JuiceFS 的⼦⽬录挂载到 &lt;code&gt;/data/elastic&lt;/code&gt; 这个路径上。⽐如在 007 节点上：&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;# ./juicefs mount gd-elasticsearch-jfs --attrcacheto=1 --entrycacheto=1 \ 
--cache-dir=/data/jfsCache --cache-size=307200 \
--upload-limit=800 --writeback /jfs
# mount -o bind /jfs/data-elastic-pro-007 /data/elastic
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这样在 &lt;code&gt;/data/elastic&lt;/code&gt; ⽬录看到 &lt;code&gt;/jfs/data-elastic-pro-007&lt;/code&gt; 的内容。&lt;/p&gt;&lt;p&gt;在 008 和 009 节点上也做类似挂载操作。&lt;/p&gt;&lt;p&gt;如果您还不熟悉 JuiceFS 的初始化、挂载等基本操作，请参考 &lt;a href=&quot;https://github.com/juicedata/juicefs/blob/main/docs/zh_cn/README.md&quot;&gt;JuiceFS 官方文档&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;本地磁盘⽬录使⽤的是 &lt;code&gt;/data/jfsCache/gd-elasticsearch-jfs/rawstaging/&lt;/code&gt; ，请注意不要删除这个⽬录中的任何⽂件，否则可能出现数据丢失。
&lt;code&gt;cache-size&lt;/code&gt; 和 &lt;code&gt;upload-limit&lt;/code&gt; 分别⽤来限制本地的读缓存使⽤空间为 300GiB，写对象存储的带宽不超过 800Mbps。&lt;code&gt;attrcacheto&lt;/code&gt; 和 &lt;code&gt;entrycacheto&lt;/code&gt; 分别表示内核的 attr cache 和 entry cache 的缓存超时时间，单位是秒。&lt;/p&gt;&lt;h1 id=&quot;性能优化&quot;&gt;性能优化&lt;/h1&gt;&lt;h2 id=&quot;降低节点负载&quot;&gt;降低节点负载&lt;/h2&gt;&lt;p&gt;在采用 JuiceFS 之前，ES 集群生命周期中配置了 Force Merge，具体配置项为 warm.actions.forcemerge.max_num_segments: 1，它会导致数据在 Rollover 时重新 Merge，给 CPU 带来极大的压力。而这步动作是完全没必要的，关闭 Force Merge 配置即可避免不必要的性能开销，降低节点负载。&lt;/p&gt;&lt;h2 id=&quot;rollover-参数配置优化&quot;&gt;Rollover 参数配置优化&lt;/h2&gt;&lt;p&gt;由于 warm 阶段数据写入 JuiceFS，最终会持久化到对象存储上，应用层不用再存储多副本，可以在索引 Rollover 过程中，设置 replicas 为 0，即 &lt;code&gt;warm.actions.number_of_replicas: 0&lt;/code&gt;。&lt;/p&gt;&lt;p&gt;另外，考虑当索引数据迁移到 warm 阶段后，数据并不再写入，可以设置 warm 阶段索引只读，即 &lt;code&gt;warm.actions.readonly: {}&lt;/code&gt;，关闭索引的数据写入可以减少内存占用量。&lt;/p&gt;&lt;h1 id=&quot;总结&quot;&gt;总结&lt;/h1&gt;&lt;p&gt;随着时间的推移和业务量的增长，企业势必面临更大规模的数据存储和管理上的双重挑战。在本案中，稿定科技充分发挥 ElasticSearch 的生命周期管理能力，根据业务需要将日志数据进行分层存储。将需要频繁使用的热数据保存在 SSD，而超过 7 天的低频使用数据则存储在性价比更高的 JuiceFS，为客户节省存储成本 60%。同时，JuiceFS 还为应用提供近乎无限的弹性空间，省去了容量规划、扩容、数据迁移等一系列的运维工作，提升了企业 IT 架构的效率。&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>9034a34e03d66e13f69f724d3094e887</guid>
<title>[推荐] Go 业务开发中常用的几个开源库</title>
<link>https://toutiao.io/k/4hr4ykg</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;前言&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;哈喽，大家好，我是&lt;code&gt;asong&lt;/code&gt;。拖更了好久，这周开始更新。&lt;/p&gt;&lt;p&gt;最近总有一些初学&lt;code&gt;Go&lt;/code&gt;语言的小伙伴问我在业务开发中一般都使用什么web框架、开源中间件；所以我总结了我在日常开发中使用到的库，这些库不一定是特别完美的，但是基本可以解决日常工作需求，接下来我们就来看一下。&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;code&gt;Gin&lt;/code&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Gin&lt;/code&gt;是一个用&lt;code&gt;Go&lt;/code&gt;编写的&lt;code&gt;Web&lt;/code&gt;框架，它是一个类似于&lt;code&gt;martini&lt;/code&gt;但拥有更好性能的&lt;code&gt;API&lt;/code&gt;框架。基本现在每个&lt;code&gt;Go&lt;/code&gt;初学者学习的第一个&lt;code&gt;web&lt;/code&gt;框架都是&lt;code&gt;Gin&lt;/code&gt;。在网上看到一个关于对各个Go-web框架受欢迎的对比：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-fileid=&quot;100001887&quot; data-ratio=&quot;0.3218283582089552&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/CqB2u93NwB8wnpZqk8mDTibMyUsE0bhGEOyI5V43z5WAshfFx69VwbI8uia30qSLQXtePLBIhJic9BM3gK6mBiajicQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1072&quot;/&gt;&lt;figcaption&gt;来自网络&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们可以看到&lt;code&gt;Gin&lt;/code&gt;在社区受欢迎排第一，Gin 框架往往是进行 Web 应用开发的首选框架，许多公司都会选择采用&lt;code&gt;Gin&lt;/code&gt;框架进行二次开发，加入日志，服务发现等功能，像Bilibili 开源的一套 Go 微服务框架 Kratos 就采用 Gin 框架进行了二次开发。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;学习&lt;code&gt;Gin&lt;/code&gt;通过他的官方文档就可以很快入手，不过文档时英文的，这个不用担心，我曾翻译了一份中文版，可以到我的公众号后台获取，回复【gin】即可获取。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;github地址：https://github.com/gin-gonic/gin&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;code&gt;zap&lt;/code&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;zap&lt;/code&gt;是&lt;code&gt;uber&lt;/code&gt;开源的日志库，选择&lt;code&gt;zap&lt;/code&gt;他有两个优势：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;它非常的快&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;它同时提供了结构化日志记录和printf风格的日志记录&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大多数日志库基本都是基于反射的序列化和字符串格式化的，这样会导致在日志上占用大量&lt;code&gt;CPU&lt;/code&gt;资源，不适用于业务开发场景，业务对性能敏感还是挺高的。&lt;code&gt;zap&lt;/code&gt;采用了不同的方法，它设计了一个无反射、零分配的 JSON 编码器，并且基础 Logger 力求尽可能避免序列化开销和分配。通过在此基础上构建高级 SugaredLogger，zap 允许用户选择何时需要计算每次分配以及何时更喜欢更熟悉的松散类型的 API。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;zap&lt;/code&gt;的基准测试如下：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-fileid=&quot;100001885&quot; data-ratio=&quot;0.5942275042444821&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/CqB2u93NwB8wnpZqk8mDTibMyUsE0bhGEibhiattTHJRP6aXQOAYyqTUScGmfDICWABrwOPOpL0UtMBG32Nib8JiaTQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;589&quot;/&gt;&lt;figcaption&gt;来自官方文档&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;可以看出&lt;code&gt;zap&lt;/code&gt;的效率完全高于其他日志库，选谁不用我明说了吧！！！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;github地址：https://github.com/uber-go/zap&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;code&gt;jsoniter&lt;/code&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;做业务开发离不开&lt;code&gt;json&lt;/code&gt;的序列化与反序列化，标准库虽然提供了&lt;code&gt;encoding/json&lt;/code&gt;，但是它主要是通过反射来实现的，所以性能消耗比较大。&lt;code&gt;jsoniter&lt;/code&gt;可以解决这个痛点，其是一款快且灵活的 JSON 解析器，具有良好的性能并能100%兼容标准库，我们可以使用jsoniter替代encoding/json，官方文档称可以比标准库&lt;strong&gt;快6倍&lt;/strong&gt;多，后来Go官方在go1.12版本对 json.Unmarshal 函数使用 sync.Pool 缓存了 decoder，性能较之前的版本有所提升，所以现在达不到&lt;strong&gt;快6倍&lt;/strong&gt;多。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-fileid=&quot;100001884&quot; data-ratio=&quot;0.6072144288577155&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/CqB2u93NwB8wnpZqk8mDTibMyUsE0bhGEMgjb8KDsdAoDnYTRRhS8AowMS6vVL7Q0DsnVaCOzSg7DBrSicKvkZJg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;499&quot;/&gt;&lt;figcaption&gt;来自官方文档&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;github地址：https://github.com/json-iterator/go&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;对于&lt;code&gt;jsoniter&lt;/code&gt;优化原理感兴趣的可以移步这里：http://jsoniter.com/benchmark.html#optimization-used&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;code&gt;gorm&lt;/code&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;gorm&lt;/code&gt;是一个使用&lt;code&gt;Go&lt;/code&gt;语言编写的&lt;code&gt;ORM&lt;/code&gt;框架，文档齐全，对开发者友好，并且支持主流的数据库：&lt;code&gt;MySQL&lt;/code&gt;, &lt;code&gt;PostgreSQL&lt;/code&gt;, &lt;code&gt;SQlite&lt;/code&gt;, &lt;code&gt;SQL Server&lt;/code&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;个人觉得使用&lt;code&gt;gorm&lt;/code&gt;最大的好处在于它是由国人开发，中文文档齐全，上手很快，目前大多数企业也都在使用&lt;code&gt;gorm&lt;/code&gt;。我们来一下&lt;code&gt;gorm&lt;/code&gt;的特性：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;全功能 ORM&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;关联 (Has One，Has Many，Belongs To，Many To Many，多态，单表继承)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Create，Save，Update，Delete，Find 中钩子方法&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;支持 &lt;code&gt;Preload&lt;/code&gt;、&lt;code&gt;Joins&lt;/code&gt; 的预加载&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;事务，嵌套事务，Save Point，Rollback To Saved Point&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Context、预编译模式、DryRun 模式&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;批量插入，FindInBatches，Find/Create with Map，使用 SQL 表达式、Context Valuer 进行 CRUD&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;SQL 构建器，Upsert，数据库锁，Optimizer/Index/Comment Hint，命名参数，子查询&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;复合主键，索引，约束&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Auto Migration&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;自定义 Logger&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;灵活的可扩展插件 API：Database Resolver（多数据库，读写分离）、Prometheus…&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;每个特性都经过了测试的重重考验&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;开发者友好&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;github地址：https://github.com/go-gorm/gorm&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;官方文档：https://gorm.io/zh_CN/docs/index.html&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;code&gt;robfig/cron&lt;/code&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;github地址：https://github.com/robfig/cron&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;业务开发更离不开定时器的使用了，&lt;code&gt;cron&lt;/code&gt;就是一个用于管理定时任务的库，用 Go 实现 Linux 中&lt;code&gt;crontab&lt;/code&gt;这个命令的效果，与Linux 中&lt;code&gt;crontab&lt;/code&gt;命令相似，&lt;code&gt;cron&lt;/code&gt;库支持用 &lt;strong&gt;5&lt;/strong&gt; 个空格分隔的域来表示时间。&lt;code&gt;cron&lt;/code&gt;上手也是非常容易的，看一个官方的例子：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;  &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;time&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;&quot;github.com/robfig/cron/v3&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;  c := cron.New()&lt;br/&gt;&lt;br/&gt;  c.AddFunc(&lt;span&gt;&quot;@every 1s&quot;&lt;/span&gt;, &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;    fmt.Println(&lt;span&gt;&quot;tick every 1 second run once&quot;&lt;/span&gt;)&lt;br/&gt;  })&lt;br/&gt;  c.Start()&lt;br/&gt;  time.Sleep(time.Second * &lt;span&gt;10&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;针对&lt;code&gt;cron&lt;/code&gt;的使用可以参考这篇文章：https://segmentfault.com/a/1190000023029219&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;之前我也写了一篇&lt;code&gt;cron&lt;/code&gt;的基本使用，可以参考下：https://mp.weixin.qq.com/s/Z4B7Tn8ikFIkXVGhXNbsVA&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;code&gt;wire&lt;/code&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;都&lt;code&gt;1202&lt;/code&gt;年了，应该不会有人不知道依赖注入的作用了吧。我们本身也可以自己实现依赖注入，但是这是在代码量少、结构不复杂的情况下，当结构之间的关系变得非常复杂的时候，这时候手动创建依赖，然后将他们组装起来就会变的异常繁琐，并且很容出错。Go语言社区有很多依赖注入的框架，可以分为两个类别：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;依赖反射实现的运行时依赖注入：inject、uber、dig&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;使用代码生成实现的依赖注入：wire&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;个人觉的使用&lt;code&gt;wire&lt;/code&gt;进行项目管理是最好的，在代码编译阶段就可以发现依赖注入的问题，在代码生成时即可报出来，不会拖到运行时才报，更便于&lt;code&gt;debug&lt;/code&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;wire&lt;/code&gt;的使用也是非常的简单，关于&lt;code&gt;wire&lt;/code&gt;的使用我之前也写了一篇文章，可以参考一下：https://mp.weixin.qq.com/s/Z4B7Tn8ikFIkXVGhXNbsVA&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;github地址：https://github.com/google/wire&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;code&gt;ants&lt;/code&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;某些业务场景还会使用到&lt;code&gt;goroutine&lt;/code&gt;池，&lt;code&gt;ants&lt;/code&gt;就是一个广泛使用的goroute池，可以有效控制协程数量，防止协程过多影响程序性能。&lt;code&gt;ants&lt;/code&gt;也是国人开发的，设计博文写的也很详细的，目前很多大厂也都在使用&lt;code&gt;ants&lt;/code&gt;，经历过线上业务检验的，所以可以放心使用。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;github地址：https://github.com/panjf2000/ants&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;ants&lt;/code&gt;源码不到&lt;code&gt;1k&lt;/code&gt;行，建议大家赏析一下源码～。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;总结&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;本文列举的几个库都是经常被使用的开源库，这几个库你都掌握了，基本的业务开发都没有啥问题了，一些初学者完全可以通过这几个库达到入门水平。还有一些库，比如：&lt;code&gt;go-redis&lt;/code&gt;、&lt;code&gt;go-sql-driver&lt;/code&gt;、&lt;code&gt;didi/gendry&lt;/code&gt;、&lt;code&gt;golang/groupcache&lt;/code&gt;、&lt;code&gt;olivere/elastic/v7&lt;/code&gt;等等，这些库也是经常使用的，入门都比较简单，就不这里详细介绍了。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果大家也有经常使用的，比较好的开源库，欢迎推荐给我，我也学习学习！！！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;好啦，本文就到这里了，素质三连（分享、点赞、在看）都是笔者持续创作更多优质内容的动力！我是&lt;code&gt;asong&lt;/code&gt;，我们下期见。&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;创建了读者交流群，欢迎各位大佬们踊跃入群，一起学习交流。入群方式：关注公众号获取。更多学习资料请到公众号领取。&lt;/strong&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzkyNzI1NzM5NQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/CqB2u93NwB96zTfSmymj9jWokyhvSIXMRcLRAfFJsrB4uz6HBsml4T6iaia3yyCSB4aicX97icT7xBUCgw4O1PsKFQ/0?wx_fmt=png&quot; data-nickname=&quot;Golang梦工厂&quot; data-alias=&quot;AsongDream&quot; data-signature=&quot;asong是一名后端程序员，目前就职于一家电商公司，专注于Golang技术，定期分享Go语言、MySQL、Redis、Elasticsearch、计算机基础、微服务架构设计、面试等知识。这里不仅有技术，还有故事！&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;推荐往期文章：&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7cff58d8347fb119a5ed37e06258523c</guid>
<title>[推荐] 团队管理那点破事！OKR 绩效、核心人才、面试、技术分享、研发流程</title>
<link>https://toutiao.io/k/135ujiu</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;大家好，我是Tom哥~&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;今天来聊聊团队管理，可能你现在还是一线开发，没有带团队，感觉这个话题与你无关，其实不然。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;程序员的职业生涯曲折，技术更新迭代快，走技术深度，走架构师路线，势必要付出常人的时间和精力。而管理则可以更好的复用之前经验。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;知其然，知其所以然。现在，对管理拒绝的人总有一天，你会经历思想转变。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;作为管理者，我们平时都会遇到哪些问题？又是如何来解决这些问题？好的经验我们要学会借鉴，来看看今天要聊的问题概要&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-fileid=&quot;100003489&quot; data-ratio=&quot;0.7683923705722071&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2KTof9YshweUJQcqPoODQreibRwB2ibv73zhFsficibKWObzgoIgiah19mUicJuSSicPU11y6wOdr8GxvGtlyZkn4cricw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;734&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;br/&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;做为团队负责人，你是如何带领团队的？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;1、角色认知、心态转变，“管人”和“理事”，借助团队拿结果&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;2、OKR、KPI考核&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;3、平衡好技术和业务发展矛盾&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;4、技术储备和未来的技术规划，为业务预留空间&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;5、知人善任，人才梯度培养&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;6、方向要对、格局要大，与公司战略保持一致&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;7、制定好团队目标&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;8、技术分享，培养团队的技术氛围&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;9、团建&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;10、以人为本，激发每个人的积极性&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;更多内容，参考 &lt;/span&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg2NzYyNjQzNg==&amp;amp;mid=2247484897&amp;amp;idx=1&amp;amp;sn=69934454723b5c18b754d86d95d4a2ff&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;第一次带团队，感觉很慌怎么办？&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;开发规范流程，需要做哪些事情？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;严格约定团队的开发规范，如：IDE 代码模板、命名规范(mysql建表、redis key 前缀，以及application.properties中的各种配置项，可以参考阿里代码规约)，代码ci规范，API命名，统一日志规范，MySQL建表&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;严格的开发流程，如：需求评审、技术方案设计、方案评审、测试用例评审、编码、代码 Review、测试、发布，线上发布要注意灰度。回滚机制&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;对于一些通用的逻辑，要注意抽取公共模块&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;技术框架选型要有严格流程&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;团队未来规划，负责人要怎么做？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：这个分为两部分。&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;一个是了解系统状况，有哪些历史技术债务（如：架构优化、性能优化、高可用、可伸缩等）需要分阶段偿还，提前做好时间安排。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;提前了解业务规划，为了实现业务目标，我们要做哪些技术储备&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如何让自己的团队高效且有战斗力？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;1、业务支撑。按优先级将业务分为重点项目、日常项目。优先保证核心项目所需的开发资源。另外，经常与业务同学互通业务想法，提前做好技术储备。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;2、骨干拉平。对团队经常组织技术培训，核心的技术骨干能轮动工作内容，每个系统都有人员互补。遇到紧急项目时，一个骨干+几个研发，就可以快速支撑一个项目。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;3、架构升级，为业务预留技术储备。如：分布式、服务化、中台、中心化、中间件、平台化等&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;4、工程效率。包括动态化、配置化、工具化、自动化&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;5、系统稳定性。构建完善的报警监控系统、流控、熔断、降级、容灾、回滚、灰度，保障系统的稳定性。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;更多内容，&lt;/span&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg2NzYyNjQzNg==&amp;amp;mid=2247484862&amp;amp;idx=1&amp;amp;sn=70f083d3726cba543b5369e82ba90d8b&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;如何打造一个高效的研发团队&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如何定制高效的研发流程？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：流程可以帮助我们更规范的做事情，提高整体的工作效率，进而提高产出。&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;产品层面，统一将业务需求收集到“需求池”中，每周定期 review 需求，将一些优先级较高的需求整合、立项、排期&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;RPD 方案编写，包括界面、功能、逻辑、交互等&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;PRD 方案评审，包括业务准确性、技术可行性评估&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;编写技术方案，并组织评审&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;项目计划，开发任务分解，人力成本，时间评估&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;各角色（前端、后端、客户端等）进入开发阶段，组织每日站立晨会，跟进项目遇到的问题，并及时做出调整。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;代码 review，对不合理的地方及时调整&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;功能测试、性能测试、集成测试&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;预发环境检验&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;发布上线&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;项目经验总结&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如何营造团队的技术氛围？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：物以类聚，人以群分。大到一个公司，小到一个团队，都有自己的味道。如果【味道】缺失，那团队的稳定性存在极大风险。&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;技术分享，输出倒逼输入，锻炼分享人的演讲能力，同时还能提高团队的整体技术能力&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;代码CR，可以点对点审查，也可以团队成员一起审查。既能保证代码质量，还能让大家对系统进一步了解&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;代码好坏味道，组织一些活动，对于一些优秀的代码、坏代码，拿出来通晒&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;读书会。一个人的成长离不开持续的学习输入。招聘的候选人要有很强的学习热情，有较强的自律性。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;鼓励创新，紧跟市场前沿，对于一些新技术在充分验证可行性后，可以引入到工作中。当然，创新是有风险的，管理者要充分衡量利弊。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;推行自动化，工具化。管理者要鼓励工程师创造工具、引入工具，释放一些低效工作。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;建立和维护好团队的技术氛围，需要自上而下的技术导向，需要各级老板的鼎力支持，需要每位团队成员参与其中、融入其中&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如何做团队的绩效管理？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：肯定要引入一些科学管理方法，比如：KPI、OKR。kpi全称 Key Performance Indicator，只看结果，不关心过程，只要结果拿到了即可，适合销售、运营等考核指标相对明确的岗位。研发岗推荐使用OKR，根据目标自己定义关键节点的Key Result，更加能激发个人的主动性。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;使用OKR工具，要关注几个点：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;1、如何制定OKR？目标一定要清晰明确，有很强的激励作用，振奋人心；有实际价值；通过自己的努力，短期内可以实现。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;2、持续跟踪OKR的落地执行，每周、每月、每季度都要定期回顾，不断优化对齐目标，做到信息透明、共享，让每位团队成员都能收获成长的快乐。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;3、OKR评估，分为自评、主管打分。OKR 评分 = 自我评分 x 20% + 同事评分 x 30% + 主管评分 x 50%&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;4、OKR复盘。考核不是最终目的，发现问题并最终解决问题才是我们的终极目标。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;更多内容，参考之前文章  &lt;/span&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg2NzYyNjQzNg==&amp;amp;mid=2247484883&amp;amp;idx=1&amp;amp;sn=f92f9dcc0f644b20aaac385fe8bfe3ba&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;作为技术团队TL，如何运用OKR提高团队产出&lt;/span&gt;&lt;/a&gt;&lt;strong/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如何做一个合格的面试官？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;首先，了解招聘岗位的工作职责，技能要求，岗位定级，清楚招聘的候选人要具备什么能力&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;简历筛选，对于一些不太确定的可以约现场聊聊，毕竟人才稀缺&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;面试前，提前浏览下候选人的简历，了解其过往项目经历，这样短期内更容易全面考察候选人&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;面试不应该只局限技术，关于沟通力、团队协作、职业规划、价值观等软性方面也要考察&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;面试尾声，可以问问候选人有什么想了解的？毕竟清楚彼此双方核心诉求，才能更长远合作&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;面试结束后，及时填写面试反馈，便于后续流程推进&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如何招到核心人才？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：核心人才主要关注两点：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;1、价值观。如果员工的价值观与公司不符，即使能力再强，也很难融入集体，创造价值。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;2、技术能力。这个主要是通过两个方面来把控。一个是入职的技术面试，一般有2~4轮，甚至还有部门交叉面试，全方位了解候选人的技术实力。另一个是，由于候选人之前的工作经历和方向与新工作存在一定差异性，候选人能否快速适应新工作环境，所以，会有一个试用期，试用期会制定一个考核目标，直接主管和HRBP 会定期与候选人沟通，答疑解惑，帮助候选人快速投入新的工作中。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如何留住核心人才？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：做产品是为了满足用户需求。内部员工也是一样，&lt;strong&gt;先成就员工，再成就团队，最后成就企业&lt;/strong&gt;。给每个员工足够的成长机会，让他对公司有归属感，找到自己的目标与追求。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;对症下药，清楚了解每个员工的诉求点：提升自身技术水平、升职加薪、想带团队。。。等，工作中尽量照顾核心员工的需求，让他们工作中能保持愉悦心态，并获得成就感。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;人嘛，干什么事都要有新鲜感，也可以尝试技术轮岗，接触一些新的东西，既开阔了员工视野，也可能碰撞出一些新的火花。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;当然，作为直接负责人，你就是团队成员的天花板，所以也要严格要求自己，不断提升自己的技术能力、视野和管理能力，承担更大的职责，给团队成员预留足够的上升空间。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;什么样的员工坚决开除？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;试用期制定了明确的考核目标，考核周期结束后不能很好的完成&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;踩到公司的红线，比如贪污受贿、数据泄密、威胁公司信息安全&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;态度傲慢，很难与其他同事协同工作，这种人即使能力再强，也坚决开除。因为我们是团队作战，不是搞个人英雄主义。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;不认同公司的价值观，个人的品质较差&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;什么样的员工，老板喜欢？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：有人可能说，“不要工资，干活卖力！”，严肃点，不要皮&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;做事细心，考虑问题全面，工作效率高。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;工作踏实，不挑活&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;有强烈的责任心，接手一件事情，有一杆到底的精神&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;除了做好本职工作外，还会考虑系统架构优化或产品生态建设的工作，有强烈的上进心&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;善于沟通，有很强的团队协同能力&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如何做好团队的激励？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：人是一种复杂动物，而且每个人的诉求都不一样，如何统一激励框架就显得非常重要。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;我们要找到激发员工的工作动机，用各种有效的方法来调动员工的积极性和创造性，使其完成任务。比如，现在流行的OKR 管理，自己设定目标以及关键 Key Result，并在团队中共享，做到公开透明，这样每个人都清楚了解团队的目标方向，自己在哪一个位置，起什么作用，让每个成员有强烈的参与感、掌控感，更容易激发员工的主观能动性。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;具体的激励一般有以下几种：&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;精神激励。领导的信任表扬；对自身价值的认同。低成本、高效率。比如：每月之星、光荣榜、各种奖项&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;晋升激励。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;物质激励，股票、期权、项目奖、季度奖、年终奖等&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;量身定做，团队成员的情况千差万别，可以结合马斯洛理论，充分了解员工的情况，为员工定制化。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;作为团队负责人，如何面对压力？&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;答案：岗位越高，承担的职责就越大，接受的挑战和压力就越大。&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;分阶段、分里程碑的方式来制定计划，逐步完成事项来达成目标。给自己留一些缓冲时间，以便于应对计划的灵活性调整。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;时刻保持旺盛的精力，保持跟团队成员的沟通，了解他们的工作状态和感受&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;敢于面对上层传递下来的压力，做好缓冲，避免团队过于透支，保证有一个稳固的后方。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;做好项目时间计划表，分清项目的优先级、重要性，合理安排，统筹管理&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;学会委派工作。知人善任，合理分工，发挥团队的力量，而不是当一个超级英雄&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;放松心态，工作和生活尽量分开，保证充足的睡眠和锻炼，毕竟身体是革命的本钱。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;关于我：前阿里P7技术专家，出过专利，竞赛拿过奖，CSDN博客专家，负责过电商交易、社区生鲜、互联网金融等业务，多年团队管理经验。&lt;/span&gt;&lt;/section&gt;&lt;h1 accuse=&quot;qTitle&quot;&gt;&lt;span&gt;&lt;span&gt;关注公众号「微观技术」，后台回复 “算法” ，免费领取资料&lt;/span&gt;&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg2NzYyNjQzNg==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/2KTof9YshwdmOC0H6kaQlnh3rvWF2hPpzBoAoibbfQkhLdXfEpQgd8frHoDJDH503rv3FaMK6las2rCNQY7icr6w/0?wx_fmt=png&quot; data-nickname=&quot;微观技术&quot; data-alias=&quot;weiguanjishu&quot; data-signature=&quot;前阿里P7技术专家，研究生，出过专利。负责过电商交易、社区团购、流量营销等业务。分享后端架构技能、一线大厂面试经验、团队管理等话题。欢迎关注&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;推荐阅读&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2NzYyNjQzNg==&amp;amp;mid=2247486894&amp;amp;idx=1&amp;amp;sn=8cc0ae494a7624943665a8e9d47341e1&amp;amp;chksm=ceb9f105f9ce7813b3efa57bb0c655f47a37aab82579dda3da6d05003f97adc99d83f35b6ec7&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;JAVA那点破事！并发、IO模型、集合、线程池、死锁、非阻塞、AQS....&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2NzYyNjQzNg==&amp;amp;mid=2247486515&amp;amp;idx=1&amp;amp;sn=62a75d90d76a7f0c4cb01a64db8f4e2e&amp;amp;chksm=ceb9f098f9ce798eafec5c1e01aaeaedc00163e5c4925931da7a1b6184365d474fb1562cb664&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Redis缓存那点破事 | 绝杀面试官 25 问！&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2NzYyNjQzNg==&amp;amp;mid=2247486281&amp;amp;idx=1&amp;amp;sn=2c0fc614dd94c93aa1172413fb340c6d&amp;amp;chksm=ceb9f7e2f9ce7ef46b0832f69b2e6e6e66d1d10c6db94fedb381da886894a1a622086e64f68a&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;MYSQL 那点破事！索引、SQL调优、事务、B+树、分表 ....&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg2NzYyNjQzNg==&amp;amp;mid=2247485888&amp;amp;idx=1&amp;amp;sn=60304679c226fb6b2ebaba5bb6ad5485&amp;amp;chksm=ceb9f56bf9ce7c7d7c87fa4aa7cb70aba7af6b4aefbf1f8b3e331d5a443ccc91b3ba2fb95b9e&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;TCP网络那点破事！三次握手、四次挥手、TIME-WAIT ....&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>63cd46124676d11264c5688eaec8dd68</guid>
<title>[推荐] Kafka 为什么要放弃 Zookeeper</title>
<link>https://toutiao.io/k/98g49tv</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;最近，&lt;code&gt;confluent&lt;/code&gt;社区发表了一篇文章，主要讲述了&lt;code&gt;Kafka&lt;/code&gt;未来的&lt;code&gt;2.8&lt;/code&gt;版本将要放弃&lt;code&gt;Zookeeper&lt;/code&gt;，这对于&lt;code&gt;Kafka&lt;/code&gt;用户来说，是一个重要的改进。之前部署&lt;code&gt;Kafka&lt;/code&gt;就必须得部署&lt;code&gt;Zookeeper&lt;/code&gt;，而之后就只要单独部署&lt;code&gt;Kafka&lt;/code&gt;就行了。&lt;span/&gt;&lt;sup&gt;[1]&lt;/sup&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;1.Kafka简介&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Apache Kafka&lt;/code&gt;最早是由&lt;code&gt;Linkedin&lt;/code&gt;公司开发，后来捐献给了&lt;code&gt;Apack&lt;/code&gt;基金会。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Kafka&lt;/code&gt;被官方定义为分布式流式处理平台，因为具备高吞吐、可持久化、可水平扩展等特性而被广泛使用。目前&lt;code&gt;Kafka&lt;/code&gt;具体如下功能：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;消息队列,&lt;code&gt;Kafka&lt;/code&gt;具有系统解耦、流量削峰、缓冲、异步通信等消息队列的功能。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;分布式存储系统，&lt;code&gt;Kafka&lt;/code&gt;可以把消息持久化，同时用多副本来实现故障转移，可以作为数据存储系统来使用。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;实时数据处理，&lt;code&gt;Kafka&lt;/code&gt;提供了一些和数据处理相关的组件，比如&lt;code&gt;Kafka Streams&lt;/code&gt;、&lt;code&gt;Kafka Connect&lt;/code&gt;，具备了实时数据的处理功能。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下面这张图是&lt;code&gt;Kafka&lt;/code&gt;的消息模型：&lt;span/&gt;&lt;sup&gt;[2]&lt;/sup&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.44819819819819817&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ0DYO5Ln2ASVW1XuQU4X4P5Mhm7dI1sWPGd1MnSpGGolZ5XDxfc5JKfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;888&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过上面这张图，介绍一下&lt;code&gt;Kafka&lt;/code&gt;中的几个主要概念：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;producer&lt;/code&gt;和&lt;code&gt;consumer&lt;/code&gt;: 消息队列中的生产者和消费者，生产者将消息推送到队列，消费者从队列中拉取消息。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;consumer group&lt;/code&gt;:消费者集合，这些消费者可以并行消费同一个&lt;code&gt;topic&lt;/code&gt;下不同&lt;code&gt;partition&lt;/code&gt;中的消息。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;broker&lt;/code&gt;：&lt;code&gt;Kafka&lt;/code&gt;集群中的服务器。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;topic&lt;/code&gt;：消息的分类。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;partition&lt;/code&gt;：&lt;code&gt;topic&lt;/code&gt;物理上的分组，一个&lt;code&gt;topic&lt;/code&gt;可以有&lt;code&gt;partition&lt;/code&gt;，每个&lt;code&gt;partition&lt;/code&gt;中的消息会被分配一个有序的&lt;code&gt;id&lt;/code&gt;作为&lt;code&gt;offset&lt;/code&gt;。每个&lt;code&gt;consumer group&lt;/code&gt;只能有一个消费者来消费一个&lt;code&gt;partition&lt;/code&gt;。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;2.Kafka和Zookeeper关系&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Kafka架构如下图：&lt;img data-ratio=&quot;0.5727554179566563&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ0Ebx6ta9P0zRGZO5vSbuJBQWiczib1VlHrTBuvFFrFP7J1H4gZfmrJZibQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;646&quot;/&gt;从图中可以看到，&lt;code&gt;Kafka&lt;/code&gt;的工作需要&lt;code&gt;Zookeeper&lt;/code&gt;的配合。那他们到底是怎么配合工作呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;看下面这张图：&lt;img data-ratio=&quot;0.5760095011876485&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ025Qu7ImfmseZVho9ibAHEJnYXyTj4iciaMDHnervzFTEWVbBLWLKBBQnQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;842&quot;/&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;2.1 注册中心&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;2.1.1 broker注册&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;从上面的图中可以看到，&lt;code&gt;broker&lt;/code&gt;分布式部署，就需要一个注册中心来进行统一管理。&lt;code&gt;Zookeeper&lt;/code&gt;用一个专门节点保存&lt;code&gt;Broker&lt;/code&gt;服务列表，也就是 &lt;code&gt;/brokers/ids&lt;/code&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;broker&lt;/code&gt;在启动时，向&lt;code&gt;Zookeeper&lt;/code&gt;发送注册请求，&lt;code&gt;Zookeeper&lt;/code&gt;会在&lt;code&gt;/brokers/ids&lt;/code&gt;下创建这个&lt;code&gt;broker&lt;/code&gt;节点，如&lt;code&gt;/brokers/ids/[0...N]&lt;/code&gt;，并保存&lt;code&gt;broker&lt;/code&gt;的&lt;code&gt;IP&lt;/code&gt;地址和端口。&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;❝&lt;/span&gt;&lt;p&gt;这个节点临时节点，一旦&lt;code&gt;broker&lt;/code&gt;宕机，这个临时节点会被自动删除。&lt;/p&gt;&lt;span&gt;❞&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;2.1.2 topic注册&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Zookeeper&lt;/code&gt;也会为&lt;code&gt;topic&lt;/code&gt;分配一个单独节点，每个&lt;code&gt;topic&lt;/code&gt;都会以&lt;code&gt;/brokers/topics/[topic_name]&lt;/code&gt;的形式记录在&lt;code&gt;Zookeeper&lt;/code&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一个&lt;code&gt;topic&lt;/code&gt;的消息会被保存到多个&lt;code&gt;partition&lt;/code&gt;，这些&lt;code&gt;partition&lt;/code&gt;跟&lt;code&gt;broker&lt;/code&gt;的对应关系也需要保存到&lt;code&gt;Zookeeper&lt;/code&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;partition&lt;/code&gt;是多副本保存的，上图中红色&lt;code&gt;partition&lt;/code&gt;是&lt;code&gt;leader&lt;/code&gt;副本。当&lt;code&gt;leader&lt;/code&gt;副本所在的broker发生故障时，&lt;code&gt;partition&lt;/code&gt;需要重新选举&lt;code&gt;leader&lt;/code&gt;，这个需要由&lt;code&gt;Zookeeper&lt;/code&gt;主导完成。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;broker&lt;/code&gt;启动后，会把自己的&lt;code&gt;Broker ID&lt;/code&gt;注册到到对应&lt;code&gt;topic&lt;/code&gt;节点的分区列表中。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们查看一个&lt;code&gt;topic&lt;/code&gt;是&lt;code&gt;xxx&lt;/code&gt;，分区编号是&lt;code&gt;1&lt;/code&gt;的信息，命令如下：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@master] get /brokers/topics/xxx/partitions/1/state&lt;br/&gt;{&lt;span&gt;&quot;controller_epoch&quot;&lt;/span&gt;:15,&lt;span&gt;&quot;leader&quot;&lt;/span&gt;:11,&lt;span&gt;&quot;version&quot;&lt;/span&gt;:1,&lt;span&gt;&quot;leader_epoch&quot;&lt;/span&gt;:2,&lt;span&gt;&quot;isr&quot;&lt;/span&gt;:[11,12,13]}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;❝&lt;/span&gt;&lt;p&gt;当&lt;code&gt;broker&lt;/code&gt;退出后，&lt;code&gt;Zookeeper&lt;/code&gt;会更新其对应&lt;code&gt;topic&lt;/code&gt;的分区列表。&lt;/p&gt;&lt;span&gt;❞&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;2.1.3 consumer注册&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;消费者组也会向&lt;code&gt;Zookeeper&lt;/code&gt;进行注册，&lt;code&gt;Zookeeper&lt;/code&gt;会为其分配节点来保存相关数据，节点路径为&lt;code&gt;/consumers/{group_id}&lt;/code&gt;，有&lt;code&gt;3&lt;/code&gt;个子节点，如下图:&lt;img data-ratio=&quot;0.24280701754385964&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ0JZNlfibAnWsLGeDVeoUa53I9r51YgicBp4UO3VVweoJaaB5kUb5XoAiaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1425&quot;/&gt;这样&lt;code&gt;Zookeeper&lt;/code&gt;可以记录分区跟消费者的关系，以及分区的&lt;code&gt;offset&lt;/code&gt;。&lt;span&gt;[3]&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;2.2 负载均衡&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;broker&lt;/code&gt;向&lt;code&gt;Zookeeper&lt;/code&gt;进行注册后，生产者根据&lt;code&gt;broker&lt;/code&gt;节点来感知&lt;code&gt;broker&lt;/code&gt;服务列表变化，这样可以实现动态负载均衡。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;consumer group&lt;/code&gt;中的消费者，可以根据&lt;code&gt;topic&lt;/code&gt;节点信息来拉取特定分区的消息,实现负载均衡。&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;❝&lt;/span&gt;&lt;p&gt;实际上，&lt;code&gt;Kafka&lt;/code&gt;在&lt;code&gt;Zookeeper&lt;/code&gt;中保存的元数据非常多，看下面这张图：&lt;img data-ratio=&quot;0.3340184994861254&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ020I0WTKudqm8Y20XnqrjShadfkM8jhdmAE3WMYOnNkicz6OlFkiaX6og/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;973&quot;/&gt;随着broker、topic和partition增多，保存的数据量会越来越大。&lt;/p&gt;&lt;span&gt;❞&lt;/span&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;3.Controller介绍&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;经过上一节的讲述，我们看到了&lt;code&gt;Kafka&lt;/code&gt;对&lt;code&gt;Zookeeper&lt;/code&gt;的依赖非常大，&lt;code&gt;Kafka&lt;/code&gt;离开&lt;code&gt;Zookeeper&lt;/code&gt;是没有办法独立运行的。那&lt;code&gt;Kafka&lt;/code&gt;是怎么跟&lt;code&gt;Zookeeper&lt;/code&gt;进行交互的呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如下图：&lt;span/&gt;&lt;sup&gt;[4]&lt;/sup&gt;&lt;img data-ratio=&quot;0.47101449275362317&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ0Get1O7LNMia7h6KUR1vtSGL9WVcoJy7JeobdkkC0TpQYCyKeOIhzKjg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;690&quot;/&gt;&lt;code&gt;Kafka&lt;/code&gt;集群中会有一个&lt;code&gt;broker&lt;/code&gt;被选举为&lt;code&gt;Controller&lt;/code&gt;负责跟&lt;code&gt;Zookeeper&lt;/code&gt;进行交互，它负责管理整个&lt;code&gt;Kafka&lt;/code&gt;集群中所有分区和副本的状态。其他&lt;code&gt;broker&lt;/code&gt;监听&lt;code&gt;Controller&lt;/code&gt;节点的数据变化。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Controller&lt;/code&gt;的选举工作依赖于&lt;code&gt;Zookeeper&lt;/code&gt;，选举成功后，&lt;code&gt;Zookeeper&lt;/code&gt;会创建一个&lt;code&gt;/controller&lt;/code&gt;临时节点。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Controller&lt;/code&gt;具体职责如下：&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;❝&lt;/span&gt;&lt;p&gt;比如当某个分区的leader出现故障时，Controller会为该分区选举新的leader。当检测到分区的ISR集合发生变化时，Controller会通知所有broker更新元数据。当某个topic增加分区时，Controller会负责重新分配分区。&lt;/p&gt;&lt;span&gt;❞&lt;/span&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;监听&lt;code&gt;topic&lt;/code&gt;相关的变化&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;监听&lt;code&gt;broker&lt;/code&gt;相关的变化&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;集群元数据管理&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;下面这张图展示了Controller、Zookeeper和broker的交互细节：&lt;img data-ratio=&quot;0.720558882235529&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ00al8icc8fR5ibV5o0vkoH5Dicy1G9COiaibxLyWJsfaM6tr5aqmOIu35LEA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1002&quot;/&gt;&lt;code&gt;Controller&lt;/code&gt;选举成功后，会从&lt;code&gt;Zookeeper&lt;/code&gt;集群中拉取一份完整的元数据初始化&lt;code&gt;ControllerContext&lt;/code&gt;，这些元数据缓存在&lt;code&gt;Controller&lt;/code&gt;节点。当集群发生变化时，比如增加&lt;code&gt;topic&lt;/code&gt;分区，&lt;code&gt;Controller&lt;/code&gt;不仅需要变更本地的缓存数据，还需要将这些变更信息同步到其他&lt;code&gt;Broker&lt;/code&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Controller&lt;/code&gt;监听到&lt;code&gt;Zookeeper&lt;/code&gt;事件、定时任务事件和其他事件后，将这些事件按照先后顺序暂存到&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;中，由事件处理线程按顺序处理，这些处理多数需要跟&lt;code&gt;Zookeeper&lt;/code&gt;交互，&lt;code&gt;Controller&lt;/code&gt;则需要更新自己的元数据。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;4.Zookeeper带来的问题&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Kafka&lt;/code&gt;本身就是一个分布式系统，但是需要另一个分布式系统来管理，复杂性无疑增加了。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;4.1 运维复杂度&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;使用了&lt;code&gt;Zookeeper&lt;/code&gt;，部署&lt;code&gt;Kafka&lt;/code&gt;的时候必须要部署两套系统，&lt;code&gt;Kafka&lt;/code&gt;的运维人员必须要具备&lt;code&gt;Zookeeper&lt;/code&gt;的运维能力。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;4.2 Controller故障处理&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Kafaka&lt;/code&gt;依赖一个单一&lt;code&gt;Controller&lt;/code&gt;节点跟&lt;code&gt;Zookeeper&lt;/code&gt;进行交互，如果这个&lt;code&gt;Controller&lt;/code&gt;节点发生了故障，就需要从&lt;code&gt;broker&lt;/code&gt;中选择新的&lt;code&gt;Controller&lt;/code&gt;。如下图,新的&lt;code&gt;Controller&lt;/code&gt;变成了&lt;code&gt;broker3&lt;/code&gt;。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.4723076923076923&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ0qic3b3bfvqD4BfZeiaPBibDBPk2JZMIEk5KApPYxV5AP8gKux2KoozBYw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;650&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;新的&lt;code&gt;Controller&lt;/code&gt;选举成功后，会重新从&lt;code&gt;Zookeeper&lt;/code&gt;拉取元数据进行初始化，并且需要通知其他所有的&lt;code&gt;broker&lt;/code&gt;更新&lt;code&gt;ActiveControllerId&lt;/code&gt;。老的&lt;code&gt;Controller&lt;/code&gt;需要关闭监听、事件处理线程和定时任务。分区数非常多时，这个过程非常耗时，而且这个过程中&lt;code&gt;Kafka&lt;/code&gt;集群是不能工作的。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;4.3 分区瓶颈&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;当分区数增加时，&lt;code&gt;Zookeeper&lt;/code&gt;保存的元数据变多，&lt;code&gt;Zookeeper&lt;/code&gt;集群压力变大，达到一定级别后，监听延迟增加，给&lt;code&gt;Kafaka&lt;/code&gt;的工作带来了影响。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;所以，&lt;code&gt;Kafka&lt;/code&gt;单集群承载的分区数量是一个瓶颈。而这又恰恰是一些业务场景需要的。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;5.升级&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;升级前后的架构图对比如下：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.9238578680203046&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/a1gicTYmvicdibP9zVMt4EJuWHtOGM2hVJ0pibFmEEYyNSeh9wDibbmdFBVWToVJziaFyLicFqaEITWMKib61yekVsXs9Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;591&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;KIP-500&lt;/code&gt;用&lt;code&gt;Quorum Controller&lt;/code&gt;代替之前的&lt;code&gt;Controller&lt;/code&gt;，&lt;code&gt;Quorum&lt;/code&gt;中每个&lt;code&gt;Controller&lt;/code&gt;节点都会保存所有元数据，通过&lt;code&gt;KRaft&lt;/code&gt;协议保证副本的一致性。这样即使&lt;code&gt;Quorum Controller&lt;/code&gt;节点出故障了，新的&lt;code&gt;Controller&lt;/code&gt;迁移也会非常快。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;官方介绍，升级之后，&lt;code&gt;Kafka&lt;/code&gt;可以轻松支持百万级别的分区。&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;❝&lt;/span&gt;&lt;p&gt;Kafak团队把通过Raft协议同步数据的方式Kafka Raft Metadata mode,简称KRaft&lt;/p&gt;&lt;span&gt;❞&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Kafka&lt;/code&gt;的用户体量非常大，在不停服的情况下升级是必要的。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;目前去除&lt;code&gt;Zookeeper&lt;/code&gt;的&lt;code&gt;Kafka&lt;/code&gt;代码&lt;code&gt;KIP-500&lt;/code&gt;已经提交到&lt;code&gt;trunk&lt;/code&gt;分支，并且已经在的&lt;code&gt;2.8&lt;/code&gt;版本发布。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;Kafaka&lt;/code&gt;计划在&lt;code&gt;3.0&lt;/code&gt;版本会兼容&lt;code&gt;Zookeeper Controller&lt;/code&gt;和&lt;code&gt;Quorum Controller&lt;/code&gt;，这样用户可以进行灰度测试。&lt;span/&gt;&lt;sup&gt;[5]&lt;/sup&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;6.总结&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在大规模集群和云原生的背景下，使用&lt;code&gt;Zookeeper&lt;/code&gt;给&lt;code&gt;Kafka&lt;/code&gt;的运维和集群性能造成了很大的压力。去除&lt;code&gt;Zookeeper&lt;/code&gt;是必然趋势，这也符合大道至简的架构思想。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;Reference&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;span&gt;[1]&lt;/span&gt;&lt;p&gt;参考1: &lt;span&gt;https://www.confluent.io/blog/kafka-without-zookeeper-a-sneak-peek/&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[2]&lt;/span&gt;&lt;p&gt;参考2: &lt;span&gt;https://blog.csdn.net/Zidingyi_367/article/details/110490910&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[3]&lt;/span&gt;&lt;p&gt;参考3: &lt;span&gt;https://www.jianshu.com/p/a036405f989c&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[4]&lt;/span&gt;&lt;p&gt;参考4: &lt;span&gt;https://honeypps.com/mq/kafka-controller-analysis/&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[5]&lt;/span&gt;&lt;p&gt;参考5: &lt;span&gt;https://mp.weixin.qq.com/s/ev6NM6hptltQBuTaCHJCQQ&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>cc813e8cd2bd0c112f78feda7c52ff3e</guid>
<title>[推荐] 开源｜5 秒内克隆您的声音并生成任意语音内容</title>
<link>https://toutiao.io/k/87ehz9q</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;profile_inner&quot;&gt;
                              &lt;strong class=&quot;profile_nickname&quot;&gt;开发者头条&lt;/strong&gt;
                              &lt;img class=&quot;profile_avatar&quot; id=&quot;js_profile_qrcode_img&quot; src=&quot;&quot; alt=&quot;&quot;/&gt;

                              &lt;p class=&quot;profile_meta&quot;&gt;
                              &lt;label class=&quot;profile_meta_label&quot;&gt;Weixin ID&lt;/label&gt;
                              &lt;span class=&quot;profile_meta_value&quot;&gt;kaifazhetoutiao&lt;/span&gt;
                              &lt;/p&gt;

                              &lt;p class=&quot;profile_meta&quot;&gt;
                              &lt;label class=&quot;profile_meta_label&quot;&gt;About Feature&lt;/label&gt;
                              &lt;span class=&quot;profile_meta_value&quot;&gt;程序员分享平台 | 官方应用下载地址：http://toutiao.io/download&lt;/span&gt;
                              &lt;/p&gt;
                              
                          &lt;/div&gt;
                          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>