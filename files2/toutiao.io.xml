<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>3f4c5655b6bcf357405e7a80776f7049</guid>
<title>少侠留步，请收下这份前端开发自学资料</title>
<link>https://toutiao.io/k/50z7koh</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;写在前面&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;之前就有不少小伙伴提需求说：以后想从事前端开发岗，能不能整理一波前端开发的自学资料+书籍，正好得空，这个事情还是先安排了吧！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;正好不久之前，咱们这里也详细梳理过「前端开发的学习路线和知识点」，具体可参看这篇文章：&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzU4ODI1MjA3NQ==&amp;amp;mid=2247490220&amp;amp;idx=1&amp;amp;sn=0e5fbec4253536cff2a7221d8b594206&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;《前端开发学习路线+知识点梳理》&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;之前绘制的详细学习思维导图，这里也再贴一下：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;6.181599518941671&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajK63jzVcOIZcKiagNpxtYvd5g6Wowia27q4rlqd4Rq0S2p0ibAKjLU5AnQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1663&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;本篇我们就对照着这个知识脑图，再来梳理一下学习时具体可用的&lt;strong&gt;学习材料&lt;/strong&gt;和&lt;strong&gt;书籍&lt;/strong&gt;，小伙伴们好像更关心这个~&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.7555555555555555&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajjydTeluibhNcAxvn2qdOQqdWuIynV3kwvfxSKaKKY0gibzxicrlmGP4QA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;360&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;不得不说，前端技术栈更新实在太快了，框架的版本发得也是贼勤。这种情况下，除了一些经典的知识可以看书之外，还是得多培养阅读官方文档的习惯，这个既是必须，也是赖以生存的技能。&lt;/p&gt;&lt;span&gt;”&lt;/span&gt;&lt;/blockquote&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;HTML&lt;/span&gt;&lt;/h1&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.4328018223234624&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajKILPvUm5aWm0kJEicdFXl28H2n68p378fr1ynqSkEjg8tTWbMowRTrg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;878&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Head Fisrt系列书你懂的，为入门而生，文笔风趣幽默为主，配图也很丰富，简单易懂就对了。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.2028469750889679&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroaj1giaicJP0GPt5Ib8EZsL2BSWgukrPxA7IB6A1XCE3F68pa0Ay3oXZGBA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1124&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;豆瓣评分8.5的书，书是没问题，&lt;code&gt;800&lt;/code&gt;多页的书全面性不用说，但是能不能读得完这是一个问题，就看决心和“手速”了。&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;网络教程&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;https://www.w3school.com.cn/h.asp&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;https://www.runoob.com/html/html-tutorial.html&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;https://developer.mozilla.org/&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;CSS&lt;/span&gt;&lt;/h1&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.3324468085106382&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroaj5sDb8AABeYoBw12gglQzbVjjnvyRk1uad0E9XU5YIVd47icVib3OF3cA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;752&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;放在现在来看是本“老书”了，但是很多基础的东西在那摆着也得学。CSS东西就是细节多，这本就当是给CSS的知识点做了一个大梳理吧，所以这本书当工具书看是可以。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.2192592592592593&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroaj4G2S5esnkCsiawmRBNiaibic4PC1Geg7zoSDlJkJ7gYcuNlceTwjcJ27RA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1350&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这本书展示了&lt;code&gt;47&lt;/code&gt;个CSS的技巧，是一本注重实践的教程，虽然算进阶书，但是内容没那么难，看完对很多实现思路有启发。&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;网络教程&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;https://www.runoob.com/css/css-tutorial.html&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;https://www.w3school.com.cn/css/index.asp&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;https://developer.mozilla.org/&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;JavaScript语言&lt;/span&gt;&lt;/h1&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.053701015965167&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajVop8xFq3kEiaguvJEG1NqTWa0HLAFAupKZhIs7QgicWzYAJibuPNC4xTA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1378&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这本书是翻译过来的，分好几卷，黄油油的封面你懂的~ 应该说这本书把&lt;code&gt;JavaScript&lt;/code&gt;里很多复杂且深度的概念进行了细致讲解，比如作用域、闭包、原型、异步等等，网上书评啥的还是可以的。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.273764258555133&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajn2QAWkA8xGbDhNenk9N29SRjnBpbVbxjXL2TKdSnapYXersia5icUiaibg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1052&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这本书并不厚，小白可用，初学时搞定并实践了这本书里的内容，应该入门没啥问题，这样后面就可以找一些经典甚至圣经类的书来加强和巩固了。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.2122093023255813&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajRKHwiaSUueMpsyLW7rqSVRCicWbdBvCgqyricic2ialM8vjWkNchIAD2BvA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;688&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大名鼎鼎的&lt;code&gt;JS&lt;/code&gt;红宝书，是权威的&lt;code&gt;JavaScript&lt;/code&gt;入门书籍，没错是入门书籍！不要被名字里的“&lt;strong&gt;高级&lt;/strong&gt;”两个字吓跑~ 内容循序渐进，基础且全面，不能指望一遍就过，适合精读也适合回味。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.2996632996632997&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajxYwxsUn0Qo9oib9QjJRKyNqSJemBIKTEyNicEj0LNp1pBrqb7WMMARqg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1188&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;上面是“红宝书”，这本是“犀牛书”，据说这两本在一起更搭配哦。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这本书是淘宝前端团队翻译的，也算是&lt;code&gt;JavaScript&lt;/code&gt;开发者的圣经之一，内容太多太全，如果能多通读几遍并有所心得，估计成神之路也就不远了~&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;网络教程&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;菜鸟教程：&lt;code&gt;https://www.runoob.com/js/js-tutorial.html&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;现代JavaScript教程：&lt;code&gt;https://zh.javascript.info/&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;MDN文档：&lt;code&gt;https://developer.mozilla.org/&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;ES&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;ES&lt;/code&gt;和&lt;code&gt;JS&lt;/code&gt;的关系应该能分得清吧，对前端开发来说，&lt;code&gt;ES6+&lt;/code&gt;还是有必要学一下的，经典的材料有几个。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;https://es6.ruanyifeng.com/&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.798695246971109&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroaj10kBkm0nHbx76q2wwwibiakW2eFhM6O63zkmhDOHzD2eOibdzoMKKGG7g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2146&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.3251533742331287&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajYNRINxDydf8L19v5D1ic7iajvC3PybgHBe0mO7rUXedAzAZjjLnxwV2A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;978&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;豆瓣评分9.4的书，比较系统地介绍了ES的重要特性。&lt;/p&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;TypeScript&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;作为一名合格的前端工程师，&lt;code&gt;TypeScript&lt;/code&gt;现在也是必须掌握的知识了，学习它最好的材料还是文档。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;https://www.typescriptlang.org/docs&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.7523191094619666&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajwkNImLKvFOOG3759f1W7K24xTDliauAkepEiauDcVyD8iaYSUSBx6BvFQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2156&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;https://www.tslang.cn/docs/home.html&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.5134357005758158&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajDF8zDogAaxIxC1ZEOvfO4ReKGOz7Bia07dLbR5oxjl6bpoyqpmzibvPg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2084&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;看文档还是最好的，至于书的话，这本《深入理解TypeScript》是原版《TypeScript Deep Dive》的翻译本，有精力可以康康。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.3313953488372092&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroaj0iatWzBQTuIzEKud8puSwFL58aPdY8y5pwvtMJASsRNQ1rnThR9sMLw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;688&quot;/&gt;&lt;/figure&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;数据结构和算法&lt;/span&gt;&lt;/h1&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;《学习JavaScript数据结构与算法（第3版）》&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.3389830508474576&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajZuzTnX504ces2Nn9qFFRxQLdpFiaByl6QFpljz3DibPR2JZqiaicHpRiaew/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;472&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;数据结构和算法本身其实和编程语言无关，但是如果非得让找一本基于&lt;code&gt;JavaScript&lt;/code&gt;语言描述的数据结构和算法书，那这本是前端的菜就对了。除了常用数据结构、算法、以及算法思想均有涉及之外，书中专门还用一章来写了&lt;code&gt;ES&lt;/code&gt;和&lt;code&gt;TS&lt;/code&gt;的东西。&lt;/p&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;设计模式&lt;/span&gt;&lt;/h1&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.2562141491395793&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroaj2KjXdgegO7TZ0ib2ohtQnkfic3RxyuXcE9ibSUicp0Mp23PeqVt7xbVgoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1046&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;设计模式这东西本来也是和语言无关的，这是一本基于&lt;code&gt;JavaScript&lt;/code&gt;语言描述的设计模式落地实现，所有常见的设计模式都讲到了，行文风格也不枯燥，给出的场景和实例也挺全，当然这本重在灵活运用，进阶可阅。&lt;/p&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;网络协议&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;对于前端开发来说，网络协议肯定是必看，尤其应用层协议，其他底层协议能多了解一点当然更好。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.2938931297709924&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajnuMMxGNwp9kbQUQx71RH9hrBwbhOvU1Bdvo0q9r5JUbFgJQ0tEdHxQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;524&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.25&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajLVVJrICt1j72BUDpjAd8AicuyJgwPbhG48a4WGGR2O5gUic4H3K6Rr2g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;552&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这两本网络协议图解书籍通俗易懂，配图也很形象，黑皮（灰皮）版网络协议圣经啃不下来的，可以看看这个。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.407079646017699&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajZebXJT6PY8Q9VsfSCveOofwHQzTX7DOvDGvic5IqG5UTjuRcpVrbkzA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;452&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这本书并不只有&lt;code&gt;HTTP&lt;/code&gt;协议本身的内容，也并不仅仅针对前端开发者。它里面将很多周边技术和Web化过程中诸多的技术和原理都进行了阐述，内容系统庞大。跟Web开发有关的程序员在进阶扩大知识面时都可以看看。&lt;/p&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;Node.js&lt;/span&gt;&lt;/h1&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.1493099121706398&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajBuPQRPGhAiaLMwWiaZSrrcMVpHtNkNwwDkEzicnqCFsMicXaarib9Xur4Tg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1594&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;http://nodejs.cn/api/&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Node.js版本更新这么快，看文档是最靠谱的。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.3157894736842106&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroaj9hLBx6rabKSDPJvl5ggJUD5W2FuHnUyGQria8KKItAGWTB6fjyribAkw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;760&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果硬要找一本&lt;span&gt;教材看，这本Node.js的实战教程可以一用。&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.2442748091603053&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajYTLaia95Uiax0Hicu208j46QvQgXicw9XoagW6Ba4iancUsLicJgicLb3Cuwg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;786&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这本书不是写给初学者看的，算是Node.js进阶书籍，国人作者真的是长脸，对Node.js的一些关键原理做了剖析，如果想深入了解 Node，这本书值得一看。&lt;/p&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;应用框架&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;框架这东西更新迭代实在太快了，要么还没来得及出书，要么就是那种迅速推出的快餐书，基本都是照搬框架的官方文档，有时候翻译和理解得还不一定准确，所以在学习前端的形形色色的框架时，官方文档还是最靠谱和全面的资料，包括但不限于：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Vue.js中文官方文档：&lt;code&gt;https://vuejs.bootcss.com/guide/&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;React.js官方文档：&lt;code&gt;https://reactjs.org/docs/getting-started.html&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;React.js 小书：&lt;code&gt;https://github.com/huzidaha/react-naive-book&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Webpack中文官方文档：&lt;code&gt;https://www.webpackjs.com/concepts/&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Sass 中文文档：&lt;code&gt;https://sass.bootcss.com/documentation&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Less 中文文档：&lt;code&gt;http://lesscss.cn/usage/&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Stylus 中文文档：&lt;code&gt;https://stylus.bootcss.com/&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;...等等&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;hr data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;关注性能&lt;/span&gt;&lt;/h2&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.4768683274021353&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xq9PqibkVAzqwx2jbEPqxWxDCZicemroajMr41Ybx1JaElzf0sn56ZuiblCYCHR2ULu6RS5T9icboOribC9HJuaJUJg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;562&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;看这本书之前像TCP/IP协议族的基础最好具备，虽然书中很多篇幅也在讲述这部分内容，但是加入了对应优化实践的知识和内容，进阶阅读可用。而且这本书也不仅仅是前端开发人员可以看，所有Web应用及站点开发人员都可以阅读，包括后端、运维、存储、视频、性能工程师等等。&lt;/p&gt;&lt;h1 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;后 记&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;最后小伙伴们如果有什么要补充，或者可以推荐的不错资料，欢迎多多补充，一起分享提高。&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>86d157327e220fcbe9ac37fba9d23019</guid>
<title>消息架构的设计难题以及应对之道</title>
<link>https://toutiao.io/k/3vly0qt</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;概述&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在微服务开发中我们经常会引入消息中间件实现业务解耦，执行异步操作， 现在让我们来看看使用消息中间件的好处和弊端。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先需要肯定是使用消息组件有很多好处，其中最核心的三个是：解耦、异步、削峰。&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;「解耦」&lt;/strong&gt;：客户端只要讲请求发送给特定的通道即可，不需要感知接收请求实例的情况。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;「异步」&lt;/strong&gt;：将消息写入消息队列，非必要的业务逻辑以异步的方式运行，加快响应速度。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;「削峰」&lt;/strong&gt;：消息中间件在消息被消费之前一直缓存消息，消息处理端可以按照自己处理的并发量从消息队列中慢慢处理消息，不会一瞬间压垮业务。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;当然消息中间件并不是银弹，引入消息机制后也会有如下一些弊端：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;「潜在的性能瓶颈」&lt;/strong&gt;：消息代理可能会存在性能瓶颈。幸运的是目前主流的消息中间件都支持高度的横向扩展。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;「潜在的单点故障」&lt;/strong&gt;：消息代理的高可用性至关重要，否则系统整体的可靠性将受到影响，幸运的是大多数消息中间件都是高可用的。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;「额外的操作复杂性」&lt;/strong&gt;：消息系统是一个必须独立安装、配置和运维的系统组件，增加了运维的复杂度。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这些弊端我们借助消息中间件本身提供的扩展、高可用能力可以解决，但是要真正用好消息中间件我们还需要关注可能会遇到的一些设计难题。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;处理并发和顺序消息&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在生产环境中为了提高消息处理的能力以及应用程序的吞吐量，一般会将消费者部署多个实例节点。那么带来的挑战就是&lt;strong&gt;「如何确保每个消息只被处理一次，并且是按照他们的发送顺序来处理的。」&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;例如：假设有3个相同的接收方实例从同一个点对点通道读取消息，发送方按顺序发布了 &lt;code&gt;Order Created&lt;/code&gt;、&lt;code&gt;Order Updated&lt;/code&gt; 和 &lt;code&gt;Order Cancelled&lt;/code&gt; 这3个事件消息。简单的消息实现可能就会同事讲每个消息给不同的接收方。若由于网络问题导致延迟，消息可能没有按照他们发出时的顺序被处理，这将导致奇怪的行为，服务实例可能在另一个服务器处理 &lt;code&gt;Order Created&lt;/code&gt; 消息之前处理 &lt;code&gt;Order Cancelled&lt;/code&gt;消息。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Kafka 使用的解决方案是使用分片（分区）通道。整体解决方案分为三个部分：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;一个主题通道由多个分片组成，每个分片的行为类似一个通道。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;发送方在消息头部指定分片键如orderId，Kafka使用分片键将消息分配给特定的分片。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;将接收方的多个实例组合在一起，并将他们视为相同的逻辑接收方（消费者组）。kafka将每个分片分配给单个接收器，它在接收方启动和关闭时重新分配分片。&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.41875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4hZdvM75xhzwEKQ7icd6gvCSoK9m0H9D5PiaGXx3zh16UgFB8uA4CJBUa6FCOp4hz6cYWAmldUkUyhw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;800&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;顺序消息&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如上图所示，每个Order事件消息都将orderId作为其分片键。特定订单的每个事件都发布到同一个分片。而且该分片中的消息始终由同一个接收方实例读取，因此这样就能够保证按顺序处理这些消息。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;处理重复消息&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;引入消息架构必须要解决的另一个挑战是处理重复消息。在理想情况下，消息代理应该只传递一次消息，但保证消息有且仅有一次的消息传递的成本通常很高。相反，很多消息组件承诺至少保证成功传递一次消息。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在正常情况下，消息组件只会传递一次消息。但是当客户端、网络或消息组件故障可能导致消息被多次传递。假设客户端在处理消息后发送确认消息前，他的数据库崩溃了，这时消息组件将再次发送未确认的消息，在数据库重新启动时向该客户端发送。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;处理重复消息有以下两种不同的方法：&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;编写幂等消息处理器&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果应用程序处理消息的逻辑是满足幂等的，那么重复消息就是无害的。程序的幂等性是指，即使这个应用被相同输入参数多次重复调用时，也不会产生额外的效果。例如：取消一个已经取消的订单，就是一个幂等性操作。同样，创建一个已经存在的订单操作也必是这样。满足幂等的消息处理程序可以被放心的执行多次，只要消息组件在传递消息时保持相同的消息顺序。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;但是不幸的是，应用程序通常不是幂等的。或者你现在正在使用的消息组件在重新传递消息时不会保留排序。重复或无序消息可能会导致错误。在这种情况下，你需要编写跟踪消息并丢弃重复消息的消息处理程序。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;跟踪消息并丢弃重复消息&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;考虑一个授权消费者信用卡的消息处理程序。它必须为每个订单仅执行一次信用卡授权操作。这段应用程序每次调用时都会产生不同的效果。如果重复消息导致消息处理程序多次执行该逻辑，则应用程序的行为将不正确。执行此类应用程序逻辑的消息处理程序必须通过检测和丢弃重复消息而让它成为幂等的。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一个简单的解决方案是消息接收方使用 message id 跟踪他已处理的消息并丢弃任何重复项。例如，在数据库表中存储它消费的每条消息的 message id。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.4696969696969697&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4hZdvM75xhzwEKQ7icd6gvCSeH6QaQ6hvYwWZGia3K9iaulT7JibpGWxzibpv4drgHEIpUfKSVyaicLjPKw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;792&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;丢弃重复消息&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;当接收方处理消息时，它将消息的 message id 作为创建和变更业务实体的事务的一部分记录在数据表里。如上图所示，接收方将包含message id 的行插入 PROCESSED_MESSAGE表。如果消息是重复的，则INSERT将失败，接收方可以选择丢弃该消息。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;另一个解决方案是消息处理程序在应用程序表，而不是专门表中记录 message id。当时用具有受限事务模型的NoSQL数据库时，此方法特别有用，因为 NoSQL数据库通常不支持将针对两个表的更新作为数据库事务。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;处理事务性消息&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;服务通常需要在更新数据库的事务中发布消息，数据库更新和消息发送都必须在事务中进行，否则服务可能会更新数据库然后在发送消息之前崩溃。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果服务不以原子方式执行者两个操作，则类似的故障可能使系统处于不一致状态。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;接下来我们看一下常用的保证事务消息的两种解决方案，最后再看看现代消息组件RocketMQ的事务性消息解决方案。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;使用数据库表作为消息队列&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果你的应用程序正在使用关系型数据库，要保证数据的更新和消息发送之间的事务可以直接使用&lt;strong&gt;「事务性发件箱模式，Transactional Outbox」&lt;/strong&gt;。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.5447530864197531&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4hZdvM75xhzwEKQ7icd6gvCSeyicNVh4BgCryV8TicFkHzxoeAQHoTc5l2o6OqbwLOYQnQpyF4ibwNExw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;648&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;事务性发件箱&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;此模式使用数据库表作为临时消息队列。如上图所示，发送消息的服务有个OUTBOX数据表，在进行INSERT、UPDATE、DELETE 业务操作时也会给OUTBOX数据表INSERT一条消息记录，这样可以保证原子性，因为这是基于本地的ACID事务。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;OUTBOX表充当临时消息队列，然后我们在引入一个消息中继（MessageRelay）的服务，由他从OUTBOX表中读取数据并发布消息到消息组件。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;消息中继的实现可以很简单，只需要通过定时任务定期从OUTBOX表中拉取最新未发布的数据，获取到数据后将数据发送给消息组件，最后将完成发送的消息从OUTBOX表中删除即可。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;使用事务日志发布事件&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;另外一种保证事务性消息的方式是基于数据库的事务日志，也就是所谓的数据变更捕获，Change Data Capture，简称CDC。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一般数据库在数据发生变更的时候都会记录事务日志（Transaction Log），比如MySQL的binlog。事务日志可以简单的理解成数据库本地的一个文件队列，它主要记录按时间顺序发生的数据库表变更记录。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里我们利用alibaba开源的组件canal结合MySQL来说明下这种模式的工作原理。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;更多操作说明可以参考官方文档：https://github.com/alibaba/canal&lt;/p&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;canal工作原理&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;canal 模拟 MySQL slave 的交互协议，把自己伪装成一个MySQL的 slave节点 ，向 MySQL master 发送dump 协议；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;MySQL master 收到 dump 请求，开始推送 binary log 给 slave (即 canal )；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;canal 解析 binary log 对象(原始为 byte 流)，然后可以将解析后的数据直接发送给消息组件。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;RocketMQ事务消息解决方案&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Apache RocketMQ在4.3.0版中已经支持分布式事务消息，RocketMQ采用了2PC的思想来实现了提交事务消息，同时增加一个补偿逻辑来处理二阶段超时或者失败的消息，如下图所示。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;0.4503464203233256&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/PxMzT0Oibf4hZdvM75xhzwEKQ7icd6gvCS9lLOUfAZ8p6vCicIkUDjew6EEpdG7IedBM2r5sibr4eH2CHVmXbwmLicw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;866&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;RocketMQ事务消息&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;RocketMQ实现事务消息主要分为两个阶段：正常事务的发送及提交、事务信息的补偿流程。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;整体流程为：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;正常事务发送与提交阶段
1、生产者发送一个半消息给MQServer（半消息是指消费者暂时不能消费的消息）
2、服务端响应消息写入结果，半消息发送成功
3、开始执行本地事务
4、根据本地事务的执行状态执行Commit或者Rollback操作&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;事务信息的补偿流程
1、如果MQServer长时间没收到本地事务的执行状态会向生产者发起一个确认回查的操作请求
2、生产者收到确认回查请求后，检查本地事务的执行状态
3、根据检查后的结果执行Commit或者Rollback操作
补偿阶段主要是用于解决生产者在发送Commit或者Rollback操作时发生超时或失败的情况。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在生产者使用RocketMQ发送事务消息的时候我们也会借鉴第一种方案即自建一张事务日志表，然后在执行本地事务的时候同时生成一条事务日志记录，让本地事务与日志事务在同一个方法中，同时添加 &lt;code&gt;@Transactional&lt;/code&gt; 注解，保证两个操作事务是一个原子操作。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;「这样如果事务日志表中有这个本地事务的信息，那就代表本地事务执行成功，需要Commit，相反如果没有对应的事务日志，则表示没执行成功，需要Rollback。」&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;感兴趣的同学可以翻看这篇文章：&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwMTk4NjM1MA==&amp;amp;mid=2247484439&amp;amp;idx=1&amp;amp;sn=fb233c2ab321afee25c207799b9e4477&amp;amp;chksm=9ad01e56ada797400a12c959bacb080c7ad8ed11ed7454b8c64b531b86394811938896185295&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;RocketMQ进阶-事务消息&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;RocketMQ进阶-事务消息&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>66305435af4e4e3c7f572520a9b6bcae</guid>
<title>MySQL 数据库优化二三事</title>
<link>https://toutiao.io/k/cixogzw</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;24505&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;24505&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;24505&quot;&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;24505&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;24505&quot;&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;24505&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;VOL 172&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-width=&quot;4%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-width=&quot;92%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;img data-cropselx1=&quot;0&quot; data-cropselx2=&quot;502&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;282&quot; data-ratio=&quot;0.5407407407407407&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/9RdLdzUL98iac6DWDvy0d2hL6QicQWZIR9wurCb6hicjrEWtnXp4OSibcrhdEReHl8nib7Ax3kJoNkSDMD2QJ3thyRA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;540&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;22187&quot;&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;22187&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section data-width=&quot;20%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;05&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2020-10&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-width=&quot;78%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;今天距2021年56天&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;这是ITester软件测试小栈第172次推文&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.45454545454545453&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/9RdLdzUL98hSxnicLQUHJlRh6jE5bJOOOfF2MZ6OU1HNsqrm0zWu9Jl9NoWyOj0hCpe9nsnx1AeWTogFBMc1DMg/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;22&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;mpvoice class=&quot;js_editor_audio audio_iframe js_uneditable custom_select_card&quot; src=&quot;/cgi-bin/readtemplate?t=tmpl/audio_tmpl&amp;amp;name=Masque_Jupiter%20-%20%E8%8F%8A%E6%AC%A1%E9%83%8E%E7%9A%84%E5%A4%8F%E5%A4%A9&amp;amp;play_length=02:15&quot; isaac2=&quot;1&quot; low_size=&quot;264.1&quot; source_size=&quot;264.1&quot; high_size=&quot;1055.08&quot; name=&quot;Masque_Jupiter - 菊次郎的夏天&quot; play_length=&quot;135000&quot; voice_encode_fileid=&quot;MzI5MTg1NjA4N18yMjQ3NTEyMTg5&quot; data-topic_id=&quot;&quot; data-topic_name=&quot;&quot; data-pluginname=&quot;insertaudio&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;点击上方蓝字“&lt;/span&gt;&lt;strong&gt;ITester软件测试小栈&lt;/strong&gt;&lt;span&gt;“关注我，每周一&lt;/span&gt;&lt;span&gt;、&lt;/span&gt;&lt;span&gt;三&lt;/span&gt;&lt;span&gt;、&lt;/span&gt;&lt;span&gt;五早上 &lt;/span&gt;&lt;strong&gt;08:3&lt;/strong&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;span&gt;准时推送，每月不定期&lt;strong&gt;赠送技术书籍&lt;/strong&gt;。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;微信公众号后台回复“&lt;/span&gt;&lt;strong&gt;资源&lt;/strong&gt;&lt;span&gt;”&lt;/span&gt;&lt;span&gt;、&lt;/span&gt;&lt;span&gt;“&lt;/span&gt;&lt;strong&gt;测试工具包&lt;/strong&gt;&lt;span&gt;”领取测试资源，&lt;span&gt;回复“&lt;/span&gt;&lt;strong&gt;微信群&lt;/strong&gt;&lt;span&gt;”一起进群打怪。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;本文4317字，阅读约需11分钟&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-width=&quot;4%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;平时在开发新项目时，有时因为工期紧张，经常会以实现功能为目标，不太注意效率问题，特别是在SQL语句上。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;常见的数据库优化方法有哪些？简单来说&lt;/span&gt;&lt;span&gt;是加索引，重建结构，杀进程，杀DBA……如果在一个没有DBA的公司，上线一时爽，事后火葬场，卑微测试一不小心背黑锅。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;何以解忧？唯有学习和实践。测试人员也会和数据打交道，今天总结数据库的优化知识。主要介绍可以从哪些方面优化数据库，提高数据库的执行效率。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;96447&quot;&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;一&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;系统现存问题&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;/&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;85640&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;问题背景&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;“系统慢不是问题，只要不崩溃就行”，这可能这是大多数懒癌技术派的想法。但是，如果系统经常抛出一些故障（硬件问题除外，不过如果磁盘经常坏，可能也和性能有关）。很多时候就是因为：没有使用绑定变量、错误的设置了一些优化器参数、并发过大、缺少索引（最普遍）、统计信息不准确、SQL写法不佳、RAC系统按照单节点设计等等一系列性能问题，导致系统压力过大而出现的状况。但是懒癌晚期们往往宁愿出故障时救火，却不愿意花时间去优化数据库。试想如果系统经过全面优化，负载很小，还会经常出各种问题吗？100%的数据库都是可以优化的，CPU降低，资源争用小，系统就会更加稳定；IO压力降低，SQL执行速度加快，磁盘寿命也会更长。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;85640&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;问题分析&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;设计上的问题&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：单列索引太多，总索引量太多，容易出现索引合并，优化器无法选中最优索引，间接导致大家使用&lt;/span&gt;&lt;code&gt;&lt;span&gt;force index&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ，又导致了优化器无法自动智能选则执行计划。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;使用上的问题&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：万能查询，多个接口并用，查询所有&lt;/span&gt;&lt;span&gt;列，force index 滥用 ，&lt;/span&gt;&lt;span&gt;单表数据量过大，SQL写法不规范。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;96447&quot;&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;二&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;数据库查询慢的探索&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;85640&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;问题现象&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;SQL语句执行得很慢的原因有哪些？这个问题可以涉及到 MySQL 的很多核心知识，就像要考查计算机网络总问“输入URL回车之后，究竟发生了什么”一样。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;SQL 语句执行的很慢，那是每次执行都很慢呢？还是大多数情况下是正常的，偶尔出现很慢呢？我们得分以下&lt;/span&gt;&lt;code&gt;&lt;span&gt;2&lt;/span&gt;&lt;/code&gt;&lt;span&gt;种情况来讨论：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;针对这两种情况，我们来分析下可能是哪些原因导致的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;原因分析&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;总体来说，SQL 语句执行的很慢可能是由于以下原因：&lt;/span&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;扫描行数太多；&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;返回行数太多；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;额外的操作（排序，分组，计算）；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;根据SQL 执行慢的程度，我们再分2种情况具体讨论：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这条 SQL 语句一直执行的很慢，有如下原因：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;大多数情况下很正常，偶尔很慢，有如下原因：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;问题定位&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;我们可以通过开启慢查询日志的方式去定位有问题的SQL ，找到问题的根源。&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;（1）查看MySQL是否开启慢查询日志：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;show variables like &lt;span&gt;&#x27;slow_query_log&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（2）设置没有索引的记录到慢查询日志：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;set &lt;span&gt;global&lt;/span&gt; log_queries_not_using_indexes=on;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（3）查看超过多长时间的SQL进行记录到慢查询日志：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;show variables like &lt;span&gt;&#x27;long_query_time&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（4）开启慢查询日志：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;set &lt;span&gt;global&lt;/span&gt; slow_query_log=on;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（5）设置超时时间：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;set &lt;span&gt;global&lt;/span&gt; long_query_time=&lt;span&gt;5&lt;/span&gt;;&lt;br/&gt;--超过&lt;span&gt;5&lt;/span&gt;s的语句才记录日志&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（6）查看慢查询日志的位置 ：&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;show variables like &lt;span&gt;&#x27;slow%&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;96447&quot;&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;三&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;数据库优化原则&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;表结构优化&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1. 新建表必须设置主键，推荐自增id，无符号bigint类型。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2. 所有字段必须要有注释，表必须要有注释。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3. 所有字段尽量设置为not null 限制，默认值有则给，无则不写，禁止使用默认 NULL，字符类型推荐默认，以最小满足使用为宜。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4. 表必须包含逻辑删除，创建人，创建时间，修改时间，备注 ；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;5.顺序固定一致，且一直保持在表的最后。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;例如，如下复制：&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;is_delete TINYINT(&lt;span&gt;1&lt;/span&gt;) UNSIGNED NOT NULL DEFAULT &lt;span&gt;0&lt;/span&gt; COMMENT &lt;span&gt;&#x27;是否删除，默认0：有效，1：失效。&#x27;&lt;/span&gt;,&lt;br/&gt;createdby MEDIUMINT(&lt;span&gt;8&lt;/span&gt;) UNSIGNED NOT NULL DEFAULT &lt;span&gt;0&lt;/span&gt; COMMENT &lt;span&gt;&#x27;创建人&#x27;&lt;/span&gt;,&lt;br/&gt;created INT(&lt;span&gt;10&lt;/span&gt;) UNSIGNED NOT NULL DEFAULT &lt;span&gt;0&lt;/span&gt; COMMENT &lt;span&gt;&#x27;创建时间&#x27;&lt;/span&gt;,&lt;br/&gt;changed_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &lt;span&gt;&#x27;更新时间&#x27;&lt;/span&gt;,&lt;br/&gt;remarks VARCHAR(&lt;span&gt;100&lt;/span&gt;) NOT NULL DEFAULT &lt;span&gt;&#x27;&#x27;&lt;/span&gt; COMMENT &lt;span&gt;&#x27;备注，保留字段&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;85640&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;索引优化&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;1.最左前缀匹配原则，where条件的顺序应该尽量与索引列的顺序保持一致。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2.尽量选择区分度高的列作为索引。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3. 新建索引时，常用的范围查询，最好放在索引的最后面。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4.查看索引离散度 show index from his.tb_api_log。&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;5.索引尽量不在字符类型上使用，不频繁更新的字段上。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;6.索引以 idx_字段1_字段2_字段n 命名 字段可简写，顺序不能乱。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;85640&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;数据库配置优化&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;h2&gt; &lt;/h2&gt;&lt;h2&gt;&lt;code&gt;&lt;span&gt;连接数&lt;/span&gt;&lt;/code&gt;&lt;span&gt;(connection)配置：当发现MySQL有能力处理更多的并发的时候， 建议调大max_connections这个值，相应给服务器带来更高的负载(CPU/IO/内存)。&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;&lt;span&gt;查询缓存&lt;/span&gt;&lt;/code&gt;&lt;span&gt;(query_cache)配置：MySQL的查询缓存用于缓存select查询结果，并在下次接收到同样的查询请求时，不再执行实际查询处理而直接 返回结果，有这样的查询缓存能提高查询的速度，使查询性能得到优化。&lt;/span&gt;&lt;/p&gt;&lt;h2/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;&lt;span&gt;临时表缓存&lt;/span&gt;&lt;/code&gt;&lt;span&gt;(tmp_table_size)配置：&lt;span&gt;MySQL&lt;/span&gt;进行复杂查询或者 做高级GROUP BY操作的时候，系统为了优化查询，生成一些临时表。一般情况下，MySQL会先创建内存临时表，但内存临时表超过配置指定的值后，MySQL会将内存临时表导出到磁盘临时表。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;&lt;span&gt;索引缓冲区&lt;/span&gt;&lt;/code&gt;&lt;span&gt;（k&lt;/span&gt;&lt;span&gt;ey_buffer_size）配置：是对MyISAM表性能影响最大的一个参数，key_buffer_size指定索引缓冲区的大小，它决定索引处理的速度，尤其是索引读的速度。通过检查状态值Key_read_requests和Key_reads，可以知道key_buffer_size设置是否合理。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;85640&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;硬件资源优化&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;h2&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt; &lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;硬件层面的优化是最后的手段，主要需考虑CPU、存储、网络等几个方面。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;code&gt;&lt;span&gt;CPU&lt;/span&gt;&lt;/code&gt;&lt;span&gt;：CPU并不是越多越好，增加CPU数量并不能提高性能。&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;code&gt;&lt;span&gt;存储&lt;/span&gt;&lt;/code&gt;&lt;span&gt;：机械磁盘 or SSD（当然是SSD更快），单个大磁盘 or 多个小磁盘组合使用（单个1T的磁盘应该没有2个500G磁盘的组合快，因为磁盘的转速都是固定的，两个磁盘相当于可以并行的读取）。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;&lt;span&gt;网络&lt;/span&gt;&lt;/code&gt;&lt;span&gt;：一般不是问题，但是在分布式的集群环境中，各个数据库节点之间的网络环境经常会称为系统的瓶颈。另外，如果服务端和数据库分布在不同的城市，一条简单SQL传输的时间可能就要几十毫秒。&lt;/span&gt;&lt;/p&gt;&lt;br/&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;96447&quot;&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;四&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;数据库优化总结&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;其&lt;/span&gt;&lt;span&gt;实&lt;/span&gt;在需求分析阶段就要预估可能的业务量和数据量，这样才能在建表时有针对的进行设计。否则&lt;/span&gt;抛开需求谈优化都是耍流氓，就像这个世界上没有包治百病的神药一样，也不会有解决一切问题的完美技术。所以数据库的设计必须和需求有关系，因为表结构也得符合需求，一套数据库的设计也是和需求有密切关系。一个需求里面会体现对某个表是侧重读取还是侧重写入，数据设计应尽可能遵循如下原则：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;SQL语句尽可能简单，大的SQL想办法拆成小的SQL语句;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;事务要简单，整个事务的时间长度不要太长，不同事务更新表的顺序需要一致;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;注意非按照索引的update造成大面积锁（应当先查，再按主键更新）;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;避免使用触发器、函数、存储过程、事件;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;降低业务耦合度（避免万能查询，比较严重）;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;慎用范围查询;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;避免在数据库中进数学运算(MySQL不擅长数学运算和逻辑判断);&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;不要用select *，查询哪几个字段就select 这几个字段;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;禁止不同类型字段做比较，避免隐式转换;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;like的参数以通配符开头时;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;like 尽量使用全文索引(分区表不支持全文索引);&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;in里面数字的个数建议控制在1000以内;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;limit分页注意效率。limit越大，效率越低,可改成延迟关联,这是大数据量单表查询中最有效最常用的优化方法;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;避免使大表的join;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;对大数据的更新要分批次更新，不要一次更新太多数据（否则可能造成阻塞，锁争抢）;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;减少与数据库的交互次数（连接池）;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;注意使用性能分析工具;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;注意程序捕获异常,打印日志;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;请格式化SQL语句;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;多使用explain 查看执行计划;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;95320&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;95320&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;以上&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;That‘s all&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;更多系列文章&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;95320&quot;&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;95320&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;敬请期待&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;94065&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;ITester软件测试小栈&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;span&gt;往期内容宠幸&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-width=&quot;90%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;94065&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;85640&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247485824&amp;amp;idx=2&amp;amp;sn=772b73ee701e06751618f81179ee5408&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-linktype=&quot;2&quot;&gt;1.&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247486218&amp;amp;idx=1&amp;amp;sn=fdd24d4c8de2a9dea254aa1672632203&amp;amp;chksm=ec0b00b2db7c89a420f8dda34a3bfba50a2cac877af154a9e07772bbc7b4de4cae0b8ff2fc20&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Python接口自动化-接口基础(一)&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python接口自动化-接口基础(一)&lt;/a&gt;&lt;/section&gt;&lt;hr/&gt;&lt;hr/&gt;&lt;hr/&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247486168&amp;amp;idx=1&amp;amp;sn=81c161e3d7b8f2fc17c525b2cb6061b4&amp;amp;chksm=ec0b0160db7c88766fc55b9a352d80a3256c6819e47aa92f10bf92e3fd167193e7c713c166fb&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;4.&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;4.&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247487212&amp;amp;idx=1&amp;amp;sn=ffdea8eccf22b045f2eaf4a41f5e2244&amp;amp;chksm=ec0b0554db7c8c42f85c82059d494322ff1ff64790a6dee31418e0d35d00ee07e63164c5d669&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python接口自动化-requests模块之post请求&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;hr/&gt;&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247485462&amp;amp;idx=1&amp;amp;sn=460376ec8687e8c5adadcc9811b9ab32&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-linktype=&quot;2&quot;&gt;5.&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247487226&amp;amp;idx=1&amp;amp;sn=b8a0e24b52cd75686bfd3595f9fc6b32&amp;amp;chksm=ec0b0542db7c8c54e86600926569320917946bd7384c8ecf5cd2c564c9aacf370b8bd5d316e6&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python接口自动化之cookie、session应用&lt;/a&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247487234&amp;amp;idx=1&amp;amp;sn=eb228f9b0ab322eba0d5bbcd6b4e7735&amp;amp;chksm=ec0b04badb7c8dac05be7dab5eea46aee72bb359ec7f8d969dba612a51020b69f6101d0179c6&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;6.&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;6.&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247487234&amp;amp;idx=1&amp;amp;sn=eb228f9b0ab322eba0d5bbcd6b4e7735&amp;amp;chksm=ec0b04badb7c8dac05be7dab5eea46aee72bb359ec7f8d969dba612a51020b69f6101d0179c6&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python接口自动化之Token详解及应用&lt;/a&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247487122&amp;amp;idx=1&amp;amp;sn=2877f0c70b6f78b2816f63cfd21f1357&amp;amp;chksm=ec0b052adb7c8c3c276e2b73fc8356058a4633ce37c4325e088f31f17f8e9bb53d370969225c&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;7.&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;7.&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247487279&amp;amp;idx=1&amp;amp;sn=e9054ed56324196dccdb0fc25e698b02&amp;amp;chksm=ec0b0497db7c8d81f8cccdb35023c86e3f289abb179aebed14ee0f08b2983ecc79a13491cad6&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python接口自动化之requests请求封装&lt;/a&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247486792&amp;amp;idx=1&amp;amp;sn=8bae41f1dadb6b746e639a7b092c6323&amp;amp;chksm=ec0b06f0db7c8fe698bedb7d282a5cd3f3eff371d087d08701eac5131bf61eae3ed0a4ff4711&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;8.&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;8.&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247487600&amp;amp;idx=1&amp;amp;sn=9ea1323d21361528c134a033643142b4&amp;amp;chksm=ec0b1bc8db7c92de02d82f6956ddacfa648dca2e19b8b5e37f2c3244dd59b26507ffd43f03ee&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python接口自动化之pymysql数据库操作&lt;/a&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247486168&amp;amp;idx=1&amp;amp;sn=81c161e3d7b8f2fc17c525b2cb6061b4&amp;amp;chksm=ec0b0160db7c88766fc55b9a352d80a3256c6819e47aa92f10bf92e3fd167193e7c713c166fb&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;9.&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;9.&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247487876&amp;amp;idx=1&amp;amp;sn=722556ef7755fef2ccd392c898b94574&amp;amp;chksm=ec0b1a3cdb7c932afd5183515c3ce80c71060fa7d300f0df1987d93151143a49f993ff948650&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python接口自动化之logging日志&lt;/a&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247486154&amp;amp;idx=1&amp;amp;sn=f5b1f3a55ed0447acb1d99f47f34a3e5&amp;amp;chksm=ec0b0172db7c8864f14b694c667772450c561cc8c1da675447ec437267b23fbcf18ee9f3f2f0&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;10.&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;10.&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI5MTg1NjA4Nw==&amp;amp;mid=2247488319&amp;amp;idx=1&amp;amp;sn=a3f8b29dd07c44022c7c4d2de77de766&amp;amp;chksm=ec0b1887db7c91917262480a39278b5fe941892b97881e6c2f138e91098afdf6de2a13405e97&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Python接口自动化之logging封装及实战&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;94065&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.011111111111111112&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/9RdLdzUL98hyjzkXlM9gL0Hxv8vFozHr6CKBgibXPj3kWCQVqcl2aCHD1Iye9rrvbycfFUloayiah8e1iaxT3ypZQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;想获取更多最新干货内容&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;快来&lt;/span&gt;&lt;span&gt;星标 置顶 关注&lt;/span&gt;&lt;span&gt;我&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;每周一&lt;span&gt;、三&lt;span&gt;、五 08:30见&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;19983&quot;&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;19983&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;img data-ratio=&quot;0.5555555555555556&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/9RdLdzUL98hSxnicLQUHJlRh6jE5bJOOOK5gpQSEsjgibnDKGrDic6AL1yUmyAmkn638fQvDGDroQkEHnib6iaOSAEg/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;900&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;img data-ratio=&quot;0.5511111111111111&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/9RdLdzUL98hSxnicLQUHJlRh6jE5bJOOOUVL2xricz5x29b15fF6L4FQqnxRKLpwODQtsTrJXRia0yLahcTRhddog/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;900&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&amp;lt;&amp;lt;  滑动查看下一张图片  &amp;gt;&amp;gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;24533&quot;&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;24533&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;16378&quot;&gt;&lt;section data-support=&quot;96编辑器&quot; data-style-id=&quot;16378&quot;&gt;&lt;section&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/Ljib4So7yuWhwgrBFRY6icW3lbqaznibicDYdoPOzSO7ht6Ly3XCibSKK37pQw4zNo3UOh1r2x7vJr9usCduOo0yYqw/640?wx_fmt=gif&quot; data-width=&quot;100%&quot; data-type=&quot;gif&quot; data-ratio=&quot;0.391653290529695&quot; data-w=&quot;623&quot;/&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt; 后台&lt;img data-ratio=&quot;0.7297297297297297&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/9RdLdzUL98iaIcOvXVG4BF1HyAibicfibLyA25OQPWq6oSs3WYtAsuXfIRdlkuqAMAiaOTcl928WVf2f0hUMX4RwhyQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;37&quot; data-width=&quot;100%&quot;/&gt; 回复&quot;&lt;/span&gt;&lt;span&gt;资源&quot;&lt;/span&gt;&lt;span&gt;取干货&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;回复&quot;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;微信群&quot;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;一起打怪升级&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;个人微信：Cc2015123&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;添加请注明来意 :)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;95172&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;span&gt;真爱三连，上线无Bug&lt;/span&gt;&lt;span&gt;~&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;img data-ratio=&quot;1.0377358490566038&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/9RdLdzUL98gBhmY7VgrvQwLib7Ibyd13DA6yTZyiaZHld4ic7zWcIPjANH64iagYcYY2MJiaXfaeWM4ZutXc6tKURwg/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;53&quot; data-width=&quot;100%&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>dcd1ae7713bb364765d957e5544f3351</guid>
<title>[推荐] MySQL 的这几个坑你踩过没？真是防不胜防</title>
<link>https://toutiao.io/k/1y6vsef</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;一、前言&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;对于从事互联网开发的同学来说，mysql可谓是再熟悉不过的了。无论是DBA、开发或测试，基本上天天要跟它打交道，很多同学可能已经身经百战了。但是，笔者遇到过的这些坑不知道你们都经历过没？&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;二、有符号和无符号&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;以前我们公司在项目开发之初制定开发规范时，对mysql的int类型字段定义成有符号，还是无符号问题专门讨论过。&lt;/p&gt;&lt;p&gt;&lt;span&gt;观点一：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;对于能够确定里面存的值一定是正数的字段，定义成UNSIGNED无符号的，可以节省一半的存储空间。创建无符号字段的语句如下：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_unsigned(a &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;UNSIGNED&lt;/span&gt;, b &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;UNSIGNED&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;观点二：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;建议都定义成有符号的，使用起来比较简单，mysql默认int类型就是有符号的，创建有符号字段的语句如下：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_signed(a &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_signed &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;-1&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;执行结果：&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;img data-ratio=&quot;0.10714285714285714&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7RicK4n6E1wEKVDwqOqvuzdhGmNeaecNYVwPCMnicJNNWia5FtGtRCZmtrQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1064&quot;/&gt;&lt;/p&gt;&lt;p&gt;在字段a中插入-1，我们看到是可以操作成功的。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这两个方案，经过我们激烈讨论之后，选择了使用有符号定义int类型字段。为什么呢？&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_unsigned(a &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;UNSIGNED&lt;/span&gt;, b &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;UNSIGNED&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_unsigned &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;先创建test_unsigned表，里面包含两个无符号字段a和b，再插入一条数据a=1，b=2&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt; b - a &lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; test_unsigned;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;没有问题，返回1&lt;/p&gt;&lt;p&gt;但是如果sql改成这样：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt; a - b &lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; test_unsigned;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;执行结果：&lt;img data-ratio=&quot;0.0959079283887468&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7R0xmy17Kn90u13KyNgKBhARHqYlDHUE4eUhuY4R8Or73jcP3b63Amfg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1564&quot;/&gt;&lt;/p&gt;&lt;p&gt;报错了。。。&lt;/p&gt;&lt;p&gt;所以，在使用无符号字段时，千万要注意字段相减出现负数的坑，建议还是使用有符号字段，避免不必要的问题。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;三、自动增长&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;建过表的同学都知道，对于表的主键可以定义成自动增长的，这样一来，就可以交给数据库自己生成主键值，而无需在代码中指定，而且生成的值是递增的。一般情况下，创建表的语句如下：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_auto_increment (a &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; auto_increment primary &lt;span class=&quot;code-snippet__keyword&quot;&gt;key&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;但如果改成这样的会怎样？&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_auto_increment (a &lt;span class=&quot;code-snippet__built_in&quot;&gt;int&lt;/span&gt; auto_increment);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;执行结果：&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;img data-ratio=&quot;0.07884856070087609&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7Ria323Qbqf5mAssfpicwCvSeh2b81hZaY0nRp63Vic8V5oOrKJcR3KgbVw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1598&quot;/&gt;&lt;/p&gt;&lt;p&gt;报错了。。。&lt;/p&gt;&lt;p&gt;截图中没有全部显示出来，完整的提示语是这样的：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cpp&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;1075&lt;/span&gt; - Incorrect table definition; there can be only one &lt;span class=&quot;code-snippet__keyword&quot;&gt;auto&lt;/span&gt; column &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; it must be defined as a key, Time: &lt;span class=&quot;code-snippet__number&quot;&gt;0.006000&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;意思是自动增长字段，必须被定义成key，所以我们需要加上primary key。&lt;/p&gt;&lt;p&gt;此外，还有一个有趣的实验：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_auto_increment(a) &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt; (&lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;),(&lt;span class=&quot;code-snippet__number&quot;&gt;50&lt;/span&gt;),(&lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;),(&lt;span class=&quot;code-snippet__number&quot;&gt;8&lt;/span&gt;),(&lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;大家猜猜执行结果会是什么样的？&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;2.969924812030075&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7R195Ta89hib0zaop7XvOunyl91iaUu5N6w6kdIpDzR4fYOmX7J7mOobug/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;266&quot;/&gt;&lt;/p&gt;&lt;p&gt;第一个null插入1，然后按真实的数字大小排序后插入，后面两个null，是在最大的数字上面加1。&lt;/p&gt;&lt;p&gt;再看看这条sql主键中插入负数，能执行成功吗？&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_auto_increment &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;-3&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;答案是可以，主键可以插入负数。&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.09941520467836257&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7RiaFtzia2MSgmCGojkWELuP8oibUUFcEI8bNTpawjhibnHZpDCajKTz2Wuw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1026&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;还有这条sql呢，主键中插入0？&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_auto_increment &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;执行结果：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;3.3333333333333335&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7RjfoT5L6IDApKz6gTQqA0IMXDkpbn9icLdT3eLSKxzCgma9yVvkv4pUg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;162&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;也可以执行成功，但是没有插入数据&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;四、字段长度&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;我们在创建表的时候，给字段定义完类型之后，紧接着需要指定字段的长度，比如：varchar(20)，biginit(20)等。那么问题来了，varchar代表的是字节长度，还是字符长度呢？&lt;span/&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_varchar(a &lt;span class=&quot;code-snippet__built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;));&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_varchar &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;苏三说技术&#x27;&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;length&lt;/span&gt;(a),&lt;span class=&quot;code-snippet__keyword&quot;&gt;CHARACTER_LENGTH&lt;/span&gt;(a) &lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; test_varchar;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;执行后的结果：&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.26&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDHJ3E7yXI4qszEUVcmnQk7RtwvcGLCcNYl4HyIFshmnlwlDHic5dQhdj1UktEBflMzic3k2IdPfmefA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1000&quot;/&gt;&lt;/p&gt;&lt;p&gt;我们看到中文的5个字length函数统计后长度为15，代表占用了15个字节，而使用charcter_length函数统计长度是5，代表有5个字符。所以varchar代表的是字符长度，因为有些复杂的字符或者中文，一个字节表示不了，utf8编码格式的一个中文汉字占用3个字节。不同的数据库编码格式，占用不同的字节数对照表如下：&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5337078651685393&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7REicOicnENmpz3W9QDkbWlFZbRuWg3FjvcGlVPtCRG8l0OcjRqSUYdMow/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1424&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;mysql除了varchar和char是代表字符长度之外，其余的类型都是代表字节长度。&lt;/p&gt;&lt;p&gt;int(n) 这个n表示什么意思呢？从一个列子出发：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_bigint (a &lt;span class=&quot;code-snippet__built_in&quot;&gt;bigint&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;4&lt;/span&gt;) ZEROFILL);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_bigint &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_bigint &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;123456&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; test_bigint;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;ZEROFILL表示长度不够填充0&lt;/p&gt;&lt;p&gt;执行结果：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.6650717703349283&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7RSGdj8FbO9bZDDyFib00vnjlbJTSD91XSLmYJDu9mKkDx7iaH43mYtWSw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;418&quot;/&gt;&lt;/p&gt;&lt;p&gt;mysql常用数字类型字段占用字节数对照表：&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5546218487394958&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7RjKfscVK8pm5Osp4g37zmBlicwkPQribhDgNG6cAtiaRsyc8hViacpLmAUQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1428&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;从表中可以看出big&lt;/span&gt;&lt;span&gt;int实际长度是8个字节，但是我们定义的a显示4个字节，所以在不满4个字节时前面填充0。满了4个字节时，按照实际的长度显示，比如：123456。但是，需要注意的是，有些mysql客户端即使满了&lt;span&gt;4个字节&lt;/span&gt;，也可能只显示4个字节的内容，比如显示：1234。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;所以&lt;span class=&quot;code-snippet__built_in&quot;&gt;bigint&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;4&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;，这里的4表示显示的长度为4个字节，实际长度还是8个字节。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;五、忽略大小写&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;我们知道在英文字母中有大小写问题，比如：a 和 A 是一样的吗？我们认为肯定是不一样的，但是数据库是如何处理的呢？&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_a(a &lt;span class=&quot;code-snippet__built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;));&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_a &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;a&#x27;&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;into&lt;/span&gt; test_a &lt;span class=&quot;code-snippet__keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;A&#x27;&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; test_a &lt;span class=&quot;code-snippet__keyword&quot;&gt;where&lt;/span&gt; a = &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;a&#x27;&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;执行结果是什么呢？&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;2.0285714285714285&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7R2GTMjJicuR67c9BubrVhf4f9MEPhgGs6EVDWbkqN9aJ245bcXbXkGFQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;140&quot;/&gt;&lt;/p&gt;&lt;p&gt;本以为只会返回a，但是实际上把A也返回了，这是为什么呢？&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.6597462514417531&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7R45sPZngXJxOsbSgSJntTfpaaw28PXS8HVsno9GWwia3gOEEncZDOFOw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1734&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;该表默认的Collation是utf8_general_ci，这种Collation会忽略大小写，所以才会出现查询小写字母a的值，意外把大写字母A的值也查询出来了。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;那么如果我们只想查询出小写a的值该怎么办？先看看mysql支持哪些Collation？&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;show&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;collation&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.9460043196544277&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7R78ovicZ9fGT9ibm5ff8lUS2eX5x71wmWO7yUk6NucviaNh24Nibl4U2Qtw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;926&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;从上图中我们可以找到utf8_bin，这个表示二进制格式的数据，我们设置成种类型的试试。&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.8309659090909091&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7RICruHzlMA1zWkTVCUC6eHEvSdU4ibFxZAibP0FMKfuamnCsO13xtmKqw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1408&quot;/&gt;&lt;/p&gt;&lt;p&gt;修改一下字段类型&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;TABLE&lt;/span&gt; test_a &lt;span class=&quot;code-snippet__keyword&quot;&gt;MODIFY&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;COLUMN&lt;/span&gt; a &lt;span class=&quot;code-snippet__built_in&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;) &lt;span class=&quot;code-snippet__built_in&quot;&gt;BINARY&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;CHARACTER&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;SET&lt;/span&gt; utf8 &lt;span class=&quot;code-snippet__keyword&quot;&gt;COLLATE&lt;/span&gt; utf8_bin &lt;span class=&quot;code-snippet__keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;NULL&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;再查看一下数据&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;select&lt;/span&gt; * &lt;span&gt;from&lt;/span&gt; test_a &lt;span&gt;where&lt;/span&gt; a = &lt;span&gt;&#x27;a&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;执行结果：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1.1066666666666667&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDHJ3E7yXI4qszEUVcmnQk7R7BB2R8Dtpno0332VWsLdKW9euSr9gfefiaR4y4dFcHcpzCLGAEdvvjA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;150&quot;/&gt;&lt;/p&gt;&lt;h1&gt;果然，结果对了。&lt;br/&gt;&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;六、特殊字符&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;笔者之前做项目的时候，提供过一个留言的功能，结果客户端用户输入了一个&lt;span&gt;emoji表情&lt;/span&gt;，直接导致接口报错了。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.38699690402476783&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDGRahDFph9VdumRibZHlQicwXq2U3yG799aF9fzq2ghDuhcPcSLEovJibb577X2JgMJxh7NSw9z9ic3qQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1292&quot;/&gt;&lt;/p&gt;&lt;p&gt;最后定位原因是由于当时数据库和表的字符编码都是用的utf8，mysql的utf8编码的一个字符最多3个字节，但是一个emoji表情为4个字节，所以utf8不支持存储emoji表情。&lt;/p&gt;&lt;p&gt;该如何解决这个问题呢？&lt;/p&gt;&lt;p&gt;将字符编码改成utf8mb4，utf8mb4最多能有4字节，不过，在mysql5.5.3或更高的版本才支持。&lt;/p&gt;&lt;p&gt;在mysql 的配置文件 my.cnf 或 my.ini 配置文件中修改如下：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;ini&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__section&quot;&gt;[client]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__attr&quot;&gt;default-character-set&lt;/span&gt; = utf8mb4&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;[mysqld]&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__attr&quot;&gt;character-set-server&lt;/span&gt; = utf8mb4&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__attr&quot;&gt;collation-server&lt;/span&gt;     = utf8mb4_general_ci&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;重启MySQL，然后使用以下命令查看编码，应该全部为utf8mb4，这是修改整个数据库的编码方式。&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SHOW&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;VARIABLES&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;WHERE&lt;/span&gt; Variable_name &lt;span class=&quot;code-snippet__keyword&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;character_set_%&#x27;&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;OR&lt;/span&gt; Variable_name &lt;span class=&quot;code-snippet__keyword&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;collation%&#x27;&lt;/span&gt;;ji&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;结果为：&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.37280701754385964&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDGRahDFph9VdumRibZHlQicwXVwibXVUqsFllwBf1hwHLibRP7Dl5fDscxm0UicV23Uuta6JAH2WLibhA5Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;912&quot;/&gt;&lt;/p&gt;&lt;p&gt;也可以单独修改某张表的编码方式：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;table&lt;/span&gt; test_a &lt;span class=&quot;code-snippet__keyword&quot;&gt;convert&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;code-snippet__built_in&quot;&gt;character&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;set&lt;/span&gt; utf8mb4 &lt;span class=&quot;code-snippet__keyword&quot;&gt;collate&lt;/span&gt; utf8mb4_bin;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;以及修改某个字段的编码方式：&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;TABLE&lt;/span&gt; test_a &lt;span class=&quot;code-snippet__keyword&quot;&gt;CHANGE&lt;/span&gt; a a &lt;span class=&quot;code-snippet__built_in&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;) &lt;span class=&quot;code-snippet__built_in&quot;&gt;CHARACTER&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;SET&lt;/span&gt; utf8mb4 &lt;span class=&quot;code-snippet__keyword&quot;&gt;COLLATE&lt;/span&gt; utf8mb4_bin;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;此外，建议同学们在创建数据库和表的时候字符编码都定义成utf8mb4，避免一些不必要的问题。&lt;/p&gt;&lt;p&gt;     如果这篇文档对您有所帮助的话，麻烦关注一下我的公众账号：苏三说技术，或者帮忙点赞或转发，坚持原创不易，您的支持是我坚持最大的动力。后面我会分享更多更实用的干货，谢谢大家的支持。&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uL371281oDGsibXoHlicSSykQx2g6EIOcDYXZibFYFsH55jtWxEMAicoF7yj1uDM3nftc7A0JWjhScKgjs7iarAiaBxQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>6f8d185fd5a0627344cdc836c03f3721</guid>
<title>[推荐] 爱了！一个现代化的 Git CLI 客户端，一堆命令不用记了</title>
<link>https://toutiao.io/k/s3pgs9r</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;p&gt;&lt;span&gt;&lt;span&gt;关注公众号 “&lt;/span&gt;&lt;span&gt;&lt;span&gt;转角遇到GitHub&lt;/span&gt;&lt;/span&gt;&lt;span&gt;” ，每天推荐给你优秀开源项目&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大家好，我是欧盆索思（opensource），每天为你带来优秀的开源项目！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;先看一张动图：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.290625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/lkYNiaZsfpqbfTtJ24frNJpobbiczdSTj9oD67Zl7o7Jk1yKia0KoosN5fe77camiatzBGX10WR5lR4IMErePVoWtQ/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;640&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;今天推荐的这个工具是：bit，它是构建在 git 之上的实验性现代化 git CLI，可提供令人满意的默认值和其他优点。&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;命令和 flag 建议，以帮助你浏览 git 为您提供的众多选项；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;bit add、bit checkout 能自动完成分支名和文件名；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;自动获取（fetch）和分支快速转发（fast-forwarding），减少合并冲突的可能性；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;建议与 git 别名一起使用；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;一些新命令，如 bit sync 等，能极大地简化了工作流程；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;来自 git-extras 的命令，例如 bit release &amp;amp; bit info；&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;与 git 完全兼容，允许您在需要时回退到 git。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;项目地址：https://github.com/chriswalz/bit，Star 数：2.7k+。这是一个 Go 项目。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;安装&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1）最简单的安装方式&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;$ curl -sf https://gobinaries.com/chriswalz/bit | sh; curl -sf https://gobinaries.com/chriswalz/bit/bitcomplete | sh &amp;amp;&amp;amp; &lt;span&gt;echo&lt;/span&gt; y | COMP_INSTALL=1 bitcomplete&lt;br/&gt;$ bit&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;2）也可以直接从这里下载&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;https://github.com/chriswalz/bit/releases&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;3）如果安装了 Go，则可以从源码编译&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;确保使用了 go module。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;$ go get github.com/chriswalz/bit&lt;br/&gt;$ bit&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;注意，bit 依赖 git。所以你本地需要安装 git。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;目前支持如下平台：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;iTerm2 (macOS)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Terminal.app (macOS)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Command Prompt (Windows)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;WSL/Windows Subsystem for Linux (Windows)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;gnome-terminal (Ubuntu)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;bit 特有的命令&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1、bit save [commit message]&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;创建一个新的提交。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;2、bit sync&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;同步对 origin 分支的更改。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大部分时候，bit sync 相当于 &lt;code&gt;bit commit -m &quot;I can still use git commands&quot;&lt;/code&gt;, &lt;code&gt;bit pull -r origin master&lt;/code&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;bit 常见工作流&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过例子演示 bit 常见工作流。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;1、切换分支&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;$ bit&lt;br/&gt;&amp;gt; bit switch example-branch&lt;br/&gt;? Branch does not exist. Do you want to create it? Yes&lt;br/&gt;Switched to a new branch &lt;span&gt;&#x27;example-branch&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;2、做一些改动&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;$ bit add *&lt;br/&gt;$ bit save &lt;span&gt;&quot;add important feature&quot;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;3、做其他改动&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;$ bit save&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;4、push 改变到 origin&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;$ bit sync&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;5、一段时间后，可以再同步别人的修改&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;$ bit sync&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;一般都直接输入 bit，然后回车。接着输入会自动提示，如开始的动图。&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;文末&lt;strong&gt;「阅读原文」&lt;/strong&gt;可直达项目首页。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;今天的项目大家觉得怎么样吗？如果你喜欢，请在文章底部留言、点赞或关注转发，你的支持就是我持续更新的最大动力！&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;推荐阅读&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;转角遇到GitHub - 送给爱开源的你&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;258&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;258&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/lkYNiaZsfpqYm0bG0MRgJIZRoicricTQsNEEbzuja1veleica9PFicSiayqmibQZzSRZBNufMjJIq2tKXpb4VK0DjbibZQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;344&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Git · GitHub · GitLab · Gitee&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>